"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5795],{85795:(e,t,n)=>{n.r(t),n.d(t,{Observable:()=>l,ObservableNumber:()=>g,ObservableSet:()=>d,ObservableTree:()=>b});let s=new Map,r=0;function i(e){for(let[t,{execTime:n,callback:i}]of(r=e,s.entries()))n<r&&(s.delete(t),i())}if("requestAnimationFrame"in globalThis&&"function"==typeof globalThis.requestAnimationFrame){let e=t=>{globalThis.requestAnimationFrame(e),i(t/1e3)};globalThis.requestAnimationFrame(e)}else{let e=Date.now();globalThis.setInterval(()=>{i((Date.now()-e)/1e3)},1e3/60)}let a=0;class l{static get nextId(){return a}is(e){return this._value===e}_invokeListeners(){let e=this._listeners[Symbol.iterator]();for(;;){let{value:t,done:n}=e.next();if(n)break;t(this._value,this)}}_handleDelay(e,t){if((null==t?void 0:t.delay)!==void 0){let{delay:n,...i}=t;return!function(e,t,n){let i="number"==typeof t?t:t.endsWith("ms")?Number.parseFloat(t.slice(0,-2))/1e3:Number.parseFloat(t.slice(0,-1)),a=r+i;s.set(e,{execTime:a,callback:n})}(this,n,()=>{this.setValue(e,i)}),this._delayed=!0,!0}return this._delayed&&s.delete(this),this._delayed=!1,!1}setValue(e,t){return!this._handleDelay(e,t)&&((this._valueMapper&&(e=this._valueMapper(e,this)),e===this._value)?(this._hasChanged=!1,!1):(this._valueOld=this._value,this._value=e,this._hasChanged=!0,this._invokeListeners(),!0))}initializeSerialization(e,t){return this.valueStringifier=e,this.valueParser=t,this}valueToString(){return this.valueStringifier?this.valueStringifier(this._value):String(this._value)}setValueFromString(e,t){if(this.valueParser){let n=this.valueParser(e);return this.setValue(n,t)}let n=typeof this._value;switch(n){case"string":return this.setValue(e,t);case"number":return this.setValue(Number(e),t);case"boolean":let s=/^true|1$/.test(e);return this.setValue(s,t);case"bigint":return this.setValue(BigInt(e),t);default:return console.warn('Observable#setValueFromString: Unsupported type "'.concat(n,'"')),!1}}setValueMapper(e){return this._valueMapper=e,!!e&&this.setValue(e(this._value,this))}clearListeners(){return this._listeners.clear(),this}onChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,r]=2===t.length?t:[{},t[0]],{executeImmediately:i=!1,once:a=!1}=s;if(a){if(i)return r(this._value,this),{destroy:()=>{}};let e=this.onChange({...s,executeImmediately:!1,once:!1},(t,n)=>{e.destroy(),r(t,n)});return e}return this._listeners.add(r),i&&r(this._value,this),{destroy:()=>this._listeners.delete(r)}}onDerivativeChange(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];let r=e(this._value),[{executeImmediately:i=!1},a]=2===n.length?n:[{},n[0]];return i&&a(r,r,this._value,this),this.onChange(t=>{let n=r;(r=e(t))!==n&&a(r,n,t,this)})}onVerify(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,r,i]=3===t.length?t:[{},...t],a=r(this._value);return s.executeImmediately&&i(a,this._value,this),this.onChange(e=>{let t=r(e);t!==a&&i(a=t,e,this)})}get observableId(){return this._observableId}get value(){return this._value}set value(e){this.setValue(e)}get valueOld(){return this._valueOld}log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{value:s=e=>{var t;return null!=(t=null==e?void 0:e.toString())?t:String(e)},message:r=e=>"Obs#".concat(this._observableId," value has changed: ")}=1!==t.length?{}:"function"==typeof t[0]?{value:t[0]}:t[0];return this.onChange(()=>{console.log("".concat(r(this)," ").concat(s(this._value)))})}constructor(e,t){this._observableId=a++,this._valueMapper=null,this._listeners=new Set,this._hasChanged=!1,this._delayed=!1,this.valueStringifier=null,this.valueParser=null,this.get=()=>this._value,this.set=this.setValue.bind(this),this._value=e,this._valueOld=e;let{valueMapper:n=null,onChange:s,userData:r={}}=null!=t?t:{};this._valueMapper=n,this.userData=r,s&&this.onChange(s)}}var h=n(63126),u=n(53245);function o(e,t,n){return e<t?t:e>n?n:e}class g extends l{get lowerBound(){return this._lowerBound}set lowerBound(e){this.setBounds(e,this._upperBound)}get upperBound(){return this._upperBound}set upperBound(e){this.setBounds(this._lowerBound,e)}get min(){return this.lowerBound}set min(e){this.lowerBound=e}get max(){return this.upperBound}set max(e){this.upperBound=e}get delta(){return this._value-this._valueOld}setValue(e,t){if(e=o(e,this._lowerBound,this._upperBound),e=this._integer?Math.round(e):e,this._handleDelay(e,t))return!1;let n=super.setValue(e,t);return this._memorization&&this._memorization.setValue(this._value,!0),n}setBounds(e,t){let n=o(this._value,e,t);return this._lowerBound=e,this._upperBound=t,this._value!==n&&this.setValue(n)}setMinMax(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setBounds(...t)}initMemorization(e){let{derivativeCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof arguments[1]&&(console.warn("ObservableNumber.initMemorization(memorizationLength, derivativeCount) is deprecated. Use ObservableNumber.initMemorization(memorizationLength, { derivativeCount }) instead."),t=arguments[1]),this._memorization=new u.r(e,this._value,t),this}getMemorization(){return this._memorization}isAbove(e){return this._value>=e}isBelow(e){return this._value<e}passed(e,t){let{value:n,valueOld:s}=this,r=n>=t&&s<t,i=n<t&&s>=t;switch(e){case"through":return r||i;case"above":return r;case"below":return i}throw Error("Impossible! Typescript, where are you?")}getPassMode(e){let{value:t,valueOld:n}=this;return t>=e&&n<e?"above":t<e&&n>=e?"below":null}stepValue(e){return Math.round(this._value/e)*e}onStepChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,r,i]=function(e){if(3===e.length)return e;if(2===e.length)return[e[0],{},e[1]];throw Error("Invalid arguments: (".concat(e.join(", "),")"))}(t),a=NaN;return this.onChange(r,()=>{let e=this.stepValue(s);a!==e&&i(a=e,this)})}onPass(e,t,n){return this.onChange(()=>{this.passed(e,t)&&n(this.value,this)})}increment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setValue(this._value+e)}lerpTo(e,t){let{clamp:n=!0,epsilon:s=1e-9,modulo:r=-1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._value;if(r>=0){let a=(e=(e%r+r)%r)-i;Math.abs(a)>r/2&&(e=i+(a>0?a-r:a+r));let l=Math.abs(e-i)<s?e:i+(e-i)*(n?t<0?0:t>1?1:t:t);return this.setValue(l%r)}let a=Math.abs(e-i)<s?e:i+(e-i)*(n?t<0?0:t>1?1:t:t);return this.setValue(a)}lerp(e,t,n){let s=this._value;return(null==n?void 0:n.clamped)===!0&&(s=s<0?0:s>1?1:s),e+(t-e)*s}inverseLerp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerBound,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.upperBound,n=arguments.length>2?arguments[2]:void 0,s=(this._value-e)/(t-e);return(null==n?void 0:n.clamped)===!0&&(s=s<0?0:s>1?1:s),s}exponentialDecay(e,t,n){return this.setValue((0,h.calculateExponentialDecay)(this._value,e,t,n))}exponentialGrow(e,t,n){let s=(e=>{if("number"==typeof e)return 1-e;let[t,n]=e;return(1-t)**(1/n)})(t),r=e-(e-this._value)*s**n;return this.setValue(r)}constructor(e,t){var n,s,r;let i=-1/0,a=1/0;Array.isArray(t)?([i,a]=t,t={}):(i=null!=(n=null==t?void 0:t.lowerBound)?n:i,a=null!=(s=null==t?void 0:t.upperBound)?s:a),super(o(e,i,a),t),this._memorization=null,this._lowerBound=i,this._upperBound=a,this._integer=null!=(r=null==t?void 0:t.integer)&&r}}class d extends l{get _set(){return this._value}get _setOld(){return this._valueOld}get entering(){return new Set(this._entering)}get leaving(){return new Set(this._leaving)}get size(){return this._set.size}swap(){let{_set:e,_setOld:t}=this;this._value=t,this._valueOld=e}get value(){return new Set(this._value)}get valueOld(){return new Set(this._valueOld)}has(e){return this._value.has(e)}get shouldKeep(){return this._shouldKeep}setShouldKeep(e){return this._shouldKeep=e,this}purge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shouldKeep;if(!e)return!1;let t=new Set(this._value),n=!1;for(let s of t)e(s)||(t.delete(s),n=!0);return!!n&&this.setValue(t)}setValue(e,t){if(this._handleDelay(e,t))return!1;this.swap();let{_set:n,_setOld:s,_entering:r,_leaving:i,_shouldKeep:a}=this;for(let t of(r.clear(),i.clear(),n.clear(),e))a&&!1===a(t)||(s.has(t)||r.add(t),n.add(t));for(let e of s)n.has(e)||i.add(e);let l=r.size>0||i.size>0;return l&&this._invokeListeners(),l}add(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value,...t])}remove(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value].filter(e=>!t.includes(e)))}clear(){return this.setValue([])}intersection(e){let t=new Set;for(let n of e)this.has(n)&&t.add(n);return t}otherDifference(e){let t=new Set;for(let n of e)this.has(n)||t.add(n);return t}constructor(){super(new Set),this._entering=new Set,this._leaving=new Set,this._valueOld=new Set}}var v=n(28340),c=n(22115);class _{get totalChangeCount(){return this.aOnlyChanges.length+this.bOnlyChanges.length+this.bothChanges.length}get aChangeCount(){return this.aOnlyChanges.length+this.bothChanges.length}get bChangeCount(){return this.bOnlyChanges.length+this.bothChanges.length}get a(){return this.getAChangeObject()}get b(){return this.getBChangeObject()}*getAChanges(){for(let[e,t]of this.aOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,t]}getAChangeObject(){let e={};for(let[t,n]of this.getAChanges())(0,c.HD)(e,t,n,{createAscendants:!0});return e}*getBChanges(){for(let[e,t]of this.bOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,n]}getBChangeObject(){let e={};for(let[t,n]of this.getBChanges())(0,c.HD)(e,t,n,{createAscendants:!0});return e}info(){return["Total changes: ".concat(this.totalChangeCount),"  Both changes (".concat(this.bothChanges.length,")"),...this.bothChanges.map(e=>{let[t,n,s]=e;return"    ".concat(t.join(".")," = ").concat(n," â†’ ").concat(s)}),"","  A only changes (".concat(this.aOnlyChanges.length,")"),...this.aOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)}),"","  B only changes (".concat(this.bOnlyChanges.length,")"),...this.bOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)})].join("\n")}constructor(e,t){this.aOnlyChanges=[],this.bOnlyChanges=[],this.bothChanges=[],this.objectA=e,this.objectB=t}}function p(e,t){"string"==typeof e&&(e=e.split("."));let n={},s=n;for(let t of e.slice(0,-1))s[t]={},s=s[t];return s[e[e.length-1]]=t,n}class b extends l{setMutation(e,t){if(!e||"object"!=typeof e)throw Error("Mutation must be an object.");let{value:n}=this,s=Array.isArray(e)?p(e[0],e[1]):e,r=!1;if((0,v.gC)(s,{treatConstructedObjectAsValue:!1,onValue(e,t){let{value:s,exists:i}=(0,v.vz)(n,t);if(!i||e!==s)return r=!0,"break"}}),!r)return!1;let i=(0,v.Go)(n);return(0,v.Eg)(i,s),this.diff=function(e,t){let n=new _(e,t);return(0,c.gC)(e,{treatConstructedObjectAsValue:!1,onValue(e,s){let{value:r,exists:i}=(0,c.vz)(t,s);i&&e===r||(i?n.bothChanges.push([s,e,r]):n.aOnlyChanges.push([s,e]))}}),(0,c.gC)(t,{treatConstructedObjectAsValue:!1,onValue(t,s){let{value:r,exists:i}=(0,c.vz)(e,s);(!i||t!==r)&&(i||n.bOnlyChanges.push([s,t]))}}),n}(n,i),super.setValue(i,t)}enqueueMutation(e){var t;return null!=this._pendingMutations||(this._pendingMutations={}),(0,v.Eg)(this._pendingMutations,Array.isArray(e)?p(e[0],e[1]):e),this}flushMutations(e){if(!this._pendingMutations)return!1;let t=this.setMutation(this._pendingMutations,e);return this._pendingMutations=null,t}setValue(e,t){return this.setMutation(e,t)}onMutation(e,t){let n=Array.isArray(e)?e:e.split("."),s=n.length;return this.onChange((e,r)=>{let{valueOld:i}=r,a=!1,l=null;for(let[e]of this.diff.bothChanges)if((0,v.cD)(e,n,{maxLength:s})){a=!0,l=e.slice(0,s);break}a&&t((0,v.vz)(e,n).value,(0,v.vz)(i,n).value,{observable:this,path:l})})}constructor(...e){super(...e),this.diff=new _({},{}),this._pendingMutations=null,this.mutate=this.setMutation.bind(this)}}}}]);