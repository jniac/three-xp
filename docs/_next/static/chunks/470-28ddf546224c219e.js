"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{82470:function(e,t,s){s.d(t,{H:function(){return j},K:function(){return k}});var i,r,n,o,a=s(77504),l=s(53778),h=s(82983),c=s(82288),u=s(69925),d=s(21944),p=s(23203),f=s(3424),m=s(70767),w=s(1458);(i=n||(n={}))[i.Render=0]="Render",i[i.PostProcessing=1e3]="PostProcessing",i[i.GizmoRender=2e3]="GizmoRender",i[i.Outline=3e3]="Outline",i[i.Output=4e3]="Output",i[i.Antialiasing=5e3]="Antialiasing";class v{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let s=e[1],i=t[1];return s.type!==i.type?s.type-i.type:s.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,s]of this.passMap)s.type===e&&(yield[t,s])}addPass(e){let{type:t=n.Render,insertOrder:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===s){var i,r,o;s=(null!==(o=null===(r=[...this.getPassesByType(t)].at(-1))||void 0===r?void 0:null===(i=r[1])||void 0===i?void 0:i.insertOrder)&&void 0!==o?o:-1)+1}return this.passMap.set(e,{type:t,insertOrder:s}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,s){this.composer.setSize(e,t),this.composer.setPixelRatio(s),this.basicPasses.fxaa.uniforms.resolution.value.set(1/s/e,1/s/t)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let s of this.composer.passes)s instanceof f.C&&s.scene===t&&(s.scene=e)}render(e){this.composer.render(e)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:s}=this;for(let[i,r]of t.passes.entries()){let t=s.get(r);t?e.push("- ".concat(i,": ").concat(n[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(r.constructor.name)):e.push("- ".concat(i,": NO METADATA for ").concat(r.constructor.name))}return e.join("\n")}constructor(e,t,s,i){let r=new u.x(e),o=new Map,a=new f.C(t,i);a.clearAlpha=0,o.set(a,{type:n.Render,insertOrder:0}),r.addPass(a);let l=new f.C(s,i);o.set(l,{type:n.GizmoRender,insertOrder:0}),l.clear=!1,l.clearDepth=!1,r.addPass(l);let c=new d.f(new h.Vector2,t,i);o.set(c,{type:n.GizmoRender,insertOrder:0}),r.addPass(c);let v=new p.v;o.set(v,{type:n.Output,insertOrder:0}),r.addPass(v);let y=new m.T(w.C);o.set(y,{type:n.Antialiasing,insertOrder:0}),r.addPass(y),this.composer=r,this.basicPasses={mainRender:a,gizmoRender:l,outline:c,output:v,fxaa:y},this.passMap=o}}var y=s(43630),g=s(98047),P=s(86188),x=s(56637);(r=o||(o={}))[r.None=0]="None",r[r.LeftDown=1]="LeftDown",r[r.LeftDrag=2]="LeftDrag";class b{get ray(){return this.raycaster.ray}update(e,t,s){let{x:i,y:r}=t,n=(i-s.x)/s.width*2-1,o=-((r-s.y)/s.height*2)+1;this.camera=e,this.clientPosition.set(i,r),this.screenPosition.set(n,o),this.raycaster.setFromCamera(this.screenPosition,e)}constructor(){this.status={button:0},this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.clientPosition=new h.Vector2,this.screenPosition=new h.Vector2,this.raycaster=new h.Raycaster}}var C=s(88516),R=s(84553),z=s(83356);let E=["gltf","glb"],O=["png","jpg","jpeg","hdr","exr"];class A{async loadGltf(e){return new Promise((t,s)=>{this.loaders.gltf.load(e,t,void 0,s)})}async loadRgbe(e){return new Promise((t,s)=>{this.loaders.rgbeLoader.load(e,t,void 0,s)})}async loadExr(e){return new Promise((t,s)=>{this.loaders.exrLoader.load(e,t,void 0,s)})}async load(e){let t=e.split(".").pop();if(E.includes(t))return this.loadGltf(e);if(O.includes(t))return new Promise((t,s)=>{this.loaders.texture.load(e,t,void 0,s)});throw Error("Unsupported extension: ".concat(t))}constructor(){this.loaders={gltf:new R.E,texture:new h.TextureLoader,rgbeLoader:new z.x,exrLoader:new C.I}}}class L extends A{get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:s=null,target:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(t=(e=this.internal).orbitControls)&&void 0!==t||(e.orbitControls=new y.z(this.camera,this.renderer.domElement)),s&&(0,x.hA)(s,this.internal.orbitControls.object.position),i&&(0,x.hA)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}init(e){e.appendChild(this.renderer.domElement);let t=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},s=new ResizeObserver(t);s.observe(e),this.internal.destroyables.push(()=>{s.disconnect()}),t();let i=e=>{let t=this.renderer.domElement.getBoundingClientRect();this.pointer.update(this.camera,{x:e.clientX,y:e.clientY},t)},r=e=>{this.pointer.status.button|=o.LeftDown},n=e=>{this.pointer.status.button&=~o.LeftDown};return e.addEventListener("pointermove",i),e.addEventListener("pointerdown",r),e.addEventListener("pointerup",n),this.internal.destroyables.push(()=>{e.removeEventListener("pointermove",i),e.removeEventListener("pointerdown",r),e.removeEventListener("pointerup",n)}),this.internal.destroyables.push((0,g.s)(this.ticker.requestActivation),this.ticker.onTick(this.update)),this}setSize(e){let{width:t,height:s,pixelRatio:i}={...this,...e};if(t===this.width&&s===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=s,this.pixelRatio=i;let{renderer:r,perspectiveCamera:n,pipeline:o}=this;r.setSize(t,s),r.setPixelRatio(i),o.setSize(t,s,i);let a=t/s;return n.aspect=a,n.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,s=[this.scene];for(;s.length>0;){let e=s.shift();t(e)&&(yield e),s.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){super(),this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new h.WebGLRenderer,this.perspectiveCamera=new h.PerspectiveCamera,this.orhtographicCamera=new h.PerspectiveCamera,this.scene=new h.Scene,this.gizmoScene=new h.Scene,this.pointer=new b,this.ticker=new P.v({activeDuration:8}),this.pipeline=new v(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new h.Vector2,fullSize:new h.Vector2,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.destroy=()=>{!function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}(this.internal.destroyables)},this.update=e=>{var t;null===(t=this.internal.orbitControls)||void 0===t||t.update(e.deltaTime),this.pipeline.render(e.deltaTime)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0)}}var S=s(43493);let M=(0,l.createContext)(null);function k(e,t){let s=(0,l.useContext)(M);return(0,c.sv)(async function*(t,i){if(e){let t=e(s,i);if(t&&"function"==typeof t.next)do{let{value:e,done:s}=await t.next();if(s)break;yield e}while(i.mounted)}},null!=t?t:"always"),s}function T(e){let{children:t,className:s}=e,i=(0,l.useMemo)(()=>new L,[]),{ref:r}=(0,c.sv)(function*(e){yield i.init(e),Object.assign(window,{three:i,THREE:h})},[]);return(0,a.jsx)("div",{ref:r,className:"ThreeProvider absolute-through ".concat(null!=s?s:""),children:(0,a.jsx)(M.Provider,{value:i,children:t})})}function j(e){return(0,S.O)()&&(0,a.jsx)(T,{...e})}},43493:function(e,t,s){s.d(t,{O:function(){return r}});var i=s(53778);function r(){let[e,t]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{t(!0)},[]),e}},56637:function(e,t,s){s.d(t,{$M:function(){return a},Xx:function(){return n},hA:function(){return r}});var i=s(82983);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector3;if("number"==typeof e)return t.set(e,e,e);if(Array.isArray(e)){let[s,i,r=0]=e;return t.set(s,i,r)}if("width"in e){let{width:s,height:i,depth:r}=e;return t.set(s,i,r)}let{x:s,y:r,z:n=0}=e;return t.set(s,r,n)}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Euler;if(Array.isArray(e)){let[s,i,r,n="XYZ"]=e;return t.set(s,i,r,n)}let{x:s,y:r,z:n,order:o="XYZ",useDegree:a=!1}=e,l=a?Math.PI/180:1;return t.set(s*l,r*l,n*l,o)}let o=(()=>{let e=new i.Vector3,t=new i.Euler,s=new i.Vector3,o=new i.Quaternion;return function(a,l){let{x:h=0,y:c=0,z:u=0,position:d={x:h,y:c,z:u},rotationX:p=0,rotationY:f=0,rotationZ:m=0,rotationOrder:w="XYZ",rotation:v={x:p,y:f,z:m,order:w},useDegree:y=!1,scaleX:g=1,scaleY:P=1,scaleZ:x=1,scaleScalar:b=1,scale:C={x:g,y:P,z:x}}=a;if(y){let e=Math.PI/180;v.x*=e,v.y*=e,v.z*=e}if(l instanceof i.Matrix4)return r(d,e),n(v,t),r(C,s).multiplyScalar(b),o.setFromEuler(t),l.compose(e,o,s);if(l instanceof i.Object3D)return r(d,l.position),n(v,l.rotation),r(C,l.scale).multiplyScalar(b),l;throw Error("Invalid out argument")}})();function a(e){return o(e,new i.Matrix4)}}}]);