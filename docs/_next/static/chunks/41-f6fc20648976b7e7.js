"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{60041:(e,t,r)=>{r.d(t,{b:()=>b,e:()=>C});var n=r(888),a=r(30158);let s=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var i=r(49797),l=r(85795);class o{static from(e,t){if(t instanceof l.Observable){if("number"==typeof t.value)return new o(e,t);throw Error("Observable value must be a number")}let r=typeof t;return"object"===r&&(t.constructor===Object||t instanceof i.nc$)&&"value"in t?new o(e,t):"string"===r?new o(e,{value:new i.Q1f(t)}):new o(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,r="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(r="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(r,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(r,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(r,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(r,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(r,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(r,";");if(t.isTexture)if(t.isCubeTexture)return"uniform samplerCube ".concat(e).concat(r,";");else return"uniform sampler2D ".concat(e).concat(r,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function u(){let e=(0,n._)(["","s*",""],["","\\s*",""]);return u=function(){return e},e}let h=null,c=e=>(h=e,b),g="// ShaderForge (injected code) ->",p="// <- ShaderForge",_=e=>"".concat(g,"\n").concat(e.trim(),"\n").concat(p),f=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=RegExp(String.raw(u(),t(p),t(g)),"g");return e.replaceAll(r,"")};class m{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="#include <".concat(e,">"),n=this.type;if(t&&!1===h[n].includes(r))throw Error('"'.concat(r,'" is not present in the shader template program.'));return{pattern:r,type:n}}replace(e,t){if(e instanceof RegExp){let{type:r}=this;h[r]=h[r].replace(e,_(t))}else{let{type:r,pattern:n}=this.getPattern(e),a=_(t);h[r]=h[r].replace(n,a)}return b}inject(e,t,r){let{type:n,pattern:a}=this.getPattern(t),s="after"===e?"".concat(a,"\n").concat(_(r)):"".concat(_(r),"\n").concat(a);return h[n]=h[n].replace(a,s),b}injectTokenComments(){for(let e of s){let{type:t,pattern:r}=this.getPattern(e,{throwError:!1});h[t]=h[t].replace(r,"\n        ".concat(r,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return b}header(e){let t=this.type;return h[t]="".concat(e,"\n").concat(h[t]),b}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return h[this.type]=h[this.type].replace("void main() {","\n      ".concat(_(t.join("\n\n")),"\n      void main() {\n    ")),b}mainBeforeAll(e){return h[this.type]=h[this.type].replace("void main() {","void main() {\n        ".concat(_(e))),b}mainAfterAll(e){return h[this.type]=h[this.type].replace(/}\s*$/,"\n      ".concat(_(e),"\n    }")),b}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[r,n]of Object.entries(e)){let e=o.from(r,n);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,r]of Object.entries(e)){let e=o.from(t,r);if(t in h.uniforms){if(e.value!==h.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else h.uniforms[t]=e}}(e)}return b}clean(){return h[this.type]=f(h[this.type]),b}printFinalCode(){return console.log(h[this.type].replace(/#include <(.*)>/g,(e,t)=>{let r=a.ShaderChunk[t];if(!r)throw Error('Shader chunk "'.concat(t,'" not found'));return r})),b}constructor(e){this.type=e}}let v=new m("fragmentShader"),d=new m("vertexShader"),b=Object.assign(function(e){return e&&c(e),b},{shaderName:function(e){return h.shaderName="".concat(e," (ShaderForge)"),b},defines:function(e){return h.defines?Object.assign(h.defines,e):h.defines=e,b},uniforms:function(e){return d.uniforms(e),v.uniforms(e),b},varying:function(e){let t="";if("string"==typeof e)t=e;else{let r=[];for(let[t,n]of Object.entries(e))r.push("varying ".concat(n," ").concat(t,";"));t=r.join("\n")}return d.top(t),v.top(t),b},top:function(e){return d.top(e),v.top(e),b},vertex:d,fragment:v,header:function(e){return v.header(e),d.header(e),b},clean:function(){return v.clean(),d.clean(),b},with:c,wrap:(e,t)=>(e.onBeforeCompile=e=>{h=e},e)}),y=new i.Q1f;function C(e){let{r:t,g:r,b:n}=y.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(r.toFixed(3),", ").concat(n.toFixed(3),")")}},85795:(e,t,r)=>{r.r(t),r.d(t,{Observable:()=>l,ObservableNumber:()=>c,ObservableSet:()=>g,ObservableTree:()=>v});let n=new Map,a=0;function s(e){for(let[t,{execTime:r,callback:s}]of(a=e,n.entries()))r<a&&(n.delete(t),s())}if("requestAnimationFrame"in globalThis&&"function"==typeof globalThis.requestAnimationFrame){let e=t=>{globalThis.requestAnimationFrame(e),s(t/1e3)};globalThis.requestAnimationFrame(e)}else{let e=Date.now();globalThis.setInterval(()=>{s((Date.now()-e)/1e3)},1e3/60)}let i=0;class l{static get nextId(){return i}is(e){return this._value===e}_invokeListeners(){let e=this._listeners[Symbol.iterator]();for(;;){let{value:t,done:r}=e.next();if(r)break;t(this._value,this)}}_handleDelay(e,t){if((null==t?void 0:t.delay)!==void 0){let{delay:r,...s}=t;return!function(e,t,r){let s="number"==typeof t?t:t.endsWith("ms")?Number.parseFloat(t.slice(0,-2))/1e3:Number.parseFloat(t.slice(0,-1)),i=a+s;n.set(e,{execTime:i,callback:r})}(this,r,()=>{this.setValue(e,s)}),this._delayed=!0,!0}return this._delayed&&n.delete(this),this._delayed=!1,!1}setValue(e,t){return!this._handleDelay(e,t)&&((this._valueMapper&&(e=this._valueMapper(e,this)),e===this._value)?(this._hasChanged=!1,!1):(this._valueOld=this._value,this._value=e,this._hasChanged=!0,this._invokeListeners(),!0))}initializeSerialization(e,t){return this.valueStringifier=e,this.valueParser=t,this}valueToString(){return this.valueStringifier?this.valueStringifier(this._value):String(this._value)}setValueFromString(e,t){if(this.valueParser){let r=this.valueParser(e);return this.setValue(r,t)}let r=typeof this._value;switch(r){case"string":return this.setValue(e,t);case"number":return this.setValue(Number(e),t);case"boolean":let n=/^true|1$/.test(e);return this.setValue(n,t);case"bigint":return this.setValue(BigInt(e),t);default:return console.warn('Observable#setValueFromString: Unsupported type "'.concat(r,'"')),!1}}setValueMapper(e){return this._valueMapper=e,!!e&&this.setValue(e(this._value,this))}clearListeners(){return this._listeners.clear(),this}onChange(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,a]=2===t.length?t:[{},t[0]],{executeImmediately:s=!1,once:i=!1}=n;if(i){if(s)return a(this._value,this),{destroy:()=>{}};let e=this.onChange({...n,executeImmediately:!1,once:!1},(t,r)=>{e.destroy(),a(t,r)});return e}return this._listeners.add(a),s&&a(this._value,this),{destroy:()=>this._listeners.delete(a)}}onDerivativeChange(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let a=e(this._value),[{executeImmediately:s=!1},i]=2===r.length?r:[{},r[0]];return s&&i(a,a,this._value,this),this.onChange(t=>{let r=a;(a=e(t))!==r&&i(a,r,t,this)})}onVerify(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,a,s]=3===t.length?t:[{},...t],i=a(this._value);return n.executeImmediately&&s(i,this._value,this),this.onChange(e=>{let t=a(e);t!==i&&s(i=t,e,this)})}get observableId(){return this._observableId}get value(){return this._value}set value(e){this.setValue(e)}get valueOld(){return this._valueOld}log(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let{value:n=e=>{var t;return null!=(t=null==e?void 0:e.toString())?t:String(e)},message:a=e=>"Obs#".concat(this._observableId," value has changed: ")}=1!==t.length?{}:"function"==typeof t[0]?{value:t[0]}:t[0];return this.onChange(()=>{console.log("".concat(a(this)," ").concat(n(this._value)))})}constructor(e,t){this._observableId=i++,this._valueMapper=null,this._listeners=new Set,this._hasChanged=!1,this._delayed=!1,this.valueStringifier=null,this.valueParser=null,this.get=()=>this._value,this.set=this.setValue.bind(this),this._value=e,this._valueOld=e;let{valueMapper:r=null,onChange:n,userData:a={}}=null!=t?t:{};this._valueMapper=r,this.userData=a,n&&this.onChange(n)}}var o=r(63126),u=r(53245);function h(e,t,r){return e<t?t:e>r?r:e}class c extends l{get lowerBound(){return this._lowerBound}set lowerBound(e){this.setBounds(e,this._upperBound)}get upperBound(){return this._upperBound}set upperBound(e){this.setBounds(this._lowerBound,e)}get min(){return this.lowerBound}set min(e){this.lowerBound=e}get max(){return this.upperBound}set max(e){this.upperBound=e}get delta(){return this._value-this._valueOld}setValue(e,t){if(e=h(e,this._lowerBound,this._upperBound),e=this._integer?Math.round(e):e,this._handleDelay(e,t))return!1;let r=super.setValue(e,t);return this._memorization&&this._memorization.setValue(this._value,!0),r}setBounds(e,t){let r=h(this._value,e,t);return this._lowerBound=e,this._upperBound=t,this._value!==r&&this.setValue(r)}setMinMax(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.setBounds(...t)}initMemorization(e){let{derivativeCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof arguments[1]&&(console.warn("ObservableNumber.initMemorization(memorizationLength, derivativeCount) is deprecated. Use ObservableNumber.initMemorization(memorizationLength, { derivativeCount }) instead."),t=arguments[1]),this._memorization=new u.r(e,this._value,t),this}getMemorization(){return this._memorization}isAboveOrEqual(e){return this._value>=e}isAbove(e){return this.isAboveOrEqual(e)}isBelow(e){return this._value<e}isAboveOrEqualUpperbound(){return this._value>=this._upperBound}isBelowOrEqualLowerbound(){return this._value<this._lowerBound}passed(e,t){let{value:r,valueOld:n}=this,a=r>=t&&n<t,s=r<t&&n>=t;switch(e){case"through":return a||s;case"above":return a;case"below":return s}throw Error("Impossible! Typescript, where are you?")}getPassMode(e){let{value:t,valueOld:r}=this;return t>=e&&r<e?"above":t<e&&r>=e?"below":null}stepValue(e){return Math.round(this._value/e)*e}onStepChange(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,a,s]=function(e){if(3===e.length)return e;if(2===e.length)return[e[0],{},e[1]];throw Error("Invalid arguments: (".concat(e.join(", "),")"))}(t),i=NaN;return this.onChange(a,()=>{let e=this.stepValue(n);i!==e&&s(i=e,this)})}onPass(e,t,r){return this.onChange(()=>{this.passed(e,t)&&r(this.value,this)})}increment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setValue(this._value+e)}lerpTo(e,t){let{clamp:r=!0,epsilon:n=1e-9,modulo:a=-1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this._value;if(a>=0){let i=(e=(e%a+a)%a)-s;Math.abs(i)>a/2&&(e=s+(i>0?i-a:i+a));let l=Math.abs(e-s)<n?e:s+(e-s)*(r?t<0?0:t>1?1:t:t);return this.setValue(l%a)}let i=Math.abs(e-s)<n?e:s+(e-s)*(r?t<0?0:t>1?1:t:t);return this.setValue(i)}lerp(e,t,r){let n=this._value;return(null==r?void 0:r.clamped)===!0&&(n=n<0?0:n>1?1:n),e+(t-e)*n}inverseLerp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerBound,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.upperBound,r=arguments.length>2?arguments[2]:void 0,n=(this._value-e)/(t-e);return(null==r?void 0:r.clamped)===!0&&(n=n<0?0:n>1?1:n),n}exponentialDecay(e,t,r){return this.setValue((0,o.calculateExponentialDecay)(this._value,e,t,r))}exponentialGrow(e,t,r){let n=(e=>{if("number"==typeof e)return 1-e;let[t,r]=e;return(1-t)**(1/r)})(t),a=e-(e-this._value)*n**r;return this.setValue(a)}constructor(e,t){var r,n,a;let s=-1/0,i=1/0;Array.isArray(t)?([s,i]=t,t={}):(s=null!=(r=null==t?void 0:t.lowerBound)?r:s,i=null!=(n=null==t?void 0:t.upperBound)?n:i),super(h(e,s,i),t),this._memorization=null,this._lowerBound=s,this._upperBound=i,this._integer=null!=(a=null==t?void 0:t.integer)&&a}}class g extends l{get _set(){return this._value}get _setOld(){return this._valueOld}get entering(){return new Set(this._entering)}get leaving(){return new Set(this._leaving)}get size(){return this._set.size}swap(){let{_set:e,_setOld:t}=this;this._value=t,this._valueOld=e}get value(){return new Set(this._value)}get valueOld(){return new Set(this._valueOld)}has(e){return this._value.has(e)}get shouldKeep(){return this._shouldKeep}setShouldKeep(e){return this._shouldKeep=e,this}purge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shouldKeep;if(!e)return!1;let t=new Set(this._value),r=!1;for(let n of t)e(n)||(t.delete(n),r=!0);return!!r&&this.setValue(t)}setValue(e,t){if(this._handleDelay(e,t))return!1;this.swap();let{_set:r,_setOld:n,_entering:a,_leaving:s,_shouldKeep:i}=this;for(let t of(a.clear(),s.clear(),r.clear(),e))i&&!1===i(t)||(n.has(t)||a.add(t),r.add(t));for(let e of n)r.has(e)||s.add(e);let l=a.size>0||s.size>0;return l&&this._invokeListeners(),l}add(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.setValue([...this.value,...t])}remove(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.setValue([...this.value].filter(e=>!t.includes(e)))}clear(){return this.setValue([])}intersection(e){let t=new Set;for(let r of e)this.has(r)&&t.add(r);return t}otherDifference(e){let t=new Set;for(let r of e)this.has(r)||t.add(r);return t}constructor(){super(new Set),this._entering=new Set,this._leaving=new Set,this._valueOld=new Set}}var p=r(28340),_=r(22115);class f{get totalChangeCount(){return this.aOnlyChanges.length+this.bOnlyChanges.length+this.bothChanges.length}get aChangeCount(){return this.aOnlyChanges.length+this.bothChanges.length}get bChangeCount(){return this.bOnlyChanges.length+this.bothChanges.length}get a(){return this.getAChangeObject()}get b(){return this.getBChangeObject()}*getAChanges(){for(let[e,t]of this.aOnlyChanges)yield[e,t];for(let[e,t,r]of this.bothChanges)yield[e,t]}getAChangeObject(){let e={};for(let[t,r]of this.getAChanges())(0,_.HD)(e,t,r,{createAscendants:!0});return e}*getBChanges(){for(let[e,t]of this.bOnlyChanges)yield[e,t];for(let[e,t,r]of this.bothChanges)yield[e,r]}getBChangeObject(){let e={};for(let[t,r]of this.getBChanges())(0,_.HD)(e,t,r,{createAscendants:!0});return e}info(){return["Total changes: ".concat(this.totalChangeCount),"  Both changes (".concat(this.bothChanges.length,")"),...this.bothChanges.map(e=>{let[t,r,n]=e;return"    ".concat(t.join(".")," = ").concat(r," → ").concat(n)}),"","  A only changes (".concat(this.aOnlyChanges.length,")"),...this.aOnlyChanges.map(e=>{let[t,r]=e;return"    ".concat(t.join(".")," = ").concat(r)}),"","  B only changes (".concat(this.bOnlyChanges.length,")"),...this.bOnlyChanges.map(e=>{let[t,r]=e;return"    ".concat(t.join(".")," = ").concat(r)})].join("\n")}constructor(e,t){this.aOnlyChanges=[],this.bOnlyChanges=[],this.bothChanges=[],this.objectA=e,this.objectB=t}}function m(e,t){"string"==typeof e&&(e=e.split("."));let r={},n=r;for(let t of e.slice(0,-1))n[t]={},n=n[t];return n[e[e.length-1]]=t,r}class v extends l{setMutation(e,t){if(!e||"object"!=typeof e)throw Error("Mutation must be an object.");let{value:r}=this,n=Array.isArray(e)?m(e[0],e[1]):e,a=!1;if((0,p.gC)(n,{treatConstructedObjectAsValue:!1,onValue(e,t){let{value:n,exists:s}=(0,p.vz)(r,t);if(!s||e!==n)return a=!0,"break"}}),!a)return!1;let s=(0,p.Go)(r);return(0,p.Eg)(s,n),this.diff=function(e,t){let r=new f(e,t);return(0,_.gC)(e,{treatConstructedObjectAsValue:!1,onValue(e,n){let{value:a,exists:s}=(0,_.vz)(t,n);s&&e===a||(s?r.bothChanges.push([n,e,a]):r.aOnlyChanges.push([n,e]))}}),(0,_.gC)(t,{treatConstructedObjectAsValue:!1,onValue(t,n){let{value:a,exists:s}=(0,_.vz)(e,n);(!s||t!==a)&&(s||r.bOnlyChanges.push([n,t]))}}),r}(r,s),super.setValue(s,t)}enqueueMutation(e){var t;return null!=this._pendingMutations||(this._pendingMutations={}),(0,p.Eg)(this._pendingMutations,Array.isArray(e)?m(e[0],e[1]):e),this}flushMutations(e){if(!this._pendingMutations)return!1;let t=this.setMutation(this._pendingMutations,e);return this._pendingMutations=null,t}setValue(e,t){return this.setMutation(e,t)}onMutation(e,t){let r=Array.isArray(e)?e:e.split("."),n=r.length;return this.onChange((e,a)=>{let{valueOld:s}=a,i=!1,l=null;for(let[e]of this.diff.bothChanges)if((0,p.cD)(e,r,{maxLength:n})){i=!0,l=e.slice(0,n);break}i&&t((0,p.vz)(e,r).value,(0,p.vz)(s,r).value,{observable:this,path:l})})}constructor(...e){super(...e),this.diff=new f({},{}),this._pendingMutations=null,this.mutate=this.setMutation.bind(this)}}}}]);