"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2491],{1029:(e,t,n)=>{n.d(t,{N:()=>r});let a={vecX:["float","vec2","vec3","vec4"]},r=(e,t)=>{let n=[],r=Array.isArray(e)?e:[e].map(e=>e in a?a[e]:e).flat();if("function"==typeof t)for(let e of r)n.push(t(e).replaceAll(/\bT\b/g,e));else for(let e of r)n.push(t.replaceAll(/\bT\b/g,e));return n.join("\n")}},8144:(e,t,n)=>{n.d(t,{H:()=>o});var a=n(65927),r=n(1029);let o="\n  ".concat(a.S,"\n\n  float sin01(float x) {\n    return 0.5 + 0.5 * sin(x * 6.283185307179586);\n  }\n\n  vec2 scaleAround(vec2 p, vec2 c, float s) {\n    return c + (p - c) / s;\n  }\n\n  // Same as mix, but clamped.\n  ").concat((0,r.N)("vecX","\n    T lerp(in T a, in T b, in float x) {\n      return mix(a, b, clamp01(x));\n    }\n  "),"\n\n  float inverseLerpUnclamped(in float a, in float b, float x) {\n    return (x - a) / (b - a);\n  }\n\n  float inverseLerp(in float a, in float b, float x) {\n    return clamp01((x - a) / (b - a));\n  }\n\n  float threshold(in float x, in float thresholdValue) {\n    return x < thresholdValue ? 0. : 1.;\n  }\n\n  float threshold(in float x, in float thresholdValue, in float width) {\n    return width < 1e-9 \n      ? (x < thresholdValue ? 0. : 1.)\n      : clamp01((x - thresholdValue + width * .5) / width);\n  }\n\n  mat3 extractRotation(mat4 matrix) {\n    return mat3(matrix[0].xyz, matrix[1].xyz, matrix[2].xyz);\n  }\n\n  vec2 rotate(vec2 p, float a) {\n    float c = cos(a);\n    float s = sin(a);\n    float x = c * p.x + s * p.y;\n    float y = -s * p.x + c * p.y;\n    return vec2(x, y);\n  }\n\n  vec2 rotateAround(vec2 p, float a, vec2 c) {\n    return c + rotate(p - c, a);\n  }\n\n  vec2 rotateScaleAround(vec2 p, float a, float s, vec2 c) {\n    return c + rotate((p - c) / s, a);\n  }\n  \n  float positiveModulo(float x) {\n    x = mod(x, 1.0);\n    return x < 0.0 ? x + 1.0 : x;\n  }\n\n  float positiveModulo(float x, float modulo) {\n    x = mod(x, modulo);\n    return x < 0.0 ? x + modulo : x;\n  }\n\n  // Limit a value to a maximum that the function tends to reach when x -> âˆž\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float maxValue) {\n    return x <= 0.0 ? x : maxValue * x / (maxValue + x);\n  }\n\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float minValue, float maxValue) {\n    float d = maxValue - minValue;\n    float xd = x - minValue;\n    return x <= minValue ? x : minValue + d * xd / (d + xd);\n  }\n\n  float sqLength(in vec2 p) {\n    return p.x * p.x + p.y * p.y;\n  }\n\n  float sqLength(in vec3 p) {\n    return p.x * p.x + p.y * p.y + p.z * p.z;\n  }\n\n  float pcurve(float x, float a, float b) {\n    float k = pow(a + b, a + b) / (pow(a, a) * pow(b, b));\n    return k * pow(x, a) * pow(1.0 - x, b);\n  }\n\n  float hash(vec3 p) {\n    return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n  }\n\n  ").concat((0,r.N)("vecX","\n    T min3(in T a, in T b, in T c) {\n      return min(min(a, b), c);\n    }\n  "),"\n\n  ").concat((0,r.N)("vecX","\n    T min4(in T a, in T b, in T c, in T d) {\n      return min(min(a, b), min(c, d));\n    }\n  "),"\n")},22899:(e,t,n)=>{n.d(t,{I:()=>o});var a=n(65927);let r=["linear"];for(let e=1;e<=10;e++)r.push("easeIn".concat(e)),r.push("easeOut".concat(e)),r.push("easeInOut".concat(e)),r.push("easeOutIn".concat(e));let o="\n#ifndef GLSL_EASING\n#define GLSL_EASING\n\n".concat(a.S,"\n\nfloat easePow1(float x) {\n  return x;\n}\n\nfloat easePow2(float x) {\n  return x * x;\n}\n\nfloat easePow3(float x) {\n  return x * x * x;\n}\n\nfloat easePow4(float x) {\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow5(float x) {\n  float x0 = x;\n  x *= x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow6(float x) {\n  x *= x * x;\n  return x *= x;\n}\n\nfloat easePow7(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow8(float x) {\n  x *= x;\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow9(float x) {\n  x *= x * x;\n  return x *= x * x;\n}\n\nfloat easePow10(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x * x;\n  return x0 * x;\n}\n\nfloat linear(float x) {\n  return clamp01(x);\n}\n\n").concat(Array.from({length:10},(e,t)=>{let n=t+1;return"\n\nfloat easeIn".concat(n," (float x) {\n  return easePow").concat(n,"(clamp01(x));\n}\nfloat easeOut").concat(n," (float x) {\n  return 1.0 - easePow").concat(n,"(clamp01(1.0 - x));\n}\nfloat easeInOut").concat(n," (float x) {\n  return x < 0.5 \n    ? 0.5 * easePow").concat(n,"(2.0 * x) \n    : 1.0 - 0.5 * easePow").concat(n,"(2.0 * (1.0 - x));\n}\nfloat easeOutIn").concat(n," (float x) {\n  return x < 0.5\n    ? 0.5 * (1.0 - easePow").concat(n,"(1.0 - x * 2.0))\n    : 1.0 - 0.5 * (1.0 - easePow").concat(n,"(2.0 * x - 1.0));\n}\n\n").trim()}).join("\n\n"),"\n\n\n// https://www.desmos.com/calculator/mqou4lf9zc?lang=fr\nfloat easeInOut(float x, float p, float i) {\n  return  x <= 0.0 ? 0.0 :\n          x >= 1.0 ? 1.0 :\n          x <= i ? 1.0 / pow(i, p - 1.0) * pow(x, p) :\n          1.0 - 1.0 / pow(1.0 - i, p - 1.0) * pow(1.0 - x, p);\n}\n\n// https://www.desmos.com/calculator/nrjlezusdv\nfloat easeInThenOut(float x, float p) {\n  return 1.0 - pow(abs(2.0 * x - 1.0), p);\n}\n\n#endif\n")},25809:(e,t,n)=>{n.d(t,{P:()=>i});var a=n(49797),r=n(22641);let o={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class i extends a.DXC{set(e){let{color:t,opacity:n,size:i,step:s,frame:l,plane:c}={...o,...e},u=(0,r.wX)(i),p=(0,r.wX)(null!=s?s:u),f=[],h=(e,t)=>f.push(new a.Pq0(e,t,0));l&&(h(-u.x/2,u.y/2),h(u.x/2,u.y/2),h(u.x/2,u.y/2),h(u.x/2,-u.y/2),h(u.x/2,-u.y/2),h(-u.x/2,-u.y/2),h(-u.x/2,-u.y/2),h(-u.x/2,u.y/2));let m=Math.ceil(-u.x/2/p.x)*p.x;m===-u.x/2&&(m+=p.x);do h(m,-u.y/2),h(m,u.y/2),m+=p.x;while(m<u.x/2);let d=Math.ceil(-u.y/2/p.y)*p.y;d===-u.y/2&&(d+=p.y);do h(-u.x/2,d),h(u.x/2,d),d+=p.y;while(d<u.y/2);switch(this.geometry.setFromPoints(f),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:o)}}},28737:(e,t,n)=>{n.d(t,{Leak:()=>c,O:()=>l});var a={};n.r(a),n.d(a,{distribute:()=>o.mn,every:()=>o.Si,findMaxBy:()=>o.vj,pairwise:()=>o.Ju,recordBy:()=>o.VY,some:()=>o.zN,split:()=>o.mn,uniqueBy:()=>o.pD});var r=n(30158),o=n(43107),i=n(85795),s=n(17099);function l(e){Object.assign(window,{...r,...i,...a,...e,PRNG:s.c})}function c(e){return l(e),null}},35375:(e,t,n)=>{n.d(t,{$:()=>r});let a="/three-xp/assets/",r={development:!1,assetsPath:a,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(a).concat(e)}}},60041:(e,t,n)=>{n.d(t,{b:()=>w,e:()=>y});var a=n(888),r=n(30158);let o=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var i=n(49797),s=n(85795);class l{static from(e,t){if(t instanceof s.Observable){if("number"==typeof t.value)return new l(e,t);throw Error("Observable value must be a number")}let n=typeof t;return"object"===n&&(t.constructor===Object||t instanceof i.nc$)&&"value"in t?new l(e,t):"string"===n?new l(e,{value:new i.Q1f(t)}):new l(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,n="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(n="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(n,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(n,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(n,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(n,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(n,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(n,";");if(t.isTexture)if(t.isCubeTexture)return"uniform samplerCube ".concat(e).concat(n,";");else return"uniform sampler2D ".concat(e).concat(n,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function c(){let e=(0,a._)(["","s*",""],["","\\s*",""]);return c=function(){return e},e}let u=null,p=e=>(u=e,w),f="// ShaderForge (injected code) ->",h="// <- ShaderForge",m=e=>"".concat(f,"\n").concat(e.trim(),"\n").concat(h),d=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(String.raw(c(),t(h),t(f)),"g");return e.replaceAll(n,"")};class x{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="#include <".concat(e,">"),a=this.type;if(t&&!1===u[a].includes(n))throw Error('"'.concat(n,'" is not present in the shader template program.'));return{pattern:n,type:a}}replace(e,t){if(e instanceof RegExp){let{type:n}=this;u[n]=u[n].replace(e,m(t))}else{let{type:n,pattern:a}=this.getPattern(e),r=m(t);u[n]=u[n].replace(a,r)}return w}inject(e,t,n){let{type:a,pattern:r}=this.getPattern(t),o="after"===e?"".concat(r,"\n").concat(m(n)):"".concat(m(n),"\n").concat(r);return u[a]=u[a].replace(r,o),w}injectTokenComments(){for(let e of o){let{type:t,pattern:n}=this.getPattern(e,{throwError:!1});u[t]=u[t].replace(n,"\n        ".concat(n,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return w}header(e){let t=this.type;return u[t]="".concat(e,"\n").concat(u[t]),w}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u[this.type]=u[this.type].replace("void main() {","\n      ".concat(m(t.join("\n\n")),"\n      void main() {\n    ")),w}mainBeforeAll(e){return u[this.type]=u[this.type].replace("void main() {","void main() {\n        ".concat(m(e))),w}mainAfterAll(e){return u[this.type]=u[this.type].replace(/}\s*$/,"\n      ".concat(m(e),"\n    }")),w}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[n,a]of Object.entries(e)){let e=l.from(n,a);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,n]of Object.entries(e)){let e=l.from(t,n);if(t in u.uniforms){if(e.value!==u.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else u.uniforms[t]=e}}(e)}return w}clean(){return u[this.type]=d(u[this.type]),w}printFinalCode(){return console.log(u[this.type].replace(/#include <(.*)>/g,(e,t)=>{let n=r.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n})),w}constructor(e){this.type=e}}let v=new x("fragmentShader"),g=new x("vertexShader"),w=Object.assign(function(e){return e&&p(e),w},{shaderName:function(e){return u.shaderName="".concat(e," (ShaderForge)"),w},defines:function(e){return u.defines?Object.assign(u.defines,e):u.defines=e,w},uniforms:function(e){return g.uniforms(e),v.uniforms(e),w},varying:function(e){let t="";if("string"==typeof e)t=e;else{let n=[];for(let[t,a]of Object.entries(e))n.push("varying ".concat(a," ").concat(t,";"));t=n.join("\n")}return g.top(t),v.top(t),w},top:function(e){return g.top(e),v.top(e),w},vertex:g,fragment:v,header:function(e){return v.header(e),g.header(e),w},clean:function(){return v.clean(),g.clean(),w},with:p,wrap:(e,t)=>(e.onBeforeCompile=e=>{u=e},e)}),_=new i.Q1f;function y(e){let{r:t,g:n,b:a}=_.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(a.toFixed(3),")")}},65927:(e,t,n)=>{n.d(t,{S:()=>a});let a="\n#ifndef GLSL_BASIC\n#define GLSL_BASIC\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\n#endif\n"},72491:(e,t,n)=>{n.d(t,{Main:()=>Y});var a=n(70691),r=n(49797),o=n(84306),i=n(95736),s=n(72598),l=n(48083),c=n(36508),u=n(35375),p=n(28737);function f(){return(0,o.yk)(function*(e){Object.assign(window,{three:e,Ticker:c.Rv})},[]),null}var h=n(25809),m=n(87381),d=n(56647),x=n(60041),v=n(22899),g=n(8144),w=n(79285),_=n(17099);let y=JSON.parse('[{"phi":1.7045171372513754,"theta":0.9426432714835036},{"phi":1.2138204764190186,"theta":0.5877279735536564},{"phi":2.018280663352346,"theta":0.4225774045053551},{"phi":1.58623960126316,"theta":0.11530620356664824},{"phi":1.4858931296682674,"theta":0.09988610745985425},{"phi":1.370250993061531,"theta":-0.6152078487213142},{"phi":0.9459811008591165,"theta":-0.4116473816238604},{"phi":1.06660504904375,"theta":-0.22199053344895067},{"phi":2.675243191552906,"theta":-0.6045343364962831},{"phi":2.5901332086293296,"theta":-0.45113353839646375},{"phi":3.0820510158643644,"theta":-0.20059237206688585},{"phi":2.920796326794876,"theta":-0.3506750512589778},{"phi":2.707382312980871,"theta":0.025009035614594027},{"phi":-2.771515207166003,"theta":0.43045560632597474},{"phi":-3.068326429226437,"theta":0.6129817652939101},{"phi":3.1105233820660763,"theta":0.7241618779795415},{"phi":-2.5251632895865317,"theta":0.6535499652931851},{"phi":-3.015091410598426,"theta":0.8642317265005449},{"phi":3.0788690924417255,"theta":0.8159956971859744},{"phi":-2.370767607902747,"theta":0.787316008336757},{"phi":-2.5030942996270586,"theta":0.7163689975296974},{"phi":-0.28189011450089596,"theta":0.6816391217572154},{"phi":-0.2988148637926313,"theta":0.5717768908896973},{"phi":-0.1772652581758269,"theta":0.4716751222011235},{"phi":-0.05544012907477782,"theta":-0.028486000516249495},{"phi":-0.06314162733968252,"theta":0.061655565733329316},{"phi":-0.8760666510861576,"theta":-0.6838346154783156},{"phi":-0.7161612255722236,"theta":-0.11386479380967202},{"phi":-0.5032773150049611,"theta":-0.5860256589964206},{"phi":1.7599491315598337,"theta":1.0140201131361222},{"phi":1.555598726738203,"theta":1.0275620052067571},{"phi":1.5867188262212921,"theta":1.091601234052012},{"phi":1.5622775626534053,"theta":1.1451634884556725},{"phi":1.8064000451323763,"theta":0.8291516658764525},{"phi":1.7711742769485577,"theta":0.8002332318072503},{"phi":1.5274585527636149,"theta":0.838434437058171},{"phi":1.3559514207428152,"theta":0.7754675571543634},{"phi":1.1792807716216012,"theta":0.7682476175679409},{"phi":1.3076110196152615,"theta":0.9387650274681301},{"phi":1.4565810952604292,"theta":1.0264229286514035}]'),b=new r.Tap;function P(){let{theta:e=0,phi:t=0,radius:n=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return null!=a||(a=new r.Pq0),a.x=n*Math.cos(e)*Math.cos(t),a.y=n*Math.sin(e),a.z=n*Math.cos(e)*Math.sin(t),a}class S extends r.N1A{constructor(e,{color:t="white"}={}){let n=new r.LoY().setFromPoints(e),a=new r.Fvt({color:t}),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,t=new Uint8Array(4*e),n=0;for(;n<e;){let a=_.c.int(10,20);n+a>e&&(a=e-n);for(let e=0;e<a;e++)t[4*(n+e)]=255;n+=a,n+=_.c.int(1,80)}for(let n=0;n<e;n+=2)t[4*n+1]=255;let a=new r.GYF(t,e,1,r.GWd);return a.minFilter=a.magFilter=r.hxR,a.wrapS=a.wrapT=r.GJx,a.needsUpdate=!0,a}(),i={uTime:c.Rv.get("three").uTime,uTextureLengthRatio:{value:40},uScale:{value:1},uTexture:{value:o},uLineLength:{value:-1}};a.onBeforeCompile=e=>x.b.with(e).uniforms(i).varying({vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n        vWorldPosition2 = (modelMatrix * vec4(position, 1.0)).xyz;\n      ").fragment.top("\n        float hash(vec3 p) {\n          // Combine the components of the vec3 using dot products\n          vec3 k = vec3(127.1, 311.7, 74.7); // Large primes to create randomness\n          return fract(sin(dot(p, k)) * 43758.5453123); // Sine and fract create pseudo-randomness\n        }\n      ").fragment.replace(/if .* {\s*discard;\s*}/,"\n        float alpha = vLineDistance / uLineLength;\n        alpha = pow(alpha, 1.0 / 2.0);\n        float x = mod(uLineLength * alpha / uTextureLengthRatio + uTime * -0.05, 1.0);\n        vec4 texel = texture2D(uTexture, vec2(x, 0.5));\n        float outHash = fract(hash(vWorldPosition2) + uTime * 10.0) + mix(5.0, -1.0, alpha);\n        if (texel.r * outHash < 0.5) {\n          discard;\n        }\n      "),super(n,a),this.computeLineDistances(),i.uLineLength.value=this.geometry.attributes.lineDistance.array.at(-1)}}class M extends r.YJl{constructor(e,{pointsPerCurve:t=80,curveSubdivisions:n=256}={}){super();let a=e.length*t,o=new r.LoY,i=new Float32Array(3*a);o.setAttribute("position",new r.THS(i,3));let s=new Float32Array(4*a);_.c.seed(987632);for(let e=0;e<s.length;e++)s[e]=_.c.random();o.setAttribute("random",new r.THS(s,4));let l=new Float32Array(e.length*n*4),u=new Float32Array(e.length*n*4);for(let a=0;a<e.length;a++){for(let e=0;e<t;e++){let n=a*t+e;i[3*n]=e,i[3*n+1]=a,i[3*n+2]=0}let r=e[a].nurbsCurve;if(!r)throw Error("NURBS curve not set.");for(let e=0;e<n;e++){let t=e/n,o=r.getPoint(t),i=r.getTangent(t),s=a*n+e;l[4*s]=o.x,l[4*s+1]=o.y,l[4*s+2]=o.z,u[4*s]=i.x,u[4*s+1]=i.y,u[4*s+2]=i.z}}let p=t=>{let a=new r.GYF(t,n,e.length,r.GWd,r.RQf,r.UTZ,r.ghU,r.ghU,r.hxR,r.hxR);return a.generateMipmaps=!1,a.needsUpdate=!0,a},f=p(l),h=p(u);_.c.seed(5678492);let m={uTime:c.Rv.get("three").uTime,uPointsPerCurve:{value:t},uCurvesMapSize:{value:new r.I9Y(n,e.length)},uCurvesPositionMap:{value:f},uCurvesTangentMap:{value:h},uColors:{value:e.map(e=>e.color)},uCurveRandom:{value:e.map(()=>_.c.random())},uMaskMaps:{value:[b.load("textures/rounded-square.png"),b.load("textures/rounded-plus.png"),b.load("textures/rounded-rhomb.png")]}},d=new r.BH$({vertexColors:!0,size:.5});d.onBeforeCompile=e=>x.b.with(e).uniforms(m).varying({vRandom:"vec4"}).vertex.top(v.I).vertex.top("\n        attribute vec4 random;\n      ").vertex.replace("begin_vertex","\n        int j = gl_VertexID / int(uPointsPerCurve);\n        int i = gl_VertexID - j * int(uPointsPerCurve);\n        float r = uCurveRandom[j]; // Curve random value\n\n        vColor = uColors[j] * mix(0.8, 1.2, random.x);\n\n        float curveFraction = 0.2;\n        float curveSpeed = 0.0125;\n        float curveInnerSpeed = 0.05;\n\n        float t3 = fract(position.x / uPointsPerCurve + uTime * curveInnerSpeed);\n        float t0 = fract(curveFraction * t3 + r + uTime * curveSpeed);\n        t0 = easeIn2(t0);\n\n        float x = t0;\n        float y = position.y / uCurvesMapSize.y;\n        float xMax = uCurvesMapSize.x - 1.0; // one less because of linear interpolation (x0 -> x1)\n        float xT = fract(x * xMax);\n        float x0 = floor(x * xMax) / xMax;\n        float x1 = floor(x * xMax + 1.0) / xMax;\n        \n        vec3 p0 = texture(uCurvesPositionMap, vec2(x0, y)).xyz;\n        vec3 p1 = texture(uCurvesPositionMap, vec2(x1, y)).xyz;\n        vec3 p = mix(p0, p1, xT);\n\n        vec3 tangent0 = texture(uCurvesTangentMap, vec2(x0, y)).xyz;\n        vec3 tangent1 = texture(uCurvesTangentMap, vec2(x1, y)).xyz;\n        vec3 tangent = mix(tangent0, tangent1, xT);\n\n        vec3 normal = normalize(cross(tangent, vec3(0.0, 1.0, 0.0)));\n        vec3 binormal = normalize(cross(normal, tangent));\n\n        float t1 = sin(random.x * PI2 + uTime * mix(0.5, 1.0, random.z));\n        float t2 = sin(random.y * PI2 + uTime * mix(0.5, 1.0, random.w));\n        float dispersion = mix(0.005, 0.2, easeOut8(t0));\n        vec3 transformed = p \n          + normal * (random.z - 0.5) * dispersion * t1 \n          + binormal * (random.w - 0.5) * dispersion * t2;\n      ").vertex.mainAfterAll("\n        gl_PointSize *= mix(0.2, 1.0, easeInThenOut(t0, 16.0))\n          * mix(0.25, 1.0, easeInThenOut(t3, 6.0))\n          * mix(0.25, 1.0, random.z);\n\n        vRandom = random;\n      ").fragment.mainAfterAll("\n        if (vRandom.x < 0.5) {\n          if (texture2D(uMaskMaps[0], gl_PointCoord).r < 0.5) discard;\n        } else if (vRandom.y < 0.2) {\n          if (texture2D(uMaskMaps[1], gl_PointCoord).r < 0.5) discard;\n        } else {\n          if (texture2D(uMaskMaps[2], gl_PointCoord).r < 0.5) discard;\n        }\n      ");let g=new r.ONl(o,d);this.add(g)}}var C=n(58542),z=n(22641);class j extends r.YJl{setControlPoints(e){let{curveSubdivisions:t=512}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{degree:n,color:a}=this,o=e.map(e=>e instanceof r.Pq0?new r.IUQ(e.x,e.y,e.z,1):e),i=[],s=o.length;for(let e=0;e<=n;e++)i.push(0);for(let e=1;e<=s-n;e++)i.push(e);for(let e=0;e<n;e++)i.push(s-n);let l=new C.s(n,i,o),c=l.getSpacedPoints(t),u=new r.LoY().setFromPoints(c),p=new r.N1A(u,new r.mrM({color:a}));this.add(p);let f=new r.ZLX(j.instancedGeometry,new r.V9B({color:a}),o.length);this.add(f);let h=new r.kn4;for(let[e,t]of o.entries()){let{x:n,y:a,z:r,w:o}=t;f.setMatrixAt(e,(0,z.vl)({x:n,y:a,z:r,scaleScalar:o},h))}this.controlPoints=o,this.nurbsCurve=l,this.points=c}constructor(...e){super(...e),this.degree=8,this.color=new r.Q1f(0xff0000),this.nurbsCurve=null,this.controlPoints=[],this.points=[]}}j.instancedGeometry=new r.WBB(.005,12);let T=["#3366ff","#009a27","#00943b","#2512cf","#bb1d81","#67cd6c","#fed801","#ff1f02"];class A extends r.YJl{addSpot(e,t){let{x:n,y:a,z:r}=e,{matrix:o,color:i}=A.shared;this.instancedMesh.setMatrixAt(this.index,o.makeTranslation(n,a,r)),this.instancedMesh.setColorAt(this.index,i.set(t)),this.index++}constructor({sizeBase:e=400}={}){super(),this.index=0;let{geometry:t,material:n,matrix:a,color:o}=A.shared;this.instancedMesh=new r.ZLX(t,n,e),this.add(this.instancedMesh),a.makeScale(0,0,0),o.set("white");for(let t=0;t<e;t++)this.instancedMesh.setMatrixAt(t,a),this.instancedMesh.setColorAt(t,o)}}A.shared={geometry:new r.WBB(.005,12),material:new r.V9B,matrix:new r.kn4().makeScale(0,0,0),color:new r.Q1f("white")};class k extends r.YJl{onTick(e){}earthRaycast(e){var t;let n=e.clone().applyMatrix4(this.matrixWorld.clone().invert()).intersectSphere(new r.iyt(new r.Pq0,1),new r.Pq0);return null!=(t=null==n?void 0:n.applyMatrix4(this.matrixWorld))?t:null}addSphericalSpot(e){let{phi:t,theta:n,color:a="white"}=e;this.parts.miniSpots.addSpot(P({phi:t,theta:n,radius:1}),a);let r=new j;r.degree=8,r.color.set(a);let o=[P({phi:t,theta:n,radius:1})],i=n,s=t;for(let e=0;e<12;e++){let t=(0,w.lerp)(2,5,e/12);o.push(P({theta:i,phi:s,radius:t})),i=(0,w.lerp)(i,0,.5),s+=-.65}return r.setControlPoints(o),r}constructor(){super(),this.uniforms={uTime:c.Rv.get("three").uTime,uSpherize:{value:1},uSunPosition:{value:new r.Pq0(.5,.7,.3)},uSide:{value:0}},this.userData=function(e,t){for(let[n,a]of Object.entries(t)){let[t,r="value"]=a.bind;Object.defineProperty(e,n,{enumerable:!0,get:()=>t[r],set:e=>t[r]=e}),a.meta&&Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,get:()=>a.meta})}return e}({},{spherize:{bind:[this.uniforms.uSpherize,"value"],meta:"Slider(0, 1)"}}),this.parts={miniSpots:new A,back:null,front:null},this.sphericalSpots=[];let e=b.load("images/blank-world-map-alt.png"),{uniforms:t}=this,n=new r.V9B({map:e,transparent:!0,side:r.$EB,depthWrite:!1});n.onBeforeCompile=e=>x.b.with(e).uniforms(t).varying({vWorldNormal:"vec3",vWorldPosition2:"vec3"}).vertex.replace("begin_vertex","\n        float tx = position.x;\n        float ty = position.y;\n\n        vec3 transformed;\n        vec3 normal;\n        if (uSpherize < 0.001) {\n          transformed = vec3(tx * 2.0, ty, 0.0) * PI;\n          normal = vec3(0.0, 0.0, 1.0);\n        } else {\n          float r = 1.0 / uSpherize;\n          float phi = tx * PI * 2.0 * uSpherize - PI * 0.5;\n          float theta = ty * PI * uSpherize;\n          float x = cos(theta) * cos(phi);\n          float z = cos(theta) * -sin(phi);\n          float y = sin(theta);\n          transformed = vec3(x, y, z - 1.0) * r + vec3(0.0, 0.0, uSpherize);\n          normal = vec3(x, y, z);\n        }\n        vWorldNormal = normalize(mat3(modelMatrix) * normal);\n        vWorldPosition2 = (modelMatrix * vec4(transformed, 1.0)).xyz;\n      ").vertex.mainAfterAll("\n      ").fragment.top(g.H,v.I).fragment.mainBeforeAll("\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n\n        vec3 viewDir = normalize(cameraPosition - vWorldPosition2);\n        float cosTheta = dot(normalize(vWorldNormal * uSide), viewDir);\n        float fresnelBias = 0.1;\n        float fresnelPower = 3.0;\n        float fresnel = fresnelBias + (1.0 - fresnelBias) * pow(1.0 - cosTheta, fresnelPower);\n      ").fragment.replace("map_fragment","\n        #ifdef USE_MAP\n          vec2 uv = vMapUv;\n          float r = uv.y * 2.0;\n          if (r > 1.0) r = 2.0 - r;\n          r = 1.0 - r;          \n\n          float a = 0.0;\n          a += pow(r, 2.4) * 0.205;\n          a += pow(r, 10.0) * 0.03;\n          float x = uv.x;\n          \n          float padding = 0.005;\n          uv.x = mix(padding + a, 1.0 - padding - a, x);\n          // uv.x = 1.0 - uv.x;\n          vec4 sampledDiffuseColor = texture2D(map, uv);\n\n          diffuseColor.rgb *= vec3(mix(0.75, 1.0, light));\n          float alpha = (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) > 0.1 ? 1.0 : 0.0;\n          diffuseColor.a *= alpha + fresnel * 1.2;\n          // diffuseColor.rgb = vec3(fresnel);\n          // diffuseColor.rgb = vWorldNormal;\n          // diffuseColor.a = 1.0;\n        #endif\n      ");let a=new r.bdM(1,1,256,128);(0,m.mj)(this,{name:"earth"});let o=(0,m.mj)(new r.eaF(a,n),{parent:this,name:"back"});o.onBeforeRender=()=>{t.uSide.value=-1,n.color.set("#cdcdcd"),n.side=r.hsX,n.needsUpdate=!0},this.parts.back=o;let i=(0,m.mj)(new r.eaF(a,n),{parent:this,name:"front"});i.onBeforeRender=()=>{t.uSide.value=1,n.color.set("#ffffff"),n.side=r.hB5,n.needsUpdate=!0},this.parts.front=i,(0,m.mj)(new r.eaF(new r.bdM,n),{parent:this,y:-1.5,scaleX:3,visible:!1}),(0,m.mj)(new d.R,{parent:this}).circle({radius:1.04}).draw(),_.c.seed(123);let s=[...y.map(e=>this.addSphericalSpot({...e,color:_.c.pick(T)})),...y.filter(()=>_.c.chance(.8)).map(e=>{let{phi:t,theta:n}=e;return t+=.04*_.c.around(),n+=.04*_.c.around(),this.addSphericalSpot({phi:t,theta:n,color:_.c.pick(T)})})];this.add(...s.map(e=>new S(e.points,{color:e.color})));let l=new M(s);this.add(l),this.add(this.parts.miniSpots)}}k.sphericalCoordinates={paris:{theta:.9426432714835036,phi:1.7045171372513754}};class I extends r.eaF{constructor(){let e=new r.V9B({color:"#cccccc",side:r.hsX}),t={uResolution:{value:new r.I9Y}};e.onBeforeCompile=e=>x.b.with(e).uniforms(t).fragment.replace("map_fragment","\n        vec2 p = gl_FragCoord.xy / uResolution * 2.0 - 1.0;\n        float aspect = uResolution.x / uResolution.y;\n        p *= aspect > 1.0 ? vec2(1.0, 1.0 / aspect) : vec2(aspect, 1.0);\n        float alpha = 1.0 - length(p);\n        diffuseColor.rgb *= mix(0.8, 1.4, alpha);\n      "),super(new r.WBB(40,12),e),this.onBeforeRender=e=>{e.getSize(t.uResolution.value).multiplyScalar(e.getPixelRatio())}}}class B extends r.ONl{constructor(e=5e3){let t=new r.LoY,n=new Float32Array(3*e),a=new Float32Array(e),o=new r.Pq0;for(let t=0;t<e;t++)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Pq0,t=2*Math.random()*Math.PI,n=Math.acos(2*Math.random()-1);return e.x=Math.sin(n)*Math.cos(t),e.y=Math.sin(n)*Math.sin(t),e.z=Math.cos(n),e})(o).multiplyScalar(36).toArray(n,3*t),a[t]=_.c.between(.2,.5);t.setAttribute("position",new r.qtW(n,3)),t.setAttribute("instanceSize",new r.qtW(a,1));let i=new r.BH$({color:"#ffffff"});i.onBeforeCompile=e=>x.b.with(e).vertex.top("\n        attribute float instanceSize;\n      ").vertex.mainAfterAll("\n        gl_PointSize *= instanceSize;\n      ").fragment.mainBeforeAll("\n        float dist = length(gl_PointCoord - 0.5);\n        if (dist > 0.5) discard;\n      "),super(t,i)}}class F extends r.YJl{constructor(...e){super(...e),this.parts={sphere:(0,m.mj)(new I,this),stars:(0,m.mj)(new B,this)}}}class O extends r.YJl{constructor(...e){super(...e),this.parts={ambient:(0,m.mj)(new r.$p8(0xffffff,1.5),this),directional:(0,m.mj)(new r.ZyN(0xffffff,1.5),this)}}}class R extends r.YJl{constructor(...e){super(...e),this.parts={sky:(0,m.mj)(new F,this),earth:(0,m.mj)(new k,this),lights:(0,m.mj)(new O,this),grid:(0,m.mj)(new h.P({size:[20,20]}),{parent:this,visible:!1})}}}class D{initialize(e,t){return this.initialized?console.warn("Pointer already initialized."):(this.initialized=!0,this.destroyables.push(...this.doInitialize(e,t))),this}*doInitialize(e,t){yield(0,s.s)(e,{onChange:n=>{this.screen.position.copy(n.position);let a=e.getBoundingClientRect(),{x:r,y:o}=n.position;r-=a.left,o-=a.top,r/=a.width,o/=a.height,r=2*r-1,o=-(2*o-1),this.ndc.position.set(r,o),this.raycaster.setFromCamera(this.ndc.position,t)},onDown:()=>{this.screen.positionDown.copy(this.screen.position),this.ndc.positionDown.copy(this.ndc.position)}})}constructor(){this.screen={position:new r.I9Y,positionDown:new r.I9Y},this.ndc={position:new r.I9Y,positionDown:new r.I9Y},this.raycaster=new r.tBo,this.destroyables=[],this.initialized=!1}}function L(){return(0,o.yk)(function*(e){let t=new R;e.scene.add(t),yield()=>{t.clear().removeFromParent()},e.ticker.set({minActiveDuration:100});let n=new D;n.initialize(e.renderer.domElement,e.camera);let a=new l.n({perspective:.25,size:4});a.start(e.renderer.domElement),yield(0,c.xy)("three",()=>{a.update(e.camera,e.aspect)}),yield(0,s.s)(e.renderer.domElement,{onTap:()=>{let e=t.parts.earth.earthRaycast(n.raycaster.ray);if(e){let{x:n,y:a,z:r}=e,o=Math.atan2(a,Math.sqrt(n**2+r**2)),i=Math.atan2(r,n);t.parts.earth.addSphericalSpot({theta:o,phi:i})}}}),yield(0,i.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]),Object.assign(window,{poc1:t,three:e,controls:a})},"always"),null}function N(){return(0,o.yk)(function*(e){(0,p.O)(e),b.setPath(u.$.assets()),console.log("Assets config.assetsPath: ".concat(u.$.assets()))},[]),null}function Y(){return(0,a.jsxs)("div",{className:"layer thru",children:[(0,a.jsxs)(o.uB,{children:[(0,a.jsx)(N,{}),(0,a.jsx)(f,{}),(0,a.jsx)(L,{})]}),(0,a.jsx)("header",{className:"absolute thru w-full top-0 p-8",children:(0,a.jsx)("img",{width:100,src:u.$.assets("images/acme-logo.png"),alt:""})}),(0,a.jsx)("footer",{className:"absolute thru w-full bottom-0 p-12 flex flex-row justify-center"}),(0,a.jsx)("div",{className:"layer thru",children:(0,a.jsx)("div",{className:"absolute left-0 top-0 w-[300px] h-full"})})]})}},87381:(e,t,n)=>{n.d(t,{$z:()=>function* e(t,n){let{includeSelf:a}={...l,...n};for(let n of(a&&(yield t),t.children))yield*e(n,{includeSelf:!0})},DN:()=>i,mj:()=>o,rd:()=>s});var a=n(61567),r=n(90927);function o(e,t,n){return t&&((0,a.Th)(t)?t.add(e):(0,r.N)(e,t)),null==n||n(e),e}let i=o;function s(e,t){let n=t;for(;n.parent;){if(n.parent===e)return!0;n=n.parent}return!1}let l={includeSelf:!1}},90927:(e,t,n)=>{n.d(t,{N:()=>l});var a=n(49797),r=n(22641);new a.Pq0(0,0,0),new a.O9p(0,0,0,"XYZ"),new a.Pq0(1,1,1);let o={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,pivot:void 0,visible:void 0,name:void 0,parent:void 0,userData:void 0},i=new a.dwI,s=new a.Pq0;function l(e,t){let{x:n,y:l,z:c,position:u=new a.Pq0(n,l,c),rotationX:p,rotationY:f,rotationZ:h,rotationOrder:m,rotationUnit:d,rotation:x,scaleX:v,scaleY:g,scaleZ:w,scaleScalar:_,scale:y=new a.Pq0(v,g,w).multiplyScalar(_),pivot:b,visible:P,name:S,parent:M,userData:C}={...o,...t};return(0,r.jj)(u,e.position),(0,r.if)(null!=x?x:[p,f,h,m,d],e.rotation),(0,r.jj)(y,e.scale),void 0!==b&&(e.updateMatrix(),i.setFromMatrix4(e.matrix),(0,r.jj)(b,s).applyMatrix3(i),e.position.sub(s)),void 0!==P&&(e.visible=P),void 0!==S&&(e.name=S),void 0!==M&&M!==e.parent&&(null===M?e.removeFromParent():M.add(e)),void 0!==C&&Object.assign(e.userData,C),e}}}]);