"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{8597:(t,e,o)=>{o.d(e,{Bg:()=>r,Dm:()=>a,NP:()=>i,OZ:()=>n,RY:()=>p,gc:()=>g,mj:()=>f,rU:()=>l,uJ:()=>u,xO:()=>w});var s=o(49797);let i=6,r=4,n=new s.Pq0(i,r,i+r-1),l=[new s.Pq0(0,0,r),new s.Pq0(0,r,0),new s.Pq0(i,0,r+i-1),new s.Pq0(i,r,i)],a=new s.Pq0(0,-2*r,2*r),c=new s.Pq0(1,0,1).normalize(),h=new s.Pq0(0,1,-1).normalize(),d=new s.Pq0().crossVectors(c,h).normalize();h.crossVectors(d,c).normalize();let u={U:c,V:h,W:d},p=new s.kn4().makeBasis(c,h,d).setPosition(a),f=new s.kn4().copy(p).invert(),w=new s.O9p().setFromRotationMatrix(p),g=new s.Zcv().setFromNormalAndCoplanarPoint(d,a)},10937:(t,e,o)=>{o.d(e,{k:()=>c});var s=o(49797),i=o(38921);let r={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white"},n=new s.Q1f;function l(t){let{axis:e,length:o,radius:l,radialSegments:a,coneRatio:c,radiusScale:h,vertexColor:d,baseCap:u,color:p}={...r,...t},f=l*h,w=o*c,g=new s.qFE(3*f,w,a),m=new s.Ho_(f,f,1,a,1,!0),x=o-w,y=o-.5*w;g.rotateZ(-Math.PI/2).translate(y,0,0),m.scale(1,x,1).rotateZ(-Math.PI/2).translate(.5*x,0,0);let C="none"===u?new s.LoY:"flat"===u?new s.tcD(f,a).rotateY(-Math.PI/2):new s.Gu$(f,a,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),P=(0,i.pP)([g,m,C]);switch(e){case"y":P.rotateZ(Math.PI/2);break;case"z":P.rotateY(-Math.PI/2)}if(d){let t=P.attributes.position.count,e=new s.THS(new Float32Array(3*t),3);P.setAttribute("color",e),n.set(p);for(let o=0;o<t;o++)e.setXYZ(o,n.r,n.g,n.b)}return P}s.LoY;let a={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class c extends s.LoY{static get defaultOptions(){return{...a}}constructor(t){super();let{xColor:e,yColor:o,zColor:s,...r}={...a,...t},n=l({...r,axis:"x",color:e}),c=l({...r,axis:"y",color:o}),h=l({...r,axis:"z",color:s}),d=(0,i.pP)([n,c,h]);this.copy(d),d.dispose()}}},23120:(t,e,o)=>{o.d(e,{hB:()=>p,hf:()=>x});var s=o(49797),i=o(22641),r=o(7717),n=o(9723),l=o(66851),a=o(87381),c=o(72612),h=o(17099),d=o(8597);function u(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.Pq0;return o.set(t,e,t-e)}function p(){let t;for(var e,o,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];let l=0,a=0;if("number"==typeof r[0])[l,a]=r,t=null!=(e=r[3])?e:new s.I9Y;else{let[e]=r;l=e.x,a=e.y,t=null!=(o=r[1])?o:new s.I9Y}let c=-Math.log2((a/d.Bg+1)/2)-1,h=.5**c,u=l/(d.NP*h);return t.set(u,c)}function f(t,e,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{x:i,y:r,z:n}=e,l=i+o,a=r+o,c=n+o;for(let e=n;e<c;e++)for(let o=r;o<a;o++)for(let r=i;r<l;r++)t.getVoxelState(r,o,e+4*d.Bg).setInt8(0,s)}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=d.OZ.clone().multiplyScalar(4/e),i=[];for(let r of(0,c.loop3)(o)){let o=r.x*e,n=r.y*e,l=r.z*e;(function(t,e,o,s){var i,r,n,l,a,c;let h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!!(t.getVoxelState(e,o,s).getInt8(0)>0)&&!((null!=(l=null==(i=t.tryGetVoxelState(e-h,o,s))?void 0:i.getInt8(0))?l:0)>0)&&!((null!=(a=null==(r=t.tryGetVoxelState(e,o+h,s))?void 0:r.getInt8(0))?a:0)>0)&&!((null!=(c=null==(n=t.tryGetVoxelState(e,o,s+h))?void 0:n.getInt8(0))?c:0)>0)})(t,o,n,l,e)&&h.c.chance(1-r.py)&&i.push(new s.Pq0(o,n,l))}return i}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=d.OZ.clone().multiplyScalar(4/e),i=[];for(let r of(0,c.loop3)(o)){let o=r.x*e,n=r.y*e,l=r.z*e;(function(t,e,o,s){var i,r,n,l,a,c;let h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!(t.getVoxelState(e,o,s).getInt8(0)>0)&&!!((null!=(l=null==(i=t.tryGetVoxelState(e+h,o,s))?void 0:i.getInt8(0))?l:0)>0)&&!!((null!=(a=null==(r=t.tryGetVoxelState(e,o-h,s))?void 0:r.getInt8(0))?a:0)>0)&&!!((null!=(c=null==(n=t.tryGetVoxelState(e,o,s-h))?void 0:n.getInt8(0))?c:0)>0)})(t,o,n,l,e)&&h.c.chance(1-r.py)&&i.push(new s.Pq0(o,n,l))}return i}let m=new s.Pq0;new s.Pq0;class x extends s.eaF{createDots(){let t=new s.ZLX(new s.WBB(.1,8),new n.Y,4);for(let[e,o]of((0,a.mj)(t,this),d.rU.entries()))t.setMatrixAt(e,(0,l.w)({position:o})),t.setColorAt(e,(0,l._)("#ffffff"));return this.dots=t,this}updateDots(t){this.dots||this.createDots();let e=this.dots;for(let[o,s]of d.rU.entries()){e.setMatrixAt(o,(0,l.w)({position:s}));let i=t.isWithin(s)?"#00ffa6":"#ff0000";e.setColorAt(o,(0,l._)(i))}e.instanceMatrix.needsUpdate=!0,e.instanceColor.needsUpdate=!0}get gridCoords(){return this._gridCoords}setGridCoords(t){(0,i.wX)(t,this._gridCoords);let{x:e,y:o}=this._gridCoords;this.scale.setScalar(.5**o),function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.Pq0,i=.5**e,r=t*d.NP*i,n=d.Bg*(.5*i*2-1),l=t*d.NP*i+2*d.Bg*(1-i);o.set(r,n,l)}(e,o,this.position)}toWhite(){this.material.color.set(0xffffff)}toColor(){this.material.color.set(this.color)}constructor({world:t=null,color:e=0xffffff*h.c.random()}={}){let o=Math.ceil(d.NP*d.Bg*4.8),i=new r.AA(o,1);for(let{x:t,y:e}of(0,c.loop2)(d.NP,d.Bg))u(t,e,m).multiplyScalar(4),f(i,m,4);for(let t=0;t<d.NP;t+=2)u(t,d.Bg-1,m).add(new s.Pq0(1,0,0)).multiplyScalar(4),f(i,m,4),h.c.chance(.8)&&(u(t,d.Bg-1,m).add(new s.Pq0(1,1,0)).multiplyScalar(4),f(i,m,4));{let t=g(i,2),e=w(i,2);for(let e of t)f(i,e,2,1);for(let t of e)f(i,t,2,0)}{let t=g(i,1),e=w(i,1);for(let e of t)h.c.chance(.25)&&f(i,e,1,1);for(let t of e)h.c.chance(.25)&&f(i,t,1,0)}console.time("geometry");let l=(0,r.Cx)(i.voxelFaces());console.timeEnd("geometry");l.scale(.25,.25,.25);let p=new n.Y({color:e});super(l,new n.Y({color:e,side:s.$EB})),this._gridCoords=new s.I9Y,this.world=null,this.dots=null,(0,a.mj)(new s.eaF(l,p),this),(0,a.mj)(new s.IzY,this),this.chunk=i,this.color=e,this.world=t}}},50411:(t,e,o)=>{o.d(e,{Main:()=>U});var s,i=o(70691),r=o(25432),n=o(6697),l=o(64857),a=o(72612),c=o(79285),h=o(63126),d=o(28737),u=o(49797),p=o(72598),f=o(48083),w=o(39787),g=o(36508),m=o(31107),x=o(56647),y=o(87381),C=o(44694),P=o(8597);class v extends u.YJl{static current(){if(0===this.instances.length)throw Error("No Scope!");return this.instances[this.instances.length-1]}updateScope(){let{aspect:t=1,size:e=4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t>1?e:e*t,s=o/t;(o!==this.state.width||s!==this.state.height)&&(this.parts.lines.clear().circle({radius:1}).rectangle([-o/2,-s/2,o,s]).plus([0,0],.2).draw(),this.parts.lines.geometry.computeBoundingSphere(),this.state.width=o,this.state.height=s)}isWithin(t){let{x:e,y:o}=t.clone().applyMatrix4(this.matrixWorldInverse),{width:s,height:i}=this.state;return e>=-s/2&&e<=s/2&&o>=-i/2&&o<=i/2}chunkIntersects(t){this.updateMatrixWorld(),t.updateMatrixWorld();let e=!0,o=!0,s=!0,i=!0,r=this.state.width/2,n=this.state.height/2;for(let l=0;l<4;l++){let{x:a,y:c,z:h}=v._chunkIntersectsVectors[l].copy(P.rU[l]).applyMatrix4(t.matrixWorld).applyMatrix4(this.matrixWorldInverse);if(e&&(e=a<-r),s&&(s=a>r),o&&(o=c<-n),i&&(i=c>n),!1===(e||o||s||i))return!0}return!1}toVertigoProps(){let{width:t,height:e}=this.state;return{perspective:.5,size:[t,e],focus:this.position,rotation:this.rotation}}constructor(){super(),this.parts={lines:(0,y.mj)(new x.R,this),debugLines:(0,y.mj)(new x.R,this)},this.state={width:4,height:4},this.matrixWorldInverse=new u.kn4,this.destroy=()=>{let t=v.instances.indexOf(this);if(-1===t)throw Error("Scope instance not found");v.instances.splice(t,1)},v.instances.push(this),this.position.set(0,0,6),this.rotation.setFromRotationMatrix(P.RY,m.B.default.rotation.order),this.rotation.x+=(0,C.ey)("20deg"),this.updateMatrix(),this.updateMatrixWorld(),this.matrixWorldInverse.copy(this.matrixWorld).invert()}}v.instances=[],v._chunkIntersectsVectors=[new u.Pq0,new u.Pq0,new u.Pq0,new u.Pq0];var k=o(10937),S=o(9723),M=o(23120);function Y(t,e){if(t<-32768||t>=32768||e<-32768||e>=32768)throw RangeError("x and y must be in the range -0x8000 to 0x7fff, received: ".concat(t," (0x").concat(t.toString(16),"), ").concat(e," (0x").concat(e.toString(16),")"));return(t+=32768)<<16|(e+=32768)}let j=new u.I9Y;function*I(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];let[s,i]=(()=>{if(1!==e.length)return e;{let{x:t,y:o}=(0,C.wX)(e[0]);return[t,o]}})();yield j.set(Math.floor((s-1)/2),i-1),yield j.set(Math.floor((s+1)/2),i-1),yield j.set(s-1,i),yield j.set(s+1,i),yield j.set(2*s-1,i+1),yield j.set(2*s,i+1),yield j.set(2*s+1,i+1),yield j.set(2*s+2,i+1)}class b extends u.YJl{drawCircles(){let{count:t=1,step:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let o=1;o<t;o++){let t=1+o*e;(0,y.mj)(new u.DXC(this.parts.circles.geometry,this.parts.circles.material),{parent:this,scaleScalar:t})}return this}constructor(...t){super(...t),this.parts=(()=>{let t=new x.R;t.circle({radius:1,color:k.k.defaultOptions.zColor}).circle({radius:1,color:k.k.defaultOptions.xColor,transform:{rotationY:"90deg"}}).circle({radius:1,color:k.k.defaultOptions.yColor,transform:{rotationX:"90deg"}}).draw();let e=new u.eaF(new k.k,new S.Y({vertexColors:!0}));return{axes:(0,y.mj)(e,this),circles:(0,y.mj)(t,this)}})()}}class N extends u.YJl{static current(){if(0===this.instances.length)throw Error("No World!");return this.instances[this.instances.length-1]}scopeUpdate(t){let e=(0,h.calculateExponentialDecayLerpRatio)(1e-4,t);this.dampedScopeCoordinates.lerp(this.scopeCoordinates,e);let{x:o,y:s}=this.dampedScopeCoordinates;this.scope.position.set(0,0,6).addScaledVector(P.uJ.U,o),this.worldScale=2**(.33*s),this.setChunkGroupScale(this.worldScale)}getChunk(t,e){var o;return null!=(o=this.chunks.get(Y(t,e)))?o:null}ensureChunk(t,e){let o=Y(t,e),s=this.chunks.get(o);if(s)return s;{let o=(0,y.mj)(new M.hf({world:this}),this.chunkGroup);return this.chunks.set(Y(t,e),o),o.setGridCoords([t,e]),o}}ensureChunkNeighbors(t,e){for(let o of(this.ensureChunk(t,e),I(t,e)))this.ensureChunk(o.x,o.y)}ensureScopeChunks(){let t=new Set([Y(0,0)]),e=[this.ensureChunk(0,0)],o=0;for(;e.length>0;){if(o++>100){console.error("Exceeded maximum chunk count of ".concat(100));break}let s=e.pop();if(this.scope.chunkIntersects(s))for(let o of I(s.gridCoords)){let s=Y(o.x,o.y);t.has(s)||(t.add(s),e.push(this.ensureChunk(o.x,o.y)))}}}toWhite(){for(let t of this.chunks.values())t.toWhite()}toColor(){for(let t of this.chunks.values())t.toColor()}constructor(){super(),this.origin=(0,y.mj)(new u.IzY,{parent:this,position:P.Dm,rotation:P.xO}),this.chunkGroup=(0,y.mj)(new u.YJl,{parent:this}),this.scopeCoordinates=new u.I9Y,this.dampedScopeCoordinates=new u.I9Y,this.worldScale=1,this.scopeOriginPoint=new u.Pq0,this.scopeCenterChunkPoint=new u.Pq0,this.scope=(0,y.mj)(new v,this),this.XXX=(0,y.mj)(new b,this.chunkGroup),this.YYY=new u.I9Y,this.setChunkGroupScale=(()=>{let t=new u.kn4;return e=>{var o;this.scopeCenterChunkPoint.copy(this.scope.position).applyMatrix4(P.mj),this.scopeOriginPoint.set(this.scopeCenterChunkPoint.x,0,0).applyMatrix4(P.RY),this.chunkGroup.position.copy(this.scopeOriginPoint).addScaledVector(this.scopeOriginPoint,-e),this.chunkGroup.scale.setScalar(e),this.chunkGroup.updateMatrix(),this.XXX.position.copy(this.scope.position).applyMatrix4(P.mj),this.XXX.position.z=0,this.XXX.position.applyMatrix4(P.RY).applyMatrix4(t.copy(this.chunkGroup.matrix).invert());let{x:s,y:i}=(0,M.hB)(this.XXX.position,this.YYY);s=Math.round(s-.5),i=Math.round(i+.5),this.toWhite(),null==(o=this.getChunk(s,i))||o.toColor()}})(),this.chunks=new Map,this.destroy=()=>{this.scope.destroy(),this.chunks.clear(),this.clear();let t=N.instances.indexOf(this);if(-1===t)throw Error("World instance not found");N.instances.splice(t,1)},N.instances.push(this)}}N.instances=[];var B=function(t){return t[t.Free=0]="Free",t[t.Scope=1]="Scope",t}(B||{});class V{initialize(t){return this.element=t,this}*doStart(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!=(s=this.element)?s:document.body;yield(0,p.s)(t,{onDrag:t=>{let e=N.current();e.scopeCoordinates.x+=-(.005*t.delta.x)/e.worldScale,e.scopeCoordinates.y+=-(.01*t.delta.y)}}),yield(0,g.xy)("three",t=>{let e=N.current();e.scopeUpdate(t.deltaTime);let o=e.scope.position;this.vertigoControls.vertigo.set({focus:o}),this.vertigoControls.dampedVertigo.set({focus:o})})}start(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];this._started||(this._destroyables.collect(this.doStart(...e)),this._started=!0)}stop(){this._started&&(this._destroyables.destroy(),this._started=!1)}toggle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._started;t?this.start():this.stop()}update(t,e,o){this.vertigoControls.update(t,e,o)}constructor(){this.position=new u.I9Y,this.dampedPosition=new u.I9Y,this.scale=1,this._destroyables=new w.e,this.vertigoControls=new f.n({perspective:.5}),this._started=!1,this.destroy=()=>{this._destroyables.destroy()}}}class q{get mode(){return this._mode}set mode(t){this.setMode(t)}initialize(t,e){this.camera=t,this.freeVertigoControls.initialize(e).toggle(0===this._mode),this.scopeCameraHandler.initialize(e).toggle(1===this._mode);let o=v.current().toVertigoProps();return this.scopeCameraHandler.vertigoControls.vertigo.set(o),this.scopeCameraHandler.vertigoControls.dampedVertigo.set(o),this}setMode(t){if(t%=2,this._mode!==t)switch(this._mode=t,this.freeVertigoControls.toggle(0===t),this.scopeCameraHandler.toggle(1===t),t){case 0:this.mode=q.Mode.Free,this.freeVertigoControls.dampedVertigo.copy(this.scopeCameraHandler.vertigoControls.dampedVertigo);break;case 1:this.mode=q.Mode.Scope,this.scopeCameraHandler.vertigoControls.dampedVertigo.copy(this.freeVertigoControls.dampedVertigo),this.scopeCameraHandler.vertigoControls.vertigo.set(v.current().toVertigoProps())}}onTick(t,e){switch(this._mode){case 0:this.freeVertigoControls.update(this.camera,e,t.deltaTime),console.log();break;case 1:this.scopeCameraHandler.update(this.camera,e,t.deltaTime)}}constructor(){this._mode=0,this.freeVertigoControls=new f.n({size:24,perspective:1}),this.scopeCameraHandler=new V,this.destroy=()=>{this.freeVertigoControls.destroy(),this.scopeCameraHandler.destroy();let t=q.instances.indexOf(this);if(-1===t)throw Error("CameraHandler instance not found");q.instances.splice(t,1)},q.instances.push(this)}}q.Mode=B,q.instances=[];var _=o(82091),z=o(17099);function O(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.IUQ,s=2**e,i=2*(1-1/s),r=1/s;return o.x=t*P.NP*r,o.y=-P.Bg*i,o.z=P.Bg*i+t*P.NP*r,o.w=r,o}class W extends u.YJl{updatePointer(t){let e=t.intersectPlane(P.gc,new u.Pq0);if(!e)return;let{text:o,pointerText:s}=this.internal,i=function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.I9Y;return o.y=Math.floor(-Math.log2(1- -e/P.Bg/2)),o.x=Math.floor(t/P.NP*2**o.y),o}(e.x,e.y);if(Number.isNaN(i.x)||Number.isNaN(i.y))return;let r=1/2**function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new u.I9Y,s=1- -e/P.Bg/2;return o.y=-Math.log2(s),o.x=t/(P.NP*s),o}(e.x,e.y,new u.I9Y).y;for(let t of this.internal.positions){let e=t.x===i.x&&t.y===i.y?"#ffff66":"white";o.data.setColorAt(t.i+1,{backgroundColor:e})}o.material.needsUpdate=!0,s.setTextAt(0,"".concat(i.x,",").concat(i.y),{textColor:"#ffff66",textOpacity:0,backgroundColor:"#ffff66",backgroundOpacity:1,position:e,size:3*r});let n=O(i.x,i.y);this.internal.pointerLine.clear().line(e,[n.x,n.y,n.z],{color:"#ffff66"}).draw()}constructor(...t){super(...t),this.internal=(()=>{let t=[new u.Pq0(0,0,0),new u.Pq0(0,-P.Bg,P.Bg),new u.Pq0(P.NP,-P.Bg,P.NP+P.Bg),new u.Pq0(P.NP,0,P.NP)],e=(0,y.mj)(new x.R,this);for(let o=0;o<12;o++){let s=2**o,i=2*(1-1/s),r=1/s,n=new u.Pq0(0,-P.Bg*i,P.Bg*i);e.polygon(t.map(t=>t.clone().multiplyScalar(r).add(n)))}e.polyline([[0,0,0],P.Dm]),e.draw(),(0,y.mj)(new u.eaF(new k.k,new S.Y({vertexColors:!0})),{parent:this,position:P.Dm,rotation:P.xO});let o=(0,a.loop2Array)(4,8),s=(0,y.mj)(new l.w({lineCount:1,lineLength:14}),this),i=(0,y.mj)(new x.R(100),this);for(let t of o){let{x:e,y:o,z:i,w:r}=O(t.x,t.y);s.setTextAt(t.i+1,"".concat(t.x,",").concat(t.y),{textColor:"white",textOpacity:0,backgroundColor:"white",backgroundOpacity:1,position:[e,o,i],size:2*r})}return{positions:o,text:s,pointerText:(0,y.mj)(new l.w({lineCount:2,lineLength:16}),this),pointerLine:i}})()}}var X=o(67203),E=o(7587);o(90927);let F=(0,X.createContext)(null);function R(t,e){let o=(0,X.useContext)(F);return(0,E.C7)(async function*(e,s){if(t){let e=t(o,s);if(e&&"function"==typeof e.next)do{let{value:t,done:o}=await e.next();if(o)break;yield t}while(s.mounted)}},null!=e?e:"always"),o}let G={className:"",assetsPath:"/"};function A(t){let{children:e,className:o,assetsPath:s}={...G,...t},r=(0,X.useMemo)(()=>new n.XW,[]);r.loader.setPath(s);let{ref:l}=(0,E.IZ)({debounce:!0},function*(t,e){yield r.initialize(t.firstElementChild),e.triggerRender(),Object.assign(window,{three:r})},[]);return(0,i.jsx)("div",{ref:l,className:o,style:{position:"absolute",inset:0},children:(0,i.jsxs)(F.Provider,{value:r,children:[(0,i.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,i.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:r.initialized&&e})]})})}function D(t){return function(){let[t,e]=(0,X.useState)(!1);return(0,X.useLayoutEffect)(()=>{e(!0)},[]),t}()&&(0,i.jsx)(A,{...t})}function H(){return!function(t,e,o){let s=(0,X.useMemo)(()=>new u.YJl,[]);s.name=t,R(async function*(t,o){if(t.scene.add(s),yield()=>{s.clear(),s.removeFromParent()},e){let i=e(s,t,o);if(i&&"function"==typeof i.next)do{let{value:t,done:e}=await i.next();if(e)break;yield t}while(o.mounted)}},o)}("fractal-grid",function*(t,e){var o;(0,y.mj)(new _.N({color:"#110512"}),t),(0,y.mj)(new x.R,t).grid2().draw();let s=(0,y.mj)(new W,t);(0,y.mj)(new u.eaF(new u.UPV(2.5,.025,512,32),new S.Y({color:"#0cf"})),t).visible=!1,z.c.seed(98763);let i=(0,y.mj)(new N,t);yield i.destroy,i.visible=!1,i.scope.updateScope({aspect:e.aspect}),i.ensureScopeChunks();let r=new q().initialize(e.camera,e.renderer.domElement),n=new u.Pq0,l=(0,y.mj)(new u.eaF(new u.WBB(.1),new S.Y({color:"#f0f"})),t);yield(0,g.xy)("three",t=>{r.onTick(t,e.aspect),i.scope.updateScope({aspect:e.aspect}),e.pointer.ray.intersectPlane(P.gc,n),l.position.copy(n),s.updatePointer(e.pointer.ray)}),i.toColor(),null==(o=i.getChunk(0,0))||o.toWhite(),Object.assign(window,{world:i,cameraHandler:r}),(0,y.mj)(new u.eaF(new k.k,new S.Y({vertexColors:!0})),t)},[]),null}function L(){return R(function*(t){let e=new r.F(t.scene,t.camera);e.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:2,radiusExponent:2,rings:2,samples:24}),yield t.pipeline.addPass(e,{type:n.O0.PostProcessing}),(0,d.O)({three:t,...a,TextHelper:l.w,calculateExponentialDecayLerpRatio:h.calculateExponentialDecayLerpRatio,calculateExponentialDecayLerpRatio2:h.calculateExponentialDecayLerpRatio2,lerp:c.lerp})},[]),null}function U(){return(0,i.jsx)("div",{className:"FractalGrid",children:(0,i.jsxs)(D,{children:[(0,i.jsxs)("div",{className:"layer thru flex flex-col p-4 gap-2 items-start",children:[(0,i.jsx)("h1",{className:"text-2xl",children:"FractalGrid"}),(0,i.jsx)("button",{className:"border border-white px-2 py-1 rounded",onClick:()=>q.instances[0].mode++,children:"Switch camera"})]}),(0,i.jsx)(L,{}),(0,i.jsx)(H,{})]})})}},64857:(t,e,o)=>{o.d(e,{w:()=>s.w});var s=o(67840)},82091:(t,e,o)=>{o.d(e,{N:()=>r});var s=o(49797);let i=new s.WBB(1,4);class r extends s.eaF{constructor(t){super(i,new s.V9B({color:"#0c529d",...t,side:s.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(t,e,o)=>{let s=(o.near+o.far)/2;this.position.copy(o.position),this.scale.setScalar(s),this.updateMatrix(),this.updateMatrixWorld()}}}}}]);