"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4512],{888:(e,t,r)=>{r.d(t,{_:()=>n});function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},5832:(e,t,r)=>{r.d(t,{Y:()=>i});var n=r(49797);class i extends n.BRH{constructor(e){super(e),this.type=n.ix0}parse(e){let t,r,i,l=function(e,t){switch(e){case 1:throw Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(t||""))}},a=function(e,t,r){t=t||1024;let n=e.pos,i=-1,l=0,a="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(i=o.indexOf("\n"))&&l<t&&n<e.byteLength;)a+=o,l+=o.length,n+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return -1<i&&(!1!==r&&(e.pos+=l+i+1),a+o.slice(0,i))},o=new Uint8Array(e);o.pos=0;let s=function(e){let t,r,n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,f={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=a(e))||l(1,"no header found"),(r=t.match(/^#\?(\S+)/))||l(3,"bad initial token"),f.valid|=1,f.programtype=r[1],f.string+=t+"\n";!1!==(t=a(e));){if(f.string+=t+"\n","#"===t.charAt(0)){f.comments+=t+"\n";continue}if((r=t.match(n))&&(f.gamma=parseFloat(r[1])),(r=t.match(i))&&(f.exposure=parseFloat(r[1])),(r=t.match(o))&&(f.valid|=2,f.format=r[1]),(r=t.match(s))&&(f.valid|=4,f.height=parseInt(r[1],10),f.width=parseInt(r[2],10)),2&f.valid&&4&f.valid)break}return 2&f.valid||l(3,"missing format specifier"),4&f.valid||l(3,"missing image size specifier"),f}(o),f=s.width,u=s.height,c=function(e,t,r){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&l(3,"wrong scanline width");let n=new Uint8Array(4*t*r);n.length||l(4,"unable to allocate buffer space");let i=0,a=0,o=4*t,s=new Uint8Array(4),f=new Uint8Array(o),u=r;for(;u>0&&a<e.byteLength;){a+4>e.byteLength&&l(1),s[0]=e[a++],s[1]=e[a++],s[2]=e[a++],s[3]=e[a++],(2!=s[0]||2!=s[1]||(s[2]<<8|s[3])!=t)&&l(3,"bad rgbe scanline format");let r=0,c;for(;r<o&&a<e.byteLength;){let t=(c=e[a++])>128;if(t&&(c-=128),(0===c||r+c>o)&&l(3,"bad scanline data"),t){let t=e[a++];for(let e=0;e<c;e++)f[r++]=t}else f.set(e.subarray(a,a+c),r),r+=c,a+=c}for(let e=0;e<t;e++){let r=0;n[i]=f[e+r],r+=t,n[i+1]=f[e+r],r+=t,n[i+2]=f[e+r],r+=t,n[i+3]=f[e+r],i+=4}u--}return n}(o.subarray(o.pos),f,u);switch(this.type){case n.RQf:let h=new Float32Array(4*(i=c.length/4));for(let e=0;e<i;e++)!function(e,t,r,n){let i=Math.pow(2,e[t+3]-128)/255;r[n+0]=e[t+0]*i,r[n+1]=e[t+1]*i,r[n+2]=e[t+2]*i,r[n+3]=1}(c,4*e,h,4*e);t=h,r=n.RQf;break;case n.ix0:let d=new Uint16Array(4*(i=c.length/4));for(let e=0;e<i;e++)!function(e,t,r,i){let l=Math.pow(2,e[t+3]-128)/255;r[i+0]=n.GxU.toHalfFloat(Math.min(e[t+0]*l,65504)),r[i+1]=n.GxU.toHalfFloat(Math.min(e[t+1]*l,65504)),r[i+2]=n.GxU.toHalfFloat(Math.min(e[t+2]*l,65504)),r[i+3]=n.GxU.toHalfFloat(1)}(c,4*e,d,4*e);t=d,r=n.ix0;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:f,height:u,data:t,header:s.string,gamma:s.gamma,exposure:s.exposure,type:r}}setDataType(e){return this.type=e,this}load(e,t,r,i){return super.load(e,function(e,r){switch(e.type){case n.RQf:case n.ix0:e.colorSpace=n.Zr2,e.minFilter=n.k6q,e.magFilter=n.k6q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,i)}}},9954:(e,t,r)=>{r.d(t,{H:()=>eE});var n=r(49797),i={},l=function(e,t,r,n,l){var a=new Worker(i[t]||(i[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,r=t.$e$;if(r){var n=Error(r[0]);n.code=r[1],n.stack=r[2],l(n,null)}else l(null,t)},a.postMessage(r,n),a},a=Uint8Array,o=Uint16Array,s=Int32Array,f=new a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u=new a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(e,t){for(var r=new o(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new s(r[30]),n=1;n<30;++n)for(var l=r[n];l<r[n+1];++l)i[l]=l-r[n]<<5|n;return{b:r,r:i}},d=h(f,2),v=d.b,p=d.r;v[28]=258,p[258]=28;for(var g=h(u,0),w=g.b,y=g.r,m=new o(32768),b=0;b<32768;++b){var E=(43690&b)>>1|(21845&b)<<1;E=(61680&(E=(52428&E)>>2|(13107&E)<<2))>>4|(3855&E)<<4,m[b]=((65280&E)>>8|(255&E)<<8)>>1}for(var S=function(e,t,r){for(var n,i=e.length,l=0,a=new o(t);l<i;++l)e[l]&&++a[e[l]-1];var s=new o(t);for(l=1;l<t;++l)s[l]=s[l-1]+a[l-1]<<1;if(r){n=new o(1<<t);var f=15-t;for(l=0;l<i;++l)if(e[l])for(var u=l<<4|e[l],c=t-e[l],h=s[e[l]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)n[m[h]>>f]=u}else for(l=0,n=new o(i);l<i;++l)e[l]&&(n[l]=m[s[e[l]-1]++]>>15-e[l]);return n},M=new a(288),b=0;b<144;++b)M[b]=8;for(var b=144;b<256;++b)M[b]=9;for(var b=256;b<280;++b)M[b]=7;for(var b=280;b<288;++b)M[b]=8;for(var C=new a(32),b=0;b<32;++b)C[b]=5;var A=S(M,9,1),U=S(C,5,1),R=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},x=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},k=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},O=function(e){return(e+7)/8|0},I=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new a(e.subarray(t,r))},z=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(e,t,r){var n=Error(t||z[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,L),!r)throw n;return n},P=function(e,t,r,n){var i=e.length,l=n?n.length:0;if(!i||t.f&&!t.l)return r||new a(0);var o=!r,s=o||2!=t.i,h=t.i;o&&(r=new a(3*i));var d=function(e){var t=r.length;if(e>t){var n=new a(Math.max(2*t,e));n.set(r),r=n}},p=t.f||0,g=t.p||0,y=t.b||0,m=t.l,b=t.d,E=t.m,M=t.n,C=8*i;do{if(!m){p=x(e,g,1);var z=x(e,g+1,3);if(g+=3,z)if(1==z)m=A,b=U,E=9,M=5;else if(2==z){var P=x(e,g,31)+257,N=x(e,g+10,15)+4,_=P+x(e,g+5,31)+1;g+=14;for(var H=new a(_),T=new a(19),D=0;D<N;++D)T[c[D]]=x(e,g+3*D,7);g+=3*N;for(var B=R(T),F=(1<<B)-1,W=S(T,B,1),D=0;D<_;){var G=W[x(e,g,F)];g+=15&G;var V=G>>4;if(V<16)H[D++]=V;else{var X=0,Y=0;for(16==V?(Y=3+x(e,g,3),g+=2,X=H[D-1]):17==V?(Y=3+x(e,g,7),g+=3):18==V&&(Y=11+x(e,g,127),g+=7);Y--;)H[D++]=X}}var Z=H.subarray(0,P),$=H.subarray(P);E=R(Z),M=R($),m=S(Z,E,1),b=S($,M,1)}else L(1);else{var V=O(g)+4,j=e[V-4]|e[V-3]<<8,q=V+j;if(q>i){h&&L(0);break}s&&d(y+j),r.set(e.subarray(V,q),y),t.b=y+=j,t.p=g=8*q,t.f=p;continue}if(g>C){h&&L(0);break}}s&&d(y+131072);for(var Q=(1<<E)-1,J=(1<<M)-1,K=g;;K=g){var X=m[k(e,g)&Q],ee=X>>4;if((g+=15&X)>C){h&&L(0);break}if(X||L(2),ee<256)r[y++]=ee;else if(256==ee){K=g,m=null;break}else{var et=ee-254;if(ee>264){var D=ee-257,er=f[D];et=x(e,g,(1<<er)-1)+v[D],g+=er}var en=b[k(e,g)&J],ei=en>>4;en||L(3),g+=15&en;var $=w[ei];if(ei>3){var er=u[ei];$+=k(e,g)&(1<<er)-1,g+=er}if(g>C){h&&L(0);break}s&&d(y+131072);var el=y+et;if(y<$){var ea=l-$,eo=Math.min($,el);for(ea+y<0&&L(3);y<eo;++y)r[y]=n[ea+y]}for(;y<el;++y)r[y]=r[y-$]}}t.l=m,t.p=K,t.b=y,t.f=p,m&&(p=1,t.m=E,t.d=b,t.n=M)}while(!p);return y!=r.length&&o?I(r,0,y):r.subarray(0,y)},N=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},_=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},H=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,l=r.slice();if(!i)return{t:V,l:0};if(1==i){var s=new a(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var f=r[0],u=r[1],c=0,h=1,d=2;for(r[0]={s:-1,f:f.f+u.f,l:f,r:u};h!=i-1;)f=r[r[c].f<r[d].f?c++:d++],u=r[c!=h&&r[c].f<r[d].f?c++:d++],r[h++]={s:-1,f:f.f+u.f,l:f,r:u};for(var v=l[0].s,n=1;n<i;++n)l[n].s>v&&(v=l[n].s);var p=new o(v+1),g=T(r[h-1],p,0);if(g>t){var n=0,w=0,y=g-t,m=1<<y;for(l.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});n<i;++n){var b=l[n].s;if(p[b]>t)w+=m-(1<<g-p[b]),p[b]=t;else break}for(w>>=y;w>0;){var E=l[n].s;p[E]<t?w-=1<<t-p[E]++-1:++n}for(;n>=0&&w;--n){var S=l[n].s;p[S]==t&&(--p[S],++w)}g=t}return{t:new a(p),l:g}},T=function(e,t,r){return -1==e.s?Math.max(T(e.l,t,r+1),T(e.r,t,r+1)):t[e.s]=r},D=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new o(++t),n=0,i=e[0],l=1,a=function(e){r[n++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++l;else{if(!i&&l>2){for(;l>138;l-=138)a(32754);l>2&&(a(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(a(i),--l;l>6;l-=6)a(8304);l>2&&(a(l-3<<5|8208),l=0)}for(;l--;)a(i);l=1,i=e[s]}return{c:r.subarray(0,n),n:t}},B=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},F=function(e,t,r){var n=r.length,i=O(t+2);e[i]=255&n,e[i+1]=n>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var l=0;l<n;++l)e[i+l+4]=r[l];return(i+4+n)*8},W=function(e,t,r,n,i,l,a,s,h,d,v){N(t,v++,r),++i[256];for(var p,g,w,y,m=H(i,15),b=m.t,E=m.l,A=H(l,15),U=A.t,R=A.l,x=D(b),k=x.c,O=x.n,I=D(U),z=I.c,L=I.n,P=new o(19),T=0;T<k.length;++T)++P[31&k[T]];for(var T=0;T<z.length;++T)++P[31&z[T]];for(var W=H(P,7),G=W.t,V=W.l,X=19;X>4&&!G[c[X-1]];--X);var Y=d+5<<3,Z=B(i,M)+B(l,C)+a,$=B(i,b)+B(l,U)+a+14+3*X+B(P,G)+2*P[16]+3*P[17]+7*P[18];if(h>=0&&Y<=Z&&Y<=$)return F(t,v,e.subarray(h,h+d));if(N(t,v,1+($<Z)),v+=2,$<Z){p=S(b,E,0),g=b,w=S(U,R,0),y=U;var j=S(G,V,0);N(t,v,O-257),N(t,v+5,L-1),N(t,v+10,X-4),v+=14;for(var T=0;T<X;++T)N(t,v+3*T,G[c[T]]);v+=3*X;for(var q=[k,z],Q=0;Q<2;++Q)for(var J=q[Q],T=0;T<J.length;++T){var K=31&J[T];N(t,v,j[K]),v+=G[K],K>15&&(N(t,v,J[T]>>5&127),v+=J[T]>>12)}}else p=null,g=M,w=null,y=C;for(var T=0;T<s;++T){var ee=n[T];if(ee>255){var K=ee>>18&31;_(t,v,p[K+257]),v+=g[K+257],K>7&&(N(t,v,ee>>23&31),v+=f[K]);var et=31&ee;_(t,v,w[et]),v+=y[et],et>3&&(_(t,v,ee>>5&8191),v+=u[et])}else _(t,v,p[ee]),v+=g[ee]}return _(t,v,p[256]),v+g[256]},G=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),V=new a(0),X=function(e,t,r,n,i,l){var c=l.z||e.length,h=new a(n+c+5*(1+Math.ceil(c/7e3))+i),d=h.subarray(n,h.length-i),v=l.l,g=7&(l.r||0);if(t){g&&(d[0]=l.r>>3);for(var w=G[t-1],m=w>>13,b=8191&w,E=(1<<r)-1,S=l.p||new o(32768),M=l.h||new o(E+1),C=Math.ceil(r/3),A=2*C,U=function(t){return(e[t]^e[t+1]<<C^e[t+2]<<A)&E},R=new s(25e3),x=new o(288),k=new o(32),z=0,L=0,P=l.i||0,N=0,_=l.w||0,H=0;P+2<c;++P){var T=U(P),D=32767&P,B=M[T];if(S[D]=B,M[T]=D,_<=P){var V=c-P;if((z>7e3||N>24576)&&(V>423||!v)){g=W(e,d,0,R,x,k,L,N,H,P-H,g),N=z=L=0,H=P;for(var X=0;X<286;++X)x[X]=0;for(var X=0;X<30;++X)k[X]=0}var Y=2,Z=0,$=b,j=D-B&32767;if(V>2&&T==U(P-j))for(var q=Math.min(m,V)-1,Q=Math.min(32767,P),J=Math.min(258,V);j<=Q&&--$&&D!=B;){if(e[P+Y]==e[P+Y-j]){for(var K=0;K<J&&e[P+K]==e[P+K-j];++K);if(K>Y){if(Y=K,Z=j,K>q)break;for(var ee=Math.min(j,K-2),et=0,X=0;X<ee;++X){var er=P-j+X&32767,en=S[er],ei=er-en&32767;ei>et&&(et=ei,B=er)}}}B=S[D=B],j+=D-B&32767}if(Z){R[N++]=0x10000000|p[Y]<<18|y[Z];var el=31&p[Y],ea=31&y[Z];L+=f[el]+u[ea],++x[257+el],++k[ea],_=P+Y,++z}else R[N++]=e[P],++x[e[P]]}}for(P=Math.max(P,_);P<c;++P)R[N++]=e[P],++x[e[P]];g=W(e,d,v,R,x,k,L,N,H,P-H,g),v||(l.r=7&g|d[g/8|0]<<3,g-=7,l.h=M,l.p=S,l.i=P,l.w=_)}else{for(var P=l.w||0;P<c+v;P+=65535){var eo=P+65535;eo>=c&&(d[g/8|0]=v,eo=c),g=F(d,g+1,e.subarray(P,eo))}l.i=c}return I(h,0,n+O(g)+i)},Y=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=null[255&r^t[n]]^r>>>8;e=r},d:function(){return~e}}},Z=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,l=0|r.length,a=0;a!=l;){for(var o=Math.min(a+2655,l);a<o;++a)i+=n+=r[a];n=(65535&n)+15*(n>>16),i=(65535&i)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(255&e)<<24|(65280&e)<<8|(255&t)<<8|t>>8}}},$=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),o=new a(l.length+e.length);o.set(l),o.set(e,l.length),e=o,i.w=l.length}return X(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,i)},j=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},q=function(e,t,r){for(var n=e(),i=e.toString(),l=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<n.length;++a){var o=n[a],s=l[a];if("function"==typeof o){t+=";"+s+"=";var f=o.toString();if(o.prototype)if(-1!=f.indexOf("[native code]")){var u=f.indexOf(" ",8)+1;t+=f.slice(u,f.indexOf("(",u))}else for(var c in t+=f,o.prototype)t+=";"+s+".prototype."+c+"="+o.prototype[c].toString();else t+=f}else r[s]=o}return t},Q=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},J=function(e,t,r,n){if(!null[r]){for(var i="",a={},o=e.length-1,s=0;s<o;++s)i=q(e[s],i,a);null[r]={c:q(e[o],i,a),e:a}}var f=j({},null[r].e);return l(null[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,f,Q(f),n)},K=function(){return[a,o,s,f,u,c,v,w,A,U,m,z,S,R,x,k,O,I,L,P,ev,ee,et]},ee=function(e){return postMessage(e,[e.buffer])},et=function(e){return e&&{out:e.size&&new a(e.size),dictionary:e.dictionary}},er=function(e,t,r,n,i,l){var a=J(r,n,i,function(e,t){a.terminate(),l(e,t)});return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},en=function(e,t){return e[t]|e[t+1]<<8},ei=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},el=function(e,t){return ei(e,t)+0x100000000*ei(e,t+4)},ea=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},eo=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&ea(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},es=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&L(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(2&t)},ef=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},eu=function(e){return 10+(e.filename?e.filename.length+1:0)},ec=function(e,t){var r=t.level;if(e[0]=120,e[1]=(0==r?0:r<6?1:9==r?3:2)<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=Z();n.p(t.dictionary),ea(e,2,n.d())}},eh=function(e,t){return((15&e[0])!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&L(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&L(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ed(e,t){return $(e,t||{},0,0)}function ev(e,t){return P(e,{i:2},t&&t.out,t&&t.dictionary)}function ep(e,t){return P(e.subarray(eh(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var eg="undefined"!=typeof TextEncoder&&new TextEncoder,ew="undefined"!=typeof TextDecoder&&new TextDecoder;try{ew.decode(V,{stream:!0})}catch(e){}var ey=function(e){for(var t="",r=0;;){var n=e[r++],i=(n>127)+(n>223)+(n>239);if(r+i>e.length)return{s:t,r:I(e,r-1)};i?3==i?t+=String.fromCharCode(55296|(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536)>>10,56320|1023&n):1&i?t+=String.fromCharCode((31&n)<<6|63&e[r++]):t+=String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(n)}},em=function(e,t){for(;1!=en(e,t);t+=4+en(e,t+2));return[el(e,t+12),el(e,t+4),el(e,t+20)]},eb=function(e){var t=0;if(e)for(var r in e){var n=e[r].length;n>65535&&L(9),t+=n+4}return t};"function"==typeof queueMicrotask&&queueMicrotask;class eE extends n.BRH{constructor(e){super(e),this.type=n.ix0}parse(e){let t={l:0,c:0,lc:0};function r(e,r,n,i,l){for(;n<e;)r=r<<8|U(i,l),n+=8;t.l=r>>(n-=e)&(1<<e)-1,t.c=r,t.lc=n}let i=Array(59),l={c:0,lc:0};function a(e,t,r,n){e=e<<8|U(r,n),t+=8,l.c=e,l.lc=t}let o={c:0,lc:0};function s(e,t,r,n,i,s,f,u,c){if(e==t){n<8&&(a(r,n,i,s),r=l.c,n=l.lc);let e=r>>(n-=8);if(e=new Uint8Array([e])[0],u.value+e>c)return!1;let t=f[u.value-1];for(;e-- >0;)f[u.value++]=t}else{if(!(u.value<c))return!1;f[u.value++]=e}o.c=r,o.lc=n}function f(e){let t=65535&e;return t>32767?t-65536:t}let u={a:0,b:0};function c(e,t){let r=f(e),n=f(t),i=r+(1&n)+(n>>1),l=i-n;u.a=i,u.b=l}function h(e,t){let r=65535&t,n=(65535&e)-(r>>1)&65535;u.a=r+n-32768&65535,u.b=n}function d(e,n,f,u,c,h){let d=f.value,v=A(n,f),p=A(n,f);f.value+=4;let g=A(n,f);if(f.value+=4,v<0||v>=65537||p<0||p>=65537)throw Error("Something wrong with HUF_ENCSIZE");let w=Array(65537),y=Array(16384);for(let e=0;e<16384;e++)y[e]={},y[e].len=0,y[e].lit=0,y[e].p=null;let m=u-(f.value-d);if(!function(e,n,l,a,o,s){let f=0,u=0;for(;a<=o;a++){if(n.value-n.value>l)return!1;r(6,f,u,e,n);let i=t.l;if(f=t.c,u=t.lc,s[a]=i,63==i){if(n.value-n.value>l)throw Error("Something wrong with hufUnpackEncTable");r(8,f,u,e,n);let i=t.l+6;if(f=t.c,u=t.lc,a+i>o+1)throw Error("Something wrong with hufUnpackEncTable");for(;i--;)s[a++]=0;a--}else if(i>=59){let e=i-59+2;if(a+e>o+1)throw Error("Something wrong with hufUnpackEncTable");for(;e--;)s[a++]=0;a--}}!function(e){for(let e=0;e<=58;++e)i[e]=0;for(let t=0;t<65537;++t)i[e[t]]+=1;let t=0;for(let e=58;e>0;--e){let r=t+i[e]>>1;i[e]=t,t=r}for(let t=0;t<65537;++t){let r=e[t];r>0&&(e[t]=r|i[r]++<<6)}}(s)}(e,f,m,v,p,w),g>8*(u-(f.value-d)))throw Error("Something wrong with hufUncompress");!function(e,t,r,n){for(;t<=r;t++){let r=e[t]>>6,i=63&e[t];if(r>>i)throw Error("Invalid table entry");if(i>14){let e=n[r>>i-14];if(e.len)throw Error("Invalid table entry");if(e.lit++,e.p){let t=e.p;e.p=Array(e.lit);for(let r=0;r<e.lit-1;++r)e.p[r]=t[r]}else e.p=[,];e.p[e.lit-1]=t}else if(i){let e=0;for(let l=1<<14-i;l>0;l--){let l=n[(r<<14-i)+e];if(l.len||l.p)throw Error("Invalid table entry");l.len=i,l.lit=t,e++}}}}(w,v,p,y),function(e,t,r,n,i,f,u,c,h){let d=0,v=0,p=Math.trunc(n.value+(i+7)/8);for(;n.value<p;)for(a(d,v,r,n),d=l.c,v=l.lc;v>=14;){let i=t[d>>v-14&16383];if(i.len)v-=i.len,s(i.lit,f,d,v,r,n,c,h,u),d=o.c,v=o.lc;else{let t;if(!i.p)throw Error("hufDecode issues");for(t=0;t<i.lit;t++){let g=63&e[i.p[t]];for(;v<g&&n.value<p;)a(d,v,r,n),d=l.c,v=l.lc;if(v>=g&&e[i.p[t]]>>6==(d>>v-g&(1<<g)-1)){v-=g,s(i.p[t],f,d,v,r,n,c,h,u),d=o.c,v=o.lc;break}}if(t==i.lit)throw Error("hufDecode issues")}}let g=8-i&7;for(d>>=g,v-=g;v>0;){let e=t[d<<14-v&16383];if(e.len)v-=e.len,s(e.lit,f,d,v,r,n,c,h,u),d=o.c,v=o.lc;else throw Error("hufDecode issues")}}(w,y,e,f,g,p,h,c,{value:0})}function v(e){for(let t=1;t<e.length;t++){let r=e[t-1]+e[t]-128;e[t]=r}}function p(e,t){let r=0,n=Math.floor((e.length+1)/2),i=0,l=e.length-1;for(;!(i>l)&&(t[i++]=e[r++],!(i>l));){;t[i++]=e[n++]}}function g(e){let t=e.byteLength,r=[],n=0,i=new DataView(e);for(;t>0;){let e=i.getInt8(n++);if(e<0){let l=-e;t-=l+1;for(let e=0;e<l;e++)r.push(i.getUint8(n++))}else{t-=2;let l=i.getUint8(n++);for(let t=0;t<e+1;t++)r.push(l)}}return r}function w(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function y(e){let t=new Uint8Array(g(e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size))),r=new Uint8Array(t.length);return v(t),p(t,r),new DataView(r.buffer)}function m(e){let t=ep(e.array.slice(e.offset.value,e.offset.value+e.size)),r=new Uint8Array(t.length);return v(t),p(t,r),new DataView(r.buffer)}function b(e){let t=e.viewer,r={value:e.offset.value},n=new Uint16Array(e.columns*e.lines*(e.inputChannels.length*e.type)),i=new Uint8Array(8192),l=0,a=Array(e.inputChannels.length);for(let t=0,r=e.inputChannels.length;t<r;t++)a[t]={},a[t].start=l,a[t].end=a[t].start,a[t].nx=e.columns,a[t].ny=e.lines,a[t].size=e.type,l+=a[t].nx*a[t].ny*a[t].size;let o=z(t,r),s=z(t,r);if(s>=8192)throw Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(o<=s)for(let e=0;e<s-o+1;e++)i[e+o]=R(t,r);let f=new Uint16Array(65536),v=function(e,t){let r=0;for(let n=0;n<65536;++n)(0==n||e[n>>3]&1<<(7&n))&&(t[r++]=n);let n=r-1;for(;r<65536;)t[r++]=0;return n}(i,f),p=A(t,r);d(e.array,t,r,p,n,l);for(let t=0;t<e.inputChannels.length;++t){let e=a[t];for(let r=0;r<a[t].size;++r)!function(e,t,r,n,i,l,a){let o,s,f=a<16384,d=r>i?i:r,v=1;for(;v<=d;)v<<=1;for(v>>=1,o=v,v>>=1;v>=1;){let a,d,p,g,w=(s=0)+l*(i-o),y=l*v,m=l*o,b=n*v,E=n*o;for(;s<=w;s+=m){let i=s,l=s+n*(r-o);for(;i<=l;i+=E){let r=i+b,n=i+y,l=n+b;f?(c(e[i+t],e[n+t]),a=u.a,p=u.b,c(e[r+t],e[l+t]),d=u.a,g=u.b,c(a,d),e[i+t]=u.a,e[r+t]=u.b,c(p,g)):(h(e[i+t],e[n+t]),a=u.a,p=u.b,h(e[r+t],e[l+t]),d=u.a,g=u.b,h(a,d),e[i+t]=u.a,e[r+t]=u.b,h(p,g)),e[n+t]=u.a,e[l+t]=u.b}if(r&v){let r=i+y;f?c(e[i+t],e[r+t]):h(e[i+t],e[r+t]),a=u.a,e[r+t]=u.b,e[i+t]=a}}if(i&v){let i=s,l=s+n*(r-o);for(;i<=l;i+=E){let r=i+b;f?c(e[i+t],e[r+t]):h(e[i+t],e[r+t]),a=u.a,e[r+t]=u.b,e[i+t]=a}}o=v,v>>=1}}(n,e.start+r,e.nx,e.size,e.ny,e.nx*e.size,v)}var g=l;for(let e=0;e<g;++e)n[e]=f[n[e]];let w=0,y=new Uint8Array(n.buffer.byteLength);for(let t=0;t<e.lines;t++)for(let t=0;t<e.inputChannels.length;t++){let e=a[t],r=e.nx*e.size,i=new Uint8Array(n.buffer,2*e.end,2*r);y.set(i,w),w+=2*r,e.end+=r}return new DataView(y.buffer)}function E(e){let t=ep(e.array.slice(e.offset.value,e.offset.value+e.size)),r=new DataView(new ArrayBuffer(e.inputChannels.length*e.lines*e.columns*e.totalBytes)),n=0,i=0,l=[,,,,];for(let a=0;a<e.lines;a++)for(let a=0;a<e.inputChannels.length;a++){let o=0;switch(e.inputChannels[a].pixelType){case 1:l[0]=n,l[1]=l[0]+e.columns,n=l[1]+e.columns;for(let n=0;n<e.columns;++n)o+=t[l[0]++]<<8|t[l[1]++],r.setUint16(i,o,!0),i+=2;break;case 2:l[0]=n,l[1]=l[0]+e.columns,l[2]=l[1]+e.columns,n=l[2]+e.columns;for(let n=0;n<e.columns;++n)o+=t[l[0]++]<<24|t[l[1]++]<<16|t[l[2]++]<<8,r.setUint32(i,o,!0),i+=4}}return r}function S(e){let t,r,i,l=e.viewer,a={value:e.offset.value},o=new Uint8Array(e.columns*e.lines*(e.inputChannels.length*e.type*2)),s={version:x(l,a),unknownUncompressedSize:x(l,a),unknownCompressedSize:x(l,a),acCompressedSize:x(l,a),dcCompressedSize:x(l,a),rleCompressedSize:x(l,a),rleUncompressedSize:x(l,a),rleRawSize:x(l,a),totalAcUncompressedCount:x(l,a),totalDcUncompressedCount:x(l,a),acCompression:x(l,a)};if(s.version<2)throw Error("EXRLoader.parse: "+B.compression+" version "+s.version+" is unsupported");let f=[],u=z(l,a)-2;for(;u>0;){let e=M(l.buffer,a),t=R(l,a),r=t>>2&3,n=new Int8Array([(t>>4)-1])[0],i=R(l,a);f.push({name:e,index:n,type:i,compression:r}),u-=e.length+3}let c=B.channels,h=Array(e.inputChannels.length);for(let t=0;t<e.inputChannels.length;++t){let r=h[t]={},n=c[t];r.name=n.name,r.compression=0,r.decoded=!1,r.type=n.pixelType,r.pLinear=n.pLinear,r.width=e.columns,r.height=e.lines}let v={idx:[,,,]};for(let t=0;t<e.inputChannels.length;++t){let e=h[t];for(let r=0;r<f.length;++r){let n=f[r];e.name==n.name&&(e.compression=n.compression,n.index>=0&&(v.idx[n.index]=t),e.offset=t)}}if(s.acCompressedSize>0)switch(s.acCompression){case 0:t=new Uint16Array(s.totalAcUncompressedCount),d(e.array,l,a,s.acCompressedSize,t,s.totalAcUncompressedCount);break;case 1:t=new Uint16Array(ep(e.array.slice(a.value,a.value+s.totalAcUncompressedCount)).buffer),a.value+=s.totalAcUncompressedCount}s.dcCompressedSize>0&&(r=new Uint16Array(m({array:e.array,offset:a,size:s.dcCompressedSize}).buffer),a.value+=s.dcCompressedSize),s.rleRawSize>0&&(i=g(ep(e.array.slice(a.value,a.value+s.rleCompressedSize)).buffer),a.value+=s.rleCompressedSize);let p=0,w=Array(h.length);for(let e=0;e<w.length;++e)w[e]=[];for(let t=0;t<e.lines;++t)for(let t=0;t<h.length;++t)w[t].push(p),p+=h[t].width*e.type*2;!function(e,t,r,i,l,a){let o=new DataView(a.buffer),s=r[e.idx[0]].width,f=r[e.idx[0]].height,u=Math.floor(s/8),c=Math.ceil(s/8),h=Math.ceil(f/8),d=s-(c-1)*8,v=f-(h-1)*8,p={value:0},g=[,,,],w=[,,,],y=[,,,],m=[,,,],b=[,,,];for(let r=0;r<3;++r)b[r]=t[e.idx[r]],g[r]=r<1?0:g[r-1]+c*h,w[r]=new Float32Array(64),y[r]=new Uint16Array(64),m[r]=new Uint16Array(64*c);for(let t=0;t<h;++t){let a=8;t==h-1&&(a=v);let s=8;for(let e=0;e<c;++e){e==c-1&&(s=d);for(let e=0;e<3;++e){var E,S;y[e].fill(0),y[e][0]=l[g[e]++],function(e,t,r){let n,i=1;for(;i<64;)65280==(n=t[e.value])?i=64:n>>8==255?i+=255&n:(r[i]=n,i++),e.value++}(p,i,y[e]),E=y[e],(S=w[e])[0]=I(E[0]),S[1]=I(E[1]),S[2]=I(E[5]),S[3]=I(E[6]),S[4]=I(E[14]),S[5]=I(E[15]),S[6]=I(E[27]),S[7]=I(E[28]),S[8]=I(E[2]),S[9]=I(E[4]),S[10]=I(E[7]),S[11]=I(E[13]),S[12]=I(E[16]),S[13]=I(E[26]),S[14]=I(E[29]),S[15]=I(E[42]),S[16]=I(E[3]),S[17]=I(E[8]),S[18]=I(E[12]),S[19]=I(E[17]),S[20]=I(E[25]),S[21]=I(E[30]),S[22]=I(E[41]),S[23]=I(E[43]),S[24]=I(E[9]),S[25]=I(E[11]),S[26]=I(E[18]),S[27]=I(E[24]),S[28]=I(E[31]),S[29]=I(E[40]),S[30]=I(E[44]),S[31]=I(E[53]),S[32]=I(E[10]),S[33]=I(E[19]),S[34]=I(E[23]),S[35]=I(E[32]),S[36]=I(E[39]),S[37]=I(E[45]),S[38]=I(E[52]),S[39]=I(E[54]),S[40]=I(E[20]),S[41]=I(E[22]),S[42]=I(E[33]),S[43]=I(E[38]),S[44]=I(E[46]),S[45]=I(E[51]),S[46]=I(E[55]),S[47]=I(E[60]),S[48]=I(E[21]),S[49]=I(E[34]),S[50]=I(E[37]),S[51]=I(E[47]),S[52]=I(E[50]),S[53]=I(E[56]),S[54]=I(E[59]),S[55]=I(E[61]),S[56]=I(E[35]),S[57]=I(E[36]),S[58]=I(E[48]),S[59]=I(E[49]),S[60]=I(E[57]),S[61]=I(E[58]),S[62]=I(E[62]),S[63]=I(E[63]),function(e){let t=.5*Math.cos(3*3.14159/16),r=.5*Math.cos(3*3.14159/8),n=[,,,,],i=[,,,,],l=[,,,,],a=[,,,,];for(let o=0;o<8;++o){let s=8*o;n[0]=.4619398297234211*e[s+2],n[1]=r*e[s+2],n[2]=.4619398297234211*e[s+6],n[3]=r*e[s+6],i[0]=.4903926563794112*e[s+1]+t*e[s+3]+.2777854612564676*e[s+5]+.09754573032714427*e[s+7],i[1]=t*e[s+1]-.09754573032714427*e[s+3]-.4903926563794112*e[s+5]-.2777854612564676*e[s+7],i[2]=.2777854612564676*e[s+1]-.4903926563794112*e[s+3]+.09754573032714427*e[s+5]+t*e[s+7],i[3]=.09754573032714427*e[s+1]-.2777854612564676*e[s+3]+t*e[s+5]-.4903926563794112*e[s+7],l[0]=.35355362513961314*(e[s+0]+e[s+4]),l[3]=.35355362513961314*(e[s+0]-e[s+4]),l[1]=n[0]+n[3],l[2]=n[1]-n[2],a[0]=l[0]+l[1],a[1]=l[3]+l[2],a[2]=l[3]-l[2],a[3]=l[0]-l[1],e[s+0]=a[0]+i[0],e[s+1]=a[1]+i[1],e[s+2]=a[2]+i[2],e[s+3]=a[3]+i[3],e[s+4]=a[3]-i[3],e[s+5]=a[2]-i[2],e[s+6]=a[1]-i[1],e[s+7]=a[0]-i[0]}for(let o=0;o<8;++o)n[0]=.4619398297234211*e[16+o],n[1]=r*e[16+o],n[2]=.4619398297234211*e[48+o],n[3]=r*e[48+o],i[0]=.4903926563794112*e[8+o]+t*e[24+o]+.2777854612564676*e[40+o]+.09754573032714427*e[56+o],i[1]=t*e[8+o]-.09754573032714427*e[24+o]-.4903926563794112*e[40+o]-.2777854612564676*e[56+o],i[2]=.2777854612564676*e[8+o]-.4903926563794112*e[24+o]+.09754573032714427*e[40+o]+t*e[56+o],i[3]=.09754573032714427*e[8+o]-.2777854612564676*e[24+o]+t*e[40+o]-.4903926563794112*e[56+o],l[0]=.35355362513961314*(e[o]+e[32+o]),l[3]=.35355362513961314*(e[o]-e[32+o]),l[1]=n[0]+n[3],l[2]=n[1]-n[2],a[0]=l[0]+l[1],a[1]=l[3]+l[2],a[2]=l[3]-l[2],a[3]=l[0]-l[1],e[0+o]=a[0]+i[0],e[8+o]=a[1]+i[1],e[16+o]=a[2]+i[2],e[24+o]=a[3]+i[3],e[32+o]=a[3]-i[3],e[40+o]=a[2]-i[2],e[48+o]=a[1]-i[1],e[56+o]=a[0]-i[0]}(w[e])}var M=w;for(let e=0;e<64;++e){let t=M[0][e],r=M[1][e],n=M[2][e];M[0][e]=t+1.5747*n,M[1][e]=t-.1873*r-.4682*n,M[2][e]=t+1.8556*r}for(let t=0;t<3;++t)!function(e,t,r){for(let l=0;l<64;++l){var i;t[r+l]=n.GxU.toHalfFloat((i=e[l])<=1?Math.sign(i)*Math.pow(Math.abs(i),2.2):Math.sign(i)*Math.pow(9.025013291561939,Math.abs(i)-1))}}(w[t],m[t],64*e)}let f=0;for(let n=0;n<3;++n){let i=r[e.idx[n]].type;for(let e=8*t;e<8*t+a;++e){f=b[n][e];for(let t=0;t<u;++t){let r=64*t+(7&e)*8;o.setUint16(f+0*i,m[n][r+0],!0),o.setUint16(f+2*i,m[n][r+1],!0),o.setUint16(f+4*i,m[n][r+2],!0),o.setUint16(f+6*i,m[n][r+3],!0),o.setUint16(f+8*i,m[n][r+4],!0),o.setUint16(f+10*i,m[n][r+5],!0),o.setUint16(f+12*i,m[n][r+6],!0),o.setUint16(f+14*i,m[n][r+7],!0),f+=16*i}}if(u!=c)for(let e=8*t;e<8*t+a;++e){let t=b[n][e]+8*u*2*i,r=64*u+(7&e)*8;for(let e=0;e<s;++e)o.setUint16(t+2*e*i,m[n][r+e],!0)}}}let C=new Uint16Array(s);o=new DataView(a.buffer);for(let t=0;t<3;++t){r[e.idx[t]].decoded=!0;let n=r[e.idx[t]].type;if(2==r[t].type)for(let e=0;e<f;++e){let r=b[t][e];for(let e=0;e<s;++e)C[e]=o.getUint16(r+2*e*n,!0);for(let e=0;e<s;++e)o.setFloat32(r+2*e*n,I(C[e]),!0)}}}(v,w,h,t,r,o);for(let t=0;t<h.length;++t){let r=h[t];if(!r.decoded)if(2===r.compression){let n=0,l=0;for(let a=0;a<e.lines;++a){let e=w[t][n];for(let t=0;t<r.width;++t){for(let t=0;t<2*r.type;++t)o[e++]=i[l+t*r.width*r.height];l++}n++}}else throw Error("EXRLoader.parse: unsupported channel compression")}return new DataView(o.buffer)}function M(e,t){let r=new Uint8Array(e),n=0;for(;0!=r[t.value+n];)n+=1;let i=new TextDecoder().decode(r.slice(t.value,t.value+n));return t.value=t.value+n+1,i}function C(e,t){let r=e.getInt32(t.value,!0);return t.value=t.value+4,r}function A(e,t){let r=e.getUint32(t.value,!0);return t.value=t.value+4,r}function U(e,t){let r=e[t.value];return t.value=t.value+1,r}function R(e,t){let r=e.getUint8(t.value);return t.value=t.value+1,r}let x=function(e,t){let r;return r="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,r};function k(e,t){let r=e.getFloat32(t.value,!0);return t.value+=4,r}function O(e,t){return n.GxU.toHalfFloat(k(e,t))}function I(e){let t=(31744&e)>>10,r=1023&e;return(e>>15?-1:1)*(t?31===t?r?NaN:1/0:Math.pow(2,t-15)*(1+r/1024):r/1024*6103515625e-14)}function z(e,t){let r=e.getUint16(t.value,!0);return t.value+=2,r}function L(e,t){return I(z(e,t))}function P(e,t,r,n){let i=Array(e);for(let l=0;l<e;l++){let e=1<<l,a=t/e|0;"ROUND_UP"==n&&a*e<t&&(a+=1);let o=Math.max(a,1);i[l]=(o+r-1)/r|0}return i}function N(){let e=this.offset,t={value:0};for(let r=0;r<this.tileCount;r++){let r=C(this.viewer,e),n=C(this.viewer,e);e.value+=8,this.size=A(this.viewer,e);let i=r*this.blockWidth,l=n*this.blockHeight;this.columns=i+this.blockWidth>this.width?this.width-i:this.blockWidth,this.lines=l+this.blockHeight>this.height?this.height-l:this.blockHeight;let a=this.columns*this.totalBytes,o=this.size<this.lines*a?this.uncompress(this):w(this);e.value+=this.size;for(let e=0;e<this.lines;e++){let r=e*this.columns*this.totalBytes;for(let n=0;n<this.inputChannels.length;n++){let a=B.channels[n].name,s=this.channelByteOffsets[a]*this.columns,f=this.decodeChannels[a];if(void 0===f)continue;t.value=r+s;let u=(this.height-(1+l+e))*this.outLineWidth;for(let e=0;e<this.columns;e++){let r=u+(e+i)*this.outputChannels+f;this.byteArray[r]=this.getter(o,t)}}}}}function _(){let e=this.offset,t={value:0};for(let r=0;r<this.height/this.blockHeight;r++){let n=C(this.viewer,e)-B.dataWindow.yMin;this.size=A(this.viewer,e),this.lines=n+this.blockHeight>this.height?this.height-n:this.blockHeight;let i=this.columns*this.totalBytes,l=this.size<this.lines*i?this.uncompress(this):w(this);e.value+=this.size;for(let e=0;e<this.blockHeight;e++){let n=r*this.blockHeight,a=e+this.scanOrder(n);if(a>=this.height)continue;let o=e*i,s=(this.height-1-a)*this.outLineWidth;for(let e=0;e<this.inputChannels.length;e++){let r=B.channels[e].name,n=this.channelByteOffsets[r]*this.columns,i=this.decodeChannels[r];if(void 0!==i){t.value=o+n;for(let e=0;e<this.columns;e++){let r=s+e*this.outputChannels+i;this.byteArray[r]=this.getter(l,t)}}}}}}let H={value:0},T=new DataView(e),D=new Uint8Array(e),B=function(e,t,r){let n={};if(0x1312f76!=e.getUint32(0,!0))throw Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");n.version=e.getUint8(4);let i=e.getUint8(5);n.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},r.value=8;let l=!0;for(;l;){let i=M(t,r);if(""===i)l=!1;else{let l=M(t,r),a=A(e,r),o=function(e,t,r,n,i){if("string"===n||"stringvector"===n||"iccProfile"===n){let e=new TextDecoder().decode(new Uint8Array(t).slice(r.value,r.value+i));return r.value=r.value+i,e}if("chlist"===n)return function(e,t,r,n){let i=r.value,l=[];for(;r.value<i+n-1;){let n=M(t,r),i=C(e,r),a=R(e,r);r.value+=3;let o=C(e,r),s=C(e,r);l.push({name:n,pixelType:i,pLinear:a,xSampling:o,ySampling:s})}return r.value+=1,l}(e,t,r,i);if("chromaticities"===n)return function(e,t){let r=k(e,t),n=k(e,t),i=k(e,t),l=k(e,t),a=k(e,t),o=k(e,t);return{redX:r,redY:n,greenX:i,greenY:l,blueX:a,blueY:o,whiteX:k(e,t),whiteY:k(e,t)}}(e,r);if("compression"===n)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][R(e,r)];if("box2i"===n){let t=C(e,r),n=C(e,r);return{xMin:t,yMin:n,xMax:C(e,r),yMax:C(e,r)}}else if("envmap"===n)return["ENVMAP_LATLONG","ENVMAP_CUBE"][R(e,r)];else if("tiledesc"===n){let t=A(e,r),n=A(e,r),i=R(e,r);return{xSize:t,ySize:n,levelMode:["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"][15&i],roundingMode:["ROUND_DOWN","ROUND_UP"][i>>4]}}else if("lineOrder"===n)return["INCREASING_Y","DECREASING_Y","RANDOM_Y"][R(e,r)];else if("float"===n)return k(e,r);else if("v2f"===n)return[k(e,r),k(e,r)];else if("v3f"===n){let t=k(e,r);return[t,k(e,r),k(e,r)]}else if("int"===n)return C(e,r);else if("rational"===n)return[C(e,r),A(e,r)];else if("timecode"===n)return[A(e,r),A(e,r)];else return"preview"===n?(r.value+=i,"skipped"):(r.value+=i,void 0)}(e,t,r,l,a);void 0===o?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${l}'.`):n[i]=o}}if((-7&i)!=0)throw console.error("THREE.EXRHeader:",n),Error("THREE.EXRLoader: Provided file is currently unsupported.");return n}(T,e,H),F=function(e,t,r,i,l){let a={size:0,viewer:t,array:r,offset:i,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,inputChannels:e.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:n.Zr2};switch(e.compression){case"NO_COMPRESSION":a.blockHeight=1,a.uncompress=w;break;case"RLE_COMPRESSION":a.blockHeight=1,a.uncompress=y;break;case"ZIPS_COMPRESSION":a.blockHeight=1,a.uncompress=m;break;case"ZIP_COMPRESSION":a.blockHeight=16,a.uncompress=m;break;case"PIZ_COMPRESSION":a.blockHeight=32,a.uncompress=b;break;case"PXR24_COMPRESSION":a.blockHeight=16,a.uncompress=E;break;case"DWAA_COMPRESSION":a.blockHeight=32,a.uncompress=S;break;case"DWAB_COMPRESSION":a.blockHeight=256,a.uncompress=S;break;default:throw Error("EXRLoader.parse: "+e.compression+" is unsupported")}let o={};for(let t of e.channels)switch(t.name){case"Y":case"R":case"G":case"B":case"A":o[t.name]=!0,a.type=t.pixelType}let s=!1;if(o.R&&o.G&&o.B)s=!o.A,a.outputChannels=4,a.decodeChannels={R:0,G:1,B:2,A:3};else if(o.Y)a.outputChannels=1,a.decodeChannels={Y:0};else throw Error("EXRLoader.parse: file contains unsupported data channels.");if(1==a.type)switch(l){case n.RQf:a.getter=L;break;case n.ix0:a.getter=z}else if(2==a.type)switch(l){case n.RQf:a.getter=k;break;case n.ix0:a.getter=O}else throw Error("EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".");a.columns=a.width;let f=a.width*a.height*a.outputChannels;switch(l){case n.RQf:a.byteArray=new Float32Array(f),s&&a.byteArray.fill(1,0,f);break;case n.ix0:a.byteArray=new Uint16Array(f),s&&a.byteArray.fill(15360,0,f);break;default:console.error("THREE.EXRLoader: unsupported type: ",l)}let u=0;for(let t of e.channels)void 0!==a.decodeChannels[t.name]&&(a.channelByteOffsets[t.name]=u),u+=2*t.pixelType;if(a.totalBytes=u,a.outLineWidth=a.width*a.outputChannels,"INCREASING_Y"===e.lineOrder?a.scanOrder=e=>e:a.scanOrder=e=>a.height-1-e,4==a.outputChannels?(a.format=n.GWd,a.colorSpace=n.Zr2):(a.format=n.VT0,a.colorSpace=n.jf0),e.spec.singleTile){a.blockHeight=e.tiles.ySize,a.blockWidth=e.tiles.xSize;let r=function(e,t,r){let n=0;switch(e.levelMode){case"ONE_LEVEL":n=1;break;case"MIPMAP_LEVELS":n=function(e,t){let r=Math.log2(e);return"ROUND_DOWN"==t?Math.floor(r):Math.ceil(r)}(Math.max(t,r),e.roundingMode)+1;break;case"RIPMAP_LEVELS":throw Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return n}(e.tiles,a.width,a.height),n=P(r,a.width,e.tiles.xSize,e.tiles.roundingMode),l=P(r,a.height,e.tiles.ySize,e.tiles.roundingMode);a.tileCount=n[0]*l[0];for(let e=0;e<r;e++)for(let r=0;r<l[e];r++)for(let r=0;r<n[e];r++)x(t,i);a.decode=N.bind(a)}else{a.blockWidth=a.width;let e=Math.ceil(a.height/a.blockHeight);for(let r=0;r<e;r++)x(t,i);a.decode=_.bind(a)}return a}(B,T,D,H,this.type);return F.decode(),{header:B,width:F.width,height:F.height,data:F.byteArray,format:F.format,colorSpace:F.colorSpace,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){return super.load(e,function(e,r){e.colorSpace=r.colorSpace,e.minFilter=n.k6q,e.magFilter=n.k6q,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,r)},r,i)}}}}]);