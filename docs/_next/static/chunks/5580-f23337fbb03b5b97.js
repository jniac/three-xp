(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5580],{97895:function(){},82571:function(e,t,n){"use strict";n.d(t,{Client:function(){return nP}});var r,i,l,s,o,a,c,u,h,d,f,p,v,m,g,y,b,x,w,C,j,S,_,O,E,k,M,P,I,A,z,N,L=n(41291),T=n(64740),R=n(81406),D=n(13841);let V=0,B=()=>{let[,e]=(0,R.useState)(V);return(0,R.useCallback)(()=>e(++V),[])};var F=n(8423),H=n(67952),U=n(20030),Y=n(35859),W=n(45003),q=n(93293);(r=c||(c={})).Select="select",r.Rotate="rotate",r.Move="move",r.Scale="scale",(i=u||(u={})).World="world",i.Local="local",(l=h||(h={})).Public="public",l.Internal="internal",(s=d||(d={})).Visible="visible",s.Hidden="hidden";var Z=n(26028);class X{constructor(e,t){var n;this.id=X.nextId++,this.historyIndex=e,this.comment=null!==(n=t.comment)&&void 0!==n?n:"Command ".concat(this.id),this.execute=t.execute,this.undo=t.undo}}X.nextId=0;class K{get lastHistoryIndex(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1].historyIndex:-1}get undoCount(){return this.undoStack.length}get redoCount(){return this.redoStack.length}get canUndo(){return this.undoStack.length>0}get canRedo(){return this.redoStack.length>0}push(e){let t=new X(this.lastHistoryIndex+1,e);for(t.execute(),this.undoStack.push(t);this.undoStack.length>100;)this.undoStack.shift();this.redoStack=[],this.changeObs.increment()}undo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!1;for(;e-- >0&&this.undoStack.length>0;){let e=this.undoStack.pop();e.undo(),this.redoStack.push(e),t=!0}t&&this.changeObs.increment()}redo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!1;for(;e-- >0&&this.redoStack.length>0;){let e=this.redoStack.pop();e.execute(),this.undoStack.push(e),t=!0}t&&this.changeObs.increment()}onChange(e){return this.changeObs.onChange(e)}constructor(){this.changeObs=new W.ObservableNumber(0),this.undoStack=[],this.redoStack=[]}}class G{set(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(2===t.length){let[e,n]=t;return this.set({[e]:n})}let[r]=t,i=!1;for(let e of Object.keys(r)){let t=this[e],n=r[e],l="function"==typeof n?n(t):n;t!==l&&(i=!0,this[e]=l)}return i&&this.changeObs.increment(),this}constructor(e){this.scope=h.Public,this.hierarchyVisibility=d.Visible,this.hierarchyOpen=!1,this.sceneVisibility=d.Visible,this.selectable=!0,this.changeObs=e}}class J{onChange(e){return this.changeObs.onChange(e)}get(e){var t;return null!==(t=this.map.get(e))&&void 0!==t?t:this.map.set(e,this.defaultFor(e)).get(e)}defaultFor(e){let t=!1,n=!0;return e instanceof T.Scene&&(t=!0,n=!1),e instanceof T.CameraHelper&&(n=!1),new G(this.changeObs).set({hierarchyOpen:t,selectable:n})}constructor(){this.changeObs=new W.ObservableNumber(0),this.map=new WeakMap}}class Q{_filteredObjects(e){if(-1!==e.findIndex(e=>!this._filter(e))){let t=e.length;e=e.filter(this._filter),console.log("Invalid Object detected. Filtered ".concat(t-e.length," / ").concat(t," objects"))}return e}get obs(){return this._set}equals(e){let t=new Set(e),n=this._set.value;if(t.size!==n.size)return!1;for(let e of t)if(!n.has(e))return!1;return!0}set(e,t,n){let r=new Set(this._set.value),i=this._filteredObjects([...t]);return this.equals(i)||this._command.push({comment:e,execute:()=>{this._set.set(i),null==n||n.execute()},undo:()=>{this._set.set(r),null==n||n.undo()}}),this}add(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this._filteredObjects(n),l=this._set.otherDifference(i);return this._command.push({comment:e,execute:()=>this._set.add(...l),undo:()=>this._set.remove(...l)}),this}remove(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this._filteredObjects(n),l=this._set.intersection(i);return this._command.push({comment:e,execute:()=>this._set.remove(...l),undo:()=>this._set.add(...l)}),this}toggle(e,t){return null!==t&&(this._set.has(t)?this.remove(e,t):this.add(e,t)),this}clear(e){let t=new Set(this._set.value);return t.size>0&&this._command.push({comment:e,execute:()=>this._set.clear(),undo:()=>this._set.set(t)}),this}get objects(){return this._set.value}has(e){return this._set.has(e)}get size(){return this._set.size}constructor(e,{filter:t}){this._set=new W.ObservableSet,this.onChange=this._set.onChange.bind(this._set),this._command=e,this._filter=t}}class ${reset(e){return this.objects=[...e],this}beforeSnapshot(){return this.before=this.objects.map(e=>({position:e.position.clone(),rotation:e.rotation.clone(),scale:e.scale.clone(),visible:e.visible})),this}afterSnapshot(){return this.after=this.objects.map(e=>({position:e.position.clone(),rotation:e.rotation.clone(),scale:e.scale.clone(),visible:e.visible})),this}isNoop(){return this.before.every((e,t)=>{let n=this.after[t];return e.position.equals(n.position)&&e.rotation.equals(n.rotation)&&e.scale.equals(n.scale)})}comment(e){return this.historyComment=e,this}flush(e){return this.isNoop()||e.history.push({comment:this.historyComment,execute:()=>{for(let e=0;e<this.objects.length;e++){let t=this.objects[e],n=this.after[e];t.position.copy(n.position),t.rotation.copy(n.rotation),t.scale.copy(n.scale)}},undo:()=>{for(let e=0;e<this.objects.length;e++){let t=this.objects[e],n=this.before[e];t.position.copy(n.position),t.rotation.copy(n.rotation),t.scale.copy(n.scale)}}}),this}constructor(e){this.objects=[],this.historyComment="...",this.before=[],this.after=[],e&&this.reset(e)}}class ee{get ticker(){return this.three.ticker}reset(){this.sceneSelection.clear("Editor Context Reset"),this.transformControls.detach()}toPlainObject(){return{toolType:this.toolType.value,spaceMode:this.spaceMode.value}}serialize(){return U.ZP.stringify(this.toPlainObject())}deserialize(e){var t,n;let r=U.ZP.parse(e);this.toolType.set(null!==(t=r.toolType)&&void 0!==t?t:c.Select),this.spaceMode.set(null!==(n=r.spaceMode)&&void 0!==n?n:u.Local)}*init(){let{three:e,history:t,metadata:n,sceneSelection:r,toolType:i,spaceMode:l,transformControls:s,orbitControls:o,onRefresh:a,requestRefreshImmediate:h}=this;yield t.onChange(h),yield n.onChange(h),yield r.onChange(()=>{e.pipeline.basicPasses.outline.selectedObjects=Array.from(r.objects),h()}),yield i.onChange(h),yield l.onChange(h),yield e.ticker.onTick({order:-1},()=>{e.pointer.event.reset()}),yield e.ticker.onTick({order:1},()=>{o.enabled=!1===e.pointer.event.consumed&&!1===d.value});let d=new W.Observable(!1),f=new $([]);d.onChange(e=>{e?f.reset(r.objects).comment('Transform "'.concat(i.value,'" (').concat(l.value,")")).beforeSnapshot():f.afterSnapshot().flush(this)}),s.addEventListener("dragging-changed",e=>{d.set(!!e.value),o.enabled=!e.value}),o.addEventListener("change",()=>{s.enabled=!1}),o.addEventListener("end",()=>p()),o.enabled=!1;let p=()=>{let e=Array.from(r.objects);if(1===e.length){s.visible=!0,s.attach(e[0]);let t=i.value,n=t===c.Select;if(s.visible=!n&&!!s.object,s.enabled=!n&&!!s.object,!n){let e={[c.Rotate]:"rotate",[c.Move]:"translate",[c.Scale]:"scale"}[t];s.setMode(e)}s.setSpace(l.value===u.Local?"local":"world")}else s.visible=!1};a(p),yield*function*(e){yield(0,q.p)(document.body,{strictTarget:!0},[[{key:"g",noModifiers:!0},()=>e.spaceMode.set(e.spaceMode.value===u.World?u.Local:u.World)],[{key:"a",noModifiers:!0},()=>e.toolType.set(c.Select)],[{key:"w",noModifiers:!0},()=>e.toolType.set(c.Move)],[{key:"r",noModifiers:!0},()=>e.toolType.set(c.Rotate)],[{key:"t",noModifiers:!0},()=>e.toolType.set(c.Scale)],[{key:"f",modifiers:"shift"},()=>{document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()}],[{key:"z",modifiers:e=>e.ctrl||e.meta},t=>{t.event.preventDefault(),t.modifiers.shift?e.history.redo():e.history.undo()}],[{key:"Enter"},t=>{t.modifiers.shift?function(e){let t=new Set;for(let n of e.sceneSelection.objects){let e=n.parent;e&&e.parent&&t.add(e)}e.sceneSelection.set("Select Parents",t)}(e):function(e){let t=new Set;for(let n of e.sceneSelection.objects)for(let e of n.children)t.add(e);e.sceneSelection.set("Select Children",t)}(e)}]])}(this),yield*function*(e){yield(0,Z.w)(e.three.renderer.domElement,{onDown:e=>{e.event.preventDefault()},onTap:t=>{let n=e.three.pointer.raycaster.intersectObject(e.three.scene,!0).filter(e=>(function(e){if(e.constructor.name.endsWith("Helper"))return!1;let t=e;for(;t;){if(!0===t.userData.ignoreRaycast||!1===t.userData.pickable)return!1;t=t.parent}return!0})(e.object)),{shiftKey:r}=t.orignalDownEvent,i=null;n.length>0&&!0===(i=n[0].object).userData.selectParentOnTap&&(i=i.parent),i?r?e.sceneSelection.toggle("Scene Raycast Toggle",i):e.sceneSelection.set("Scene Raycast Pick",[i]):!1===r&&e.sceneSelection.clear("Scene Raycast Clear")}})}(this)}dispose(){this.transformControls.dispose(),this.orbitControls.dispose(),(0,Y.o)(...this.destroyables)}constructor(e){this.three=e,this.destroyables=[],this.uiVisibility=new W.Observable(!0),this.showUI=()=>this.uiVisibility.set(!0),this.hideUI=()=>this.uiVisibility.set(!1),this.toggleUI=()=>this.uiVisibility.set(!this.uiVisibility.value),this.history=new K,this.metadata=new J,this.sceneSelection=new Q(this.history,{filter:e=>e instanceof T.Object3D}),this.toolType=new W.Observable(c.Select),this.spaceMode=new W.Observable(u.Local),this.orbitControls=new F.z(this.three.perspectiveCamera,this.three.renderer.domElement),this.transformControls=new H.Ys(this.three.perspectiveCamera,this.three.renderer.domElement),this.state={refresh:new W.ObservableNumber(0)},this.destroy=()=>{ee.instances.splice(ee.instances.indexOf(this),1),this.dispose()},this.onRefresh=this.state.refresh.onChange.bind(this.state.refresh),this.requestRefresh=e=>{let{delay:t,frames:n}={...ee.requestRefreshDefaultOptions,...e},r=this.state.refresh.value+1;if(void 0!==n){let e=n,t=()=>{e-- >0?this.state.refresh.value<r&&window.requestAnimationFrame(t):this.state.refresh.set(Math.max(r,this.state.refresh.value))};window.requestAnimationFrame(t)}else{let e=window.performance.now()+1e3*t,n=()=>{window.performance.now()<e?this.state.refresh.value<r&&window.requestAnimationFrame(n):this.state.refresh.set(Math.max(r,this.state.refresh.value))};window.requestAnimationFrame(n)}},this.requestRefreshImmediate=()=>{this.requestRefresh({delay:0})},e.gizmoScene.add(this.transformControls),this.destroyables.push(...this.init()),ee.instances.push(this)}}ee.instances=[],ee.current=()=>ee.instances[ee.instances.length-1],ee.requestRefreshDefaultOptions={delay:0,frames:void 0};var et=n(71427);function en(e){return(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:[(0,L.jsx)("path",{fill:"currentColor",d:"M13 7.5a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75"}),(0,L.jsx)("path",{fill:"currentColor",d:"M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12S5.925 1 12 1M2.5 12a9.5 9.5 0 0 0 9.5 9.5a9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5A9.5 9.5 0 0 0 2.5 12"})]})}var er=n(53346),ei=["title","titleId"];function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var es=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ei);return er.createElement("svg",el({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,f||(f=er.createElement("path",{d:"M4.99955 9.0625L1.75195 3.4375L8.24714 3.4375L4.99955 9.0625Z",fill:"currentColor"})))},eo=["title","titleId"];function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ec=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eo);return er.createElement("svg",ea({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,p||(p=er.createElement("path",{d:"M8.0625 6.00004L2.4375 9.24763L2.4375 2.75244L8.0625 6.00004Z",fill:"currentColor"})))},eu=n(45868),eh=n.n(eu);function ed(e){let{title:t="Fold Panel",closedByDefault:n,content:r}=e,[i,l]=(0,R.useState)(void 0===n||!n);return(0,L.jsxs)("div",{className:eh().Foldable,children:[(0,L.jsxs)("div",{onClick:()=>l(!i),children:[i?(0,L.jsx)(es,{}):(0,L.jsx)(ec,{}),(0,L.jsx)("span",{children:t})]}),i&&(0,L.jsx)("div",{children:null==r?void 0:r()})]})}var ef=n(6379),ep=n.n(ef);function ev(e){return(0,L.jsx)("button",{className:(0,et.f)(ep().SmallButton,ep().outlined),...e})}var em=n(80590);function eg(e){let{tree:t}=e;class n{constructor(){this.nodes=[]}}class r{getCurrent(){return this.current||(this.current=new n,this.blocks.push(this.current)),this.current}add(e){this.getCurrent().nodes.push(e)}close(){this.current=null}generateSvgContent(){return this.blocks.map((e,t)=>{if(0===e.nodes.length)return null;let n=18*e.nodes[0]+.5;return(0,L.jsxs)("g",{children:[(0,L.jsx)("rect",{x:.5,y:n,width:"calc(100% - 1px)",height:18*e.nodes.length-1,rx:".15em"}),e.nodes.length>0&&Array.from({length:e.nodes.length-1},(e,t)=>{let r=n+(t+1)*18;return(0,L.jsx)("line",{x1:2.5,x2:"calc(100% - 2.5px)",y1:r,y2:r},t)})]},t)})}constructor(){this.blocks=[],this.current=null}}let i=new r,l=new r;for(let[e,n]of t.allNodes.entries())0!==e&&(n.isSelected?i.add(e):i.close(),!1===n.metadata.hierarchyOpen&&(0,em.some)(n.descendants(),e=>e.isSelected)?l.add(e):l.close());return(0,L.jsxs)("svg",{width:"100%",height:"100%",children:[(0,L.jsx)("g",{fill:"#ffffff11",stroke:"#ffffff33",strokeWidth:"1",children:i.generateSvgContent()}),(0,L.jsx)("g",{fill:"none",stroke:"#ffffff33",strokeWidth:"1",children:l.generateSvgContent()})]})}class ey{get isRoot(){return this.root===this}get childCount(){return this.children.length}populate(e,t,n){for(let r of t.children){let t=e.metadata.get(r);if(t.hierarchyVisibility===d.Visible&&t.scope!==h.Internal){let i=new ey(e,r,this.root,this,t,n+1);this.children.push(i)}}}*parents(){let e=this.parent;for(;e;)yield e,e=e.parent}*descendants(){for(let e of this.children)yield e,yield*e.descendants()}parentsAreOpen(){for(let e of this.parents())if(!e.metadata.hierarchyOpen)return!1;return!0}isLastChild(){return!!this.parent&&this.parent.children[this.parent.children.length-1]===this}isClosed(){return this.childCount>0&&!this.metadata.hierarchyOpen}getNextSibling(){if(this.parent){let e=this.parent.children.indexOf(this);if(-1!==e&&e<this.parent.children.length-1)return this.parent.children[e+1]}return null}constructor(e,t,n=null,r=null,i=null,l=0){this.allNodes=null,this.root=null!=n?n:this,this.parent=r,this.object=t,this.depth=l,this.isSelected=e.sceneSelection.has(t),this.isRoot&&(this.allNodes=[]),this.metadata=null!=i?i:e.metadata.get(t),this.children=[],this.parentsAreOpen()&&this.root.allNodes.push(this),this.populate(e,t,l),this.totalChildCount=this.children.reduce((e,t)=>e+1+t.totalChildCount,0)}}class eb{get metaKey(){var e;return null!==(e=this.orignalEvent.metaKey)&&void 0!==e&&e}get shiftKey(){var e;return null!==(e=this.orignalEvent.shiftKey)&&void 0!==e&&e}get ctrlKey(){var e;return null!==(e=this.orignalEvent.ctrlKey)&&void 0!==e&&e}get altKey(){var e;return null!==(e=this.orignalEvent.altKey)&&void 0!==e&&e}constructor(e){this.orignalEvent=e}}var ex=["title","titleId"];function ew(){return(ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eC=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ex);return er.createElement("svg",ew({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,v||(v=er.createElement("g",{id:"HierarchyNode"},er.createElement("path",{id:"closed",d:"M20 12H16M24 12L22 12",stroke:"currentColor"}),er.createElement("path",{id:"child",d:"M20 24L20 16C20 13.7909 18.2091 12 16 12",stroke:"currentColor"}),er.createElement("path",{id:"ending",d:"M4 0V8C4 10.2091 5.79086 12 8 12V12",stroke:"currentColor"}),er.createElement("path",{id:"parent",d:"M4 0V12M4 24V12M8 12H4",stroke:"currentColor"}),er.createElement("path",{id:"line",d:"M4 0V24",stroke:"currentColor"}),er.createElement("circle",{id:"circle",cx:12,cy:12,r:3.5,stroke:"currentColor"}),er.createElement("circle",{id:"dot",cx:12,cy:12,r:2,fill:"currentColor"}))))},ej=n(37789),eS=n.n(ej);function e_(e){let{node:t}=e,{ref:n}=(0,D.Nv)(function*(e){let n=e.querySelector("svg");n.width.baseVal.value=18+6*t.depth*2,n.height.baseVal.value=18,n.viewBox.baseVal.width=24+8*t.depth*2,n.viewBox.baseVal.x=-8*t.depth*2;let[r,i,l,s,o,a,c]=n.querySelector("g").children,{children:u}=t,h=u.length>0&&t.metadata.hierarchyOpen,d=t.isLastChild();for(let e of(o.setAttributeNS(null,"visibility","hidden"),i.setAttributeNS(null,"visibility",h?"visible":"hidden"),r.setAttributeNS(null,"visibility",t.isClosed()&&t.childCount>0?"visible":"hidden"),l.setAttributeNS(null,"visibility",t.parent&&d?"visible":"hidden"),s.setAttributeNS(null,"visibility",t.parent&&!d?"visible":"hidden"),a.setAttributeNS(null,"visibility",t.childCount>0?"visible":"hidden"),c.setAttributeNS(null,"visibility",0===t.childCount?"visible":"hidden"),n.querySelectorAll(".parent-line")))e.remove();{let e=t.parent,r=1;for(;e;){if(e.getNextSibling()){let e=o.cloneNode();e.classList.add("parent-line"),e.setAttributeNS(null,"visibility","visible"),e.setAttributeNS(null,"transform","translate(".concat(-8*r*2,", 0)")),n.appendChild(e)}e=e.parent,r+=1}}},"always");return(0,D.sv)(function*(){let e=n.current,r=e.querySelector("#dot");t.childCount>0&&(yield(0,Z.w)(e,{onEnter(){r.setAttributeNS(null,"visibility","visible")},onLeave(){r.setAttributeNS(null,"visibility","hidden")}}))},"always"),(0,L.jsx)("div",{ref:n,className:eS().Link,children:(0,L.jsx)(eC,{})})}var eO=["title","titleId"];function eE(){return(eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ek=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eO);return er.createElement("svg",eE({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,m||(m=er.createElement("g",{id:"pickable-off"},er.createElement("g",{id:"Union"},er.createElement("path",{d:"M9.27305 4.40207L9.45305 4.43207C10.133 4.55207 10.6408 5.16104 10.6408 5.86104V7.16104C10.6408 8.10787 10.6408 8.67486 10.5451 9.12897L9.89141 8.47524C9.91305 8.14463 9.91305 7.719 9.91305 7.14207V5.84207C9.91305 5.51207 9.68305 5.22207 9.36305 5.17207L9.18305 5.14207C9.18305 5.14207 9.11305 5.13207 9.11305 5.21207V5.74207C9.11305 5.95207 8.94305 6.12207 8.73305 6.12207C8.52305 6.12207 8.35305 5.95207 8.35305 5.74207V5.21207C8.35305 4.83207 8.05305 4.53207 7.69305 4.53207C7.61305 4.53207 7.55305 4.60207 7.55305 4.68207V5.20207C7.55305 5.41207 7.38305 5.58207 7.17305 5.58207C6.96305 5.58207 6.79305 5.41207 6.79305 5.20207V4.67207C6.79305 4.52207 6.74305 4.37207 6.65305 4.25207C6.55305 4.13207 6.43305 4.05207 6.28305 4.01207C6.27087 4.01033 6.25626 4.00798 6.24018 4.0054C6.16387 3.99314 6.05435 3.97555 6.01305 3.99207C6.01305 3.99207 5.99305 4.04207 5.99305 4.15207V4.57688L5.23305 3.81688V1.78207C5.23305 1.56207 5.05305 1.37207 4.83305 1.37207C4.61305 1.37207 4.43305 1.55207 4.43305 1.78207V3.01688L3.69305 2.27688V1.78207C3.69305 1.14207 4.20305 0.62207 4.84305 0.62207C5.48305 0.62207 5.99305 1.14207 5.99305 1.78207V3.24207C6.16305 3.23207 6.32305 3.26207 6.42305 3.28207C6.77305 3.37207 7.05305 3.55207 7.24305 3.80207C7.25387 3.8129 7.25884 3.82666 7.26429 3.84176C7.26891 3.85455 7.27387 3.86831 7.28305 3.88207C7.40305 3.82207 7.53305 3.78207 7.67305 3.78207C8.17305 3.78207 8.61305 4.05207 8.86305 4.45207C8.86971 4.44874 8.87638 4.44429 8.88305 4.43985C8.89638 4.43096 8.90971 4.42207 8.92305 4.42207C9.03305 4.39207 9.15305 4.38207 9.27305 4.40207Z",fill:"currentColor"}),er.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.69305 5.10906V6.11207L3.50305 5.92207C3.38305 5.79207 3.23305 5.69207 3.06305 5.63207C2.90305 5.57207 2.72305 5.54207 2.54305 5.55207C2.36305 5.56207 2.19305 5.61207 2.04305 5.69207C1.88305 5.77207 1.74305 5.89207 1.64305 6.03207C1.47305 6.23207 1.37305 6.51207 1.37305 6.78207C1.37305 7.06207 1.45305 7.33207 1.62305 7.55207L3.17305 9.67207C3.52305 10.1521 3.72305 10.4221 3.96305 10.6421C4.33305 10.9721 4.77305 11.1921 5.25305 11.3021C5.56305 11.3721 5.87305 11.3721 6.48305 11.3721C7.64305 11.3721 8.22305 11.3721 8.74305 11.1721C8.97752 11.0819 9.19393 10.9592 9.39443 10.8104L10.1904 11.6065L10.8975 10.8993L1.70515 1.70696L0.998047 2.41406L3.69305 5.10906ZM4.43305 5.84906V7.05207C4.43305 7.21207 4.34305 7.34207 4.20305 7.40207C4.06305 7.45207 3.90305 7.42207 3.79305 7.31207L2.96305 6.45207C2.91305 6.39207 2.85305 6.36207 2.79305 6.33207C2.73305 6.30207 2.66305 6.30207 2.59305 6.30207C2.52305 6.30207 2.45305 6.32207 2.39305 6.35207C2.32305 6.38207 2.27305 6.43207 2.23305 6.48207C2.16305 6.57207 2.12305 6.69207 2.12305 6.80207C2.12305 6.91207 2.15305 7.03207 2.22305 7.12207L3.77305 9.23207C4.10305 9.69207 4.27305 9.92207 4.45305 10.0821C4.73305 10.3221 5.06305 10.4921 5.41305 10.5721C5.64305 10.6221 5.92305 10.6221 6.48305 10.6221C7.55305 10.6221 8.08305 10.6221 8.46305 10.4721C8.60165 10.4195 8.7334 10.3532 8.85721 10.2732L4.43305 5.84906Z",fill:"currentColor"})))))},eM=["title","titleId"];function eP(){return(eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eI=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eM);return er.createElement("svg",eP({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,g||(g=er.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.227 7.79V3.578c0-.872-.692-1.579-1.545-1.579c-.854 0-1.546.707-1.546 1.579v10.487l-1.669-1.711a1.71 1.71 0 0 0-2.586.146a1.816 1.816 0 0 0-.033 2.182l3.095 4.23c.702.96 1.053 1.439 1.476 1.812c.645.57 1.417.965 2.248 1.152c.545.123 1.13.123 2.301.123c2.232 0 3.348 0 4.237-.35a5.2 5.2 0 0 0 2.954-3.027c.341-.91.341-2.055.341-4.342v-2.603c0-1.029-.728-1.907-1.722-2.076l-.353-.06a.88.88 0 0 0-1.016.88m-6.182-2.633l.595-.304c.287-.146.607-.24.918-.164a2.1 2.1 0 0 1 1.578 2.047m-3.09-1.579v2.632m3.09-1.053v1.053m0-1.053c0-.58.462-1.052 1.03-1.052c1.138 0 2.061.942 2.061 2.105m0 0v1.053",color:"currentColor"})))},eA=["title","titleId"];function ez(){return(ez=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eN=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eA);return er.createElement("svg",ez({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,y||(y=er.createElement("path",{fill:"currentColor",d:"M12 6a9.77 9.77 0 0 1 8.82 5.5a9.647 9.647 0 0 1-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6m-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14M2.01 3.87l2.68 2.68A11.738 11.738 0 0 0 1 11.5C2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42l1.41-1.41L3.42 2.45zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02a2.5 2.5 0 0 1-2.5-2.5c0-.05.01-.08.01-.13m-3.4-3.4l1.75 1.75a4.6 4.6 0 0 0-.36 1.78a4.507 4.507 0 0 0 6.27 4.14l.98.98c-.88.24-1.8.38-2.75.38a9.77 9.77 0 0 1-8.82-5.5c.7-1.43 1.72-2.61 2.93-3.53"})))},eL=["title","titleId"];function eT(){return(eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eR=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eL);return er.createElement("svg",eT({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,b||(b=er.createElement("path",{fill:"currentColor",d:"M12 6a9.77 9.77 0 0 1 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5A9.77 9.77 0 0 1 12 6m0-2C7 4 2.73 7.11 1 11.5C2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5a2.5 2.5 0 0 1 0 5a2.5 2.5 0 0 1 0-5m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"})))},eD=n(96009),eV=n.n(eD);function eB(e){let{node:t,onClick:n,onLinkClick:r,onVisibilityClick:i,onPickableClick:l}=e,s=t.children.length,{isSelected:o}=t,{selectable:a,hierarchyOpen:c}=t.metadata,u=!c&&(0,em.some)(t.descendants(),e=>e.isSelected);return(0,L.jsxs)("div",{className:(0,et.f)(eS().Node,o&&eS().isSelected,a&&eS().selectable,u&&eS().containsSelectedChild),onClick:e=>{e.preventDefault(),null==n||n(new eb(e.nativeEvent))},children:[(0,L.jsx)("div",{className:eS().Background}),(0,L.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==r||r(new eb(e.nativeEvent))},children:(0,L.jsx)(e_,{node:t})}),(0,L.jsxs)("div",{className:eS().Label,children:[t.object.name?(0,L.jsx)("span",{children:t.object.name}):(0,L.jsx)("span",{className:eS().ConstructorName,children:t.object.constructor.name}),s>0&&(0,L.jsx)("span",{className:eS().ChildCount,children:t.totalChildCount>s?(0,L.jsxs)(L.Fragment,{children:["(",s,"/",t.totalChildCount,")"]}):(0,L.jsxs)(L.Fragment,{children:["(",s,")"]})})]}),(0,L.jsxs)("div",{className:(0,et.f)(eV().Abs,eS().RightButtons),children:[(0,L.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==l||l(new eb(e.nativeEvent))},children:!1!==t.object.userData.pickable?(0,L.jsx)("div",{className:eS().RequireHover,children:(0,L.jsx)(eI,{})}):(0,L.jsx)("div",{className:eS().FadeInHover,children:(0,L.jsx)(ek,{})})}),(0,L.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==i||i(new eb(e.nativeEvent))},children:t.object.visible?(0,L.jsx)("div",{className:eS().RequireHover,children:(0,L.jsx)(eR,{})}):(0,L.jsx)("div",{className:eS().FadeInHover,children:(0,L.jsx)(eN,{})})})]})]})}function eF(){let e=B(),t=nu(function*(t){yield t.onRefresh(e)}),{three:n}=t,r=new ey(t,n.scene),[i,l]=(0,R.useState)({lastClickTarget:null});function s(e){return t.sceneSelection.objects.has(e.object)?[...t.sceneSelection.objects].filter(e=>e instanceof T.Object3D):[e.object]}return(0,L.jsxs)("div",{className:"flex flex-col max-h-full h-full",children:[(0,L.jsx)("div",{className:eV().Abs,style:{right:0,top:-20},children:(0,L.jsx)(ev,{onClick:t.requestRefreshImmediate,children:"refresh"})}),(0,L.jsxs)("div",{className:eS().HierarchyList,children:[(0,L.jsx)("div",{className:eV().Abs0,children:(0,L.jsx)(eg,{tree:r})}),r.allNodes.map(e=>(0,L.jsx)(eB,{node:e,onClick:n=>{let{lastClickTarget:s}=i,o=n.shiftKey?"add-range":n.metaKey||n.ctrlKey?"toggle-one":"set",a=({"add-range":()=>(function(e,t){for(let n of t)e.add(n);return e})(t.sceneSelection.objects,function(e,t){let[n,r]=t,i=e.allNodes.findIndex(e=>e.object===n),l=e.allNodes.findIndex(e=>e.object===r);return -1===i||-1===l?-1===i&&-1===l?[]:-1===i?[r]:[n]:e.allNodes.slice(Math.min(i,l),Math.max(i,l)+1).filter(e=>e.parentsAreOpen()).map(e=>e.object)}(r,[s,e.object])),"toggle-one":()=>{var n,r;return n=t.sceneSelection.objects,r=e.object,n.has(r)?n.delete(r):n.add(r),n},set:()=>new Set([e.object])})[o](),c='Change selection in hierarchy (mode "'.concat(o,'", ').concat(a.size," objects selected)");t.sceneSelection.set(c,a,{execute:()=>{l({lastClickTarget:e.object})},undo:()=>{l({lastClickTarget:s})}})},onLinkClick:()=>{let n=!e.metadata.hierarchyOpen,r=s(e);(()=>{for(let e of r)t.metadata.get(e).set({hierarchyOpen:n})})()},onVisibilityClick:()=>{let n=!e.object.visible,r=s(e);t.history.push({comment:"Toggle visibility (".concat(n?"visible":"hidden"," x").concat(r.length," objects)"),execute:()=>{for(let e of r)e.visible=n},undo:()=>{for(let e of r)e.visible=!n}})},onPickableClick:()=>{let{pickable:n=!0}=e.object.userData;n=!n;let r=s(e);t.history.push({comment:"Toggle pickable (".concat(n?"pickable":"unpickable"," x").concat(r.length," objects)"),execute:()=>{for(let e of r)e.userData.pickable=n},undo:()=>{for(let e of r)e.userData.pickable=!n}})}},e.object.uuid))]})]})}function eH(){return(0,L.jsx)(ed,{title:"Hierarchy",content:()=>(0,L.jsx)(eF,{})})}var eU=["title","titleId"];function eY(){return(eY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eW=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eU);return er.createElement("svg",eY({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,x||(x=er.createElement("path",{fill:"currentColor",d:"M9.9 19q-2.425 0-4.163-1.575T4 13.5t1.738-3.925T9.9 8h6.3l-2.6-2.6L15 4l5 5l-5 5l-1.4-1.4l2.6-2.6H9.9q-1.575 0-2.738 1T6 13.5T7.163 16T9.9 17H17v2z"})))},eq=["title","titleId"];function eZ(){return(eZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var eX=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eq);return er.createElement("svg",eZ({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,w||(w=er.createElement("path",{fill:"currentColor",d:"M7 19v-2h7.1q1.575 0 2.738-1T18 13.5T16.838 11T14.1 10H7.8l2.6 2.6L9 14L4 9l5-5l1.4 1.4L7.8 8h6.3q2.425 0 4.163 1.575T20 13.5t-1.737 3.925T14.1 19z"})))},eK=n(58506),eG=n.n(eK);function eJ(e){var t;let{commandType:n,command:r,...i}=e;return(0,L.jsxs)("div",{...i,className:(0,et.f)(eG().Command,"undo"===n?eG().Undo:eG().Redo),children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:r.historyIndex}),(0,L.jsx)("span",{children:null!==(t=r.comment)&&void 0!==t?t:"..."})]}),(0,L.jsx)("div",{children:"undo"===n?(0,L.jsx)(eX,{}):(0,L.jsx)(eW,{})})]})}function eQ(e){let{commandCount:t=10}=e,n=nu(),r=Math.min(n.history.redoCount,t),i=Math.min(n.history.undoCount,t-r);return(0,L.jsx)("div",{className:eG().History,children:(0,L.jsxs)("div",{className:eG().Stack,children:[i>0&&n.history.undoStack.slice(-i).map((e,t)=>(0,L.jsx)(eJ,{commandType:"undo",command:e,onClick:()=>{n.history.undo(i-t)}},t)),function(e,t){let n=[];for(let r=e.length-1;r>=0;r--)n.push(t(e[r],r));return n}(n.history.redoStack.slice(0,r),(e,t)=>(0,L.jsx)(eJ,{commandType:"redo",command:e,onClick:()=>{n.history.redo(r-t)}},t))]})})}function e$(e){let t=nu();return nh(),(0,L.jsx)("div",{children:(0,L.jsx)(ed,{...e,closedByDefault:!0,title:"Undo / Redo (".concat(t.history.undoCount,"::").concat(t.history.redoCount,")"),content:()=>(0,L.jsx)(eQ,{})})})}n(81435),n(52170);var e0=n(11315),e1=n(62425),e2=n.n(e1);function e5(){return(0,L.jsx)("div",{className:e2().Separator,children:(0,L.jsx)("div",{style:{backgroundColor:"#fff3",height:"1px"}})})}var e3=n(71441);function e7(e){let[t,n]=e.split(".");if(void 0===n)return t;let r=n.length-1;for(;"0"===n[r];)r--;return"."===n[r]&&r--,-1===r?t:t+"."+n.slice(0,r+1)}function e4(e){let{maxDigits:t=6}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t<6)throw Error("maxDigits must be at least 6");if(0===e)return"0";let[n,r]=e.toString().split("."),i=n.length,l=t-i-1;if(i>t||l<0){let[n,r]=e.toPrecision().split("e");return n=n.slice(0,t-r.length-1),"".concat(e7(n),"e").concat(r)}return Math.abs(e)<1/Math.pow(10,t-2)?e7(e.toExponential(t-5)):void 0===r?n:e7(e.toFixed(l))}var e6=n(516),e9=n.n(e6);class e8{getInputId(){return"input-".concat(this.id)}getInputName(){return"input-".concat(this.atomNamespace,"-").concat(this.atomType[0])}createLabel(e){let t=document.createElement("label");t.htmlFor=this.getInputId(),t.textContent=e,this.div.appendChild(t),this.labelElement=t;let[,n]=this.atomType;"number"===n&&this.initDraggable()}initDraggable(){this.labelElement.classList.add(e9().draggable);let e=null,t=0;(0,Z.w)(this.labelElement,{onHorizontalDragStart:()=>{var n,r;this.focus(),this.div.classList.add(e9().dragging),(e=document.createElement("div")).classList.add(e9().WhileDragging),document.body.appendChild(e),t=this.singleValue,null===(n=(r=this.inputListeners).onDragStart)||void 0===n||n.call(r,this.atomType[0])},onHorizontalDragStop:()=>{var t,n;this.blur(),this.div.classList.remove(e9().dragging),null==e||e.remove(),null===(t=(n=this.inputListeners).onDragEnd)||void 0===t||t.call(n,this.atomType[0])},onHorizontalDrag:e=>{var n,r;let i=e.shiftKey?this.inputOptions.stepLarge:e.altKey?this.inputOptions.stepSmall:this.inputOptions.step,l=t+e.movement.x*this.inputOptions.dragRatio*i;this.element.value=e4(l),null===(n=(r=this.inputListeners).onDrag)||void 0===n||n.call(r,this.atomType[0],l)}})}createInput(){let e=document.createElement("input");e.type="text",e.id=this.getInputId(),e.name=this.getInputName(),this.inputDiv.appendChild(e),this.element=e,(0,q.p)(e,[["Enter",()=>{var t,n;e.blur(),this.blur(),null===(t=(n=this.inputListeners).onInput)||void 0===t||t.call(n,this.atomType[0],e.value)}],["Escape",()=>{e.blur(),this.blur()}]]),e.onfocus=()=>this.focus(),e.onblur=()=>this.blur()}createSlider(){let e=document.createElement("div");this.inputDiv.appendChild(e),e.className=e9().Slider;let t=document.createElement("input");e.appendChild(t),t.type="range",t.min="0",t.max="1",t.step="any",t.id=this.getInputId(),t.name=this.getInputName(),this.element=t;let n=document.createElement("div");e.appendChild(n),n.className=e9().ProgressBar;let r=document.createElement("div");e.appendChild(r),r.className=e9().ThinBar;let i=document.createElement("div");e.appendChild(i),i.className="".concat(e9().OvershootUpperBar," ").concat(e9().hidden);let l=document.createElement("div");function s(e){n.style.width="".concat(100*(0,e3.V2)(e),"%"),r.style.left="calc(".concat(e," * (100% - 2px))"),l.classList.toggle(e9().hidden,e>=0),i.classList.toggle(e9().hidden,e<=1)}e.appendChild(l),l.className="".concat(e9().OvershootLowerBar," ").concat(e9().hidden),t.oninput=()=>{var e,n;s(Number.parseFloat(t.value)),null===(e=(n=this.inputListeners).onInput)||void 0===e||e.call(n,this.atomType[0],t.value)},t.onfocus=()=>this.focus(),t.onblur=()=>this.blur(),this.onExternalUpdate=()=>{s(Number.parseFloat(this.singleValue))}}createSelect(e){let t=document.createElement("select");for(let n of(t.id=this.getInputId(),t.name=this.getInputName(),this.inputDiv.appendChild(t),this.element=t,e)){let e=document.createElement("option");e.value=n,e.textContent=n,t.appendChild(e)}t.onfocus=()=>this.focus(),t.onblur=()=>this.blur()}focus(){this.focused=!0,this.div.classList.add(e9().focus)}blur(){this.focused=!1,this.div.classList.remove(e9().focus)}update(e){if(this.focused)return;let[t,n]=this.atomType,r=e[0][t],i=e.length>1&&e.some(e=>e[t]!==r);if(this.singleValue=r,this.isMultiple=i,Array.isArray(n)){let e=this.element;e.value!==r&&(e.value=r)}else if("slider"===n)this.element.value=r,this.onExternalUpdate();else if("number"===n||"string"===n){let e=this.element;if(this.div.classList.toggle(e9().multiple,i),i)e.value="";else{let t="number"===n?e4(r):r;e.value!==t&&(e.value=t)}}}constructor(e,t,n,r={}){var i;this.id=e8.nextId++,this.labelElement=null,this.element=null,this.singleValue=null,this.isMultiple=!1,this.focused=!1,this.onExternalUpdate=()=>{},this.atomNamespace=e,this.atomType=t,this.inputOptions=n,this.inputListeners=r;let[l,s,o]=t,a=o&&"key"in o?o.key:l,c=document.createElement("div");c.className=e9().AtomicInput,c.style.flex="".concat(null!==(i=null==o?void 0:o.flex)&&void 0!==i?i:1),this.div=c,a&&this.createLabel(a);let u=document.createElement("div");c.appendChild(u),this.inputDiv=u,Array.isArray(s)?this.createSelect(s):"slider"===s?this.createSlider():this.createInput()}}e8.nextId=0;let te={step:1,stepSmall:.1,stepLarge:10,dragRatio:.1},tt=new Map;function*tn(e,t,n,r,i,l,s){let o=document.createElement("div");o.className=e9().MainLabel,o.textContent="â€¢ ".concat(e),i.appendChild(o);let a=document.createElement("div");i.appendChild(a);let c=[];for(let t of n){let n=new e8(e,t,l,s);if(c.push(n),"slider"===t[1]){let[e,n,r]=t,i=[e,"number",{...r,flex:".5"}],o=new e8(e,i,l,s);c.push(o)}}for(let e of c)a.appendChild(e.div);yield r.three.onTick({timeInterval:1/12},()=>{for(let e of c)e.update(t)}),yield()=>{i.textContent=""}}function tr(e){let{label:t="...",mode:n="regular",template:r,options:i,value:l,...s}=e,o=l?Array.isArray(l)?l:[...l()]:[{x:0}],a=nu(),{ref:c}=(0,D.sv)(function*(e){switch(n){case"regular":{let n=null!=r?r:function(e){e||(console.log({object:e}),console.trace());let t=tt.get(e.constructor);if(t)return t;let n=[];for(let t in e){let r=typeof e[t];("number"===r||"string"===r)&&n.push([t,r])}return n}(o[0]);yield*tn(t,o,n,a,e,{...te,...i},s);break}case"slider":yield*tn(t,o,[[t,"slider",{key:null}]],a,e,{...te,...i},s);break;default:throw Error("Unknown mode: ".concat(n))}},"always");return(0,L.jsx)("div",{ref:c,className:e9().InlineInput})}tt.set(T.Euler,[["x","number"],["y","number"],["z","number"],["order",["XYZ","XZY","YXZ","YZX","ZXY","ZYX"],{key:"or.",flex:"0 0 5.8em"}]]);let ti=0;function tl(e){let[,t]=(0,R.useState)(ti);return(0,R.useEffect)(()=>{e.onChange(()=>t(++ti))},[]),e.value}var ts=n(22496),to=n.n(ts);function ta(e){let{visible:t=!0,onVisibilityClick:n}=e;return(0,L.jsx)("div",{className:to().StateButtons,children:(0,L.jsx)("div",{onClick:e=>{e.stopPropagation(),null==n||n(new eb(e.nativeEvent))},children:t?(0,L.jsx)("div",{className:"require-hover",children:(0,L.jsx)(eR,{})}):(0,L.jsx)("div",{className:"require-hover-fadein",children:(0,L.jsx)(eN,{})})})})}function tc(e){let{prefix:t="",object:n}=e;return n.name?(0,L.jsxs)("span",{children:[t,n.name]}):(0,L.jsxs)("span",{style:{fontStyle:"italic"},children:[t,n.constructor.name]})}var tu=n(75304),th=n.n(tu);function td(e){let{parent:t}=e,n=nu();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:th().Parent,onClick:()=>{n.sceneSelection.set("Up To Parent",[t])},children:[(0,L.jsx)(tc,{object:t}),(0,L.jsx)("span",{children:"(parent)"})]}),(0,L.jsx)(e5,{})]})}function tf(e){let{objectChildren:t}=e,n=nu(),[r,i]=(0,R.useState)(3);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(e5,{}),(0,L.jsxs)("div",{className:th().Children,children:[t.slice(0,r).map((e,t)=>(0,L.jsxs)("div",{onClick:()=>{n.sceneSelection.set("Down To Child",[e])},children:[(0,L.jsx)(tc,{object:e}),(0,L.jsxs)("span",{children:["(child ",t,")"]})]},e.uuid)),r<t.length&&(0,L.jsxs)("button",{onClick:()=>i(1/0),children:["Show more children (",t.length-r,")"]}),r===1/0&&t.length>3&&(0,L.jsx)("button",{onClick:()=>i(3),children:"Show less children"})]})]})}function tp(e){var t;let{object:n}=e;if(nh(),!n)return(0,L.jsx)("div",{children:"Error!"});let{name:r}=n;return(0,L.jsxs)("div",{className:th().TitleSingle,children:[(null===(t=n.parent)||void 0===t?void 0:t.parent)&&(0,L.jsx)(td,{parent:n.parent}),(0,L.jsxs)("h1",{className:"require-hover-parent",style:{position:"relative"},children:[r?(0,L.jsx)("span",{children:r}):(0,L.jsx)("span",{style:{fontStyle:"italic"},children:n.constructor.name}),(0,L.jsx)("div",{className:"flex flex-row items-center",style:{position:"absolute",right:0,top:0,height:"100%"},children:(0,L.jsx)(ta,{visible:n.visible})})]}),(0,L.jsx)("div",{className:th().UUID,children:n.uuid}),n.children.length>0&&(0,L.jsx)(tf,{objectChildren:n.children})]})}function tv(){let e=[...tl(nu().sceneSelection.obs)];return 0===e.length?(0,L.jsxs)("h1",{children:[(0,L.jsx)("span",{children:"Inspector "}),(0,L.jsx)("span",{className:th().dim,children:"(No selection)"})]}):1===e.length?(0,L.jsx)(tp,{object:e[0]}):(0,L.jsxs)("h1",{style:{color:"var(--multiple-color)",fontStyle:"italic"},children:["Multiple Objects (",e.length,")"]})}var tm=n(63179),tg=n(53968),ty=n.n(tg);function tb(e){let{objects:t}=e,n=nu(),r=e=>(r,i)=>{try{let l=new $(t).beforeSnapshot();for(let n=0,l=t.length;n<l;n++){let s=t[n][e],o=0===l?0:n/(l-1),a=(0,tm.ku)(i,{i:n,n:l,t:o});"number"==typeof a&&(s[r]=a)}l.afterSnapshot().comment('Set "'.concat(r,'" ').concat(e," (").concat(i,")")).flush(n)}catch(e){console.log(e)}},i=(0,R.useRef)(null),l=e=>n=>{i.current=new $(t).comment('Dragging "'.concat(n,'" ').concat(e)).beforeSnapshot()},s=()=>{i.current.afterSnapshot().flush(n)},o=e=>(n,r)=>{for(let i of t)i[e][n]=r};return(0,L.jsxs)("div",{className:ty().TransformPanel,children:[(0,L.jsx)(tr,{label:"Position",value:t.map(e=>e.position),onInput:r("position"),onDragStart:l("position"),onDrag:o("position"),onDragEnd:s}),(0,L.jsx)(tr,{label:"Rotation",value:t.map(e=>e.rotation),onInput:r("rotation"),onDragStart:l("rotation"),onDrag:o("rotation"),onDragEnd:s}),(0,L.jsx)(tr,{label:"Scale",value:t.map(e=>e.scale),onInput:r("scale"),onDragStart:l("scale"),onDrag:o("scale"),onDragEnd:s})]})}function tx(){let e=nu();nh();let t=[...e.sceneSelection.objects];return 0===t.length?(0,L.jsx)("div",{children:"..."}):(0,L.jsx)("div",{style:{color:1===t.length?"inherit":"var(--multiple-color)"},children:(0,L.jsx)(ed,{title:"Transform",content:()=>(0,L.jsx)(tb,{objects:t})})})}function tw(e){let{geometry:t}=e;return(0,L.jsx)("div",{style:{fontSize:"var(--font-size-small)"},children:(0,L.jsx)(ed,{title:"Geometry",content:()=>{var e,n;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{fontSize:"var(--font-size-tiny)"},children:t.uuid}),(0,L.jsxs)("div",{className:th().Geometry,children:[(0,L.jsxs)("div",{children:["vertices: ",null!==(n=null===(e=t.attributes.position)||void 0===e?void 0:e.count)&&void 0!==n?n:"\xf8"]}),t.index&&(0,L.jsxs)("div",{children:["triangles (index): ",t.index.count/3]}),(0,L.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,L.jsx)("span",{children:"attributes:"}),Object.keys(t.attributes).map(e=>(0,L.jsxs)("div",{className:th().SmallButton,children:[e," (",t.attributes[e].count,")"]},e))]})]})]})}})})}function tC(){let e=nu();nh();let t=[...e.sceneSelection.objects],n=t.length>0?t[0]:null,r=[];return n&&"geometry"in n&&(r.push((0,L.jsx)(e5,{},r.length)),r.push((0,L.jsx)(tw,{geometry:n.geometry},r.length))),(0,L.jsx)("div",{children:r})}function tj(){let e=(0,R.useMemo)(()=>({transition:0}),[]);return(0,D.sv)(function*(){let t=new W.Observable(e.transition);t.onChange(e=>console.log("transition: ".concat(e))),yield(0,e0.RC)("three",{timeInterval:1/12},()=>{t.value=e.transition})},[]),(0,L.jsx)(ed,{title:"User Data",content:()=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(tr,{label:"position",value:[new T.Vector3(1,2,3)]}),(0,L.jsx)(tr,{label:"transition",mode:"slider",onInput:(t,n)=>e.transition=Number.parseFloat(n),value:[e]})]})})}function tS(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(tv,{}),(0,L.jsx)(e5,{}),(0,L.jsx)(tx,{}),(0,L.jsx)(tC,{}),(0,L.jsx)(e5,{}),(0,L.jsx)(tj,{})]})}var t_=n(35351);(o=C||(C={}))[o.Horizontal=0]="Horizontal",o[o.Vertical=1]="Vertical",(a=j||(j={}))[a.Absolute=1]="Absolute",a[a.Relative=2]="Relative",a[a.OppositeRelative=4]="OppositeRelative",a[a.SmallerRelative=8]="SmallerRelative",a[a.LargerRelative=16]="LargerRelative",a[a.Fraction=32]="Fraction";let tO={abs:1,rel:2,opp:4,sml:8,lrg:16,fr:32,prt:32},tE=Object.fromEntries(Object.entries(tO).map(e=>{let[t,n]=e;return[n,t]}));class tk{static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tk;return t.parse(e),t}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.type;this.value=e,this.type=t}compute(e,t){switch(this.type){case 1:return this.value;case 2:return this.value*e;case 4:return this.value*t;case 8:return this.value*Math.min(e,t);case 16:return this.value*Math.max(e,t);case 32:return e}}parse(e){if("number"==typeof e)return this.value=e,this.type=1,!0;if("string"!=typeof e)throw console.log("received:",e),Error("Invalid scalar declaration");let t=e.match(/([\d\.]+)([a-z]+)$/);if(!t)return!1;let[n,r,i]=t,l=Number.parseFloat(r),s=tO[i];return!Number.isNaN(l)&&void 0!==s&&(this.value=l,this.type=s,!0)}toString(){return"".concat(this.value).concat(tE[this.type])}constructor(e=0,t=1){this.value=e,this.type=t}}var tM=n(6332);let tP=new(n(36636)).Z,tI=new tM.Ae;class tA{isRoot(){return this.root===this}isLeaf(){return 0===this.children.length}depth(){let e=0,t=this;for(;t;)t=t.parent,e++;return e}*allDescendants(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t of(e&&(yield this),this.children))yield*t.allDescendants({includeSelf:!0})}descendantsCount(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;for(let n of this.allDescendants({includeSelf:e}))t++;return t}*allLeaves(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t of this.allDescendants({includeSelf:e}))0===t.children.length&&(yield t)}leavesCount(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;for(let n of this.allLeaves({includeSelf:e}))t++;return t}get(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=this;for(let e of t)if(e<0&&(e=r.children.length+e),!(r=r.children[e]))return null;return r}find(e){let{includeSelf:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let n of this.allDescendants({includeSelf:t}))if(e(n))return n;return null}*findAll(e){let{includeSelf:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let n of this.allDescendants({includeSelf:t}))e(n)&&(yield n)}pointCast(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i]=1===t.length?[t[0].x,t[0].y]:t;for(let e of this.allLeaves())if(e.rect.containsXY(r,i))return e;return null}add(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.removeFromParent(),e.parent=this,e.root=this.root,this.children.push(e);return this}populate(){let{count:e=3,size:t="1prt",sizeX:n=t,sizeY:r=t,spacing:i=0,gap:l=i,padding:s=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t=0;t<e;t++)this.add(new tA().setSize(n,r).setPadding(s).setSpacing(l));return this}addTo(e){return e.add(this),this}prepend(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.removeFromParent(),this.children.unshift(e),e.parent=this,e.root=this.root;return this}prependTo(e){return e.prepend(this),this}removeFromParent(){return this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=null,this.root=this),this}remove(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.parent===this&&e.removeFromParent();return this}sort(e){return this.children.sort(e),this}setDirection(e){return this.direction="string"==typeof e?"horizontal"===e?0:1:e,this}setOffset(e,t){return this.offsetX.parse(e),this.offsetY.parse(t),this}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.sizeX.parse(e),this.sizeY.parse(t),this}setAlign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.alignX=e,this.alignY=t,this}setUserData(e){return Object.assign(this.userData,e),this}setPadding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&Array.isArray(t[0])&&(t=t[0]);let[r,i,l,s]=function(e){if(!1===Array.isArray(e))return[e,e,e,e];if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return[e[0],e[1],e[0],e[1]];if(4===e.length)return e;throw Error("Invalid number of arguments")}(t);return this.padding[0].parse(r),this.padding[1].parse(i),this.padding[2].parse(l),this.padding[3].parse(s),this}setGap(e){return this.gap.parse(e),this}setSpacing(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,...i]=t;return this.setGap(r),i.length>0?this.setPadding.apply(this,i):this.setPadding(r),this}computeLayout(){this.isRoot()&&function(e){let{offsetX:t,offsetY:n,sizeX:r,sizeY:i}=e;for(let e of[t,n,r,i])if(e.type!==j.Absolute)throw Error("Root space must have absolute offset and size");e.rect.set(t.value,n.value,r.value,i.value)}(this);let e=[this];for(;e.length>0;){let t=e.shift();!function(e){let{direction:t,alignX:n,alignY:r}=e,[i,l]=(0,em.split)(e.children,e=>e.enabled?0:1);if(l)for(let e of l)for(let t of e.allDescendants({includeSelf:!0}))t.rect.set(0,0,0,0);if(void 0===i)return;let{width:s,height:o}=tI.copy(e.rect).applyPadding(function(e){let{width:t,height:n}=e.rect;for(let t of e.padding)if(t.type===j.Fraction)throw Error("Share padding is not allowed");return tP.setTRBL(e.padding[0].compute(n,t),e.padding[1].compute(t,n),e.padding[2].compute(n,t),e.padding[3].compute(t,n))}(e)),a=e.gap.compute(s,o),[c,u,h]=i.reduce((e,n)=>{let r=t===C.Horizontal?n.sizeX:n.sizeY;return r.type!==j.Fraction?e[0].push(n):(e[1].push(n),e[2]+=r.value),e},[[],[],0]),d=0;if(t===C.Horizontal)for(let e of c){let t=e.sizeX.compute(s,o),n=e.sizeY.compute(o,s);e.rect.width=e.extraSizeX.compute(t,n),e.rect.height=e.extraSizeY.compute(n,t),d+=t}else for(let e of c){let t=e.sizeX.compute(s,o),n=e.sizeY.compute(o,s);e.rect.width=e.extraSizeX.compute(t,n),e.rect.height=e.extraSizeY.compute(n,t),d+=n}let f=(t===C.Horizontal?s:o)-d-Math.max(0,i.length-1)*a,p=f>0?f/h:0;if(t===C.Horizontal)for(let e of u){let t=p*e.sizeX.value,n=e.sizeY.compute(o,s);e.rect.width=e.extraSizeX.compute(t,n),e.rect.height=e.extraSizeY.compute(n,t)}else for(let e of u){let t=e.sizeX.compute(s,o),n=p*e.sizeY.value;e.rect.width=e.extraSizeX.compute(t,n),e.rect.height=e.extraSizeY.compute(n,t)}let v=0;if(t===C.Horizontal)for(let e of(v=s-Math.max(0,i.length-1)*a,i))v-=e.rect.width;else for(let e of(v=o-Math.max(0,i.length-1)*a,i))v-=e.rect.height;if(t===C.Horizontal){let e=tI.x+v*n;for(let t of i){let n=t.offsetX.compute(t.rect.width,t.rect.height),i=t.offsetY.compute(t.rect.height,t.rect.width);t.rect.x=n+e,t.rect.y=i+tI.y+(tI.height-t.rect.height)*r,e+=t.rect.width+a}}else{let e=tI.y+v*r;for(let t of i){let r=t.offsetX.compute(t.rect.width,t.rect.height),i=t.offsetY.compute(t.rect.height,t.rect.width);t.rect.x=r+tI.x+(tI.width-t.rect.width)*n,t.rect.y=i+e,e+=t.rect.height+a}}}(t),e.push(...t.children)}return this}getUvRect(){return this.rect.clone().relativeTo(this.root.rect)}constructor(e=C.Horizontal){this.enabled=!0,this.parent=null,this.children=[],this.offsetX=new tk(0,j.Absolute),this.offsetY=new tk(0,j.Absolute),this.sizeX=new tk(1,j.Fraction),this.sizeY=new tk(1,j.Fraction),this.extraSizeX=new tk(1,j.Relative),this.extraSizeY=new tk(1,j.Relative),this.padding=[new tk(0,j.Absolute),new tk(0,j.Absolute),new tk(0,j.Absolute),new tk(0,j.Absolute)],this.gap=new tk(0,j.Absolute),this.alignX=.5,this.alignY=.5,this.rect=new tM.Ae,this.userData={},this.direction=e,this.root=this}}function tz(){return(0,L.jsx)("div",{className:(0,et.f)(eV().Abs0,e2().PanelBackground)})}function tN(e){var t;let{separators:n=!1,className:r,children:i,...l}=e;return(0,L.jsxs)("div",{className:(0,et.f)(e2().Panel,r),...l,children:[(0,L.jsx)(tz,{}),(0,L.jsx)("div",{className:"z-10 max-h-full max-w-full flex flex-col w-full h-full overflow-hidden",children:n?R.Children.toArray(i).reduce((t=e=>(0,L.jsx)(e5,{},e),(e,n,r)=>(r>0&&e.push(t(r)),e.push(n),e)),[]):i})]})}var tL=n(52622),tT=n.n(tL);function tR(){return(0,L.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,L.jsx)(tz,{})})}function tD(e){var t,n,r,i;let l=nu(),{ref:s}=(0,D.sv)(function*(e){let t=new tA(C.Vertical).setPadding(6).setSize(e.clientWidth,e.clientHeight),n=new tA().setSize("1rel","1fr").addTo(t);new tA().setSize("1rel",6).addTo(t);let r=new tA().setSize("1rel","200abs").addTo(t),i=new tA().setSize("280abs","1fr").addTo(n);new tA().setSize(6,"1fr").addTo(n);let s=new tA(C.Vertical).setSize("1fr","1fr").addTo(n);new tA().setSize(6,"1fr").addTo(n);let o=new tA().setSize("280abs","1fr").addTo(n),a=new tA().setSize("1fr","48abs").addTo(s),c=new tA().setSize("1fr","1fr").addTo(s);function u(e,t){let{width:n,height:r,top:i,left:l}=t;e.style.left="".concat(l,"px"),e.style.top="".concat(i,"px"),e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px")}class h{show(){this.element.style.removeProperty("display")}hide(){this.element.style.setProperty("display","none")}update(){u(this.element,this.space.rect)}constructor(t,n){this.name=t,this.space=n,this.element=e.querySelector(".".concat(t))}}let d=[new h("bottom-bar",r),new h("left-col",i),new h("right-col",o),new h("top-bar",a)],f=new h("viewport",c),p=e.querySelector(".viewport"),v=e.querySelector(".viewport-frame");function m(){if(t.computeLayout(),l.uiVisibility.is(!0)){for(let e of(v.style.removeProperty("display"),d))e.show(),e.update();f.update()}else{for(let e of d)e.hide();v.style.setProperty("display","none"),u(p,t.rect)}}m(),yield l.uiVisibility.onChange(m),yield(0,t_.f)(e,{onSize:e=>{t.setSize(e.size.x,e.size.y),m()}})},[]);return(0,L.jsxs)("div",{ref:s,className:(0,et.f)(tT().Layout,eV().Abs0,eV().Thru),children:[(0,L.jsx)("div",{className:"bottom-bar",children:null!==(t=e.bottomBar)&&void 0!==t?t:(0,L.jsx)(tR,{})}),(0,L.jsx)("div",{className:"top-bar",children:null!==(n=e.topBar)&&void 0!==n?n:(0,L.jsx)(tR,{})}),(0,L.jsx)("div",{className:"left-col",children:null!==(r=e.leftCol)&&void 0!==r?r:(0,L.jsx)(tR,{})}),(0,L.jsx)("div",{className:"right-col",children:null!==(i=e.rightCol)&&void 0!==i?i:(0,L.jsx)(tR,{})}),(0,L.jsxs)("div",{className:(0,et.f)("viewport",eV().Thru),children:[(0,L.jsx)("div",{className:(0,et.f)("viewport-frame",eV().Abs0,eV().Thru),style:{border:"1px solid #fff3",borderRadius:"6px"}}),e.children]})]})}var tV=n(56699),tB=n.n(tV);function tF(){return(0,L.jsx)("div",{className:tB().OrbitControlsPanel,children:(0,L.jsx)(ed,{title:"Orbit Controls",content:()=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:"eye"}),(0,L.jsx)("div",{})]})})})}var tH=n(82733),tU=n.n(tH);function tY(e){let{objects:t}=e;return(0,L.jsx)("div",{className:tU().Selection,children:t.map(e=>(0,L.jsx)("div",{children:e.name?(0,L.jsx)("span",{children:e.name}):(0,L.jsx)("span",{style:{fontStyle:"italic"},children:e.constructor.name})},e.uuid))})}function tW(){let e=nu();nh();let t=[...e.sceneSelection.objects];return(0,L.jsx)("div",{children:(0,L.jsx)(ed,{closedByDefault:!0,title:"Selection (".concat(t.length,")"),content:()=>(0,L.jsx)(tY,{objects:t})})})}var tq=["title","titleId"];function tZ(){return(tZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tX=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,tq);return er.createElement("svg",tZ({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,S||(S=er.createElement("g",{id:"Local"},er.createElement("path",{id:"Polygon 12",d:"M4.95577 7.93301L12 3.86603L19.0442 7.93301V16.067L12 20.134L4.95577 16.067V7.93301Z",stroke:"currentColor",strokeWidth:1.5}),er.createElement("path",{id:"Vector 50",d:"M12 12L5 8M12 12L19 8M12 12V20",stroke:"currentColor"}),er.createElement("path",{id:"Vector 51",d:"M12 12L19 16M12 12L5 16M12 12L12 4",stroke:"currentColor",strokeOpacity:.25}))))},tK=["title","titleId"];function tG(){return(tG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var tJ=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,tK);return er.createElement("svg",tG({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,_||(_=er.createElement("path",{d:"M12 3V4C12 4 11.9948 3.99998 11.9847 4.00305C11.9736 4.00645 11.9515 4.01483 11.9186 4.03507C11.8494 4.07752 11.7455 4.16408 11.6177 4.32624C11.3575 4.65642 11.0794 5.19616 10.8274 5.95227C10.5429 6.80573 10.3145 7.86478 10.1704 9.06203C10.7612 9.02137 11.3731 9 12 9C12.2776 9 12.5524 9.00419 12.8236 9.01239C12.8634 9.33715 12.8971 9.67221 12.924 10.0162C12.6211 10.0055 12.3128 10 12 10C11.3341 10 10.6887 10.025 10.0718 10.0718C10.025 10.6887 10 11.3341 10 12C10 12.3128 10.0055 12.6211 10.0162 12.924C9.67221 12.8971 9.33715 12.8634 9.01239 12.8236C9.00419 12.5524 9 12.2776 9 12C9 11.3731 9.02137 10.7612 9.06203 10.1704C7.86478 10.3145 6.80573 10.5429 5.95227 10.8274C5.19616 11.0794 4.65642 11.3575 4.32624 11.6177C4.16408 11.7455 4.07752 11.8494 4.03507 11.9186C4.01483 11.9515 4.00645 11.9736 4.00305 11.9847C3.99998 11.9948 4 12 4 12H3C3 10.6748 5.57782 9.55025 9.15318 9.15318C9.55025 5.57782 10.6748 3 12 3Z",fill:"currentColor",fillOpacity:.25})),O||(O=er.createElement("path",{d:"M9.06203 13.8296C9.3438 17.9229 10.5521 21 12 21V20C12 20 11.9951 20.0001 11.9847 19.9969C11.9736 19.9935 11.9515 19.9852 11.9186 19.9649C11.8494 19.9225 11.7455 19.8359 11.6177 19.6738C11.3575 19.3436 11.0794 18.8038 10.8274 18.0477C10.4652 16.9613 10.1941 15.5419 10.0718 13.9282C9.7258 13.902 9.38877 13.869 9.06203 13.8296Z",fill:"currentColor",fillOpacity:.25})),E||(E=er.createElement("path",{d:"M13.8296 9.06203C17.9229 9.3438 21 10.5521 21 12H20C20 12 20.0001 11.9951 19.9969 11.9847C19.9935 11.9736 19.9852 11.9515 19.9649 11.9186C19.9225 11.8494 19.8359 11.7455 19.6738 11.6177C19.3436 11.3575 18.8038 11.0794 18.0477 10.8274C16.9613 10.4652 15.5419 10.1941 13.9282 10.0718C13.902 9.72581 13.869 9.38877 13.8296 9.06203Z",fill:"currentColor",fillOpacity:.25})),k||(k=er.createElement("path",{d:"M3 12C3 13.6569 7.02944 15 12 15C16.9706 15 21 13.6569 21 12H20C20 12 20 12.0052 19.9969 12.0153C19.9935 12.0264 19.9852 12.0485 19.9649 12.0814C19.9225 12.1506 19.8359 12.2545 19.6738 12.3823C19.3436 12.6425 18.8038 12.9206 18.0477 13.1726C16.546 13.6732 14.4077 14 12 14C9.59229 14 7.45402 13.6732 5.95227 13.1726C5.19616 12.9206 4.65642 12.6425 4.32624 12.3823C4.16408 12.2545 4.07752 12.1506 4.03507 12.0814C4.01483 12.0485 4.00645 12.0264 4.00305 12.0153C4.00018 12.0059 4 12 4 12H3Z",fill:"currentColor"})),M||(M=er.createElement("path",{d:"M12 3C13.6569 3 15 7.02944 15 12C15 16.9706 13.6569 21 12 21V20C12 20 12.0052 20 12.0153 19.9969C12.0264 19.9935 12.0484 19.9852 12.0814 19.9649C12.1506 19.9225 12.2545 19.8359 12.3823 19.6738C12.6425 19.3436 12.9206 18.8038 13.1726 18.0477C13.6732 16.546 14 14.4077 14 12C14 9.59229 13.6732 7.45402 13.1726 5.95227C12.9206 5.19616 12.6425 4.65642 12.3823 4.32624C12.2545 4.16408 12.1506 4.07752 12.0814 4.03507C12.0485 4.01483 12.0264 4.00645 12.0153 4.00305C12.0059 4.00018 12 4 12 4V3Z",fill:"currentColor"})),P||(P=er.createElement("circle",{cx:12,cy:12,r:9.75,stroke:"currentColor",strokeWidth:1.5})))},tQ=["title","titleId"];function t$(){return(t$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t0=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,tQ);return er.createElement("svg",t$({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,I||(I=er.createElement("g",{id:"Scale"},er.createElement("path",{id:"Vector",d:"M4.25 19.75V4.25H19.75L19.75 19.75H4.25Z",stroke:"currentColor",strokeWidth:1.5}),er.createElement("path",{id:"Vector_2",d:"M5 12H12L12 19",stroke:"currentColor"}))))},t1=["title","titleId"];function t2(){return(t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t5=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,t1);return er.createElement("svg",t2({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,A||(A=er.createElement("g",{id:"Select"},er.createElement("path",{id:"Vector",d:"M8 17V4L17 13H11.65L8 17Z",stroke:"currentColor",strokeWidth:1.5}),er.createElement("path",{id:"Vector 49",d:"M12 13.5L15 20.5",stroke:"currentColor",strokeWidth:1}))))},t3=["title","titleId"];function t7(){return(t7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t4=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,t3);return er.createElement("svg",t7({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,z||(z=er.createElement("g",{id:"Translate"},er.createElement("path",{id:"Vector",d:"M5.5 4V19H20.5",stroke:"currentColor",strokeWidth:1.5}),er.createElement("path",{id:"Vector 48",d:"M5.5 19L11.5 13",stroke:"currentColor"}))))},t6=["title","titleId"];function t9(){return(t9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var t8=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,t6);return er.createElement("svg",t9({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?er.createElement("title",{id:n},t):null,N||(N=er.createElement("g",{id:"World"},er.createElement("circle",{id:"Ellipse 65",cx:12,cy:12,r:8.75,stroke:"currentColor",strokeWidth:1.5}),er.createElement("path",{id:"Ellipse 70",d:"M7.5 12C7.5 14.2699 7.95897 16.3497 8.72436 17.8805C9.47479 19.3813 10.604 20.5 12 20.5C13.396 20.5 14.5252 19.3813 15.2756 17.8805C16.041 16.3497 16.5 14.2699 16.5 12C16.5 9.73007 16.041 7.65031 15.2756 6.11954C14.5252 4.61867 13.396 3.5 12 3.5C10.604 3.5 9.47479 4.61867 8.72436 6.11954C7.95897 7.65031 7.5 9.73007 7.5 12Z",stroke:"currentColor"}),er.createElement("path",{id:"Intersect",fillRule:"evenodd",clipRule:"evenodd",d:"M17.864 6.55762C17.6746 6.6843 17.4576 6.81039 17.2102 6.93407C15.9286 7.57487 14.0881 8.00007 12.0006 8.00007C9.913 8.00007 8.07251 7.57487 6.79091 6.93407C6.54355 6.81039 6.32653 6.68429 6.13709 6.55762C5.90973 6.80245 5.69752 7.06154 5.50195 7.3334C6.95419 8.34278 9.32385 9.00007 12.0006 9.00007C14.6773 9.00007 17.0469 8.34278 18.4992 7.3334C18.3036 7.06154 18.0914 6.80245 17.864 6.55762ZM18.4992 16.6667C17.0469 15.6574 14.6773 15.0001 12.0006 15.0001C9.32386 15.0001 6.95419 15.6574 5.50195 16.6667C5.69752 16.9386 5.90973 17.1977 6.13709 17.4425C6.32654 17.3158 6.54355 17.1898 6.79091 17.0661C8.07251 16.4253 9.913 16.0001 12.0006 16.0001C14.0881 16.0001 15.9286 16.4253 17.2102 17.0661C17.4576 17.1898 17.6746 17.3158 17.864 17.4425C18.0914 17.1977 18.3036 16.9386 18.4992 16.6667Z",fill:"currentColor",fillOpacity:.25}),er.createElement("path",{id:"Line 100",d:"M3 12H21",stroke:"currentColor"}),er.createElement("path",{id:"Line 101",d:"M12 3L12 21",stroke:"currentColor"}))))},ne=n(65838),nt=n.n(ne);function nn(){let e=nu(),t=tl(e.spaceMode);return(0,L.jsx)("button",{className:nt().ToolbarButton,style:{flex:"0 0 3.5em"},onClick:()=>{e.spaceMode.set(t===u.World?u.Local:u.World)},children:t===u.World?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(t8,{}),(0,L.jsx)("span",{children:"World"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(tX,{}),(0,L.jsx)("span",{children:"Local"})]})})}function nr(){let e=nu(),t=tl(e.toolType);return(0,L.jsxs)("div",{className:nt().ToolTypeSwitch,children:[(0,L.jsx)("div",{className:(0,et.f)(nt().Toggle,t===c.Select&&nt().active),onClick:()=>e.toolType.set(c.Select),children:(0,L.jsx)(t5,{})}),(0,L.jsx)("div",{className:(0,et.f)(nt().Toggle,t===c.Move&&nt().active),onClick:()=>e.toolType.set(c.Move),children:(0,L.jsx)(t4,{})}),(0,L.jsx)("div",{className:(0,et.f)(nt().Toggle,t===c.Rotate&&nt().active),onClick:()=>e.toolType.set(c.Rotate),children:(0,L.jsx)(tJ,{})}),(0,L.jsx)("div",{className:(0,et.f)(nt().Toggle,t===c.Scale&&nt().active),onClick:()=>e.toolType.set(c.Scale),children:(0,L.jsx)(t0,{})})]})}function ni(){return(0,L.jsx)("div",{className:nt().Toolbar,children:(0,L.jsxs)("div",{className:nt().Wrapper,children:[(0,L.jsx)(nn,{}),(0,L.jsx)(nr,{})]})})}function nl(){return(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>alert("coming soon..."),children:[(0,L.jsx)("h1",{children:"Info"}),(0,L.jsx)(en,{})]})}function ns(){nh();let{three:e}=nu(),t=[];return e.scene.traverse(e=>{e instanceof T.Camera&&t.push(e)}),(0,L.jsx)(ed,{closedByDefault:!0,title:"Camera",content:()=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(tF,{}),(0,L.jsx)("div",{className:"flex flex-col text-xs",children:t.map(e=>(0,L.jsx)("div",{children:(0,L.jsx)("div",{children:e.name})},e.uuid))})]})})}let no={backgroundColor:"#0006"};function na(e){let{children:t,backgroundColor:n}={...no,...e},r=nu();return(0,D.sv)(function*(){yield(0,q.p)([[{code:"Space",modifiers:"shift"},()=>{r.uiVisibility.set(!r.uiVisibility.value)}]])},[]),(0,L.jsx)("div",{className:(0,et.f)(eV().EditorUI,eV().Abs0,eV().Thru),style:{"--background-color":n},children:(0,L.jsx)(tD,{topBar:(0,L.jsx)(ni,{}),leftCol:(0,L.jsxs)(tN,{separators:!0,children:[(0,L.jsx)(nl,{}),(0,L.jsx)(ns,{}),(0,L.jsx)(eH,{}),(0,L.jsx)(e$,{}),(0,L.jsx)(tW,{})]}),rightCol:(0,L.jsx)(tN,{children:(0,L.jsx)(tS,{})}),children:t})})}let nc=(0,R.createContext)(null);function nu(e){let t=(0,R.useContext)(nc);return(0,D.sv)(async function*(n,r){if(e){let n=e(t);if(n&&"function"==typeof n.next)do{let{value:e,done:t}=await n.next();if(t)break;yield e}while(r.mounted)}},[]),t}function nh(){let e=nu(),t=B();(0,R.useEffect)(()=>e.onRefresh(t).destroy,[])}function nd(e){let{three:t,...n}=e,r=(0,R.useMemo)(()=>new ee(t),[]);return(0,D.sv)(function*(){yield t.onAfterLoad(()=>{r.requestRefresh()})},[]),(0,L.jsx)(nc.Provider,{value:r,children:(0,L.jsx)(na,{...n})})}var nf=n(32678),np=n(75952),nv=n(34310),nm=n(1050),ng=n(10833),ny=n(73437),nb=n(42685);let nx=new T.Matrix4;new T.Color;var nw=n(27636);class nC extends T.LineSegments{clear(){return this.points.length=0,this.geometry.setFromPoints(this.points),this}drawRect(e){let{x:t,y:n,width:r,height:i}=tM.Ae.from(e),l=r/2,s=i/2,o=new T.Vector2(t-l,n-s),a=new T.Vector2(t+l,n-s),c=new T.Vector2(t+l,n+s),u=new T.Vector2(t-l,n+s);return this.points.push(o,a,a,c,c,u,u,o),this.geometry.setFromPoints(this.points),this}constructor(...e){super(...e),this.points=[]}}class nj extends T.MeshBasicMaterial{get mapAspect(){return this.internal.uniforms.uMapInfo.value.x}set mapAspect(e){this.internal.uniforms.uMapInfo.value.x=e}getScatteredSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new T.Vector2;return e.x=this.internal.uniforms.uScatteredInfo.value.x,e.y=this.internal.uniforms.uScatteredInfo.value.y,e}setScatteredSize(e){this.internal.uniforms.uScatteredInfo.value.x=e.x,this.internal.uniforms.uScatteredInfo.value.y=e.y}get scatteredSize(){return this.getScatteredSize()}set scatteredSize(e){this.setScatteredSize(e)}constructor(){super({side:T.DoubleSide}),this.internal={uniforms:{uMapInfo:{value:new T.Vector4(1,1,.5,.5)},uScatteredInfo:{value:new T.Vector4(1,1,0,0)},uTime:e0.vB.get("three").uTime}},this.onBeforeCompile=e=>nb.b.with(e).uniforms(this.internal.uniforms).vertex.top('\n  // sizeMode: 0 for "contain", 1 for "cover"\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale) {\n    align.y = 1.0 - align.y; // Flip y-coordinate\n    if ((outerAspect > innerAspect) != (sizeMode == 1.0)) { // XOR condition for mode\n      float scaleFactor = outerAspect / innerAspect;\n      uv.x = (uv.x - align.x) * scaleFactor + align.x; // Adjust x-coordinate\n    } else {\n      float scaleFactor = innerAspect / outerAspect;\n      uv.y = (uv.y - align.y) * scaleFactor + align.y; // Adjust y-coordinate\n    }\n    uv = (uv - align) / scale + align;\n    return uv;\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, float scale) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(scale));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, vec2(0.5));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect) {\n    return applyUvSize(uv, outerAspect, innerAspect, 1.0);\n  }\n').vertex.top("\n        attribute vec4 aRectUv;\n      ").vertex.replace("uv_vertex","\n        #if defined( USE_UV ) || defined( USE_ANISOTROPY )\n          vUv = vec3( uv, 1 ).xy;\n        #endif\n        #ifdef USE_MAP\n          vec2 instanceUv = aRectUv.xy + aRectUv.zw * MAP_UV;\n\n          // vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale\n          float outerAspect = uScatteredInfo.x / uScatteredInfo.y;\n          float innerAspect = uMapInfo.x;\n          float sizeMode = uMapInfo.y;\n          vec2 align = uMapInfo.zw;\n          instanceUv = applyUvSize(instanceUv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n          \n          vMapUv = ( mapTransform * vec3( instanceUv, 1 ) ).xy;\n        #endif\n      ")}}class nS{constructor(e,t){this.props={...nS.defaultProps,...t};let{position:n,size:r,scatterPadding:i,sizeOptions:l,seed:s}=this.props,{col:o,row:a}=e.props;nw.T.seed(s);let c=nw.T.createPicker(l),u=Array.from({length:o}).map(c),h=Array.from({length:a}).map(c),{x:d,y:f}=(0,ny.iK)(n),{x:p,y:v}=(0,ny.iK)(r),m=new tA(C.Horizontal).setSize(p,v).setOffset(d-p/2,f-v/2);for(let e of u){let t=new tA(C.Vertical).setSize("".concat(e,"fr")).addTo(m);for(let e of h)new tA(C.Horizontal).setSize("".concat(e,"fr")).addTo(t)}m.computeLayout();let g=m.rect,y=[...m.allLeaves({includeSelf:!1})],b=(p+v)/2,x=y.map(e=>{let t=e.rect.clone(),n=t.clone().relativeTo(g),{x:r,y:l}=t.getCenter(),s=(0,e3.ii)(.5,1,(Math.abs(r-d)+Math.abs(l-f))/b);return t.centerX+=nw.T.between(-i,i)*s,t.centerY+=nw.T.between(-i,i)*s,{space:e,rect:t,uvRect:n,scatterCoeff:s}});this.root=m,this.nodes=x}}nS.defaultProps={seed:87654,position:new T.Vector2(0,0),size:new T.Vector2(3,2),scatterPadding:.1,sizeOptions:[[.5,1],[1,10],[2,2],[3,1]]};class n_ extends T.Object3D{get count(){return this.internal.count}getDistribution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new nS(this,e)}drawDistribution(e){let{position:t,size:n,scatterPadding:r}=e.props,{x:i,y:l}=(0,ny.iK)(t),{x:s,y:o}=(0,ny.iK)(n);this.internal.lineHelper.drawRect([i,l,s,o]).drawRect([i,l,s+2*r,o+2*r])}distribute(e){let{count:t,mesh:n,aRectUv:r}=this.internal;for(let l=0;l<t;l++){var i;let{rect:t,uvRect:s}=e.nodes[l];n.setMatrixAt(l,(i={position:t.getCenter(),scale:t.getSize()},(0,ny.Xe)(i,nx))),r.setXYZW(l,s.x,s.y,s.width,s.height)}n.material.setScatteredSize(e.root.rect.getSize())}lerpDistribute(e,t,n){let{count:r,mesh:i,aRectUv:l}=this.internal,s=new tM.Ae,o=new tM.Ae;for(let c=0;c<r;c++){var a;let r=e.nodes[c],u=t.nodes[c];s.lerpRectangles(r.rect,u.rect,n),o.lerpRectangles(r.uvRect,u.uvRect,n),i.setMatrixAt(c,(a={position:s.getCenter(),scale:s.getSize()},(0,ny.Xe)(a,nx))),l.setXYZW(c,o.x,o.y,o.width,o.height)}let c=new tM.Ae().lerpRectangles(e.root.rect,t.root.rect,n);i.material.setScatteredSize(c.getSize()),i.instanceMatrix.needsUpdate=!0,l.needsUpdate=!0}constructor(e={}){super(),this.transition=0,this.props={...n_.defaultProps,...e};let{row:t,col:n}=this.props,r=t*n,i=new T.PlaneGeometry,l=new nj,s=new T.InstancedMesh(i,l,r);(0,nv.b)(s,this);let o=new T.InstancedBufferAttribute(new Float32Array(4*r),4);s.geometry.setAttribute("aRectUv",o);let a=new nC;(0,nv.b)(a,this),this.internal={count:r,mesh:s,aRectUv:o,lineHelper:a},this.distribute(this.getDistribution())}}n_.defaultProps={row:20,col:30,imageAspect:1,imageResizeMode:"cover"},n_.transition_meta="Range(0, 1)";class nO extends T.Mesh{constructor(){super(new T.IcosahedronGeometry(40,1),new T.MeshBasicMaterial({color:"#aeb4e9",side:T.BackSide})),this.onBeforeRender=(e,t,n)=>{this.position.copy(n.position)}}}function nE(){let e=nu();return(0,ng._v)(nE.name,async function*(t,n){e.metadata.get(t).set("hierarchyOpen",!0),e.sceneSelection.add("Select ScatteredDemo",t),(0,nv.b)(new nO,t),(0,nv.b)(new T.Mesh(new nf.w,new np.P),t);let r=await n.load("/assets/images/DebugTexture.png");r.colorSpace=T.SRGBColorSpace;let i=(0,nv.b)(new n_,t);i.internal.mesh.material.map=r,i.internal.mesh.material.mapAspect=r.image.width/r.image.height;let l=i.getDistribution({position:[-2,0],size:[3,2]}),s=i.getDistribution({position:[2,0],size:[2,3]});i.drawDistribution(l),i.drawDistribution(s),t.userData.transition=0,t.userData.transition_meta="Slider(0, 1)",yield n.onTick(e=>{let{time:t}=e;i.lerpDistribute(l,s,.5*Math.sin(t/2)+.5)})},[]),null}function nk(){return(0,ng.Ky)(function*(e){e.useOrbitControls({position:[0,0,8],target:0})},[]),null}function nM(e){let{children:t}=e,n=(0,ng.Ky)();return(0,L.jsx)(nd,{three:n,backgroundColor:"#26163c4f",children:t})}function nP(){return(0,L.jsxs)("div",{className:"absolute-through",children:[(0,L.jsx)(nm.Leak,{}),(0,L.jsx)(ng.H7,{children:(0,L.jsxs)(nM,{children:[(0,L.jsx)("div",{className:"absolute-through px-3 py-2 flex flex-col gap-4",children:(0,L.jsx)("h1",{className:"text-4xl",children:"ScatteredPlane"})}),(0,L.jsx)(nk,{}),(0,L.jsx)(nE,{})]})})]})}},1050:function(e,t,n){"use strict";n.d(t,{Leak:function(){return s}});var r=n(80590),i=n(45003),l=n(27636);function s(){return Object.assign(window,{...i,...r,PRNG:l.T}),null}},93293:function(e,t,n){"use strict";function r(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{p:function(){return s}});let i={preventDefault:!1,strictTarget:!1},l={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:""};function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,o,a]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:c}={...i,...o},u=e=>{if(o.strictTarget&&e.target!==s)return;let{ctrlKey:t,altKey:n,shiftKey:i,metaKey:u}=e,h={event:e,modifiers:{ctrl:t,alt:n,shift:i,meta:u}};for(let s=0,o=a.length;s<o;s++){let[o,d]=a[s],{key:f,keyCaseInsensitive:p,code:v,noModifiers:m,modifiers:g}=function(e){let t="string"==typeof e?{...l,key:e}:{...l,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(o);Object.values({key:r(p?e.key.toLowerCase():e.key,f),code:r(e.code,v),noModifiers:!m||!1===t&&!1===n&&!1===i&&!1===u,modifiers:!g||function(e,t){let{ctrlKey:n,altKey:r,shiftKey:i,metaKey:l}=e;if("function"==typeof t)return t({ctrl:n,alt:r,shift:i,meta:l});let{ctrl:s=!1,alt:o=!1,shift:a=!1,meta:c=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return s===n&&o===r&&a===i&&c===l}(e,g)}).every(Boolean)&&(c&&e.preventDefault(),d(h))}};return s.addEventListener("keydown",u,{passive:!1}),{destroy:()=>{s.removeEventListener("keydown",u)}}}},35351:function(e,t,n){"use strict";let r;n.d(t,{f:function(){return o}});let i=new WeakMap,l=(r=()=>{let e=new WeakMap;return{resizeObserver:new ResizeObserver(t=>{for(let r of t){var n;null===(n=e.get(r.target))||void 0===n||n(r)}}),resizeObserverMap:e}},()=>{let e=i.get(r);if(void 0===e){let e=r();return i.set(r,e),e}return e});class s{get aspect(){return this.size.x/this.size.y}constructor(e,t){this.element=e,this.size=t}}function o(e,t){let{onSize:n}=function(e){if("function"==typeof e)return{onSize:e};let{onSize:t=()=>{}}=null!=e?e:{};return{onSize:t}}(t),r=new DOMPoint(0,0);if(e instanceof Window){let t=()=>{r.x=window.innerWidth,r.y=window.innerHeight,n(new s(e,r))};return e.addEventListener("resize",t),t(),{destroy:()=>{e.removeEventListener("resize",t)}}}{let{resizeObserver:t,resizeObserverMap:i}=l();return t.observe(e),i.set(e,t=>{r.x=t.contentRect.width,r.y=t.contentRect.height,n(new s(e,r))}),{destroy:()=>t.unobserve(e)}}}},71427:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).map(e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e)return Object.keys(e).filter(t=>!0===e[t]);throw Error("Not possible.")}).flat().join(" ")}n.d(t,{f:function(){return r}})},32678:function(e,t,n){"use strict";n.d(t,{w:function(){return c}});var r=n(64740),i=n(783);let l={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white"},s=new r.Color;function o(e){let{axis:t,length:n,radius:o,radialSegments:a,coneRatio:c,radiusScale:u,vertexColor:h,baseCap:d,color:f}={...l,...e},p=o*u,v=n*c,m=new r.ConeGeometry(3*p,v,a),g=new r.CylinderGeometry(p,p,1,a,1,!0),y=n-v,b=n-.5*v;m.rotateZ(-Math.PI/2).translate(b,0,0),g.scale(1,y,1).rotateZ(-Math.PI/2).translate(.5*y,0,0);let x="none"===d?new r.BufferGeometry:"flat"===d?new r.CircleGeometry(p,a).rotateY(-Math.PI/2):new r.SphereGeometry(p,a,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),w=(0,i.n4)([m,g,x]);switch(t){case"y":w.rotateZ(Math.PI/2);break;case"z":w.rotateY(-Math.PI/2)}if(h){let e=w.attributes.position.count,t=new r.BufferAttribute(new Float32Array(3*e),3);w.setAttribute("color",t),s.set(f);for(let n=0;n<e;n++)t.setXYZ(n,s.r,s.g,s.b)}return w}let a={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class c extends r.BufferGeometry{constructor(e){super();let{xColor:t,yColor:n,zColor:r,...l}={...a,...e},s=o({...l,axis:"x",color:t}),c=o({...l,axis:"y",color:n}),u=o({...l,axis:"z",color:r}),h=(0,i.n4)([s,c,u]);this.copy(h),h.dispose()}}},75952:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(64740);class i extends r.ShaderMaterial{constructor(e){let{vertexColors:t=!0,...n}=null!=e?e:{};super({...n,uniforms:{uSunPosition:{value:new r.Vector3(.5,.7,.3)}},vertexColors:t,vertexShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vColor;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vColor = color;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vColor;\n\nuniform vec3 uSunPosition;\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  light = mix(0.1, 1.0, light);\n  gl_FragColor = vec4(vColor * light, 1.0);\n}\n"}),this.sunPosition=this.uniforms.uSunPosition.value}}},34310:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(74985);function i(e,t,n){return t.add(e),(0,r.N)(e,n),e}},80590:function(e,t,n){"use strict";function r(e,t){for(let n of e)if(t(n))return!0;return!1}function i(e,t){for(let n of e)if(!t(n))return!1;return!0}function l(e,t,n){let r=[];function i(e){let t=[];return r[e]=t,t}if(void 0!==n)for(let e=0;e<n;e++)i(e);for(let n of e){var l;let e=t(n);(null!==(l=r[e])&&void 0!==l?l:i(e)).push(n)}return r}n.r(t),n.d(t,{every:function(){return i},some:function(){return r},split:function(){return l}})},22496:function(e){e.exports={StateButtons:"StateButtons_StateButtons__44xCf"}},6379:function(e){e.exports={SmallButton:"buttons_SmallButton__ZC6py",outlined:"buttons_outlined__vEweo"}},45868:function(e){e.exports={Foldable:"foldable_Foldable__7AuMN"}},37789:function(e){e.exports={HierarchyList:"hierarchy_HierarchyList__1eFX8",Node:"hierarchy_Node__g5cO4",Link:"hierarchy_Link___9bij",ConstructorName:"hierarchy_ConstructorName__oqCpV",ChildCount:"hierarchy_ChildCount__DEYoM",Label:"hierarchy_Label__yhZRF",Background:"hierarchy_Background__WYmOv",selectable:"hierarchy_selectable__UeVl6",RightButtons:"hierarchy_RightButtons__Y3ePb",RequireHover:"hierarchy_RequireHover__biu9F",FadeInHover:"hierarchy_FadeInHover__8NMU2"}},58506:function(e){e.exports={History:"history_History__nev2g",Stack:"history_Stack__8idWe",Command:"history_Command___2OlW",Redo:"history_Redo___Msn0"}},516:function(e){e.exports={Field:"inputs_Field__e3mT6",dragging:"inputs_dragging__Kara1",NumberField:"inputs_NumberField__3eMRs",InlineInput:"inputs_InlineInput__YHYEv",MainLabel:"inputs_MainLabel__6ALgs",AtomicInput:"inputs_AtomicInput__SDyfx",draggable:"inputs_draggable__A2DyT",focus:"inputs_focus__B_Ysx",multiple:"inputs_multiple___JZM5",WhileDragging:"inputs_WhileDragging__gAfqH",Slider:"inputs_Slider__gKcDK",ProgressBar:"inputs_ProgressBar__RY3fR",ThinBar:"inputs_ThinBar__augfb",OvershootLowerBar:"inputs_OvershootLowerBar__sjsTh",OvershootUpperBar:"inputs_OvershootUpperBar__jqHRP",hidden:"inputs_hidden__dZzYI"}},75304:function(e){e.exports={dim:"inspector_dim__AhntD",UUID:"inspector_UUID__45wJ7",TitleSingle:"inspector_TitleSingle__t1At8",Parent:"inspector_Parent__IN6kA",Children:"inspector_Children__RCyYO",Geometry:"inspector_Geometry__8iSdu",SmallButton:"inspector_SmallButton__9JfbM"}},53968:function(e){e.exports={TransformPanel:"transform_TransformPanel__8n1kc"}},52622:function(e){e.exports={Layout:"layout_Layout__76OXG"}},96009:function(e){e.exports={EditorUI:"main_EditorUI__y7AnL",Col:"main_Col__JWPK6",Row:"main_Row__HZP7v",Abs:"main_Abs__L4653",Abs0:"main_Abs0__1Cs46",TL:"main_TL__0lNkG",Thru:"main_Thru__yLyCu"}},56699:function(e){e.exports={OrbitControlsPanel:"orbit-controls_OrbitControlsPanel__mzZCS"}},62425:function(e){e.exports={Panel:"panel_Panel__8_uIl",PanelBackground:"panel_PanelBackground__VpvyF",Separator:"panel_Separator__lcMSY"}},82733:function(e){e.exports={Selection:"selection_Selection__QJ_CN"}},65838:function(e){e.exports={Toolbar:"styles_Toolbar___WzoH",Wrapper:"styles_Wrapper__27E0R",ToolbarButton:"styles_ToolbarButton__eQSbn",ToolTypeSwitch:"styles_ToolTypeSwitch__pvUUq",Toggle:"styles_Toggle__KbrUa",active:"styles_active__vaI1a"}}}]);