"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8803],{17475:(e,t,r)=>{r.d(t,{o:()=>u});var n=r(49797),a=r(9954),i=r(17775),s=r(5832);let o={resolved:!1},l=Symbol("promisify");function h(e,t){if(l in e)return e;let{resolved:r=!1}={...o,...t},n={resolve:()=>e,reject:e=>{}},a=new Promise((t,r)=>{n.resolve=()=>(i(),t(e),e),n.reject=e=>{i(),r(Error(e))}}),i=()=>{delete n.resolve,delete n.reject,delete e.then,delete e.catch,delete e.finally,delete e.resolve,delete e.reject,delete e[l]};return Object.assign(e,{then:(e,t)=>(r&&(n.resolve(),r=!1),a.then(e,t)),catch:e=>a.catch(e),finally:e=>a.finally(e),resolve:()=>n.resolve(),reject:()=>n.reject(),[l]:!0}),e}let d=["gltf","glb"],m=["png","jpg","jpeg","hdr","exr"];class c{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class u{static current(){var e;return null!=(e=this.instances[this.instances.length-1])?e:new u}static get(e){var t;return null!=(t=this.instances.find(t=>t.name===e))?t:new u({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,r)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r)})}async loadRgbe(e){let t=h(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=h(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let r=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(r)){let e=this.textureCache.get(r);return null==t||t(e),e}let n=h(this.loaders.texture.load(r,e=>{this.textureCache.set(r,n),null==t||t(e),n.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(r))}));return n}async load(e){let t=e.split(".").pop();if(d.includes(t))return this.loadGltf(e);if(m.includes(t))return new Promise((t,r)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=u.nextId++,this.loaders={gltf:new i.B,texture:new n.Tap,rgbeLoader:new s.Y,exrLoader:new a.H},this.path="",this._onAfterLoad=new c,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),u.instances.push(this)}}u.nextId=0,u.instances=[]},88803:(e,t,r)=>{r.d(t,{O0:()=>n,XW:()=>L});var n,a=r(49797),i=r(99613),s=r(50373),o=r(64416),l=r(27491),h=r(27146),d=r(71591),m=r(28334);!function(e){e[e.Render=0]="Render",e[e.PostProcessing=1e3]="PostProcessing",e[e.GizmoRender=2e3]="GizmoRender",e[e.Outline=3e3]="Outline",e[e.Output=4e3]="Output",e[e.Antialiasing=5e3]="Antialiasing"}(n||(n={}));class c{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let r=e[1],n=t[1];return r.type!==n.type?r.type-n.type:r.insertOrder-n.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,r]of this.passMap)r.type===e&&(yield[t,r])}addPass(e){let{type:t=n.Render,insertOrder:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===r){var a,i,s;r=(null!=(s=null==(i=[...this.getPassesByType(t)].at(-1))||null==(a=i[1])?void 0:a.insertOrder)?s:-1)+1}return this.passMap.set(e,{type:t,insertOrder:r}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,r){this.composer.setSize(e,t),this.composer.setPixelRatio(r),this.basicPasses.fxaa.uniforms.resolution.value.set(1/r/e,1/r/t),this.basicPasses.smaa.setSize(e*r,t*r)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let r of this.composer.passes)r instanceof l.A&&r.scene===t&&(r.scene=e)}render(e){this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:r}=this;for(let[a,i]of t.passes.entries()){let t=r.get(i);if(t){let r=i.enabled?"✅":"❌";e.push("- ".concat(a,": ").concat(r," ").concat(n[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(i.constructor.name))}else e.push("- ".concat(a,": NO METADATA for ").concat(i.constructor.name))}return e.join("\n")}constructor(e,t,r,c){let u=new i.s(e),F=new Map,x=new l.A(t,c);x.clearAlpha=0,F.set(x,{type:n.Render,insertOrder:0}),u.addPass(x);let p=new l.A(r,c);F.set(p,{type:n.GizmoRender,insertOrder:0}),p.clear=!1,p.clearDepth=!1,u.addPass(p);let f=new s.G(new a.I9Y,t,c);F.set(f,{type:n.GizmoRender,insertOrder:0}),u.addPass(f);let g=new o.X;F.set(g,{type:n.Output,insertOrder:0}),u.addPass(g);let b=new h.p(m.o);F.set(b,{type:n.Antialiasing,insertOrder:0}),u.addPass(b);let C=new d.I;C.enabled=!1,F.set(C,{type:n.Antialiasing,insertOrder:0}),u.addPass(C),this.composer=u,this.basicPasses={mainRender:x,gizmoRender:p,outline:f,output:g,fxaa:b,smaa:C},this.passMap=F}}var u=r(28535),F=r(76999),x=r(57368),p=r(30158),f=r(17223),g=r(57165),b=r(79285);let C=JSON.parse('[{"name":"Lavender","hex":"E6E6FA"},{"name":"Thistle","hex":"D8BFD8"},{"name":"Plum","hex":"DDA0DD"},{"name":"Violet","hex":"EE82EE"},{"name":"Orchid","hex":"DA70D6"},{"name":"Fuchsia","hex":"FF00FF"},{"name":"Magenta","hex":"FF00FF"},{"name":"MediumOrchid","hex":"BA55D3"},{"name":"MediumPurple","hex":"9370DB"},{"name":"BlueViolet","hex":"8A2BE2"},{"name":"DarkViolet","hex":"9400D3"},{"name":"DarkOrchid","hex":"9932CC"},{"name":"DarkMagenta","hex":"8B008B"},{"name":"Purple","hex":"800080"},{"name":"Indigo","hex":"4B0082"},{"name":"DarkSlateBlue","hex":"483D8B"},{"name":"SlateBlue","hex":"6A5ACD"},{"name":"MediumSlateBlue","hex":"7B68EE"},{"name":"Pink","hex":"FFC0CB"},{"name":"LightPink","hex":"FFB6C1"},{"name":"HotPink","hex":"FF69B4"},{"name":"DeepPink","hex":"FF1493"},{"name":"PaleVioletRed","hex":"DB7093"},{"name":"MediumVioletRed","hex":"C71585"},{"name":"LightSalmon","hex":"FFA07A"},{"name":"Salmon","hex":"FA8072"},{"name":"DarkSalmon","hex":"E9967A"},{"name":"LightCoral","hex":"F08080"},{"name":"IndianRed","hex":"CD5C5C"},{"name":"Crimson","hex":"DC143C"},{"name":"FireBrick","hex":"B22222"},{"name":"DarkRed","hex":"8B0000"},{"name":"Red","hex":"FF0000"},{"name":"OrangeRed","hex":"FF4500"},{"name":"Tomato","hex":"FF6347"},{"name":"Coral","hex":"FF7F50"},{"name":"DarkOrange","hex":"FF8C00"},{"name":"Orange","hex":"FFA500"},{"name":"Yellow","hex":"FFFF00"},{"name":"LightYellow","hex":"FFFFE0"},{"name":"LemonChiffon","hex":"FFFACD"},{"name":"LightGoldenrodYellow","hex":"FAFAD2"},{"name":"PapayaWhip","hex":"FFEFD5"},{"name":"Moccasin","hex":"FFE4B5"},{"name":"PeachPuff","hex":"FFDAB9"},{"name":"PaleGoldenrod","hex":"EEE8AA"},{"name":"Khaki","hex":"F0E68C"},{"name":"DarkKhaki","hex":"BDB76B"},{"name":"Gold","hex":"FFD700"},{"name":"Cornsilk","hex":"FFF8DC"},{"name":"BlanchedAlmond","hex":"FFEBCD"},{"name":"Bisque","hex":"FFE4C4"},{"name":"NavajoWhite","hex":"FFDEAD"},{"name":"Wheat","hex":"F5DEB3"},{"name":"BurlyWood","hex":"DEB887"},{"name":"Tan","hex":"D2B48C"},{"name":"RosyBrown","hex":"BC8F8F"},{"name":"SandyBrown","hex":"F4A460"},{"name":"Goldenrod","hex":"DAA520"},{"name":"DarkGoldenrod","hex":"B8860B"},{"name":"Peru","hex":"CD853F"},{"name":"Chocolate","hex":"D2691E"},{"name":"SaddleBrown","hex":"8B4513"},{"name":"Sienna","hex":"A0522D"},{"name":"Brown","hex":"A52A2A"},{"name":"Maroon","hex":"800000"},{"name":"DarkOliveGreen","hex":"556B2F"},{"name":"Olive","hex":"808000"},{"name":"OliveDrab","hex":"6B8E23"},{"name":"YellowGreen","hex":"9ACD32"},{"name":"LimeGreen","hex":"32CD32"},{"name":"Lime","hex":"00FF00"},{"name":"LawnGreen","hex":"7CFC00"},{"name":"Chartreuse","hex":"7FFF00"},{"name":"GreenYellow","hex":"ADFF2F"},{"name":"SpringGreen","hex":"00FF7F"},{"name":"MediumSpringGreen","hex":"00FA9A"},{"name":"LightGreen","hex":"90EE90"},{"name":"PaleGreen","hex":"98FB98"},{"name":"DarkSeaGreen","hex":"8FBC8F"},{"name":"MediumSeaGreen","hex":"3CB371"},{"name":"SeaGreen","hex":"2E8B57"},{"name":"ForestGreen","hex":"228B22"},{"name":"Green","hex":"008000"},{"name":"DarkGreen","hex":"006400"},{"name":"MediumAquamarine","hex":"66CDAA"},{"name":"Aqua","hex":"00FFFF"},{"name":"Cyan","hex":"00FFFF"},{"name":"LightCyan","hex":"E0FFFF"},{"name":"PaleTurquoise","hex":"AFEEEE"},{"name":"Aquamarine","hex":"7FFFD4"},{"name":"Turquoise","hex":"40E0D0"},{"name":"MediumTurquoise","hex":"48D1CC"},{"name":"DarkTurquoise","hex":"00CED1"},{"name":"LightSeaGreen","hex":"20B2AA"},{"name":"CadetBlue","hex":"5F9EA0"},{"name":"DarkCyan","hex":"008B8B"},{"name":"Teal","hex":"008080"},{"name":"LightSteelBlue","hex":"B0C4DE"},{"name":"PowderBlue","hex":"B0E0E6"},{"name":"LightBlue","hex":"ADD8E6"},{"name":"SkyBlue","hex":"87CEEB"},{"name":"LightSkyBlue","hex":"87CEFA"},{"name":"DeepSkyBlue","hex":"00BFFF"},{"name":"DodgerBlue","hex":"1E90FF"},{"name":"CornflowerBlue","hex":"6495ED"},{"name":"SteelBlue","hex":"4682B4"},{"name":"RoyalBlue","hex":"4169E1"},{"name":"Blue","hex":"0000FF"},{"name":"MediumBlue","hex":"0000CD"},{"name":"DarkBlue","hex":"00008B"},{"name":"Navy","hex":"000080"},{"name":"MidnightBlue","hex":"191970"},{"name":"White","hex":"FFFFFF"},{"name":"Snow","hex":"FFFAFA"},{"name":"Honeydew","hex":"F0FFF0"},{"name":"MintCream","hex":"F5FFFA"},{"name":"Azure","hex":"F0FFFF"},{"name":"AliceBlue","hex":"F0F8FF"},{"name":"GhostWhite","hex":"F8F8FF"},{"name":"WhiteSmoke","hex":"F5F5F5"},{"name":"Seashell","hex":"FFF5EE"},{"name":"Beige","hex":"F5F5DC"},{"name":"OldLace","hex":"FDF5E6"},{"name":"FloralWhite","hex":"FFFAF0"},{"name":"Ivory","hex":"FFFFF0"},{"name":"AntiqueWhite","hex":"FAEBD7"},{"name":"Linen","hex":"FAF0E6"},{"name":"LavenderBlush","hex":"FFF0F5"},{"name":"MistyRose","hex":"FFE4E1"},{"name":"Gainsboro","hex":"DCDCDC"},{"name":"LightGray","hex":"D3D3D3"},{"name":"Silver","hex":"C0C0C0"},{"name":"DarkGray","hex":"A9A9A9"},{"name":"Gray","hex":"808080"},{"name":"DimGray","hex":"696969"},{"name":"LightSlateGray","hex":"778899"},{"name":"SlateGray","hex":"708090"},{"name":"DarkSlateGray","hex":"2F4F4F"},{"name":"Black","hex":"000000"}]');function y(e){return(0,b.toff)(e).toString(16).padStart(2,"0")}function B(e,t){return null!=t||(t={r:1,g:1,b:1,a:1}),t.r=(e>>16&255)/255,t.g=(e>>8&255)/255,t.b=(255&e)/255,t}function A(e,t){switch(null!=t||(t={r:1,g:1,b:1,a:1}),typeof e){case"number":return B(e,t);case"string":if(e.startsWith("#"))return function(e,t){if(null!=t||(t={r:1,g:1,b:1,a:1}),e.startsWith("#")&&(e=e.slice(1)),3===e.length||4===e.length){let[r,n,a,i="f"]=e;return t.r=Number.parseInt(r+r,16)/255,t.g=Number.parseInt(n+n,16)/255,t.b=Number.parseInt(a+a,16)/255,t.a=Number.parseInt(i+i,16)/255,t}if(6===e.length||8===e.length){let r=e.slice(0,2),n=e.slice(2,4),a=e.slice(4,6),i=e.slice(6,8)||"ff";return t.r=Number.parseInt(r,16)/255,t.g=Number.parseInt(n,16)/255,t.b=Number.parseInt(a,16)/255,t.a=Number.parseInt(i,16)/255,t}throw Error("Invalid hex string")}(e,t);if(e.startsWith("rgb")||e.startsWith("hsl"))throw Error("Not implemented");try{return B(function(e){let t=RegExp("^".concat(e.toLowerCase(),"$"),"i"),r=C.find(e=>e.name.match(t));if(r)return Number.parseInt(r.hex,16);throw Error("Invalid web color")}(e),t)}catch(e){throw Error("Invalid color string")}case"object":if(Array.isArray(e)){let[r,n,a,i=1]=e;return t.r=r,t.g=n,t.b=a,t.a=i,t}if("object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&"a"in e)return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t}throw Error("Invalid color declaration")}class D{static from(e){return A(e,new D)}static lerpColors(e,t,r){return new D().lerpColors(e,t,r)}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b,yield this.a}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}clone(){return new this.constructor().copy(this)}set(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.r=e,this.g=t,this.b=r,this.a=n,this}lerpColors(e,t,r){return this.r=(0,b.lerp)(e.r,t.r,r),this.g=(0,b.lerp)(e.g,t.g,r),this.b=(0,b.lerp)(e.b,t.b,r),this.a=(0,b.lerp)(e.a,t.a,r),this}toCSS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex";switch(e){case"hex":return"#".concat(y(this.r)).concat(y(this.g)).concat(y(this.b)).concat(y(this.a));case"rgba":return"rgba(".concat((0,b.toff)(this.r),", ").concat((0,b.toff)(this.g),", ").concat((0,b.toff)(this.b),", ").concat(this.a.toFixed(2),")")}throw Error("Invalid format")}constructor(e){this.r=1,this.g=1,this.b=1,this.a=1,e&&A(e,this)}}var w=r(39787),E=r(92381),v=r(17475),P=r(87381),S=r(21422),G=r(31484),k=new WeakMap;class L extends S.${static current(){return this.instances[this.instances.length-1]}_onSetScene(){this.pipeline.setScene(this.scene)}useOrbitControls(){var e,t;let{position:r=null,target:n=null,element:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof a&&(a=document.querySelector(a)),null!=(e=this.internal).orbitControls||(e.orbitControls=new f.N(this.camera,a)),a&&a!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new f.N(this.camera,a)),r&&(0,E.jj)(r,this.internal.orbitControls.object.position),n&&(0,E.jj)(n,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:r}=this,{domElement:n}=this.renderer;e.appendChild(n),r(()=>{e.removeChild(n)});let a=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},i=new ResizeObserver(a);return i.observe(e),r(()=>{i.disconnect()}),a(),r(this.pointer.initialize(n,t,this.camera,this.ticker)),r((0,g.O)(this.ticker.requestActivation),this.ticker.onTick({phase:G.z.Render,name:"WebGL:Render"},e=>this.renderFrame(e))),r(()=>{var e;null==(e=this.internal.orbitControls)||e.dispose()}),this.domContainer=e,this.domElement=n,this}_onSetSize(){let{size:{x:e,y:t},pixelRatio:r}=this,{renderer:n,perspectiveCamera:a,pipeline:i}=this;n.setSize(e,t),n.setPixelRatio(r),i.setSize(e,t,r),a.aspect=e/t,a.updateProjectionMatrix()}renderFrame(e,t){var r;(!1!==this._enabled||(null==t?void 0:t.force)===!0)&&(null==(r=this.internal.orbitControls)||r.update(e.deltaTime),super.renderFrame(e,t),!1===this.skipRender&&this.pipeline.render(e))}*findAll(e,t){yield*(0,P.wV)(this.scene,e,t)}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}pixelColor(e,t){if(this.pipeline.composer.readBuffer.texture.type===a.ix0){let{uint16:r,color:n}=(0,u._)(this,k);this.renderer.readRenderTargetPixels(this.pipeline.composer.readBuffer,e,t,1,1,r),n.r=a.GxU.fromHalfFloat(r[0]),n.g=a.GxU.fromHalfFloat(r[1]),n.b=a.GxU.fromHalfFloat(r[2]),n.a=a.GxU.fromHalfFloat(r[3])}else throw Error("Unsupported texture type: ".concat(this.pipeline.composer.readBuffer.texture.type));return(0,u._)(this,k).color}pixelColorNdc(e){let{x:t,y:r}=e;return t=Math.floor((t+1)/2*this.fullSize.x),r=Math.floor((r+1)/2*this.fullSize.y),this.pixelColor(t,r)}pointerPixelColor(){return this.pixelColorNdc(this.pointer.screenPosition)}constructor(){super(G.s.WebGL),(0,F._)(this,k,{writable:!0,value:void 0}),this.renderer=new p.WebGLRenderer,this.perspectiveCamera=new a.ubm,this.orthographicCamera=new a.qUd,this.camera=this.perspectiveCamera,this.gizmoScene=new a.Z58,this.pipeline=new c(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.internal={destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=v.o.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,w.zr)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},(0,x._)(this,k,{uint16:new Uint16Array(4),color:new D}),this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),L.instances.push(this)}}L.instances=[]}}]);