(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7215],{888:(e,t,i)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}i.d(t,{_:()=>r})},1e3:(e,t,i)=>{"use strict";function r(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}i.d(t,{_:()=>r})},1295:e=>{e.exports={Client:"client_Client__xAYKJ",Background:"client_Background__G4qOA",ThreeDiv:"client_ThreeDiv__atxk6",Counter:"client_Counter__ME1MG"}},14274:(e,t,i)=>{"use strict";i.d(t,{K:()=>c});var r=i(17953),n=i(81074),s=i(49797),l=i(57165),a=i(21422),o=i(31484);class c extends a.${_onSetSize(){let{size:{x:e,y:t},pixelRatio:i}=this,{renderer:r,perspectiveCamera:n,orthographicCamera:s}=this;r.setSize(e,t),r.setPixelRatio(i);let l=e/t;n.aspect=l,n.updateProjectionMatrix(),s.left=-l,s.right=l,s.top=1,s.bottom=-1,s.updateProjectionMatrix()}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let i=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=i,new ResizeObserver(()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(e);let{domElement:r}=this.renderer;return r.style.display="block",r.style.width="100%",r.style.height="100%",e.appendChild(r),this.setSize({width:r.clientWidth,height:r.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick({name:"WebGPU:Render",phase:o.z.Render},e=>{this.renderFrame(e)}).destroy,this.internal.cancelRequestActivation=(0,l.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,t,this.camera,this.ticker),this.domContainer=e,this.domElement=r,this}renderFrame(e,t){(!1!==this._enabled||(null==t?void 0:t.force)===!0)&&(super.renderFrame(e,t),!1===this.skipRender&&this.postProcessing.renderAsync())}constructor(){super(o.s.WebGPU),this.renderer=new n.uV1({antialias:!0}),this.perspectiveCamera=new s.ubm,this.orthographicCamera=new s.qUd,this.camera=this.perspectiveCamera,this.postProcessing=new n.io7(this.renderer),this.scenePass=(0,r.IXH)(this.scene,this.perspectiveCamera),this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var e,t,i,r,n,s,l;if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(e=this.internal.observer)||e.disconnect(),null==(t=(i=this.internal).cancelTick)||t.call(i),null==(r=(n=this.internal).cancelRequestActivation)||r.call(n),null==(s=(l=this.internal).cancelPointer)||s.call(l)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},15940:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var r=i(29443);function n(e,t){(0,r._)(e,t),t.add(e)}},23127:(e,t,i)=>{"use strict";i.d(t,{_:()=>l});var r=i(89868),n=i(47878),s=i(1e3);function l(e,t,i){return(0,n._)(e,t),(0,s._)(i,"update"),(0,r._)(e,i)}},28535:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(75687),n=i(44138);function s(e,t){var i=(0,n._)(e,t,"get");return(0,r._)(e,i)}},29443:(e,t,i)=>{"use strict";function r(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{_:()=>r})},29968:(e,t,i)=>{"use strict";i.d(t,{q:()=>h,uB:()=>m,yk:()=>u});var r=i(70691),n=i(67203),s=i(7587),l=i(37821),a=i(16219),o=i(14274),c=i(36508);let d=(0,n.createContext)(null);function u(e,t){let i=(0,n.useContext)(d);return(0,s.C7)(async function*(t,r){if(e){let t=e(i,r);if(t&&"function"==typeof t.next)do{let{value:e,done:i}=await t.next();if(i)break;yield e}while(r.mounted)}},null!=t?t:"always"),i}function h(e){let{value:t}=e;return u(async function*(e){let i="function"==typeof t?new t:t;if(e.scene.add(i),"onInitialize"in i){let t=i.onInitialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:i}=await t.next();if(i)break;yield e}}yield()=>{if(i.removeFromParent(),"onDestroy"in i){var e;null==(e=i.onDestroy)||e.call(i)}}},"always"),null}let p={className:"",assetsPath:"/",vertigoControls:!1};function f(e){let{children:t,className:i,vertigoControls:l}={...p,...e},u=(0,n.useMemo)(()=>new o.K,[]),{ref:h}=(0,s.IZ)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:u})},[]);(0,s.C7)(function*(){if(l){let e=new a.n("object"==typeof l?l:{}).initialize(h.current).start();yield e.destroy,yield(0,c.xy)("three",t=>{e.update(u.camera,u.aspect,t.deltaTime)})}},[l]);let f={position:"absolute",inset:0};return(0,r.jsx)("div",{ref:h,className:i,style:f,children:(0,r.jsxs)(d.Provider,{value:u,children:[(0,r.jsx)("div",{style:f}),(0,r.jsx)("div",{style:f,className:"thru",children:u.initialized&&t})]})})}function m(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,l.D)()&&(0,r.jsx)(f,{...t[0]})}},37821:(e,t,i)=>{"use strict";i.d(t,{D:()=>n});var r=i(67203);function n(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},44138:(e,t,i)=>{"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{_:()=>r})},47878:(e,t,i)=>{"use strict";function r(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}i.d(t,{_:()=>r})},51571:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Client:()=>w});var r=i(70691),n=i(67203);function s(e){let t=e.match(/\s*([0-9.]+)\s*(\/\s*[0-9.]+)?\s*([a-zA-Z]*)\s*?/);if(null===t)throw Error("Invalid number");let[i,r,n,s=""]=t;return[Number.parseFloat(r)/(n?Number.parseFloat(n.slice(1)):1),s]}let l={height:"3/2em",aspect:1.6,strokeWidth:"1px",padding:".3em",active:!1,circleActiveFill:"currentColor"},a=(0,n.forwardRef)(function(e,t){let{height:i,strokeWidth:n,aspect:a,padding:o,active:c,circleActiveFill:d,...u}={...l,...e},[h,p]=s(i),f="".concat(h).concat(p),[m,x]=s(n),y=m.toString()+x,g=(h/2).toString()+p,b=(h*a).toString()+p,w=(m/2).toString()+x;return(0,r.jsxs)("svg",{ref:t,width:b,height:f,stroke:"currentColor",strokeWidth:n,fill:"none",...u,children:[(0,r.jsx)("rect",{x:w,y:w,rx:g,width:"calc(".concat(b," - ").concat(y,")"),height:"calc(".concat(f," - ").concat(y,")")}),(0,r.jsx)("circle",{cx:c?"calc(".concat(b," - ").concat(g,")"):g,cy:g,r:"calc(".concat(g," - ").concat(w," - ").concat(o,")"),fill:c?"currentColor":"transparent",style:{transition:"0.2s"}})]})});var o=i(7587),c=i(97540),d=i(29968),u=i(17953),h=i(49797),p=i(81074),f=i(36508);class m extends h.YJl{static current(){return this.instances.at(-1)}constructor(){super(),this.parts=(()=>{let e=(0,u.PiW)((0,u.fVC)(0));e.onObjectUpdate(()=>f.Rv.get("three").time);let t=(0,u.PiW)((0,u.fVC)(0)),i=(0,u.Fn)(i=>{let{storageTexture:r}=i,n=u.cGD.modInt(512),s=u.cGD.div(512),l=(0,u.aqi)(n,s),a=(0,u.fVC)(n).div(50),o=(0,u.fVC)(s).div(50);(0,u.If)(t.equal(0),()=>{let t=a.sin(),i=o.sin(),n=a.add(o).sin(),s=a.mul(a).add(o.mul(o),e.mul(1.2).sin()).sqrt().add(5,e.sin()).sin(),c=t.add(i,n,s),d=e.mul(2).add(a.div(12).add(o.div(32))).sin().remap(-1,1,0,1),h=c.add(Math.PI).sin(),p=c.add(Math.PI).sub(.5).sin(),f=(0,u.Lrr)((0,u.eR5)(d,h,p),e.sin().remap(-1,1,-1,1));(0,u.TJz)(r,l,(0,u.lnd)(f,1)).toWriteOnly()}).Else(()=>{let t=(0,u.FnD)((0,u.eR5)(a,o,e)),i=(0,u.C2u)((0,u.eR5)(a,o,e).mul(.2)).remap(-.65,.65,0,1),n=(0,u.jhA)((0,u.yWT)("red"),(0,u.yWT)("blue"),(0,u.Lrr)(i,5));n.mixAssign((0,u.yWT)("black"),t.oneMinus()),(0,u.TJz)(r,l,(0,u.lnd)(n,1)).toWriteOnly()})}),r=new h.eaF(new h.bdM,new p.P8l({side:h.$EB,color:"#ffcc00"}));this.add(r);let n=new p.RiJ(512,512),s=i({storageTexture:n}).compute(262144);return r.material.colorNode=(0,u.wHr)(n),{plane:r,computeNode:s,uPhase:t}})(),this.onDestroy=()=>{m.instances.splice(m.instances.indexOf(this),1)},this.onTick=(e,t)=>{t.renderer.computeAsync(this.parts.computeNode)},m.instances.push(this)}}m.instances=[];var x=i(1295),y=i.n(x);function g(){return(0,r.jsx)("div",{className:"".concat(y().Background," layer flex flex-col text-center items-center justify-center"),children:(0,r.jsx)("div",{style:{margin:"-100px",inset:0},children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad dicta unde totam! Iusto rerum tempore provident dolores voluptas sed neque quisquam corrupti impedit quam eum animi sint, eaque non quae?"})})}function b(){let[e,t]=(0,n.useState)(!1),[i,s]=(0,n.useState)(NaN),l=(0,d.yk)(),{ref:u}=(0,o.C7)(function*(t){let r=t.querySelector("#three-div"),n=r.querySelector("span + span"),s=m.current();yield l.ticker.onTick({order:-1},a=>{(0,c.EF)(t,r,l.camera,s),n.innerHTML=[...isNaN(i)?'0.000"':"".concat((a.time-i).toFixed(3),'"')].map(e=>"<span>".concat(e,"</span>")).join(""),e&&(s.rotation.y+=2*a.deltaTime,s.rotation.x+=+a.deltaTime)})},[e,i]);return(0,r.jsxs)("div",{ref:u,className:"layer thru p-8 flex flex-col items-start",children:[(0,r.jsx)(d.q,{value:m}),(0,r.jsxs)("div",{className:"p-4 bg-white text-[#bd71ff] flex flex-col gap-2",children:[(0,r.jsx)("h1",{className:"text-4xl mb-2",children:"Webgpu Demo"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"✅ Transparent background"}),(0,r.jsx)("li",{children:"✅ TSL"}),(0,r.jsx)("li",{children:"✅ Basic context (resize, tick, render)"}),(0,r.jsx)("li",{children:"✅ Vertigo controls"}),(0,r.jsx)("li",{children:"✅ CSS 3D"})]}),(0,r.jsxs)("button",{className:"flex gap-2",onClick:()=>t(!e),children:["Auto-Rotate",(0,r.jsx)(a,{active:e})]}),(0,r.jsx)("button",{className:"border border-[#bd71ff]",onClick:()=>{var e;return null==(e=m.current())?void 0:e.rotation.set(0,0,0)},children:"Reset Rotation"})]}),(0,r.jsxs)("div",{id:"three-div",className:y().ThreeDiv,onPointerEnter:()=>{s(f.Rv.get("three").time),m.current().parts.uPhase.value=1},onPointerLeave:()=>{s(NaN),m.current().parts.uPhase.value=0},children:[(0,r.jsx)("span",{style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"100",fontSize:"2em",lineHeight:".7em",textTransform:"uppercase"},children:"3D div"}),(0,r.jsxs)("span",{className:y().Counter,style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"300",fontSize:"1em",lineHeight:".7em",textTransform:"uppercase"},children:[(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"."}),(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"0"})]})]})]})}function w(){return(0,r.jsxs)("div",{className:"".concat(y().Client," layer bg-[#bd71ff]"),children:[(0,r.jsx)(g,{}),(0,r.jsx)("div",{className:"layer",children:(0,r.jsx)(d.uB,{vertigoControls:{size:2},children:(0,r.jsx)(b,{})})})]})}},57368:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var r=i(44138);function n(e,t,i){var n=(0,r._)(e,t,"set");if(n.set)n.set.call(e,i);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=i}return i}},66066:(e,t,i)=>{"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}i.d(t,{_:()=>r})},66620:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(89868),n=i(44138);function s(e,t){var i=(0,n._)(e,t,"update");return(0,r._)(e,i)}},75687:(e,t,i)=>{"use strict";function r(e,t){return t.get?t.get.call(e):t.value}i.d(t,{_:()=>r})},76999:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var r=i(29443);function n(e,t,i){(0,r._)(e,t),t.set(e,i)}},77674:(e,t,i)=>{"use strict";i.d(t,{_:()=>l});var r=i(75687),n=i(47878),s=i(1e3);function l(e,t,i){return(0,n._)(e,t),(0,s._)(i,"get"),(0,r._)(e,i)}},89868:(e,t,i)=>{"use strict";function r(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}i.d(t,{_:()=>r})},97540:(e,t,i)=>{"use strict";i.d(t,{AF:()=>h,EF:()=>f,hD:()=>u,s5:()=>l,wZ:()=>p});var r=i(49797),n=i(79285),s=i(61567);function l(e,t){if(0!==e.projectionMatrix.elements[15])return"none";{let i=e.projectionMatrix.elements[5],r=t.clientHeight*i/2;return"".concat(r,"px")}}let a=new r.kn4,o=new r.kn4,c=new r.Pq0,d=new r.Pq0;function u(e,t){if(c.setFromMatrixColumn(e.matrixWorld,2),(0,s.Th)(t))d.setFromMatrixColumn(t.matrixWorld,2);else if((0,s.MR)(t))d.setFromMatrixColumn(t,2);else if((0,s.Zz)(t))d.copy(t);else throw Error("Invalid object type.");return c.dot(d)>0}function h(e,t){return c.set(e.matrixWorld.elements[12],e.matrixWorld.elements[13],e.matrixWorld.elements[14]),!function(e,t){if((0,s.Th)(e))return t.setFromMatrixPosition(e.matrixWorld);if((0,s.MR)(e))return t.setFromMatrixPosition(e);if((0,s.Zz)(e))t.copy(e);else throw Error("Invalid object type.")}(t,d),Math.round(1e4/(1+c.distanceTo(d))).toString()}function p(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=e.projectionMatrix.elements[5],p=i.clientHeight*h/2,f=p/r,m=function(e,t){if((0,s.Th)(e))return e.matrixWorld;if((0,s.MR)(e))return e;if((0,s.Zz)(e))return t.makeTranslation(e.x,e.y,e.z);throw Error("Invalid object type.")}(t,o);a.multiplyMatrices(e.matrixWorldInverse,m);let x=a.elements;x[4]*=-1,x[5]*=-1,x[6]*=-1,x[8]*=-1,x[9]*=-1,x[10]*=-1;let y=x[14];return x[14]+=u?-1:1,x[0]*=f,x[1]*=f,x[2]*=f,x[4]*=f,x[5]*=f,x[6]*=f,x[8]*=f,x[9]*=f,x[10]*=f,x[12]*=p,x[13]*=p,x[14]*=p,x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,u&&(x[2]*=-1,x[6]*=-1,x[10]*=-1,x[14]*=-1),l>0&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.elements;c.set(i[0],i[1],i[2]);let r=c.length();i[0]=(0,n.lerp)(i[0],r,t),i[1]=(0,n.lerp)(i[1],0,t),i[2]=(0,n.lerp)(i[2],0,t),c.set(i[4],i[5],i[6]);let s=c.length();i[4]=(0,n.lerp)(i[4],0,t),i[5]=(0,n.lerp)(i[5],s,t),i[6]=(0,n.lerp)(i[6],0,t),c.set(i[8],i[9],i[10]);let l=c.length();i[8]=(0,n.lerp)(i[8],0,t),i[9]=(0,n.lerp)(i[9],0,t),i[10]=(0,n.lerp)(i[10],l,t)}(a,l),d>0&&function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.elements;c.set(r[0],r[1],r[2]);let s=(0,n.lerp)(1,t/c.length(),i);r[0]*=s,r[1]*=s,r[2]*=s,c.set(r[4],r[5],r[6]);let l=(0,n.lerp)(1,t/c.length(),i);r[4]*=l,r[5]*=l,r[6]*=l,c.set(r[8],r[9],r[10]);let a=(0,n.lerp)(1,t/c.length(),i);r[8]*=a,r[9]*=a,r[10]*=a}(a,u?y:-y,d),"translate(-50%, -50%) matrix3d(".concat(a.elements.map(e=>1e-6*Math.round(e/1e-6)).join(","),")")}function f(e,t,i,r){let{pixelPerUnit:n=100,resetRotation:s=0,resetScale:a=0,leftHanded:o=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.style.perspective=l(i,e),t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform=p(i,r,e,n,s,a,o),t.style.zIndex=h(i,r)}}}]);