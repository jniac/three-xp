"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3679],{53679:function(e,t,s){s.d(t,{Vu:function(){return E}});var r,i,n,o,a=s(64740),l=s(51776),h=s(72290),c=s(35459),d=s(4798),u=s(59544),p=s(33628);(r=n||(n={}))[r.Render=0]="Render",r[r.PostProcessing=1e3]="PostProcessing",r[r.GizmoRender=2e3]="GizmoRender",r[r.Outline=3e3]="Outline",r[r.Output=4e3]="Output",r[r.Antialiasing=5e3]="Antialiasing";class f{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let s=e[1],r=t[1];return s.type!==r.type?s.type-r.type:s.insertOrder-r.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,s]of this.passMap)s.type===e&&(yield[t,s])}addPass(e){let{type:t=n.Render,insertOrder:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===s){var r,i,o;s=(null!==(o=null===(i=[...this.getPassesByType(t)].at(-1))||void 0===i?void 0:null===(r=i[1])||void 0===r?void 0:r.insertOrder)&&void 0!==o?o:-1)+1}return this.passMap.set(e,{type:t,insertOrder:s}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,s){this.composer.setSize(e,t),this.composer.setPixelRatio(s),this.basicPasses.fxaa.uniforms.resolution.value.set(1/s/e,1/s/t)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let s of this.composer.passes)s instanceof d.C&&s.scene===t&&(s.scene=e)}render(e){for(let t of this.composer.passes)t instanceof d.C&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:s}=this;for(let[r,i]of t.passes.entries()){let t=s.get(i);t?e.push("- ".concat(r,": ").concat(n[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(i.constructor.name)):e.push("- ".concat(r,": NO METADATA for ").concat(i.constructor.name))}return e.join("\n")}constructor(e,t,s,r){let i=new l.x(e),o=new Map,f=new d.C(t,r);f.clearAlpha=0,o.set(f,{type:n.Render,insertOrder:0}),i.addPass(f);let m=new d.C(s,r);o.set(m,{type:n.GizmoRender,insertOrder:0}),m.clear=!1,m.clearDepth=!1,i.addPass(m);let w=new h.f(new a.Vector2,t,r);o.set(w,{type:n.GizmoRender,insertOrder:0}),i.addPass(w);let g=new c.v;o.set(g,{type:n.Output,insertOrder:0}),i.addPass(g);let y=new u.T(p.C);o.set(y,{type:n.Antialiasing,insertOrder:0}),i.addPass(y),this.composer=i,this.basicPasses={mainRender:f,gizmoRender:m,outline:w,output:g,fxaa:y},this.passMap=o}}var m=s(8423),w=s(51845),g=s(35859),y=s(11315),v=s(73437);(i=o||(o={}))[i.None=0]="None",i[i.LeftDown=1]="LeftDown",i[i.LeftDrag=2]="LeftDrag";class P{get ray(){return this.raycaster.ray}update(e,t,s){let{x:r,y:i}=t,n=(r-s.x)/s.width*2-1,o=-((i-s.y)/s.height*2)+1;this.camera=e,this.clientPosition.set(r,i),this.screenPosition.set(n,o),this.raycaster.setFromCamera(this.screenPosition,e)}constructor(){this.status={button:0},this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.clientPosition=new a.Vector2,this.screenPosition=new a.Vector2,this.raycaster=new a.Raycaster}}var b=s(48178),x=s(20893),C=s(91310);let L=["gltf","glb"],A=["png","jpg","jpeg","hdr","exr"];class R{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class z{setPath(e){this.loaders.gltf.setPath(e),this.loaders.texture.setPath(e),this.loaders.rgbeLoader.setPath(e),this.loaders.exrLoader.setPath(e)}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,s)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)})}async loadRgbe(e){return new Promise((t,s)=>{this.loaders.rgbeLoader.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)})}async loadExr(e){return new Promise((t,s)=>{this.loaders.exrLoader.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s),this._onAfterLoad.call()})}async load(e){let t=e.split(".").pop();if(L.includes(t))return this.loadGltf(e);if(A.includes(t))return new Promise((t,s)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)});throw Error("Unsupported extension: ".concat(t))}constructor(){this.loaders={gltf:new x.E,texture:new a.TextureLoader,rgbeLoader:new C.x,exrLoader:new b.I},this._onAfterLoad=new R}}class E{get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:s=null,target:r=null,element:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(t=(e=this.internal).orbitControls)&&void 0!==t||(e.orbitControls=new m.z(this.camera,this.renderer.domElement)),"string"==typeof i&&(i=document.querySelector(i)),i&&i!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new m.z(this.camera,i)),s&&(0,v.Q7)(s,this.internal.orbitControls.object.position),r&&(0,v.Q7)(r,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}init(e){let{onDestroy:t}=this;e.appendChild(this.renderer.domElement);let s=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},r=new ResizeObserver(s);r.observe(e),t(()=>{r.disconnect()}),s();let i=e=>{let t=this.renderer.domElement.getBoundingClientRect();this.pointer.update(this.camera,{x:e.clientX,y:e.clientY},t)},n=e=>{this.pointer.status.button|=o.LeftDown},a=e=>{this.pointer.status.button&=~o.LeftDown};return e.addEventListener("pointermove",i),e.addEventListener("pointerdown",n),e.addEventListener("pointerup",a),t(()=>{e.removeEventListener("pointermove",i),e.removeEventListener("pointerdown",n),e.removeEventListener("pointerup",a)}),t((0,w.s)(this.ticker.requestActivation),this.ticker.onTick(this.update)),t(()=>{var e;null===(e=this.internal.orbitControls)||void 0===e||e.dispose()}),this}setSize(e){let{width:t,height:s,pixelRatio:r}={...this,...e};if(t===this.width&&s===this.height&&r===this.pixelRatio)return this;this.width=t,this.height=s,this.pixelRatio=r;let{renderer:i,perspectiveCamera:n,pipeline:o}=this;i.setSize(t,s),i.setPixelRatio(r),o.setSize(t,s,r);let a=t/s;return n.aspect=a,n.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,s=[this.scene];for(;s.length>0;){let e=s.shift();t(e)&&(yield e),s.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new a.WebGLRenderer,this.perspectiveCamera=new a.PerspectiveCamera,this.orhtographicCamera=new a.PerspectiveCamera,this.scene=new a.Scene,this.gizmoScene=new a.Scene,this.pointer=new P,this.ticker=y.vB.get("three").set({activeDuration:8}),this.pipeline=new f(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new a.Vector2,fullSize:new a.Vector2,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=new z,this.destroy=()=>{(0,g.o)(this.internal.destroyables)},this.update=e=>{var t;null===(t=this.internal.orbitControls)||void 0===t||t.update(e.deltaTime),this.pipeline.render(e)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0)}}},73437:function(e,t,s){s.d(t,{Gg:function(){return l},Q7:function(){return a},Xe:function(){return h},iK:function(){return o}});var r=s(64740);let i={rad:1,deg:Math.PI/180,turn:2*Math.PI};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rad",s=t,r=0;if("number"==typeof e)r=e;else{let t=e.match(/^\s*(-?[0-9.]+)\s*(\/\s*-?[0-9.]+)?\s*(rad|deg|turn)\s*$/);if(t){let[e,i,n,o]=t;r=Number.parseFloat(i),n&&(r/=Number.parseFloat(n.slice(1))),s=o}else r=Number.parseFloat(e)}return r*i[s]}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector2;if("number"==typeof e)return t.set(e,e);if(Array.isArray(e)){let[s,r]=e;return t.set(s,r)}if("width"in e){let{width:s,height:r}=e;return t.set(s,r)}let{x:s,y:i}=e;return t.set(s,i)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector3;if("number"==typeof e)return t.set(e,e,e);if(Array.isArray(e)){let[s,r,i=0]=e;return t.set(s,r,i)}if("width"in e){let{width:s,height:r,depth:i}=e;return t.set(s,r,i)}let{x:s,y:i,z:n=0}=e;return t.set(s,i,n)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Euler;if(e instanceof r.Euler)return t.copy(e);if(Array.isArray(e)){let[s,r,i,o="rad",a="XYZ"]=e;return t.set(n(s,o),n(r,o),n(i,o),a)}let{x:s,y:i,z:o,order:a="XYZ",unit:l="rad"}=e;return t.set(n(s,l),n(i,l),n(o,l),a)}let h=(()=>{let e=new r.Vector3,t=new r.Euler,s=new r.Vector3,i=new r.Quaternion;return function(n,o){let{x:h=0,y:c=0,z:d=0,position:u={x:h,y:c,z:d},rotationX:p=0,rotationY:f=0,rotationZ:m=0,rotationOrder:w="XYZ",rotation:g={x:p,y:f,z:m,order:w},useDegree:y=!1,scaleX:v=1,scaleY:P=1,scaleZ:b=1,scaleScalar:x=1,scale:C={x:v,y:P,z:b}}=n;if(y){let e=Math.PI/180;g.x*=e,g.y*=e,g.z*=e}if(o instanceof r.Matrix4)return a(u,e),l(g,t),a(C,s).multiplyScalar(x),i.setFromEuler(t),o.compose(e,i,s);if(o instanceof r.Object3D)return a(u,o.position),l(g,o.rotation),a(C,o.scale).multiplyScalar(x),o;throw Error("Invalid out argument")}})()},35859:function(e,t,s){s.d(t,{o:function(){return r}});function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}}}]);