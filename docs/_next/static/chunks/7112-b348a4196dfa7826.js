"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7112],{17112:(e,t,s)=>{s.d(t,{O0:()=>i,XW:()=>x});var i,r=s(49797),n=s(99613),o=s(50373),a=s(64416),l=s(27491),d=s(27146),h=s(71591),c=s(28334);function u(e){return e.isRenderPass}!function(e){e[e.Render=0]="Render",e[e.PostProcessing=1e3]="PostProcessing",e[e.GizmoRender=2e3]="GizmoRender",e[e.Outline=3e3]="Outline",e[e.Output=4e3]="Output",e[e.Antialiasing=5e3]="Antialiasing"}(i||(i={}));class p{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let s=e[1],i=t[1];return s.type!==i.type?s.type-i.type:s.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,s]of this.passMap)s.type===e&&(yield[t,s])}addPass(e){let{type:t=i.Render,insertOrder:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===s){var r,n,o;s=(null!=(o=null==(n=[...this.getPassesByType(t)].at(-1))||null==(r=n[1])?void 0:r.insertOrder)?o:-1)+1}return this.passMap.set(e,{type:t,insertOrder:s}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,s){this.composer.setSize(e,t),this.composer.setPixelRatio(s),this.basicPasses.fxaa.uniforms.resolution.value.set(1/s/e,1/s/t),this.basicPasses.smaa.setSize(e*s,t*s)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let s of this.composer.passes)u(s)&&s.scene===t&&(s.scene=e)}render(e){for(let t of this.composer.passes)u(t)&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:s}=this;for(let[r,n]of t.passes.entries()){let t=s.get(n);t?e.push("- ".concat(r,": ").concat(i[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(n.constructor.name)):e.push("- ".concat(r,": NO METADATA for ").concat(n.constructor.name))}return e.join("\n")}constructor(e,t,s,u){let p=new n.s(e),f=new Map,m=new l.A(t,u);m.clearAlpha=0,f.set(m,{type:i.Render,insertOrder:0}),p.addPass(m);let w=new l.A(s,u);f.set(w,{type:i.GizmoRender,insertOrder:0}),w.clear=!1,w.clearDepth=!1,p.addPass(w);let b=new o.G(new r.I9Y,t,u);f.set(b,{type:i.GizmoRender,insertOrder:0}),p.addPass(b);let v=new a.X;f.set(v,{type:i.Output,insertOrder:0}),p.addPass(v);let y=new d.p(c.o);f.set(y,{type:i.Antialiasing,insertOrder:0}),p.addPass(y);let g=new h.I;g.enabled=!1,f.set(g,{type:i.Antialiasing,insertOrder:0}),p.addPass(g),this.composer=p,this.basicPasses={mainRender:m,gizmoRender:w,outline:b,output:v,fxaa:y,smaa:g},this.passMap=f}}var f=s(30158),m=s(17223),w=s(57165),b=s(39787),v=s(96273),y=s(17475),g=s(87381),P=s(37027);class x extends P.${static current(){return this.instances[this.instances.length-1]}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:s=null,target:i=null,element:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof r&&(r=document.querySelector(r)),null!=(e=this.internal).orbitControls||(e.orbitControls=new m.N(this.camera,r)),r&&r!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new m.N(this.camera,r)),s&&(0,v.jj)(s,this.internal.orbitControls.object.position),i&&(0,v.jj)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:s}=this,{domElement:i}=this.renderer;e.appendChild(i);let r=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},n=new ResizeObserver(r);return n.observe(e),s(()=>{n.disconnect()}),r(),s(this.pointer.initialize(i,t,this.camera,this.ticker)),s((0,w.O)(this.ticker.requestActivation),this.ticker.onTick(this.renderFrame)),s(()=>{var e;null==(e=this.internal.orbitControls)||e.dispose()}),this.domContainer=e,this.domElement=i,this}setSize(e){let{width:t,height:s,pixelRatio:i}={...this,...e};if(t===this.width&&s===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=s,this.pixelRatio=i;let{renderer:r,perspectiveCamera:n,pipeline:o}=this;return r.setSize(t,s),r.setPixelRatio(i),o.setSize(t,s,i),n.aspect=t/s,n.updateProjectionMatrix(),this}*findAll(e,t){let s="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e;yield*(0,g.wV)(this.scene,s,t)}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){super(P.s.WebGL),this.renderer=new f.WebGLRenderer,this.perspectiveCamera=new r.ubm,this.orthographicCamera=new r.qUd,this.camera=this.perspectiveCamera,this.gizmoScene=new r.Z58,this.pipeline=new p(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.internal={size:new r.I9Y,fullSize:new r.I9Y,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=y.o.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,b.z)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.renderFrame=e=>{var t;let{scene:s,pipeline:i,pointer:r}=this;null==(t=this.internal.orbitControls)||t.update(e.deltaTime),r.updateStart(s),s.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&i.render(e),r.updateEnd()},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),x.instances.push(this)}}x.instances=[]},17475:(e,t,s)=>{s.d(t,{o:()=>c});var i=s(49797),r=s(9954),n=s(17775),o=s(5832);function a(e){let t,s,i=new Promise((i,r)=>{t=()=>{i(e)},s=e=>{r(e)}});return Object.assign(e,{then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),resolve:t,reject:s}),e}let l=["gltf","glb"],d=["png","jpg","jpeg","hdr","exr"];class h{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class c{static current(){var e;return null!=(e=this.instances[this.instances.length-1])?e:new c}static get(e){var t;return null!=(t=this.instances.find(t=>t.name===e))?t:new c({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,s)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)})}async loadRgbe(e){let t=a(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=a(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let s=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(s)){let e=this.textureCache.get(s);return null==t||t(e),e}let i=a(this.loaders.texture.load(s,e=>{this.textureCache.set(s,i),null==t||t(e),i.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(s))}));return i}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(d.includes(t))return new Promise((t,s)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=c.nextId++,this.loaders={gltf:new n.B,texture:new i.Tap,rgbeLoader:new o.Y,exrLoader:new r.H},this.path="",this._onAfterLoad=new h,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),c.instances.push(this)}}c.nextId=0,c.instances=[]},87381:(e,t,s)=>{s.d(t,{$z:()=>d,DN:()=>o,mj:()=>n,rd:()=>a,wV:()=>h});var i=s(61567),r=s(90927);function n(e,t,s){if(!1===(0,i.Th)(e))throw Error("Child must be an instance of Object3D");return t&&((0,i.Th)(t)?t.add(e):(0,r.N)(e,t)),null==s||s(e),e}let o=n;function a(e,t){let s=t;for(;s.parent;){if(s.parent===e)return!0;s=s.parent}return!1}let l={includeSelf:!1};function*d(e,t){let{includeSelf:s}={...l,...t};for(let t of(s&&(yield e),e.children))yield*d(t,{includeSelf:!0})}function*h(e,t,s){for(let i of d(e,s))t(i)&&(yield i)}},90927:(e,t,s)=>{s.d(t,{N:()=>l});var i=s(49797),r=s(96273);new i.Pq0(0,0,0),new i.O9p(0,0,0,"XYZ"),new i.Pq0(1,1,1);let n={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,pivot:void 0,visible:void 0,name:void 0,parent:void 0,userData:void 0},o=new i.dwI,a=new i.Pq0;function l(e,t){let{x:s,y:l,z:d,position:h=new i.Pq0(s,l,d),rotationX:c,rotationY:u,rotationZ:p,rotationOrder:f,rotationUnit:m,rotation:w,scaleX:b,scaleY:v,scaleZ:y,scaleScalar:g,scale:P=new i.Pq0(b,v,y).multiplyScalar(g),pivot:x,visible:O,name:C,parent:z,userData:R}={...n,...t};return(0,r.jj)(h,e.position),(0,r.if)(null!=w?w:[c,u,p,f,m],e.rotation),(0,r.jj)(P,e.scale),void 0!==x&&(e.updateMatrix(),o.setFromMatrix4(e.matrix),(0,r.jj)(x,a).applyMatrix3(o),e.position.sub(a)),void 0!==O&&(e.visible=O),void 0!==C&&(e.name=C),void 0!==z&&z!==e.parent&&(null===z?e.removeFromParent():z.add(e)),void 0!==R&&Object.assign(e.userData,R),e}}}]);