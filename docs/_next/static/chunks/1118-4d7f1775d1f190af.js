"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1118],{17099:(t,e,i)=>{i.d(e,{c:()=>n});var s=i(79105);let o=t=>t,r={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function a(){let t=(0,s.K2)((0,s.K2)((0,s.Ts)(s.KP)));function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.KP;return"string"==typeof e&&(e=e.split("").reduce((t,e)=>7*t+e.charCodeAt(0),0)),t=(0,s.K2)((0,s.K2)((0,s.Ts)(e))),c}function i(){return t=(0,s.K2)(t),(0,s.Tj)(t)}function a(t){switch(t.length){default:return[0,1,o];case 1:return[0,t[0],o];case 2:return[t[0],t[1],o];case 3:return[t[0],t[1],t[2]]}}function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];let[o,r,n]=a(e);return o+(r-o)*n(i())}function l(){for(var t,e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];let[a,n,{weightsAreNormalized:l,indexOffset:h,forbiddenItems:c}]=function(t){let[e,i=null,s]=t,o={...r,...s};if(Array.isArray(e))return[e,i,o];if("object"==typeof e)return[Object.values(e),i?Object.values(i):null,o];throw Error("pick: unsupported options type")}(s);if(c.length>0){let e=new Set;for(let t of c){let i=a.indexOf(t);i>=0&&e.add(i)}if(a=a.filter((t,i)=>!e.has(i)),n=null!=(t=null==n?void 0:n.filter((t,i)=>!e.has(i)))?t:null,0===a.length)throw Error("pick: all items are forbidden")}if(null===n){let t=Math.floor(i()*a.length);return h&&(t+=h,(t%=a.length)<0&&(t+=a.length)),a[t]}if(!l){let t=n.reduce((t,e)=>t+e,0);n=n.map(e=>e/t)}let d=i(),u=0;for(let t=0;t<a.length;t++)if(d<(u+=n[t]))return a[t];throw Error("among: unreachable")}function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=i(),o=i(),r=Math.sqrt(-2*Math.log(s)),a=2*Math.PI*o;return[t+e*r*Math.cos(a),t+e*r*Math.sin(a)]}let c={seed:e,seedMax:function(){return s.Zu},reset:function(){return e(s.KP),c},next:function(){return t=(0,s.K2)(t),c},getState:function(){return t},setState:function(e){return t=e&s.Zu,c},random:i,between:n,around:function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];let[r=1,a=o]=e,n=2*i();return(n>1?1:-1)*a(n>1?n-1:n)*r},int:function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];let[o,r,n]=a(e);return o+Math.floor(n(i())*(r-o))},chance:function(t){return i()<t},shuffle:function(t){let{mutate:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e&&Array.isArray(t)?t:[...t],o=s.length;for(let t=0;t<o;t++){let e=Math.floor(o*i()),r=s[t];s[t]=s[e],s[e]=r}return s},pick:l,createPicker:function(t){let e=t.map(t=>{let[e]=t;return e}),i=t.map(t=>{let[e,i]=t;return i}),s=i.reduce((t,e)=>t+e,0);for(let[t,e]of i.entries())i[t]=e/s;return()=>l(e,i,{weightsAreNormalized:!0})},vector:function(t,e){let[i=0,s=1]=Array.isArray(e)?e:[null==e?void 0:e.min,null==e?void 0:e.max];for(let e of Object.keys(t))t[e]=n(i,s);return t},unitVector2:function(t){let e=2*Math.PI*i();return t.x=Math.cos(e),t.y=Math.sin(e),t},unitVector3:function(t){let e=i(),s=i(),o=2*Math.PI*e,r=Math.acos(1-2*s);return t.x=Math.sin(r)*Math.cos(o),t.y=Math.sin(r)*Math.sin(o),t.z=Math.cos(r),t},normalVector:function(t){let e=Object.keys(t),i=e.length,s=Math.sqrt(i);for(let o=0;o<i;o+=2){let[r,a]=h();t[e[o]]=r/s,o+1<i&&(t[e[o+1]]=a/s)}return t},unitVector:function(t){let e=Object.keys(t),i=e.length,s=0;for(let o=0;o<i;o+=2){let[r,a]=h();t[e[o]]=r,s+=r*r,o+1<i&&(t[e[o+1]]=a,s+=a*a)}s=Math.sqrt(s);for(let o=0;o<i;o++)t[e[o]]/=s;return t},boxMuller:h,quaternion:function(t){let e=i(),s=i(),o=i(),r=Math.sqrt(1-e),a=Math.sqrt(e);return t.x=r*Math.sin(2*Math.PI*s),t.y=r*Math.cos(2*Math.PI*s),t.z=a*Math.sin(2*Math.PI*o),t.w=a*Math.cos(2*Math.PI*o),t},insideCircle:function(t,e){let s=2*i()*Math.PI,o=Math.sqrt(i())*t;return e.x=o*Math.cos(s),e.y=o*Math.sin(s),e}};return c}let n=class{constructor(t){Object.assign(this,a().seed(t))}};Object.assign(n,a())},18461:(t,e,i)=>{i.d(e,{$:()=>s});class s{set(){let{position:t=this.position,velocity:e=this.velocity,drag:i=this.drag}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.position=t,this.velocity=e,this.drag=i,this}copy(t){return this.position=t.position,this.velocity=t.velocity,this.drag=t.drag,this}clone(){return new s().copy(this)}setDrag(t){let{timeSpan:e=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.drag=Math.pow(t,e),this}update(t){if(!(t<=0)){var e,i;this.positionOld=this.position,this.velocityOld=this.velocity,this.position+=(e=this.velocity,e*(Math.pow(i=1-this.drag,t)-1)/Math.log(i)),this.velocity*=Math.pow(1-this.drag,t)}}getDestination(){return this.position+-this.velocity/Math.log(1-this.drag)}getDragForDestination(t){let e=Math.exp(-this.velocity/(t-this.position));return{drag:1-e,valid:e>0&&e<1}}setDragForDestination(t){let{drag:e}=this.getDragForDestination(t);return this.drag=e,this}getVelocityForDestination(t){var e;return{velocity:(e=1-this.drag,-(t-this.position)*Math.log(e))}}setVelocityForDestination(t){return this.velocity=this.getVelocityForDestination(t).velocity,this}constructor(t){this.position=0,this.velocity=0,this.drag=.75,this.positionOld=0,this.velocityOld=0,t&&this.set(t)}}},28737:(t,e,i)=>{i.d(e,{Leak:()=>u,O:()=>d});var s={};i.r(s),i.d(s,{distribute:()=>r.mn,every:()=>r.Si,findMaxBy:()=>r.vj,pairwise:()=>r.Ju,recordBy:()=>r.VY,some:()=>r.zN,split:()=>r.mn,uniqueBy:()=>r.pD});var o=i(30158),r=i(43107),a=i(38062),n=i(85795),l=i(17099),h=i(96122),c=i(36508);function d(t){Object.assign(window,{...o,...n,...s,...t,PRNG:l.c,waveform:a.o,dedent:h.T,Ticker:c.Rv})}function u(t){return d(t),null}},38062:(t,e,i)=>{i.d(e,{o:()=>s});let s={triangle:function(t){let{frequency:e=1,phase:i=0,f:s=e,p:o=i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t*s+o,a=2*r-Math.floor(2*r);return r-Math.floor(r)<.5?a:1-a}}},46281:(t,e,i)=>{i.d(e,{A:()=>d});var s=i(67203);let o=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),a=t=>{let e=r(t);return e.charAt(0).toUpperCase()+e.slice(1)},n=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter((t,e,i)=>!!t&&""!==t.trim()&&i.indexOf(t)===e).join(" ").trim()},l=t=>{for(let e in t)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0};var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((t,e)=>{let{color:i="currentColor",size:o=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:c="",children:d,iconNode:u,...p}=t;return(0,s.createElement)("svg",{ref:e,...h,width:o,height:o,stroke:i,strokeWidth:a?24*Number(r)/Number(o):r,className:n("lucide",c),...!d&&!l(p)&&{"aria-hidden":"true"},...p},[...u.map(t=>{let[e,i]=t;return(0,s.createElement)(e,i)}),...Array.isArray(d)?d:[d]])}),d=(t,e)=>{let i=(0,s.forwardRef)((i,r)=>{let{className:l,...h}=i;return(0,s.createElement)(c,{ref:r,iconNode:e,className:n("lucide-".concat(o(a(t))),"lucide-".concat(t),l),...h})});return i.displayName=a(t),i}},66620:(t,e,i)=>{i.d(e,{_:()=>r});var s=i(89868),o=i(44138);function r(t,e){var i=(0,o._)(t,e,"update");return(0,s._)(t,i)}},79105:(t,e,i)=>{i.d(e,{K2:()=>a,KP:()=>o,Tj:()=>n,Ts:()=>r,Zu:()=>s});let s=0x7fffffff,o=123456,r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(Number.isNaN(t))throw Error("NaN is not a valid seed.");let e=t;if(10>Math.abs(e)&&(e*=1e6),e%=s,(e=e<0?e+s:e)>1)return e&s;if(0===e)return o;throw Error("Impossible. ".concat(e))},a=t=>t=Math.imul(t,48271)&s,n=t=>(t-1)/(s-1)},91255:(t,e,i)=>{i.d(e,{l:()=>c});var s=i(79285),o=i(18461),r=i(63126),a=i(53245);class n{add(t,e){this.map.has(t)||this.map.set(t,new Set),this.map.get(t).add(e);let i=()=>this.unsubscribe(t,e);return{unsubscribe:i,destroy:i}}addOnce(t,e){return this.add(t,function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return e(...i),"unsubscribe"})}dispatch(t){for(var e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];let o=this.map.get("*");if(o){for(let e of o)"unsubscribe"===e(t,...i)&&o.delete(e);0===o.size&&this.map.delete("*")}let r=this.map.get(t);if(r){for(let e of r)"unsubscribe"===e(t,...i)&&r.delete(e);0===r.size&&this.map.delete(t)}return this}unsubscribe(t,e){let i=this.map.get(t);if(!i)return!1;let s=i.delete(e);return 0===i.size&&this.map.delete(t),s}constructor(){this.map=new Map}}function l(t,e){let i=0,s=Math.abs(e-t[0]);for(let o=1;o<t.length;o++){let r=Math.abs(e-t[o]);r<s&&(i=o,s=r)}return i}class h{input(t){this.inputDelta+=t}update(t,e){this.deltaTime=t,this.time+=t;let i=this.inputPosition+this.inputDelta,o=this.inputDelta/t;this.inputVelocityMem.setValue(o,!0),this.inputDelta=0,this.dragMobile.set({position:i,velocity:this.inputVelocityMem.average,drag:1-e});let r=this.dragMobile.getDestination();this.naturalDestination=r;let a=l(this.positions,r),n=this.positions[a];this.targetPosition!==n&&(this.targetPosition=n,this.targetTime=this.time);let h=Math.min((this.time-this.targetTime)/.2,1);this.dragMobile.set({position:this.position}).setVelocityForDestination(n).update(t);let c=this.dragMobile.position,d=(0,s.lerp)(i,c,h),u=d-this.position;this.inputPosition=d,this.position=d,this.velocity=u/t}constructor(){this.dragMobile=new o.$,this.time=0,this.deltaTime=0,this.inputDelta=0,this.inputPosition=0,this.inputVelocityMem=new a.r(10,0),this.naturalDestination=0,this.targetPosition=0,this.targetTime=0,this.position=0,this.velocity=0,this.positions=[]}}class c{get firstPosition(){return this.props.positions[0]}get lastPosition(){return this.props.positions[this.props.positions.length-1]}get position(){return this.state.position}get isMoving(){return this.state.moving}get isDragging(){return this.state.dragging}get movingStartDuration(){return this.state.moving?this.state.time-this.state.movingStartTime:0}get movingStopDuration(){return this.state.moving?0:this.state.time-this.state.movingStopTime}on(t,e){return this.state.callbacks.add(t,e)}computeClosestPositionIndex(t){return l(this.props.positions,t)}inverseLerpPosition(t){let e=this.props.positions[0];return(t-e)/(this.props.positions[this.props.positions.length-1]-e)}goto(t){let{positions:e}=this.props;return t<0&&(t+=e.length),this.dragStop(),this.dragMobile.set({drag:1-1e-6}),this.dragMobile.setVelocityForDestination(e[t]),this.state.destination=e[t],this.state.naturalDestination=e[t],this.state.inputPosition=this.state.position,this}gotoPrevious(){let{loop:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.state.positionIndex-1;return e<0&&(e=t?this.props.positions.length-1:0),this.goto(e)}gotoNext(){let{loop:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.state.positionIndex+1;return e>=this.props.positions.length&&(e=t?0:this.props.positions.length-1),this.goto(e)}dragStart(){return this.state.dragging||(this.state.dragStartTime=this.state.time,this.state.dragging=!0,this.state.dragState=c.DragState.Dragging,this.state.callbacks.dispatch(c.Events.DragStart,this)),this}dragStop(){if(!this.state.dragging)return this;this.state.dragging=!1,this.state.dragState=c.DragState.None,this.state.dragStopTime=this.state.time,this.dragMobile.set({position:this.state.position,velocity:this.state.velocity,drag:1-this.props.dragDamping});let t=this.dragMobile.getDestination(),e=this.props.positions[0],i=Math.abs(t-e);for(let s=1;s<this.props.positions.length;s++){let o=this.props.positions[s],r=Math.abs(t-o);r<i&&(e=o,i=r)}return this.state.naturalDestination=t,this.state.destination=e,this.state.inputPosition=this.state.position,this.dragMobile.setVelocityForDestination(e),this.state.callbacks.dispatch(c.Events.DragStop,this),this}drag(t){this.state.dragging&&(this.state.inputPosition+=t)}autoDrag(t){return this.state.autoDragging=!0,this.state.autoDrag.input(t),this}update(t){if(this.state.deltaTime=t,this.state.time+=t,this.state.dragging){let{overshootLimit:e}=this.props,i=this.firstPosition,o=this.lastPosition,a=(0,s.limitedClamp)(this.state.inputPosition,i,i-e,o,o+e),n=(0,r.calculateExponentialDecayLerpRatio)(this.props.dragDamping,t),l=this.state.position,h=(0,s.lerp)(l,a,n),d=h-l;this.state.position=h,this.state.velocity=d/t,this.state.dragState=c.DragState.Dragging,this.dragMobile.set({position:this.state.position,velocity:this.state.velocity,drag:1-this.props.dragDamping}),this.state.naturalDestination=this.dragMobile.getDestination()}else if(this.state.autoDragging){this.state.autoDrag.update(t,this.props.dragDamping);let{position:e,velocity:i}=this.state.autoDrag;this.state.position=e,this.state.velocity=i,1e-5>Math.abs(i)&&(this.state.autoDragging=!1,this.dragMobile.set({position:e,velocity:0}))}else this.dragMobile.update(t),this.state.position=this.dragMobile.position,this.state.velocity=this.dragMobile.velocity;this.state.positionIndex=this.computeClosestPositionIndex(this.state.position),this.state.positionMem.setValue(this.state.position,!0),this.state.velocityMem.setValue(this.state.velocity,!0);let e=Math.abs(this.state.velocityMem.average)>1e-5,i=this.state.moving;if(this.state.moving=e,e!==i){e?this.state.movingStartTime=this.state.time:this.state.movingStopTime=this.state.time;let t=e?c.Events.MovingStart:c.Events.MovingStop;this.state.callbacks.dispatch(t,this)}return this}svgRepresentation(){let{svg:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("viewBox","-30 -30 100 500"),t.setAttribute("width","100"),t.setAttribute("height","500"));let e=t.querySelector("circle.head");e||((e=document.createElementNS("http://www.w3.org/2000/svg","circle")).classList.add("head"),e.setAttribute("r","5"),e.setAttribute("fill","none"),e.setAttribute("stroke","white"),t.appendChild(e));let i=[...t.querySelectorAll("circle.stop")];for(;i.length<this.props.positions.length;){let e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.classList.add("stop"),e.setAttribute("r","3"),e.setAttribute("fill","white"),t.appendChild(e),i.push(e)}for(;i.length>this.props.positions.length;){let t=i.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}let s=t=>200*this.inverseLerpPosition(t)+10;for(let t=0;t<this.props.positions.length;t++){let e=s(this.props.positions[t]);i[t].setAttribute("cy","".concat(e))}return e.setAttribute("cy","".concat(s(this.state.position))),t}constructor(t){this.state={positionIndex:0,position:0,time:0,deltaTime:0,moving:!1,movingStartTime:-1/0,movingStopTime:-1/0,positionMem:new a.r(10,0),velocityMem:new a.r(10,0),dragging:!1,velocity:0,dragStartTime:-1/0,dragStopTime:-1/0,dragState:c.DragState.None,inputPosition:0,naturalDestination:0,destination:0,autoDragging:!1,autoDrag:new h,callbacks:new n},this.dragMobile=new o.$,this.props={...c.defaultProps,...t},this.state.position=this.firstPosition,this.state.inputPosition=this.firstPosition,this.state.destination=this.firstPosition,this.state.naturalDestination=this.firstPosition,this.dragMobile.set({position:this.firstPosition}),this.state.autoDrag.positions=this.props.positions}}c.DragState={None:0,Dragging:1,AutoDragging:2},c.Events={MovingStart:"moving-start",MovingStop:"moving-stop",DragStart:"drag-start",DragStop:"drag-stop",DragAutoLockEnd:"drag-auto-lock-end"},c.defaultProps={positions:[0,100],overshootLimit:20,dragDamping:1e-5}},96122:(t,e,i)=>{i.d(e,{T:()=>s});function s(t){let e=t.split("\n"),i=0;for(let t of e){let e=t.match(/^(\s*)\S/);if(e){i=e[1].length;break}}return e.map(t=>t.slice(Math.min(t.length,i))).join("\n")}},99651:(t,e,i)=>{i.d(e,{PageClient:()=>F});var s=i(70691),o=i(67203),r=i(46281);let a=(0,r.A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),n=(0,r.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=(0,r.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var h=i(63106),c=i(99332),d=i(33540),u=i(18479),p=i(77794),g=i(79911),m=i(67235),f=i(36508),v=i(28737),x=i(91255),y=i(31623);let b=(0,r.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),w=(0,r.A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);class M{reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.data.fill(t),this.min=t,this.max=t}push(t){let{resetMethod:e="zero"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.data[this.pushIndex]=t,t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.pushIndex++,this.pushIndex===this.data.length&&(this.pushIndex=0,this.reset("zero"===e?0:t))}getSvgPathData(){let{width:t=500,height:e=200,mapY:i=this.mapY}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=[],o=this.data.length;for(let r=0;r<o;r++){let o=this.mapX(r,{width:t}),a=i(this.data[r],{height:e}),n=0===r?"M":"L";s.push("".concat(n," ").concat(o.toFixed(1)," ").concat(a.toFixed(1)))}return s.join(" ")}constructor(t){var e=this;this.pushIndex=0,this.mapX=function(t){let{width:i=500}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i/e.data.length*t},this.mapYOptions={margin:100,minMaxValue:void 0,maxMinValue:void 0},this.mapY=function(t){let{height:i=200}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=void 0!==e.mapYOptions.minMaxValue?Math.min(e.mapYOptions.minMaxValue,e.min):e.min,o=void 0!==e.mapYOptions.maxMinValue?Math.max(e.mapYOptions.maxMinValue,e.max):e.max;s-=e.mapYOptions.margin;let r=(o+=e.mapYOptions.margin)-s;return(1-1/(0===r?1:r)*(t-s))*i};let i="number"==typeof t?new Float32Array(t):t;this.data=i,this.min=i.reduce((t,e)=>Math.min(t,e),1/0),this.max=i.reduce((t,e)=>Math.max(t,e),-1/0)}}class j{static async load(t){let e=await window.fetch(t),i=new Float32Array(await e.arrayBuffer()),s=1/0,o=-1/0,r=1/0,a=0,n=-1,l=-1;for(let t=0;t<i.length;t+=2){let e=i[t],h=i[t+1];h<s&&(s=h),h>o&&(o=h),0!==h&&(a=e,l=t,r===1/0&&(n=t,r=e))}let h=a-r+1,c=new Float32Array(h),d=new Float32Array(h),u=0,p=0;for(let t=n;t<=l;t+=2){let e=i[t],s=i[t+1];u+=s;let o=e-r,a=c[o]+s;c[o]=a;for(let t=p+1;t<=o;t++)d[t]=u;p=o}let g=new j(new M(c),new M(d));return g.isFinished=!0,g.url=t,g}get frameCount(){return this.deltaTrack.data.length}mobileSimulation(){let{mobilePositions:t=[0,100],velocityThreshold:e=200,distanceThreshold:i=200}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new x.l({positions:t}),o=0,r=new Map;s.on("*",(t,e)=>{var i;let s=null!=(i=r.get(t))?i:[];s.push(o),r.set(t,s)});let{deltaTrack:a,frameCount:n,mobileTrack:l}=this;for(o=0;o<n;o++)s.autoDrag(a.data[o]).update(1/120),l.data[o]=s.position,this.relativePositionTrack.data[o]=s.state.autoDrag.inputPosition,this.naturalDestinationTrack.data[o]=s.state.autoDrag.naturalDestination;return{mobileTrack:l,events:r}}*initLiveRecording(){this.isLive=!0,yield m.Q.on("LIVE_TICK",t=>{if(this.liveState.pause)return;let{wheelTime:e,wheelPosition:i}=this.liveState,{mobile:s,wheelDelta:o}=t.assertPayload();s.movingStopDuration>1.2||(e+=1/120,i+=o,Object.assign(this.liveState,{wheelTime:e,wheelPosition:i}),this.deltaTrack.push(o),this.absolutePositionTrack.push(i,{resetMethod:"current-value"}),this.mobileTrack.push(s.position))})}clear(){this.liveState.wheelPosition=0,this.liveState.wheelTime=0,this.deltaTrack.reset(0),this.absolutePositionTrack.reset(0),this.mobileTrack.reset(0)}constructor(...t){this.isLive=!1,this.isFinished=!1,this.liveState={pause:!1,wheelTime:0,wheelPosition:0};let[e,i]=1===t.length?(()=>{let e=t[0];return[new M(e),new M(e)]})():t;this.deltaTrack=e,this.absolutePositionTrack=i,this.mobileTrack=new M(this.deltaTrack.data.length),this.naturalDestinationTrack=new M(this.deltaTrack.data.length),this.relativePositionTrack=new M(this.deltaTrack.data.length),this.absolutePositionTrack.mapYOptions.minMaxValue=0,this.absolutePositionTrack.mapYOptions.maxMinValue=4e3}}function k(t){var e;let{record:i}=t,o=(0,y.A)();return(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[i.isLive?"Live Data":null==(e=i.url)?void 0:e.split("/").pop(),(0,s.jsx)("div",{className:"flex-1"}),i.isLive&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"border border-white/20 rounded px-2 py-1 hover:bg-white/10 flex items-center gap-1",onClick:()=>{i.liveState.pause=!i.liveState.pause,o()},children:i.liveState.pause?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{size:12})," Resume"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{size:12})," Pause"]})}),(0,s.jsx)("button",{className:"border border-white/20 rounded px-2 py-1 hover:bg-white/10 ml-2",onClick:()=>{i.clear(),o()},children:"Clear"})]})]}),(0,s.jsxs)("div",{children:["Min: ",i.absolutePositionTrack.min]}),(0,s.jsxs)("div",{children:["Max: ",i.absolutePositionTrack.max]})]})}function D(t){let{y:e=0,color:i="#fff2"}=t;return(0,s.jsx)("line",{x1:-1e3,y1:e,x2:1e3,y2:e,stroke:i,strokeWidth:1})}function S(t){let{x:e=0,color:i="#ff06",dashArray:o=""}=t;return(0,s.jsx)("line",{x1:e,y1:-1e3,x2:e,y2:1e3,stroke:i,strokeWidth:1,strokeDasharray:o})}let P={width:400,height:300,margin:0};function T(t){var e,i,o;let{record:r,mobilePositions:a,width:n,height:l,margin:h}={...P,...t},c=r.isFinished&&r.mobileSimulation({mobilePositions:a}),d=(0,y.A)();return(0,u.useEffects)(function*(){if(r.isLive){let t=setInterval(()=>{d()},100);yield()=>clearInterval(t)}},[r.isLive]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k,{record:r}),(0,s.jsxs)("svg",{className:"mt-2",width:n+2*h,height:l+2*h,viewBox:"".concat(-h," ").concat(-h," ").concat(n+2*h," ").concat(l+2*h),children:[(0,s.jsx)("rect",{x:0,y:0,width:n,height:l,stroke:"#fff6",strokeWidth:1,fill:"none"}),(0,s.jsx)("path",{d:r.absolutePositionTrack.getSvgPathData({width:n,height:l}),stroke:"#fff6",strokeWidth:1,fill:"none"}),(0,s.jsx)("path",{d:r.relativePositionTrack.getSvgPathData({width:n,height:l,mapY:r.absolutePositionTrack.mapY}),stroke:"#0ff",strokeWidth:5,fill:"none"}),(0,s.jsx)("path",{d:r.deltaTrack.getSvgPathData({width:n,height:l}),stroke:"cyan",strokeWidth:1,fill:"none"}),(0,s.jsx)("path",{d:r.mobileTrack.getSvgPathData({width:n,height:l,mapY:r.absolutePositionTrack.mapY}),stroke:"yellow",strokeWidth:2,fill:"none"}),(0,s.jsx)("path",{d:r.naturalDestinationTrack.getSvgPathData({width:n,height:l,mapY:r.absolutePositionTrack.mapY}),stroke:"red",strokeWidth:2,fill:"none"}),(0,s.jsx)(D,{color:"#fff9",y:r.absolutePositionTrack.mapY(0,{height:l})}),a.slice(1).map(t=>(0,s.jsx)(D,{y:r.absolutePositionTrack.mapY(t,{height:l})},t)),c&&(0,s.jsxs)(s.Fragment,{children:[null==(e=c.events.get("drag-start"))?void 0:e.map((t,e)=>(0,s.jsx)(S,{color:"#f609",x:r.absolutePositionTrack.mapX(t,{width:n})},"drag-start-".concat(e))),null==(i=c.events.get("drag-stop"))?void 0:i.map((t,e)=>(0,s.jsx)(S,{color:"rgba(0, 162, 255, 0.6)",x:r.absolutePositionTrack.mapX(t,{width:n})},"drag-stop-".concat(e))),null==(o=c.events.get(x.l.Events.DragAutoLockEnd))?void 0:o.map((t,e)=>(0,s.jsx)(S,{color:"#00f7ff66",dashArray:"8 8",x:r.absolutePositionTrack.mapX(t,{width:n})},"drag-stop-".concat(e)))]})]})]})}function N(t){let{url:e,mobilePositions:i,...r}=t,[a,n]=(0,o.useState)(null),{ref:l}=(0,u.useEffects)(async function*(t){if(e)n(await j.load(e));else{let t=new j(1200);yield*t.initLiveRecording(),n(t)}},[]);return(0,s.jsx)("div",{ref:l,className:"p-2 flex flex-col border border-white/10 rounded",children:a&&(0,s.jsx)(T,{record:a,mobilePositions:i,...r})})}function A(t){let{duration:e=5}=t,i=120*e*2,{ref:o}=(0,u.useEffects)(function*(t){let s=t.querySelector(".ProgressBarFill");s.style.width="0%",t.querySelector("button").onclick=()=>{!function(t,e){let i=new Blob([t],{type:"application/octet-stream"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=e,o.click(),URL.revokeObjectURL(s)}(o,"wheel-recording-".concat(e,"s-").concat(i,"floats.bin"))};let o=new Float32Array(i),r=0,a=f.Rv.current().frame;yield(0,c.s)(document.documentElement,{onWheel:t=>{if(r+1<i){o[r++]=f.Rv.current().frame-a,o[r++]=t.delta.y;let e=r/i;s.style.width="".concat((100*e).toFixed(2),"%")}}})},[]);return(0,s.jsxs)("div",{ref:o,className:"w-32 flex flex-col items-center gap-1",children:[(0,s.jsx)("div",{className:"ProgressBar w-full h-2 bg-[#fff3] rounded overflow-hidden",children:(0,s.jsx)("div",{className:"ProgressBarFill w-1/2 h-full bg-[white]"})}),(0,s.jsxs)("button",{className:"w-full text-xs border border-white/20 rounded px-2 py-1 hover:bg-white/10",children:[(0,s.jsx)("div",{children:"WheelRecorder"}),(0,s.jsxs)("div",{children:["(",e,"s, ",i," floats)"]})]})]})}function C(){let t=(0,d.Fw)();return(0,d.dB)("my-scene",function*(e){t.pipeline.basicPasses.fxaa.enabled=!1,(0,g.mj)(new p.u,e).regularGrid()}),null}function E(t){let{children:e,size:i="70vh",textColor:o="white",bgColor:r="red",className:a=""}=t;return(0,s.jsx)("section",{className:"relative flex flex-col rounded-xl p-8 ".concat(a),style:{height:i,color:o,backgroundColor:r},children:e})}function O(t){let{borderColor:e="white"}=t;return(0,s.jsx)("div",{style:{"--size":"1.2rem",position:"absolute",top:"calc((100% - var(--size)) / 2)",left:"calc(var(--size) / -2)",width:"var(--size)",height:"var(--size)",backgroundColor:"currentColor",borderRadius:"50%",border:"4px solid ".concat(e)}})}function I(){let[t,e]=(0,o.useState)(null),{ref:i}=(0,u.useEffects)(function*(t){(0,v.O)();let i=t.parentElement,s=function(t){let e=t.parentElement,i=[...t.querySelectorAll("section")],s=i.map(t=>0);for(let t=1,o=i.length-1;t<o;t++){let o=i[t],r=o.offsetTop-(e.clientHeight-o.clientHeight)/2;s[t]=r}return s[i.length-1]=e.scrollHeight-e.clientHeight,s}(t);e(s),yield m.Q.on("MOBILE_POSITIONS_REQUEST",t=>{t.setPayload(s)});let o=new x.l({positions:s}),r=o.svgRepresentation();yield()=>r.remove(),(0,f.kv)(()=>{let t=document.querySelector(".ScrollingWrapper");r.style.position="fixed",r.style.top="0",r.style.left="0",t.appendChild(r)});let a=0,n=0;yield(0,c.s)(t,{onVerticalDrag:t=>{o.dragStart().drag(-t.delta.y)},onVerticalDragStop:()=>{o.dragStop()},onWheel:t=>{a+=t.delta.y,o.autoDrag(t.delta.y)}}),Object.assign(window,{mobile:o}),f.Rv.get("three").set({inactivityWaitDuration:1/0}),yield(0,f.xy)("three",t=>{n+=a,m.Q.send("LIVE_TICK",{payload:{mobile:o,wheelDelta:a,wheelCumulativeDelta:n}}),a=0,o.update(t.deltaTime),i.scrollTop=o.position,o.svgRepresentation({svg:r})}),yield(0,h.a)([["ArrowUp",()=>{o.gotoPrevious({loop:!0})}],["ArrowDown",()=>{o.gotoNext({loop:!0})}]])},[]);return(0,s.jsxs)("div",{ref:i,className:"ScrollingContent w-full flex flex-col p-24 gap-8 select-none",children:[(0,s.jsxs)(E,{className:"gap-4",bgColor:"#402b2b",children:[(0,s.jsx)(O,{borderColor:"#402b2b"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Decay"}),(0,s.jsx)("p",{className:"max-w-md",children:"Trying to combine mouse drag & mouse wheel to control a single object with multiple stop positions and decay."}),t&&(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(N,{width:800,height:400,url:"/assets/misc/wheel/wheel-recording-5s-[why-not-down].bin",mobilePositions:t})})]}),(0,s.jsx)(E,{}),(0,s.jsx)(E,{bgColor:"blue",size:"1rem"}),(0,s.jsxs)(E,{size:"10rem",textColor:"black",bgColor:"#fc0",children:[(0,s.jsx)(O,{borderColor:"#fc0"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Small section"}),(0,s.jsx)("p",{className:"mt-4 max-w-md",children:"Trying to combine mouse drag & mouse wheel to control a single object with multiple stop positions and decay."})]}),(0,s.jsxs)(E,{size:"10rem",textColor:"black",bgColor:"#fc0",children:[(0,s.jsx)(O,{borderColor:"#fc0"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Small section"}),(0,s.jsxs)("p",{className:"mt-4 max-w-md",children:["You cannot always have something interesting to say. ",(0,s.jsx)("br",{}),"Can you?"]})]}),(0,s.jsxs)(E,{size:"70vh",children:[(0,s.jsx)(O,{borderColor:"red"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Decay"}),(0,s.jsx)("p",{className:"mt-4 max-w-md",children:"Trying to combine mouse drag & mouse wheel to control a single object with multiple stop positions and decay."})]}),(0,s.jsxs)(E,{size:"70vh",bgColor:"orange",children:[(0,s.jsx)(O,{borderColor:"orange"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Decay"}),(0,s.jsx)("p",{className:"mt-4 max-w-md",children:"Trying to combine mouse drag & mouse wheel to control a single object with multiple stop positions and decay."})]})]})}function z(t){let{borderColor:e="white"}=t;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center",style:{"--size":"4rem",position:"fixed",top:"calc((100% - var(--size)) / 2)",left:"0",width:"var(--size)",height:"var(--size)"},children:(0,s.jsx)(a,{size:"2rem"})})}function L(){let[t,e]=function(t,e){let[i,s]=(0,o.useState)(()=>{let i=window.localStorage.getItem(t);if(i)try{return JSON.parse(i)}catch(t){}return e});return[i,e=>{s(e),window.localStorage.setItem(t,JSON.stringify(e))}]}("WheelRecordPanel:expanded",!0);return(0,s.jsxs)("div",{className:"fixed top-4 right-4 z-10 flex flex-col items-end p-4 gap-4 rounded-xl overflow-hidden",style:{backdropFilter:"blur(64px) brightness(0.6) saturate(0.8)"},children:[(0,s.jsx)(A,{}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{className:"flex flex-row gap-1 text-xs items-center hover:underline",onClick:()=>e(!t),children:[t?(0,s.jsx)(n,{size:16}):(0,s.jsx)(l,{size:16}),"Live Wheel Graph"]})}),function(t,e){let[i,s]=(0,o.useState)(null);return(0,u.useEffects)(async function*(){s(await t())},null!=e?e:"always"),i}(async()=>{await f.Rv.current().waitNextTick();let e=m.Q.send("MOBILE_POSITIONS_REQUEST").assertPayload();return t&&(0,s.jsx)(N,{mobilePositions:e})},[t])]})}function F(){return(0,s.jsxs)(d.uB,{vertigoControls:{fixed:!0,size:32,perspective:0},children:[(0,s.jsx)(L,{}),(0,s.jsxs)("div",{className:"ScrollingWrapper layer thru",children:[(0,s.jsx)(z,{}),(0,s.jsx)(I,{})]}),(0,s.jsx)(C,{})]})}}}]);