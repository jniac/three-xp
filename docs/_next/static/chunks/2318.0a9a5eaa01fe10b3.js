"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2318],{14274:(t,e,i)=>{i.d(e,{K:()=>h});var n=i(17953),s=i(81074),r=i(49797),o=i(57165),a=i(36508),l=i(43340),c=i(31484);class h{get aspect(){return this.width/this.height}setSize(t){let{width:e,height:i,pixelRatio:n}={...this,...t};if(e===this.width&&i===this.height&&n===this.pixelRatio)return this;this.width=e,this.height=i,this.pixelRatio=n;let{renderer:s,perspectiveCamera:r,orhtographicCamera:o}=this;s.setSize(e,i),s.setPixelRatio(n);let a=e/i;return r.aspect=a,r.updateProjectionMatrix(),o.left=-a,o.right=a,o.top=1,o.bottom=-1,o.updateProjectionMatrix(),this}initialize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let i=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=i,new ResizeObserver(()=>{this.setSize({width:t.clientWidth,height:t.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(t);let{domElement:n}=this.renderer;return n.style.display="block",n.style.width="100%",n.style.height="100%",t.appendChild(n),this.setSize({width:n.clientWidth,height:n.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick(()=>{this.renderFrame()}).destroy,this.internal.cancelRequestActivation=(0,o.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,e,this.camera,this.ticker),this.domContainer=t,this.domElement=n,this}renderFrame(){let{scene:t,postProcessing:e,pointer:i}=this;i.update(t),t.traverse(t=>{"onTick"in t&&t.onTick(this.ticker,this)}),!1===this.skipRender&&e.renderAsync(),i.updateEnd()}constructor(){this.type=c.s.WebGPU,this.width=300,this.height=150,this.pixelRatio=1,this.ticker=a.Rv.get("three").set({minActiveDuration:8}),this.pointer=new l.g,this.renderer=new s.uV1({antialias:!0}),this.perspectiveCamera=new r.ubm,this.orhtographicCamera=new r.qUd,this.scene=new r.Z58,this.postProcessing=new s.io7(this.renderer),this.scenePass=(0,n.IXH)(this.scene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.skipRender=!1,this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var t,e,i,n,s,r,o;if(this.destroyed)return void console.warn("ThreeWebglContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(t=this.internal.observer)||t.disconnect(),null==(e=(i=this.internal).cancelTick)||e.call(i),null==(n=(s=this.internal).cancelRequestActivation)||n.call(s),null==(r=(o=this.internal).cancelPointer)||r.call(o)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},28535:(t,e,i)=>{i.d(e,{_:()=>r});var n=i(75687),s=i(44138);function r(t,e){var i=(0,s._)(t,e,"get");return(0,n._)(t,i)}},29443:(t,e,i)=>{i.d(e,{_:()=>n});function n(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}},29968:(t,e,i)=>{i.d(e,{q:()=>d,uB:()=>f,yk:()=>u});var n=i(70691),s=i(67203),r=i(7587),o=i(37821),a=i(48083),l=i(14274),c=i(36508);let h=(0,s.createContext)(null);function u(t,e){let i=(0,s.useContext)(h);return(0,r.C7)(async function*(e,n){if(t){let e=t(i,n);if(e&&"function"==typeof e.next)do{let{value:t,done:i}=await e.next();if(i)break;yield t}while(n.mounted)}},null!=e?e:"always"),i}function d(t){let{value:e}=t;return u(async function*(t){let i="function"==typeof e?new e:e;if(t.scene.add(i),"onInitialize"in i){let e=i.onInitialize(t);if(e&&"function"==typeof e.next)for(;;){let{value:t,done:i}=await e.next();if(i)break;yield t}}yield()=>{if(i.removeFromParent(),"onDestroy"in i){var t;null==(t=i.onDestroy)||t.call(i)}}},"always"),null}let p={className:"",assetsPath:"/",vertigoControls:!1};function v(t){let{children:e,className:i,vertigoControls:o}={...p,...t},u=(0,s.useMemo)(()=>new l.K,[]),{ref:d}=(0,r.IZ)({debounce:!0},function*(t,e){yield u.initialize(t.firstElementChild),e.triggerRender(),Object.assign(window,{three:u})},[]);(0,r.C7)(function*(){if(o){let t=new a.n("object"==typeof o?o:{}).initialize(d.current).start();yield t.destroy,yield(0,c.xy)("three",e=>{t.update(u.camera,u.aspect,e.deltaTime)})}},[o]);let v={position:"absolute",inset:0};return(0,n.jsx)("div",{ref:d,className:i,style:v,children:(0,n.jsxs)(h.Provider,{value:u,children:[(0,n.jsx)("div",{style:v}),(0,n.jsx)("div",{style:v,className:"thru",children:u.initialized&&e})]})})}function f(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,o.D)()&&(0,n.jsx)(v,{...e[0]})}},31484:(t,e,i)=>{var n;i.d(e,{s:()=>n}),function(t){t.WebGL="webgl",t.WebGPU="webgpu"}(n||(n={}))},37821:(t,e,i)=>{i.d(e,{D:()=>s});var n=i(67203);function s(){let[t,e]=(0,n.useState)(!1);return(0,n.useLayoutEffect)(()=>{e(!0)},[]),t}},43340:(t,e,i)=>{i.d(e,{g:()=>u});var n,s=i(28535),r=i(76999),o=i(57368),a=i(49797),l=i(61567);!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(n||(n={}));class c{copy(t){return this.buttons=t.buttons,this.clientPosition.copy(t.clientPosition),this.screenPosition.copy(t.screenPosition),this}diff(t,e){return this.buttons=t.buttons^e.buttons,this.clientPosition.subVectors(t.clientPosition,e.clientPosition),this.screenPosition.subVectors(t.screenPosition,e.screenPosition),this}constructor(){this.buttons=0,this.clientPosition=new a.I9Y,this.screenPosition=new a.I9Y}}var h=new WeakMap;class u{get buttons(){return this.state.buttons}buttonDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Left;return(this.state.buttons&1<<t)!=0}buttonDownOld(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Left;return(this.stateOld.buttons&1<<t)!=0}buttonDownEnter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Left;return this.buttonDown(t)&&!this.buttonDownOld(t)}buttonDownExit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Left;return!this.buttonDown(t)&&this.buttonDownOld(t)}buttonTap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Left,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return!1!==this.buttonDownExit(t)&&this.upTimes.get(t)-this.downTimes.get(t)<e}get clientPosition(){return this.state.clientPosition}get screenPosition(){return this.state.screenPosition}get ray(){return this.raycaster.ray}intersectPlane(t){let{distance:e=1e3,out:i=(0,s._)(this,h).result.point}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ray:n}=this.raycaster,{point:r,line:o,result:a,plane:l}=(0,s._)(this,h);if("string"==typeof t)switch(l.constant=0,t){case"X":l.normal.set(1,0,0);break;case"Y":l.normal.set(0,1,0);break;case"Z":l.normal.set(0,0,1)}else l.copy(t);return o.set(n.origin,r.copy(n.origin).addScaledVector(n.direction,e)),a.intersected=!!l.intersectLine(o,i),a}updatePosition(t,e,i){let{x:n,y:s}=e,r=(n-i.x)/i.width*2-1,o=-((s-i.y)/i.height*2)+1;this.camera=t,this.clientPosition.set(n,s),this.screenPosition.set(r,o),this.raycaster.setFromCamera(this.screenPosition,t)}raycastScene(t){let e=[];t.traverse(t=>{!0!==t.userData.ignorePointer&&(!1!==t.visible&&!0!==t.userData.helper||!0===t.userData.pointerArea)&&(0,l.uW)(t)&&this.raycaster.intersectObject(t,!1,e)}),e.sort((t,e)=>t.distance-e.distance);let[i]=e;if(i){var n,s;let t=null!=(s=i.object.userData.onPointerTap)?s:i.object.userData.pointerArea&&(null==(n=i.object.parent)?void 0:n.userData.onPointerTap);t&&this.buttonTap()&&t()}}update(t){this.diffState.diff(this.state,this.stateOld),this.raycastScene(t)}updateEnd(){this.stateOld.copy(this.state),this.event.reset()}initialize(t,e,i,n){let s=e=>{let n=t.getBoundingClientRect(),{clientX:s,clientY:r}=e;this.updatePosition(i,{x:s,y:r},n)},r=t=>{s(t)},o=t=>{s(t),this.state.buttons|=1<<t.button,this.downTimes.set(t.button,n.time)},a=t=>{this.state.buttons&=~(1<<t.button),this.upTimes.set(t.button,n.time)};return e.addEventListener("pointermove",r),e.addEventListener("pointerdown",o),e.addEventListener("pointerup",a),()=>{e.removeEventListener("pointermove",r),e.removeEventListener("pointerdown",o),e.removeEventListener("pointerup",a)}}constructor(){(0,r._)(this,h,{writable:!0,value:void 0}),this.state=new c,this.stateOld=new c,this.diffState=new c,this.downTimes=new Map,this.upTimes=new Map,this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.raycaster=new a.tBo,(0,o._)(this,h,{plane:new a.Zcv,point:new a.Pq0,line:new a.cZY,result:{intersected:!1,point:new a.Pq0}})}}},44138:(t,e,i)=>{i.d(e,{_:()=>n});function n(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}},57368:(t,e,i)=>{i.d(e,{_:()=>s});var n=i(44138);function s(t,e,i){var s=(0,n._)(t,e,"set");if(s.set)s.set.call(t,i);else{if(!s.writable)throw TypeError("attempted to set read only private field");s.value=i}return i}},75687:(t,e,i)=>{i.d(e,{_:()=>n});function n(t,e){return e.get?e.get.call(t):e.value}},76999:(t,e,i)=>{i.d(e,{_:()=>s});var n=i(29443);function s(t,e,i){(0,n._)(t,e),e.set(t,i)}},99187:(t,e,i)=>{i.d(e,{_:()=>s});var n=i(75687);function s(t,e,i){if(t!==e)throw TypeError("Private static access of wrong provenance");if(void 0===i)throw TypeError("attempted to get private static field before its declaration");return(0,n._)(t,i)}}}]);