(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1575],{4752:function(e,t,r){"use strict";var i=r(95444);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,s,n){if(n!==i){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return r.PropTypes=r,r}},62471:function(e,t,r){e.exports=r(4752)()},95444:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},39345:function(e,t,r){var i,a,s;s=function(e,t,r,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(e,{BlockMath:()=>d,InlineMath:()=>u}),t=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}(t),r=a(r),i=a(i);let n=(e,{displayMode:a})=>{let s=({children:r,errorColor:s,math:n,renderError:o})=>{let l=null!=n?n:r,{html:h,error:d}=(0,t.useMemo)(()=>{try{return{html:i.default.renderToString(l,{displayMode:a,errorColor:s,throwOnError:!!o}),error:void 0}}catch(e){if(e instanceof i.default.ParseError||e instanceof TypeError)return{error:e};throw e}},[l,s,o]);return d?o?o(d):t.default.createElement(e,{html:`${d.message}`}):t.default.createElement(e,{html:h})};return s.propTypes={children:r.default.string,errorColor:r.default.string,math:r.default.string,renderError:r.default.func},s},o={html:r.default.string.isRequired},l=({html:e})=>t.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});l.propTypes=o;let h=({html:e})=>t.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});h.propTypes=o;let d=n(l,{displayMode:!0}),u=n(h,{displayMode:!1})},"object"==typeof e.exports?s(t,r(87200),r(62471),r(65812)):(i=[t,r(87200),r(62471),r(65812)],void 0===(a=s.apply(t,i))||(e.exports=a))},75653:function(){},22634:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var i=r(37186);function a(e,t,r){let i=r.length-e-1;if(t>=r[i])return i-1;if(t<=r[e])return e;let a=e,s=i,n=Math.floor((a+s)/2);for(;t<r[n]||t>=r[n+1];)t<r[n]?s=n:a=n,n=Math.floor((a+s)/2);return n}class s extends i.Hyl{constructor(e,t,r,a,s){super();let n=t?t.length-1:0,o=r?r.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=a||0,this.endKnot=s||n;for(let e=0;e<o;++e){let t=r[e];this.controlPoints[e]=new i.Ltg(t.x,t.y,t.z,t.w)}}getPoint(e,t=new i.Pa4){let r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=function(e,t,r,s){let n=a(e,s,t),o=function(e,t,r,i){let a=[],s=[],n=[];a[0]=1;for(let o=1;o<=r;++o){s[o]=t-i[e+1-o],n[o]=i[e+o]-t;let r=0;for(let e=0;e<o;++e){let t=n[e+1],i=s[o-e],l=a[e]/(t+i);a[e]=r+t*l,r=i*l}a[o]=r}return a}(n,s,e,t),l=new i.Ltg(0,0,0,0);for(let t=0;t<=e;++t){let i=r[n-e+t],a=o[t],s=i.w*a;l.x+=i.x*s,l.y+=i.y*s,l.z+=i.z*s,l.w+=i.w*a}return l}(this.degree,this.knots,this.controlPoints,r);return 1!==s.w&&s.divideScalar(s.w),t.set(s.x,s.y,s.z)}getTangent(e,t=new i.Pa4){var r;let s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=(r=this.degree,function(e){let t=e.length,r=[],a=[];for(let s=0;s<t;++s){let t=e[s];r[s]=new i.Pa4(t.x,t.y,t.z),a[s]=t.w}let s=[];for(let e=0;e<t;++e){let t=r[e].clone();for(let r=1;r<=e;++r)t.sub(s[e-r].clone().multiplyScalar(function(e,t){let r=1;for(let t=2;t<=e;++t)r*=t;let i=1;for(let e=2;e<=t;++e)i*=e;for(let r=2;r<=e-t;++r)i*=r;return r/i}(e,r)*a[r]));s[e]=t.divideScalar(a[0])}return s}(function(e,t,r,s,n){let o=1<e?1:e,l=[],h=a(e,s,t),d=function(e,t,r,i,a){let s=[];for(let e=0;e<=r;++e)s[e]=0;let n=[];for(let e=0;e<=i;++e)n[e]=s.slice(0);let o=[];for(let e=0;e<=r;++e)o[e]=s.slice(0);o[0][0]=1;let l=s.slice(0),h=s.slice(0);for(let i=1;i<=r;++i){l[i]=t-a[e+1-i],h[i]=a[e+i]-t;let r=0;for(let e=0;e<i;++e){let t=h[e+1],a=l[i-e];o[i][e]=t+a;let s=o[e][i-1]/o[i][e];o[e][i]=r+t*s,r=a*s}o[i][i]=r}for(let e=0;e<=r;++e)n[0][e]=o[e][r];for(let e=0;e<=r;++e){let t=0,a=1,l=[];for(let e=0;e<=r;++e)l[e]=s.slice(0);l[0][0]=1;for(let s=1;s<=i;++s){let i=0,h=e-s,d=r-s;e>=s&&(l[a][0]=l[t][0]/o[d+1][h],i=l[a][0]*o[h][d]);let u=h>=-1?1:-h,p=e-1<=d?s-1:r-e;for(let e=u;e<=p;++e)l[a][e]=(l[t][e]-l[t][e-1])/o[d+1][h+e],i+=l[a][e]*o[h+e][d];e<=d&&(l[a][s]=-l[t][s-1]/o[d+1][e],i+=l[a][s]*o[e][d]),n[s][e]=i;let f=t;t=a,a=f}}let d=r;for(let e=1;e<=i;++e){for(let t=0;t<=r;++t)n[e][t]*=d;d*=r-e}return n}(h,s,e,o,t),u=[];for(let e=0;e<r.length;++e){let t=r[e].clone(),i=t.w;t.x*=i,t.y*=i,t.z*=i,u[e]=t}for(let t=0;t<=o;++t){let r=u[h-e].clone().multiplyScalar(d[t][0]);for(let i=1;i<=e;++i)r.add(u[h-e+i].clone().multiplyScalar(d[t][i]));l[t]=r}for(let e=o+1;e<=n+1;++e)l[e]=new i.Ltg(0,0,0);return l}(r,this.knots,this.controlPoints,s,1)));return t.copy(n[1]).normalize(),t}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(e=>e.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(e=>new i.Ltg(e[0],e[1],e[2],e[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}},74259:function(e,t,r){"use strict";r.d(t,{n:function(){return h}});var i=r(37186),a=r(6549),s=r(17557),n=r(50897),o=r(10313),l=r(69315);class h extends a.w{constructor(e,t,r,l,h,d,u){super(),this.width=void 0!==r?r:512,this.height=void 0!==l?l:512,this.clear=!0,this.camera=t,this.scene=e,this.output=0,this._renderGBuffer=!0,this._visibilityCache=new Map,this.blendIntensity=1,this.pdRings=2,this.pdRadiusExponent=2,this.pdSamples=16,this.gtaoNoiseTexture=(0,s.mK)(),this.pdNoiseTexture=this.generateNoise(),this.gtaoRenderTarget=new i.dd2(this.width,this.height,{type:i.cLu}),this.pdRenderTarget=this.gtaoRenderTarget.clone(),this.gtaoMaterial=new i.jyz({defines:Object.assign({},s.Sp.defines),uniforms:i.rDY.clone(s.Sp.uniforms),vertexShader:s.Sp.vertexShader,fragmentShader:s.Sp.fragmentShader,blending:i.jFi,depthTest:!1,depthWrite:!1}),this.gtaoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.gtaoMaterial.uniforms.tNoise.value=this.gtaoNoiseTexture,this.gtaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.normalMaterial=new i.RSm,this.normalMaterial.blending=i.jFi,this.pdMaterial=new i.jyz({defines:Object.assign({},n.m.defines),uniforms:i.rDY.clone(n.m.uniforms),vertexShader:n.m.vertexShader,fragmentShader:n.m.fragmentShader,depthTest:!1,depthWrite:!1}),this.pdMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.pdMaterial.uniforms.tNoise.value=this.pdNoiseTexture,this.pdMaterial.uniforms.resolution.value.set(this.width,this.height),this.pdMaterial.uniforms.lumaPhi.value=10,this.pdMaterial.uniforms.depthPhi.value=2,this.pdMaterial.uniforms.normalPhi.value=3,this.pdMaterial.uniforms.radius.value=8,this.depthRenderMaterial=new i.jyz({defines:Object.assign({},s.gs.defines),uniforms:i.rDY.clone(s.gs.uniforms),vertexShader:s.gs.vertexShader,fragmentShader:s.gs.fragmentShader,blending:i.jFi}),this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new i.jyz({uniforms:i.rDY.clone(o.C.uniforms),vertexShader:o.C.vertexShader,fragmentShader:o.C.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:i.Vdb,blendDst:i.c8b,blendEquation:i.bGH,blendSrcAlpha:i.fSK,blendDstAlpha:i.c8b,blendEquationAlpha:i.bGH}),this.blendMaterial=new i.jyz({uniforms:i.rDY.clone(s.mF.uniforms),vertexShader:s.mF.vertexShader,fragmentShader:s.mF.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:i.Xaj,blendSrc:i.Vdb,blendDst:i.c8b,blendEquation:i.bGH,blendSrcAlpha:i.fSK,blendDstAlpha:i.c8b,blendEquationAlpha:i.bGH}),this.fsQuad=new a.T(null),this.originalClearColor=new i.Ilk,this.setGBuffer(h?h.depthTexture:void 0,h?h.normalTexture:void 0),void 0!==d&&this.updateGtaoMaterial(d),void 0!==u&&this.updatePdMaterial(u)}dispose(){this.gtaoNoiseTexture.dispose(),this.pdNoiseTexture.dispose(),this.normalRenderTarget.dispose(),this.gtaoRenderTarget.dispose(),this.pdRenderTarget.dispose(),this.normalMaterial.dispose(),this.pdMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}get gtaoMap(){return this.pdRenderTarget.texture}setGBuffer(e,t){void 0!==e?(this.depthTexture=e,this.normalTexture=t,this._renderGBuffer=!1):(this.depthTexture=new i.$YQ,this.depthTexture.format=i.brP,this.depthTexture.type=i.wJv,this.normalRenderTarget=new i.dd2(this.width,this.height,{minFilter:i.TyD,magFilter:i.TyD,type:i.cLu,depthTexture:this.depthTexture}),this.normalTexture=this.normalRenderTarget.texture,this._renderGBuffer=!0);let r=this.normalTexture?1:0,a=this.depthTexture===this.normalTexture?"w":"x";this.gtaoMaterial.defines.NORMAL_VECTOR_TYPE=r,this.gtaoMaterial.defines.DEPTH_SWIZZLING=a,this.gtaoMaterial.uniforms.tNormal.value=this.normalTexture,this.gtaoMaterial.uniforms.tDepth.value=this.depthTexture,this.pdMaterial.defines.NORMAL_VECTOR_TYPE=r,this.pdMaterial.defines.DEPTH_SWIZZLING=a,this.pdMaterial.uniforms.tNormal.value=this.normalTexture,this.pdMaterial.uniforms.tDepth.value=this.depthTexture,this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture}setSceneClipBox(e){e?(this.gtaoMaterial.needsUpdate=1!==this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=1,this.gtaoMaterial.uniforms.sceneBoxMin.value.copy(e.min),this.gtaoMaterial.uniforms.sceneBoxMax.value.copy(e.max)):(this.gtaoMaterial.needsUpdate=0===this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=0)}updateGtaoMaterial(e){void 0!==e.radius&&(this.gtaoMaterial.uniforms.radius.value=e.radius),void 0!==e.distanceExponent&&(this.gtaoMaterial.uniforms.distanceExponent.value=e.distanceExponent),void 0!==e.thickness&&(this.gtaoMaterial.uniforms.thickness.value=e.thickness),void 0!==e.distanceFallOff&&(this.gtaoMaterial.uniforms.distanceFallOff.value=e.distanceFallOff,this.gtaoMaterial.needsUpdate=!0),void 0!==e.scale&&(this.gtaoMaterial.uniforms.scale.value=e.scale),void 0!==e.samples&&e.samples!==this.gtaoMaterial.defines.SAMPLES&&(this.gtaoMaterial.defines.SAMPLES=e.samples,this.gtaoMaterial.needsUpdate=!0),void 0!==e.screenSpaceRadius&&(e.screenSpaceRadius?1:0)!==this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS&&(this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS=e.screenSpaceRadius?1:0,this.gtaoMaterial.needsUpdate=!0)}updatePdMaterial(e){let t=!1;void 0!==e.lumaPhi&&(this.pdMaterial.uniforms.lumaPhi.value=e.lumaPhi),void 0!==e.depthPhi&&(this.pdMaterial.uniforms.depthPhi.value=e.depthPhi),void 0!==e.normalPhi&&(this.pdMaterial.uniforms.normalPhi.value=e.normalPhi),void 0!==e.radius&&e.radius!==this.radius&&(this.pdMaterial.uniforms.radius.value=e.radius),void 0!==e.radiusExponent&&e.radiusExponent!==this.pdRadiusExponent&&(this.pdRadiusExponent=e.radiusExponent,t=!0),void 0!==e.rings&&e.rings!==this.pdRings&&(this.pdRings=e.rings,t=!0),void 0!==e.samples&&e.samples!==this.pdSamples&&(this.pdSamples=e.samples,t=!0),t&&(this.pdMaterial.defines.SAMPLES=this.pdSamples,this.pdMaterial.defines.SAMPLE_VECTORS=(0,n.a)(this.pdSamples,this.pdRings,this.pdRadiusExponent),this.pdMaterial.needsUpdate=!0)}render(e,t,r){switch(this._renderGBuffer&&(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility()),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.gtaoMaterial.uniforms.cameraWorldMatrix.value.copy(this.camera.matrixWorld),this.renderPass(e,this.gtaoMaterial,this.gtaoRenderTarget,16777215,1),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.renderPass(e,this.pdMaterial,this.pdRenderTarget,16777215,1),this.output){case h.OUTPUT.Off:break;case h.OUTPUT.Diffuse:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=i.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.AO:this.copyMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.copyMaterial.blending=i.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Denoise:this.copyMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.copyMaterial.blending=i.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Depth:this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=i.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=i.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blendMaterial.uniforms.intensity.value=this.blendIntensity,this.blendMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.renderPass(e,this.blendMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.GTAOPass: Unknown output type.")}}renderPass(e,t,r,i,a){e.getClearColor(this.originalClearColor);let s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,null!=i&&(e.setClearColor(i),e.setClearAlpha(a||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=n,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}renderOverride(e,t,r,i,a){e.getClearColor(this.originalClearColor);let s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i=t.clearColor||i,a=t.clearAlpha||a,null!=i&&(e.setClearColor(i),e.setClearAlpha(a||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=n,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)}setSize(e,t){this.width=e,this.height=t,this.gtaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.pdRenderTarget.setSize(e,t),this.gtaoMaterial.uniforms.resolution.value.set(e,t),this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.pdMaterial.uniforms.resolution.value.set(e,t),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse)}overrideVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)})}restoreVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){let r=t.get(e);e.visible=r}),t.clear()}generateNoise(e=64){let t=new l.L,r=new Uint8Array(e*e*4);for(let i=0;i<e;i++)for(let a=0;a<e;a++){let s=i,n=a;r[(i*e+a)*4]=(.5*t.noise(s,n)+.5)*255,r[(i*e+a)*4+1]=(.5*t.noise(s+e,n)+.5)*255,r[(i*e+a)*4+2]=(.5*t.noise(s,n+e)+.5)*255,r[(i*e+a)*4+3]=(.5*t.noise(s+e,n+e)+.5)*255}let a=new i.IEO(r,e,e,i.wk1,i.ywz);return a.wrapS=i.rpg,a.wrapT=i.rpg,a.needsUpdate=!0,a}}h.OUTPUT={Off:-1,Default:0,Diffuse:1,Depth:2,Normal:3,AO:4,Denoise:5}}}]);