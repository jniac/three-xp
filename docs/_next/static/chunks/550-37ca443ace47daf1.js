"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{51845:function(e,t,s){s.d(t,{s:function(){return i}});function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let[i,r]=1===t.length?[window,t[0]]:t,n=()=>{r()};return i.addEventListener("mousemove",n,{passive:!0}),i.addEventListener("mousedown",n,{passive:!0}),i.addEventListener("mouseup",n,{passive:!0}),i.addEventListener("touchstart",n,{passive:!0}),i.addEventListener("touchmove",n,{passive:!0}),i.addEventListener("wheel",n,{passive:!0}),i.addEventListener("keydown",n,{passive:!0}),i.addEventListener("keyup",n,{passive:!0}),window.addEventListener("resize",n,{passive:!0}),{destroy:()=>{i.removeEventListener("mousemove",n),i.removeEventListener("mousedown",n),i.removeEventListener("mouseup",n),i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",n),i.removeEventListener("wheel",n),i.removeEventListener("keydown",n),i.removeEventListener("keyup",n),window.removeEventListener("resize",n)}}}},80550:function(e,t,s){s.d(t,{Vu:function(){return P}});var i,r,n,o,a=s(64740),l=s(51776),h=s(72290),d=s(35459),c=s(4798),u=s(59544),p=s(33628);(i=n||(n={}))[i.Render=0]="Render",i[i.PostProcessing=1e3]="PostProcessing",i[i.GizmoRender=2e3]="GizmoRender",i[i.Outline=3e3]="Outline",i[i.Output=4e3]="Output",i[i.Antialiasing=5e3]="Antialiasing";class f{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let s=e[1],i=t[1];return s.type!==i.type?s.type-i.type:s.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,s]of this.passMap)s.type===e&&(yield[t,s])}addPass(e){let{type:t=n.Render,insertOrder:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===s){var i,r,o;s=(null!==(o=null===(r=[...this.getPassesByType(t)].at(-1))||void 0===r?void 0:null===(i=r[1])||void 0===i?void 0:i.insertOrder)&&void 0!==o?o:-1)+1}return this.passMap.set(e,{type:t,insertOrder:s}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,s){this.composer.setSize(e,t),this.composer.setPixelRatio(s),this.basicPasses.fxaa.uniforms.resolution.value.set(1/s/e,1/s/t)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let s of this.composer.passes)s instanceof c.C&&s.scene===t&&(s.scene=e)}render(e){for(let t of this.composer.passes)t instanceof c.C&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:s}=this;for(let[i,r]of t.passes.entries()){let t=s.get(r);t?e.push("- ".concat(i,": ").concat(n[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(r.constructor.name)):e.push("- ".concat(i,": NO METADATA for ").concat(r.constructor.name))}return e.join("\n")}constructor(e,t,s,i){let r=new l.x(e),o=new Map,f=new c.C(t,i);f.clearAlpha=0,o.set(f,{type:n.Render,insertOrder:0}),r.addPass(f);let v=new c.C(s,i);o.set(v,{type:n.GizmoRender,insertOrder:0}),v.clear=!1,v.clearDepth=!1,r.addPass(v);let m=new h.f(new a.Vector2,t,i);o.set(m,{type:n.GizmoRender,insertOrder:0}),r.addPass(m);let w=new d.v;o.set(w,{type:n.Output,insertOrder:0}),r.addPass(w);let y=new u.T(p.C);o.set(y,{type:n.Antialiasing,insertOrder:0}),r.addPass(y),this.composer=r,this.basicPasses={mainRender:f,gizmoRender:v,outline:m,output:w,fxaa:y},this.passMap=o}}var v=s(8423),m=s(51845),w=s(35859),y=s(11315),g=s(73437),b=s(16516);(r=o||(o={}))[r.None=0]="None",r[r.LeftDown=1]="LeftDown",r[r.LeftDrag=2]="LeftDrag";class L{get ray(){return this.raycaster.ray}update(e,t,s){let{x:i,y:r}=t,n=(i-s.x)/s.width*2-1,o=-((r-s.y)/s.height*2)+1;this.camera=e,this.clientPosition.set(i,r),this.screenPosition.set(n,o),this.raycaster.setFromCamera(this.screenPosition,e)}constructor(){this.status={button:0},this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.clientPosition=new a.Vector2,this.screenPosition=new a.Vector2,this.raycaster=new a.Raycaster}}class P{static current(){return this.instances[this.instances.length-1]}get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:s=null,target:i=null,element:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(t=(e=this.internal).orbitControls)&&void 0!==t||(e.orbitControls=new v.z(this.camera,this.renderer.domElement)),"string"==typeof r&&(r=document.querySelector(r)),r&&r!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new v.z(this.camera,r)),s&&(0,g.Q7)(s,this.internal.orbitControls.object.position),i&&(0,g.Q7)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:t}=this;e.appendChild(this.renderer.domElement);let s=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},i=new ResizeObserver(s);i.observe(e),t(()=>{i.disconnect()}),s();let r=e=>{let t=this.renderer.domElement.getBoundingClientRect();this.pointer.update(this.camera,{x:e.clientX,y:e.clientY},t)},n=e=>{this.pointer.status.button|=o.LeftDown},a=e=>{this.pointer.status.button&=~o.LeftDown};return e.addEventListener("pointermove",r),e.addEventListener("pointerdown",n),e.addEventListener("pointerup",a),t(()=>{e.removeEventListener("pointermove",r),e.removeEventListener("pointerdown",n),e.removeEventListener("pointerup",a)}),t((0,m.s)(this.ticker.requestActivation),this.ticker.onTick(this.update)),t(()=>{var e;null===(e=this.internal.orbitControls)||void 0===e||e.dispose()}),this}setSize(e){let{width:t,height:s,pixelRatio:i}={...this,...e};if(t===this.width&&s===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=s,this.pixelRatio=i;let{renderer:r,perspectiveCamera:n,pipeline:o}=this;r.setSize(t,s),r.setPixelRatio(i),o.setSize(t,s,i);let a=t/s;return n.aspect=a,n.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,s=[this.scene];for(;s.length>0;){let e=s.shift();t(e)&&(yield e),s.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new a.WebGLRenderer,this.perspectiveCamera=new a.PerspectiveCamera,this.orhtographicCamera=new a.PerspectiveCamera,this.scene=new a.Scene,this.gizmoScene=new a.Scene,this.pointer=new L,this.ticker=y.vB.get("three").set({activeDuration:8}),this.pipeline=new f(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new a.Vector2,fullSize:new a.Vector2,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=b.R.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed){console.warn("ThreeWebglContext is already destroyed.");return}Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,w.o)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.update=e=>{var t;null===(t=this.internal.orbitControls)||void 0===t||t.update(e.deltaTime),this.pipeline.render(e)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),P.instances.push(this)}}P.instances=[]},73437:function(e,t,s){s.d(t,{Gg:function(){return l},Q7:function(){return a},Xe:function(){return h},iK:function(){return o}});var i=s(64740);let r={rad:1,deg:Math.PI/180,turn:2*Math.PI};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rad",s=t,i=0;if("number"==typeof e)i=e;else{let t=e.match(/^\s*(-?[0-9.]+)\s*(\/\s*-?[0-9.]+)?\s*(rad|deg|turn)\s*$/);if(t){let[e,r,n,o]=t;i=Number.parseFloat(r),n&&(i/=Number.parseFloat(n.slice(1))),s=o}else i=Number.parseFloat(e)}return i*r[s]}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector2;if(null==e)return t.set(0,0);if("number"==typeof e)return t.set(e,e);if(Array.isArray(e)){let[s,i]=e;return t.set(s,i)}if("width"in e){let{width:s,height:i}=e;return t.set(s,i)}let{x:s,y:r}=e;return t.set(s,r)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector3;if(null==e)return t.set(0,0,0);if("number"==typeof e)return t.set(e,e,e);if(Array.isArray(e)){let[s,i,r=0]=e;return t.set(s,i,r)}if("width"in e){let{width:s,height:i,depth:r}=e;return t.set(s,i,r)}let{x:s,y:r,z:n=0}=e;return t.set(s,r,n)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Euler;if(e instanceof i.Euler)return t.copy(e);if(Array.isArray(e)){let[s,i,r,o="rad",a="XYZ"]=e;return t.set(n(s,o),n(i,o),n(r,o),a)}let{x:s,y:r,z:o,order:a="XYZ",unit:l="rad"}=e;return t.set(n(s,l),n(r,l),n(o,l),a)}let h=(()=>{let e=new i.Vector3,t=new i.Euler,s=new i.Vector3,r=new i.Quaternion;return function(n,o){let{x:h=0,y:d=0,z:c=0,position:u={x:h,y:d,z:c},rotationX:p=0,rotationY:f=0,rotationZ:v=0,rotationOrder:m="XYZ",rotation:w={x:p,y:f,z:v,order:m},useDegree:y=!1,scaleX:g=1,scaleY:b=1,scaleZ:L=1,scaleScalar:P=1,scale:E={x:g,y:b,z:L}}=n;if(y){let e=Math.PI/180;w.x*=e,w.y*=e,w.z*=e}if(o instanceof i.Matrix4)return a(u,e),l(w,t),a(E,s).multiplyScalar(P),r.setFromEuler(t),o.compose(e,r,s);if(o instanceof i.Object3D)return a(u,o.position),l(w,o.rotation),a(E,o.scale).multiplyScalar(P),o;throw Error("Invalid out argument")}})()},16516:function(e,t,s){s.d(t,{R:function(){return c}});var i=s(64740),r=s(48178),n=s(20893),o=s(91310);function a(e){let t,s;let i=new Promise((i,r)=>{t=()=>{i(e)},s=e=>{r(e)}});return Object.assign(e,{then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),resolve:t,reject:s}),e}let l=["gltf","glb"],h=["png","jpg","jpeg","hdr","exr"];class d{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class c{static current(){var e;return null!==(e=this.instances[this.instances.length-1])&&void 0!==e?e:new c}static get(e){var t;return null!==(t=this.instances.find(t=>t.name===e))&&void 0!==t?t:new c({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,s)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)})}async loadRgbe(e){let t=a(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=a(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let s=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(s)){let e=this.textureCache.get(s);return null==t||t(e),e}let i=a(this.loaders.texture.load(s,e=>{this.textureCache.set(s,i),null==t||t(e),i.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(s))}));return i}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(h.includes(t))return new Promise((t,s)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,s)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=c.nextId++,this.loaders={gltf:new n.E,texture:new i.TextureLoader,rgbeLoader:new o.x,exrLoader:new r.I},this.path="",this._onAfterLoad=new d,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),c.instances.push(this)}}c.nextId=0,c.instances=[]},35859:function(e,t,s){s.d(t,{o:function(){return i}});function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}}}]);