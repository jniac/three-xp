"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7074],{14274:(e,t,i)=>{i.d(t,{K:()=>u});var n=i(17953),r=i(81074),s=i(49797),a=i(57165),l=i(36508),o=i(43340),h=i(31484);class u{get aspect(){return this.width/this.height}setSize(e){let{width:t,height:i,pixelRatio:n}={...this,...e};if(t===this.width&&i===this.height&&n===this.pixelRatio)return this;this.width=t,this.height=i,this.pixelRatio=n;let{renderer:r,perspectiveCamera:s,orhtographicCamera:a}=this;r.setSize(t,i),r.setPixelRatio(n);let l=t/i;return s.aspect=l,s.updateProjectionMatrix(),a.left=-l,a.right=l,a.top=1,a.bottom=-1,a.updateProjectionMatrix(),this}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let i=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=i,new ResizeObserver(()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(e);let{domElement:n}=this.renderer;return n.style.display="block",n.style.width="100%",n.style.height="100%",e.appendChild(n),this.setSize({width:n.clientWidth,height:n.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick(()=>{this.renderFrame()}).destroy,this.internal.cancelRequestActivation=(0,a.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,t,this.camera,this.ticker),this.domContainer=e,this.domElement=n,this}renderFrame(){let{scene:e,postProcessing:t,pointer:i}=this;i.update(e),e.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&t.renderAsync(),i.updateEnd()}constructor(){this.type=h.s.WebGPU,this.width=300,this.height=150,this.pixelRatio=1,this.ticker=l.Rv.get("three").set({minActiveDuration:8}),this.pointer=new o.g,this.renderer=new r.uV1({antialias:!0}),this.perspectiveCamera=new s.ubm,this.orhtographicCamera=new s.qUd,this.scene=new s.Z58,this.postProcessing=new r.io7(this.renderer),this.scenePass=(0,n.IXH)(this.scene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.skipRender=!1,this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var e,t,i,n,r,s,a;if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(e=this.internal.observer)||e.disconnect(),null==(t=(i=this.internal).cancelTick)||t.call(i),null==(n=(r=this.internal).cancelRequestActivation)||n.call(r),null==(s=(a=this.internal).cancelPointer)||s.call(a)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},37821:(e,t,i)=>{i.d(t,{D:()=>r});var n=i(67203);function r(){let[e,t]=(0,n.useState)(!1);return(0,n.useLayoutEffect)(()=>{t(!0)},[]),e}},67235:(e,t,i)=>{i.d(t,{Q:()=>o});var n=i(54530);class r{_getId(){return r._idHash.init().update(++this._count).getValue()}_registerObject(e){let t=this._getId();return this._weakMap.set(e,t),t}_registerPrimitive(e){let t=this._getId();return this._map.set(e,t),t}_requirePrimitiveId(e){var t;return null!=(t=this._map.get(e))?t:this._registerPrimitive(e)}_requireObjectId(e){var t;return null!=(t=this._weakMap.get(e))?t:this._registerObject(e)}_requireArrayId(e){let{_arrayHash:t}=r;for(let i of(t.init(),e.flat(16)))t.update(this.requireId(i));return t.getValue()}requireId(e){return!function(e){if(null==e)return!0;switch(typeof e){case"function":case"object":return!1;default:return!0}}(e)?Array.isArray(e)?this._requireArrayId(e):this._requireObjectId(e):this._requirePrimitiveId(e)}constructor(){this._count=1,this._map=new Map,this._weakMap=new WeakMap}}r._idHash=new n.V,r._arrayHash=new n.V;class s{constructor(e,t){this.filter=e,this.callback=t,this.match="*"===e?()=>!0:"string"==typeof e?t=>t===e:e instanceof RegExp?t=>e.test(t):()=>!1}}let a=new r,l=new Map;class o{setPayload(e){return this.payload=e,this}assignPayload(e){let{overwrite:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.payload=t?{...this.payload,...e}:{...e,...this.payload},this}payloadAssign(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.assignPayload(...t)}assertPayload(){if(void 0!==this.payload)return this.payload;throw Error('Message.payloadAssert: assertion failed for message with target "'.concat(this.target,'"'))}constructor(e,t,i){var n;this.id=o.nextId++,this.debug={currentListenerIndex:-1,listenerCount:0},this.targetId=a.requireId(e),this.target=e,this.type=null!=t?t:"message",this.payload=i;let r=(null!=(n=l.get(this.targetId))?n:[]).filter(e=>e.match(this.type));for(let e of(this.debug.listenerCount=r.length,r))this.debug.currentListenerIndex++,e.callback(this)}}function h(e){if(2===e.length){let[t,i]=e;return[t,"*",i]}return e}function u(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let[r,o,u]=h(i),c=a.requireId(r),d=new s(o,u);return(null!=(e=l.get(c))?e:(()=>{let e=[];return l.set(c,e),e})()).push(d),{destroy:()=>{!function(e,t){let i=l.get(e);if(i){let n=i.indexOf(t);if(-1!==n)i.splice(n,1),0===i.length&&l.delete(e)}}(c,d)}}}o.send=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[n,r,s]=function(e){let[t,...i]=e;if(2===i.length){let[e,{payload:n}]=i;return[t,e,n]}if(1===i.length){let[e]=i;return"string"==typeof e?[t,e]:[t,void 0,e.payload]}return[t]}(t);return new o(n,r,s)},o.on=u,o.wait=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Promise(e=>{let i=t=>{e(t)},[n,r]=h([...t,i]);u(n,r,i)})},o.debug={listenerMap:l,idRegister:a},o.nextId=0},97074:(e,t,i)=>{i.d(t,{q:()=>v,uB:()=>x,Fw:()=>g});var n=i(70691),r=i(67203),s=i(30158),a=i(7587),l=i(37821),o=i(48083),h=i(31484),u=i(4266),c=i(14274),d=i(87381),p=i(67235);let f=(0,r.createContext)(null);function y(e,t){let i=(0,r.useContext)(f);return(0,a.C7)(async function*(t,n){if(e){let t=e(i,n);if(t&&"function"==typeof t.next)do{let{value:e,done:i}=await t.next();if(i)break;yield e}while(n.mounted)}},null!=t?t:"always"),i}function g(e,t){let i=y(async function*(t,i){if(t.type===h.s.WebGL&&e){let n=e(t,i);if(n&&"function"==typeof n.next)for(;;){let{value:e,done:t}=await n.next();if(t)break;yield e}}},t);return i.type===h.s.WebGL?i:null}let w={hidden:!1};function v(e){let t={...w,...e};return y(async function*(e){let{value:i,hidden:n}=t;if(!i)return;let r="function"==typeof i?new i:i;for(let i of((0,d.mj)(r,{parent:e.scene,...t.transform}),n&&(r.visible=!1),(0,d.$z)(r,{includeSelf:!0})))if("onInitialize"in i){let t=i.onInitialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:i}=await t.next();if(i)break;yield e}}yield()=>{for(let t of(r.removeFromParent(),(0,d.$z)(r,{includeSelf:!0})))if("onDestroy"in t){var e;null==(e=t.onDestroy)||e.call(t)}}},"always"),null}let m={type:void 0,webgl:void 0,webgpu:void 0,className:"",assetsPath:"/",vertigoControls:!1,minActiveDuration:30};function b(e){var t;let i={...m,...e},{children:l,className:h,vertigoControls:d}=i,y=null!=(t=i.type)?t:i.webgpu?"webgpu":"webgl",g=(0,r.useRef)(void 0);g.current&&g.current!==y&&console.warn('ThreeProvider: the prop "type" is not intended to change after the component is mounted.'),g.current=y;let w=(0,r.useMemo)(()=>"webgl"===y?new u.XW:new c.K,[y]);w.ticker.set({minActiveDuration:i.minActiveDuration});let{ref:v}=(0,a.IZ)({debounce:!0},function*(e,t){yield w.initialize(e.firstElementChild,document.body),t.triggerRender(),Object.assign(window,{three:w,THREE:s})},[]);(0,a.C7)(function*(){if(yield p.Q.on("THREE",e=>{e.setPayload(w)}),d){var e,t;let i="object"==typeof d?d:{},n=new o.n(i).initialize(v.current);Object.assign(n.inputConfig,i.inputConfig),n.parsePanInputs(null!=(e=i.panInput)?e:""),n.parseOrbitInputs(null!=(t=i.orbitInput)?t:""),i.fixed||n.start(),yield n.destroy,yield p.Q.on("VERTIGO_CONTROLS",e=>{e.setPayload(n)}),yield w.ticker.onTick({order:-1},e=>{n.update(w.camera,w.aspect,e.deltaTime)})}},[d]);let b={position:"absolute",inset:0};return(0,n.jsx)("div",{ref:v,className:h,style:b,children:(0,n.jsxs)(f.Provider,{value:w,children:[(0,n.jsx)("div",{style:b}),(0,n.jsx)("div",{style:b,className:"thru",children:w.initialized&&l})]})})}function x(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,l.D)()&&(0,n.jsx)(b,{...t[0]})}i(95736)}}]);