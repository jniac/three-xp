(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1267],{70749:function(e,t,n){"use strict";n.d(t,{Client:function(){return j}});var o=n(32617),i=n(83119),r=n(87062),s=n(47365),l=n(15721),a=n(9258),c=n(78780),u=n(29368),f=n(5693),d=n(92948),y=n(88780),h=n(80536),p=n(30636),x=n(97219),w=n(12042),m=n(67896),v=n(28104),g=n(6246);function k(e,t,n,o,i){let r=o-e,s=i-t,l=Math.sqrt(r*r+s*s);return[e+r/l*n,t+s/l*n]}class P extends y.Group{constructor(...e){super(...e),this.parts=(()=>{(0,c.cY)(new y.Mesh(new y.TorusKnotGeometry(10,.4,512,64),new w.P),this),(0,c.cY)(new p.K,{parent:this,rotationX:"90deg"});let e=(0,c.cY)(new m.w,this),t=new y.Vector3,n=new y.Vector3;{let e=new h.z(16);for(let{x:o,y:i,z:r}of(0,v.loop3)(16,16,16)){t.set(o,i,r);let[s,l]=k(8,8,16/3,o,r);n.set(s,16/6,l);let a=t.distanceTo(n)<16/6;e.getVoxelState(o,i,r).setUint8(0,a?1:0)}(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new h.z(16);for(let{x:o,y:i,z:r}of(0,v.loop3)(16,16,16)){t.set(o,i,r);let[s,l]=k(8,8,8,o,r);n.set(s,4,l);let a=4>t.distanceTo(n);e.getVoxelState(o,i,r).setUint8(0,a?1:0)}(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new h.z(16);for(let{x:n,y:o,z:i}of(0,v.loop3)(16,16,16)){let r=15>t.set(n,o,i).length();e.getVoxelState(n,o,i).setUint8(0,r?1:0)}(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#55ff96"})),{parent:this,x:-32})}{let e=new h.z(new y.Vector3(12,24,4),1);for(let{x:t,y:n,z:o}of(0,v.loop3)(e.size)){let i=.5>Math.random();e.getVoxelState(t,n,o).setUint8(0,i?1:0)}(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}{let e=new h.z(16);for(let{x:t,y:n,z:o}of(0,v.loop3)(16,16,16)){let i=(0===t||0===n||0===o||15===t||15===n||15===o)&&g.T.chance(.66);e.getVoxelState(t,n,o).setUint8(0,i?1:0)}console.log(e.computeBounds()),(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#9900ff"})),{parent:this,x:-16,z:-32})}{let e=new h.z(16),t=new y.Vector3;for(let{x:n,y:o,z:i}of(0,v.loop3)(16,16,16)){t.set(n-8,o-8,i-8);let r=t.lengthSq()-16;g.T.chance(1-.05*r)&&e.getVoxelState(n,o,i).setUint8(0,1)}let n=(0,c.cY)(new y.Mesh((0,h.eO)(e.voxelFaces()),new w.P({color:"#00ddff"})),{parent:this,x:-16,z:0});(0,c.cY)(new x.O,{parent:n}).box({box3:e.computeBounds(),asIntBox3:!0}).draw()}return{sky:e}})()}}var z=n(96915),M=n.n(z);function b(){return(0,f.Ky)(function*(e){(0,d.a)({three:e});let t=new l.F({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),u.vB.get("three").set({minActiveDuration:60}),yield(0,u.RC)("three",n=>{let{aspect:o,camera:i}=e;t.update(i,o,n.deltaTime)}),yield(0,s.p)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new r.n(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.GR.PostProcessing})},[]),null}function C(){return(0,f._v)("main",function*(e){(0,c.cY)(new P,e)},[]),null}function j(){return(0,o.jsx)("div",{children:(0,o.jsxs)(f.H7,{children:[(0,o.jsx)(b,{}),(0,o.jsx)(C,{}),(0,o.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,o.jsx)(i.U,{className:M().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},5693:function(e,t,n){"use strict";n.d(t,{H7:function(){return w},Ky:function(){return d},_v:function(){return y},ur:function(){return h}});var o=n(32617),i=n(87200),r=n(88780),s=n(23657),l=n(15721),a=n(9258),c=n(29368),u=n(74707);let f=(0,i.createContext)(null);function d(e,t){let n=(0,i.useContext)(f);return(0,s.sv)(async function*(t,o){if(e){let t=e(n,o);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(o.mounted)}},null!=t?t:"always"),n}function y(e,t,n){let o=(0,i.useMemo)(()=>new r.Group,[]);return o.name=e,d(async function*(e,n){if(e.scene.add(o),yield()=>{o.clear(),o.removeFromParent()},t){let i=t(o,e,n);if(i&&"function"==typeof i.next)do{let{value:e,done:t}=await i.next();if(t)break;yield e}while(n.mounted)}},n),o}function h(e){let{value:t}=e,n=(0,i.useMemo)(()=>"function"==typeof t?new t:t,[t]);return d(async function*(e){if(e.scene.add(n),"initialize"in n){let t=n.initialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{if(n.removeFromParent(),"destroy"in n){var e;null===(e=n.destroy)||void 0===e||e.call(n)}}},[n]),null}let p={className:"",assetsPath:"/",vertigoControls:!1};function x(e){let{children:t,className:n,assetsPath:r,vertigoControls:u}={...p,...e},d=(0,i.useMemo)(()=>new a.Vu,[]);d.loader.setPath(r);let{ref:y}=(0,s.Nv)({debounce:!0},function*(e,t){yield d.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:d})},[]);(0,s.sv)(function*(){if(u){let e=new l.F("object"==typeof u?u:{}).initialize(y.current).start();yield e.destroy,yield(0,c.RC)("three",t=>{e.update(d.camera,d.aspect,t.deltaTime)})}},[u]);let h={position:"absolute",inset:0};return(0,o.jsx)("div",{ref:y,className:n,style:h,children:(0,o.jsxs)(f.Provider,{value:d,children:[(0,o.jsx)("div",{style:h}),(0,o.jsx)("div",{style:h,className:"thru",children:d.initialized&&t})]})})}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.O)()&&(0,o.jsx)(x,{...t[0]})}},74707:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var o=n(87200);function i(){let[e,t]=(0,o.useState)(!1);return(0,o.useLayoutEffect)(()=>{t(!0)},[]),e}},47365:function(e,t,n){"use strict";function o(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{p:function(){return s}});let i={preventDefault:!1,strictTarget:void 0},r={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:""};function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,l,a]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:c}={...i,...l},u=e=>{var t;if((null!==(t=l.strictTarget)&&void 0!==t?!!t:s===document.body)&&e.target!==s)return;let{ctrlKey:n,altKey:i,shiftKey:u,metaKey:f}=e,d={event:e,modifiers:{ctrl:n,alt:i,shift:u,meta:f}};for(let t=0,s=a.length;t<s;t++){let[s,l]=a[t],{key:y,keyCaseInsensitive:h,code:p,noModifiers:x,modifiers:w}=function(e){let t="string"==typeof e?{...r,key:e}:{...r,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(s);Object.values({key:o(h?e.key.toLowerCase():e.key,y),code:o(e.code,p),noModifiers:!x||!1===n&&!1===i&&!1===u&&!1===f,modifiers:function(e,t){let{ctrlKey:n,altKey:o,shiftKey:i,metaKey:r}=e;if("function"==typeof t)return t({ctrl:n,alt:o,shift:i,meta:r});let{ctrl:s=!1,alt:l=!1,shift:a=!1,meta:c=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return s===n&&l===o&&a===i&&c===r}(e,w)}).every(Boolean)&&(c&&e.preventDefault(),l(d))}};return s.addEventListener("keydown",u,{passive:!1}),{destroy:()=>{s.removeEventListener("keydown",u)}}}},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var o=n(88780),i=n(32219);let r={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class s extends o.LineSegments{set(e){let{color:t,opacity:n,size:s,step:l,frame:a}={...r,...e},c=(0,i.iK)(s),u=(0,i.iK)(null!=l?l:c),f=[],d=(e,t)=>f.push(new o.Vector3(e,t,0));a&&(d(-c.x/2,+c.y/2),d(+c.x/2,+c.y/2),d(+c.x/2,+c.y/2),d(+c.x/2,-c.y/2),d(+c.x/2,-c.y/2),d(-c.x/2,-c.y/2),d(-c.x/2,-c.y/2),d(-c.x/2,+c.y/2));let y=Math.ceil(-c.x/2/u.x)*u.x;y===-c.x/2&&(y+=u.x);do d(y,-c.y/2),d(y,+c.y/2),y+=u.x;while(y<c.x/2);let h=Math.ceil(-c.y/2/u.y)*u.y;h===-c.y/2&&(h+=u.y);do d(-c.x/2,h),d(+c.x/2,h),h+=u.y;while(h<c.y/2);return this.geometry.setFromPoints(f),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:r)}}},96915:function(e){e.exports={Markdown:"md_Markdown__RP0EZ"}}}]);