(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6570],{1295:e=>{e.exports={Client:"client_Client__xAYKJ",Background:"client_Background__G4qOA",ThreeDiv:"client_ThreeDiv__atxk6",Counter:"client_Counter__ME1MG"}},14274:(e,t,i)=>{"use strict";i.d(t,{K:()=>o});var n=i(17953),r=i(81074),s=i(49797),l=i(57165),a=i(37027);class o extends a.${setSize(e){let{width:t,height:i,pixelRatio:n}={...this,...e};if(t===this.width&&i===this.height&&n===this.pixelRatio)return this;this.width=t,this.height=i,this.pixelRatio=n;let{renderer:r,perspectiveCamera:s,orthographicCamera:l}=this;r.setSize(t,i),r.setPixelRatio(n);let a=t/i;return s.aspect=a,s.updateProjectionMatrix(),l.left=-a,l.right=a,l.top=1,l.bottom=-1,l.updateProjectionMatrix(),this}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let i=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=i,new ResizeObserver(()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(e);let{domElement:n}=this.renderer;return n.style.display="block",n.style.width="100%",n.style.height="100%",e.appendChild(n),this.setSize({width:n.clientWidth,height:n.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick(()=>{this.renderFrame()}).destroy,this.internal.cancelRequestActivation=(0,l.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,t,this.camera,this.ticker),this.domContainer=e,this.domElement=n,this}renderFrame(){let{scene:e,postProcessing:t,pointer:i}=this;i.updateStart(e),e.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&t.renderAsync(),i.updateEnd()}constructor(){super(a.s.WebGPU),this.renderer=new r.uV1({antialias:!0}),this.perspectiveCamera=new s.ubm,this.orthographicCamera=new s.qUd,this.camera=this.perspectiveCamera,this.postProcessing=new r.io7(this.renderer),this.scenePass=(0,n.IXH)(this.scene,this.perspectiveCamera),this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var e,t,i,n,r,s,l;if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(e=this.internal.observer)||e.disconnect(),null==(t=(i=this.internal).cancelTick)||t.call(i),null==(n=(r=this.internal).cancelRequestActivation)||n.call(r),null==(s=(l=this.internal).cancelPointer)||s.call(l)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},15940:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});var n=i(29443);function r(e,t){(0,n._)(e,t),t.add(e)}},28535:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var n=i(75687),r=i(44138);function s(e,t){var i=(0,r._)(e,t,"get");return(0,n._)(e,i)}},29443:(e,t,i)=>{"use strict";function n(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{_:()=>n})},29968:(e,t,i)=>{"use strict";i.d(t,{q:()=>h,uB:()=>f,yk:()=>u});var n=i(70691),r=i(67203),s=i(7587),l=i(37821),a=i(48083),o=i(14274),c=i(36508);let d=(0,r.createContext)(null);function u(e,t){let i=(0,r.useContext)(d);return(0,s.C7)(async function*(t,n){if(e){let t=e(i,n);if(t&&"function"==typeof t.next)do{let{value:e,done:i}=await t.next();if(i)break;yield e}while(n.mounted)}},null!=t?t:"always"),i}function h(e){let{value:t}=e;return u(async function*(e){let i="function"==typeof t?new t:t;if(e.scene.add(i),"onInitialize"in i){let t=i.onInitialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:i}=await t.next();if(i)break;yield e}}yield()=>{if(i.removeFromParent(),"onDestroy"in i){var e;null==(e=i.onDestroy)||e.call(i)}}},"always"),null}let p={className:"",assetsPath:"/",vertigoControls:!1};function m(e){let{children:t,className:i,vertigoControls:l}={...p,...e},u=(0,r.useMemo)(()=>new o.K,[]),{ref:h}=(0,s.IZ)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:u})},[]);(0,s.C7)(function*(){if(l){let e=new a.n("object"==typeof l?l:{}).initialize(h.current).start();yield e.destroy,yield(0,c.xy)("three",t=>{e.update(u.camera,u.aspect,t.deltaTime)})}},[l]);let m={position:"absolute",inset:0};return(0,n.jsx)("div",{ref:h,className:i,style:m,children:(0,n.jsxs)(d.Provider,{value:u,children:[(0,n.jsx)("div",{style:m}),(0,n.jsx)("div",{style:m,className:"thru",children:u.initialized&&t})]})})}function f(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,l.D)()&&(0,n.jsx)(m,{...t[0]})}},37821:(e,t,i)=>{"use strict";i.d(t,{D:()=>r});var n=i(67203);function r(){let[e,t]=(0,n.useState)(!1);return(0,n.useLayoutEffect)(()=>{t(!0)},[]),e}},44138:(e,t,i)=>{"use strict";function n(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{_:()=>n})},51571:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Client:()=>w});var n=i(70691),r=i(67203);function s(e){let t=e.match(/\s*([0-9.]+)\s*(\/\s*[0-9.]+)?\s*([a-zA-Z]*)\s*?/);if(null===t)throw Error("Invalid number");let[i,n,r,s=""]=t;return[Number.parseFloat(n)/(r?Number.parseFloat(r.slice(1)):1),s]}let l={height:"3/2em",aspect:1.6,strokeWidth:"1px",padding:".3em",active:!1,circleActiveFill:"currentColor"},a=(0,r.forwardRef)(function(e,t){let{height:i,strokeWidth:r,aspect:a,padding:o,active:c,circleActiveFill:d,...u}={...l,...e},[h,p]=s(i),m="".concat(h).concat(p),[f,x]=s(r),v=f.toString()+x,y=(h/2).toString()+p,g=(h*a).toString()+p,w=(f/2).toString()+x;return(0,n.jsxs)("svg",{ref:t,width:g,height:m,stroke:"currentColor",strokeWidth:r,fill:"none",...u,children:[(0,n.jsx)("rect",{x:w,y:w,rx:y,width:"calc(".concat(g," - ").concat(v,")"),height:"calc(".concat(m," - ").concat(v,")")}),(0,n.jsx)("circle",{cx:c?"calc(".concat(g," - ").concat(y,")"):y,cy:y,r:"calc(".concat(y," - ").concat(w," - ").concat(o,")"),fill:c?"currentColor":"transparent",style:{transition:"0.2s"}})]})});var o=i(7587),c=i(97540),d=i(29968),u=i(17953),h=i(49797),p=i(81074),m=i(36508);class f extends h.YJl{static current(){return this.instances.at(-1)}constructor(){super(),this.parts=(()=>{let e=(0,u.PiW)((0,u.fVC)(0));e.onObjectUpdate(()=>m.Rv.get("three").time);let t=(0,u.PiW)((0,u.fVC)(0)),i=(0,u.Fn)(i=>{let{storageTexture:n}=i,r=u.cGD.modInt(512),s=u.cGD.div(512),l=(0,u.aqi)(r,s),a=(0,u.fVC)(r).div(50),o=(0,u.fVC)(s).div(50);(0,u.If)(t.equal(0),()=>{let t=a.sin(),i=o.sin(),r=a.add(o).sin(),s=a.mul(a).add(o.mul(o),e.mul(1.2).sin()).sqrt().add(5,e.sin()).sin(),c=t.add(i,r,s),d=e.mul(2).add(a.div(12).add(o.div(32))).sin().remap(-1,1,0,1),h=c.add(Math.PI).sin(),p=c.add(Math.PI).sub(.5).sin(),m=(0,u.Lrr)((0,u.eR5)(d,h,p),e.sin().remap(-1,1,-1,1));(0,u.TJz)(n,l,(0,u.lnd)(m,1)).toWriteOnly()}).Else(()=>{let t=(0,u.FnD)((0,u.eR5)(a,o,e)),i=(0,u.C2u)((0,u.eR5)(a,o,e).mul(.2)).remap(-.65,.65,0,1),r=(0,u.jhA)((0,u.yWT)("red"),(0,u.yWT)("blue"),(0,u.Lrr)(i,5));r.mixAssign((0,u.yWT)("black"),t.oneMinus()),(0,u.TJz)(n,l,(0,u.lnd)(r,1)).toWriteOnly()})}),n=new h.eaF(new h.bdM,new p.P8l({side:h.$EB,color:"#ffcc00"}));this.add(n);let r=new p.RiJ(512,512),s=i({storageTexture:r}).compute(262144);return n.material.colorNode=(0,u.wHr)(r),{plane:n,computeNode:s,uPhase:t}})(),this.onDestroy=()=>{f.instances.splice(f.instances.indexOf(this),1)},this.onTick=(e,t)=>{t.renderer.computeAsync(this.parts.computeNode)},f.instances.push(this)}}f.instances=[];var x=i(1295),v=i.n(x);function y(){return(0,n.jsx)("div",{className:"".concat(v().Background," layer flex flex-col text-center items-center justify-center"),children:(0,n.jsx)("div",{style:{margin:"-100px",inset:0},children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad dicta unde totam! Iusto rerum tempore provident dolores voluptas sed neque quisquam corrupti impedit quam eum animi sint, eaque non quae?"})})}function g(){let[e,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(NaN),l=(0,d.yk)(),{ref:u}=(0,o.C7)(function*(t){let n=t.querySelector("#three-div"),r=n.querySelector("span + span"),s=f.current();yield l.ticker.onTick({order:-1},a=>{(0,c.EF)(t,n,l.camera,s),r.innerHTML=[...isNaN(i)?'0.000"':"".concat((a.time-i).toFixed(3),'"')].map(e=>"<span>".concat(e,"</span>")).join(""),e&&(s.rotation.y+=2*a.deltaTime,s.rotation.x+=+a.deltaTime)})},[e,i]);return(0,n.jsxs)("div",{ref:u,className:"layer thru p-8 flex flex-col items-start",children:[(0,n.jsx)(d.q,{value:f}),(0,n.jsxs)("div",{className:"p-4 bg-white text-[#bd71ff] flex flex-col gap-2",children:[(0,n.jsx)("h1",{className:"text-4xl mb-2",children:"Webgpu Demo"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"✅ Transparent background"}),(0,n.jsx)("li",{children:"✅ TSL"}),(0,n.jsx)("li",{children:"✅ Basic context (resize, tick, render)"}),(0,n.jsx)("li",{children:"✅ Vertigo controls"}),(0,n.jsx)("li",{children:"✅ CSS 3D"})]}),(0,n.jsxs)("button",{className:"flex gap-2",onClick:()=>t(!e),children:["Auto-Rotate",(0,n.jsx)(a,{active:e})]}),(0,n.jsx)("button",{className:"border border-[#bd71ff]",onClick:()=>{var e;return null==(e=f.current())?void 0:e.rotation.set(0,0,0)},children:"Reset Rotation"})]}),(0,n.jsxs)("div",{id:"three-div",className:v().ThreeDiv,onPointerEnter:()=>{s(m.Rv.get("three").time),f.current().parts.uPhase.value=1},onPointerLeave:()=>{s(NaN),f.current().parts.uPhase.value=0},children:[(0,n.jsx)("span",{style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"100",fontSize:"2em",lineHeight:".7em",textTransform:"uppercase"},children:"3D div"}),(0,n.jsxs)("span",{className:v().Counter,style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"300",fontSize:"1em",lineHeight:".7em",textTransform:"uppercase"},children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("span",{children:"."}),(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("span",{children:"0"})]})]})]})}function w(){return(0,n.jsxs)("div",{className:"".concat(v().Client," layer bg-[#bd71ff]"),children:[(0,n.jsx)(y,{}),(0,n.jsx)("div",{className:"layer",children:(0,n.jsx)(d.uB,{vertigoControls:{size:2},children:(0,n.jsx)(g,{})})})]})}},57368:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});var n=i(44138);function r(e,t,i){var r=(0,n._)(e,t,"set");if(r.set)r.set.call(e,i);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=i}return i}},66066:(e,t,i)=>{"use strict";function n(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}i.d(t,{_:()=>n})},75687:(e,t,i)=>{"use strict";function n(e,t){return t.get?t.get.call(e):t.value}i.d(t,{_:()=>n})},76999:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});var n=i(29443);function r(e,t,i){(0,n._)(e,t),t.set(e,i)}},97540:(e,t,i)=>{"use strict";i.d(t,{AF:()=>p,EF:()=>f,hD:()=>h,s5:()=>l,wZ:()=>m});var n=i(49797),r=i(79285),s=i(61567);function l(e,t){if(0!==e.projectionMatrix.elements[15])return"none";{let i=e.projectionMatrix.elements[5],n=t.clientHeight*i/2;return"".concat(n,"px")}}let a=new n.kn4,o=new n.kn4,c=new n.Pq0,d=new n.Pq0;function u(e,t){if((0,s.Th)(e))return t.setFromMatrixPosition(e.matrixWorld);if((0,s.MR)(e))return t.setFromMatrixPosition(e);if((0,s.Zz)(e))return t.copy(e);throw Error("Invalid object type.")}function h(e,t){return c.set(e.matrixWorld.elements[8],e.matrixWorld.elements[9],e.matrixWorld.elements[10]),u(t,d),c.dot(d)>0}function p(e,t){return c.set(e.matrixWorld.elements[12],e.matrixWorld.elements[13],e.matrixWorld.elements[14]),u(t,d),Math.round(1e4/(1+c.distanceTo(d))).toString()}function m(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=e.projectionMatrix.elements[5],p=i.clientHeight*h/2,m=p/n,f=function(e,t){if((0,s.Th)(e))return e.matrixWorld;if((0,s.MR)(e))return e;if((0,s.Zz)(e))return t.makeTranslation(e.x,e.y,e.z);throw Error("Invalid object type.")}(t,o);a.multiplyMatrices(e.matrixWorldInverse,f);let x=a.elements;x[4]*=-1,x[5]*=-1,x[6]*=-1,x[8]*=-1,x[9]*=-1,x[10]*=-1;let v=x[14];return x[14]+=u?-1:1,x[0]*=m,x[1]*=m,x[2]*=m,x[4]*=m,x[5]*=m,x[6]*=m,x[8]*=m,x[9]*=m,x[10]*=m,x[12]*=p,x[13]*=p,x[14]*=p,x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,u&&(x[2]*=-1,x[6]*=-1,x[10]*=-1,x[14]*=-1),l>0&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.elements;c.set(i[0],i[1],i[2]);let n=c.length();i[0]=(0,r.lerp)(i[0],n,t),i[1]=(0,r.lerp)(i[1],0,t),i[2]=(0,r.lerp)(i[2],0,t),c.set(i[4],i[5],i[6]);let s=c.length();i[4]=(0,r.lerp)(i[4],0,t),i[5]=(0,r.lerp)(i[5],s,t),i[6]=(0,r.lerp)(i[6],0,t),c.set(i[8],i[9],i[10]);let l=c.length();i[8]=(0,r.lerp)(i[8],0,t),i[9]=(0,r.lerp)(i[9],0,t),i[10]=(0,r.lerp)(i[10],l,t)}(a,l),d>0&&function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.elements;c.set(n[0],n[1],n[2]);let s=(0,r.lerp)(1,t/c.length(),i);n[0]*=s,n[1]*=s,n[2]*=s,c.set(n[4],n[5],n[6]);let l=(0,r.lerp)(1,t/c.length(),i);n[4]*=l,n[5]*=l,n[6]*=l,c.set(n[8],n[9],n[10]);let a=(0,r.lerp)(1,t/c.length(),i);n[8]*=a,n[9]*=a,n[10]*=a}(a,u?v:-v,d),"translate(-50%, -50%) matrix3d(".concat(a.elements.join(","),")")}function f(e,t,i,n){let{pixelPerUnit:r=100,resetRotation:s=0,resetScale:a=0,leftHanded:o=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.style.perspective=l(i,e),t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform=m(i,n,e,r,s,a,o),t.style.zIndex=p(i,n)}},99187:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});var n=i(75687);function r(e,t,i){if(e!==t)throw TypeError("Private static access of wrong provenance");if(void 0===i)throw TypeError("attempted to get private static field before its declaration");return(0,n._)(e,i)}}}]);