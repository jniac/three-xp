(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6352],{22936:(e,t,r)=>{"use strict";var i=r(28363);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,s,n){if(n!==i){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return r.PropTypes=r,r}},25432:(e,t,r)=>{"use strict";r.d(t,{F:()=>h});var i=r(49797),a=r(39571),s=r(2573),n=r(14192),o=r(97679),l=r(59411);class h extends a.o{constructor(e,t,r=512,l=512,h,d,u){super(),this.width=r,this.height=l,this.clear=!0,this.camera=t,this.scene=e,this.output=0,this._renderGBuffer=!0,this._visibilityCache=new Map,this.blendIntensity=1,this.pdRings=2,this.pdRadiusExponent=2,this.pdSamples=16,this.gtaoNoiseTexture=(0,s.QB)(),this.pdNoiseTexture=this._generateNoise(),this.gtaoRenderTarget=new i.nWS(this.width,this.height,{type:i.ix0}),this.pdRenderTarget=this.gtaoRenderTarget.clone(),this.gtaoMaterial=new i.BKk({defines:Object.assign({},s.dB.defines),uniforms:i.LlO.clone(s.dB.uniforms),vertexShader:s.dB.vertexShader,fragmentShader:s.dB.fragmentShader,blending:i.XIg,depthTest:!1,depthWrite:!1}),this.gtaoMaterial.defines.PERSPECTIVE_CAMERA=+!!this.camera.isPerspectiveCamera,this.gtaoMaterial.uniforms.tNoise.value=this.gtaoNoiseTexture,this.gtaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.normalMaterial=new i.qBx,this.normalMaterial.blending=i.XIg,this.pdMaterial=new i.BKk({defines:Object.assign({},n.I.defines),uniforms:i.LlO.clone(n.I.uniforms),vertexShader:n.I.vertexShader,fragmentShader:n.I.fragmentShader,depthTest:!1,depthWrite:!1}),this.pdMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.pdMaterial.uniforms.tNoise.value=this.pdNoiseTexture,this.pdMaterial.uniforms.resolution.value.set(this.width,this.height),this.pdMaterial.uniforms.lumaPhi.value=10,this.pdMaterial.uniforms.depthPhi.value=2,this.pdMaterial.uniforms.normalPhi.value=3,this.pdMaterial.uniforms.radius.value=8,this.depthRenderMaterial=new i.BKk({defines:Object.assign({},s.EC.defines),uniforms:i.LlO.clone(s.EC.uniforms),vertexShader:s.EC.vertexShader,fragmentShader:s.EC.fragmentShader,blending:i.XIg}),this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new i.BKk({uniforms:i.LlO.clone(o.Z.uniforms),vertexShader:o.Z.vertexShader,fragmentShader:o.Z.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:i.wn6,blendDst:i.ojh,blendEquation:i.gO9,blendSrcAlpha:i.hdd,blendDstAlpha:i.ojh,blendEquationAlpha:i.gO9}),this.blendMaterial=new i.BKk({uniforms:i.LlO.clone(s.eQ.uniforms),vertexShader:s.eQ.vertexShader,fragmentShader:s.eQ.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:i.bCz,blendSrc:i.wn6,blendDst:i.ojh,blendEquation:i.gO9,blendSrcAlpha:i.hdd,blendDstAlpha:i.ojh,blendEquationAlpha:i.gO9}),this._fsQuad=new a.F(null),this._originalClearColor=new i.Q1f,this.setGBuffer(h?h.depthTexture:void 0,h?h.normalTexture:void 0),void 0!==d&&this.updateGtaoMaterial(d),void 0!==u&&this.updatePdMaterial(u)}setSize(e,t){this.width=e,this.height=t,this.gtaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.pdRenderTarget.setSize(e,t),this.gtaoMaterial.uniforms.resolution.value.set(e,t),this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.pdMaterial.uniforms.resolution.value.set(e,t),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse)}dispose(){this.gtaoNoiseTexture.dispose(),this.pdNoiseTexture.dispose(),this.normalRenderTarget.dispose(),this.gtaoRenderTarget.dispose(),this.pdRenderTarget.dispose(),this.normalMaterial.dispose(),this.pdMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this._fsQuad.dispose()}get gtaoMap(){return this.pdRenderTarget.texture}setGBuffer(e,t){void 0!==e?(this.depthTexture=e,this.normalTexture=t,this._renderGBuffer=!1):(this.depthTexture=new i.VCu,this.depthTexture.format=i.dcC,this.depthTexture.type=i.V3x,this.normalRenderTarget=new i.nWS(this.width,this.height,{minFilter:i.hxR,magFilter:i.hxR,type:i.ix0,depthTexture:this.depthTexture}),this.normalTexture=this.normalRenderTarget.texture,this._renderGBuffer=!0);let r=+!!this.normalTexture,a=this.depthTexture===this.normalTexture?"w":"x";this.gtaoMaterial.defines.NORMAL_VECTOR_TYPE=r,this.gtaoMaterial.defines.DEPTH_SWIZZLING=a,this.gtaoMaterial.uniforms.tNormal.value=this.normalTexture,this.gtaoMaterial.uniforms.tDepth.value=this.depthTexture,this.pdMaterial.defines.NORMAL_VECTOR_TYPE=r,this.pdMaterial.defines.DEPTH_SWIZZLING=a,this.pdMaterial.uniforms.tNormal.value=this.normalTexture,this.pdMaterial.uniforms.tDepth.value=this.depthTexture,this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture}setSceneClipBox(e){e?(this.gtaoMaterial.needsUpdate=1!==this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=1,this.gtaoMaterial.uniforms.sceneBoxMin.value.copy(e.min),this.gtaoMaterial.uniforms.sceneBoxMax.value.copy(e.max)):(this.gtaoMaterial.needsUpdate=0===this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=0)}updateGtaoMaterial(e){void 0!==e.radius&&(this.gtaoMaterial.uniforms.radius.value=e.radius),void 0!==e.distanceExponent&&(this.gtaoMaterial.uniforms.distanceExponent.value=e.distanceExponent),void 0!==e.thickness&&(this.gtaoMaterial.uniforms.thickness.value=e.thickness),void 0!==e.distanceFallOff&&(this.gtaoMaterial.uniforms.distanceFallOff.value=e.distanceFallOff,this.gtaoMaterial.needsUpdate=!0),void 0!==e.scale&&(this.gtaoMaterial.uniforms.scale.value=e.scale),void 0!==e.samples&&e.samples!==this.gtaoMaterial.defines.SAMPLES&&(this.gtaoMaterial.defines.SAMPLES=e.samples,this.gtaoMaterial.needsUpdate=!0),void 0!==e.screenSpaceRadius&&+!!e.screenSpaceRadius!==this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS&&(this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS=+!!e.screenSpaceRadius,this.gtaoMaterial.needsUpdate=!0)}updatePdMaterial(e){let t=!1;void 0!==e.lumaPhi&&(this.pdMaterial.uniforms.lumaPhi.value=e.lumaPhi),void 0!==e.depthPhi&&(this.pdMaterial.uniforms.depthPhi.value=e.depthPhi),void 0!==e.normalPhi&&(this.pdMaterial.uniforms.normalPhi.value=e.normalPhi),void 0!==e.radius&&e.radius!==this.radius&&(this.pdMaterial.uniforms.radius.value=e.radius),void 0!==e.radiusExponent&&e.radiusExponent!==this.pdRadiusExponent&&(this.pdRadiusExponent=e.radiusExponent,t=!0),void 0!==e.rings&&e.rings!==this.pdRings&&(this.pdRings=e.rings,t=!0),void 0!==e.samples&&e.samples!==this.pdSamples&&(this.pdSamples=e.samples,t=!0),t&&(this.pdMaterial.defines.SAMPLES=this.pdSamples,this.pdMaterial.defines.SAMPLE_VECTORS=(0,n.A)(this.pdSamples,this.pdRings,this.pdRadiusExponent),this.pdMaterial.needsUpdate=!0)}render(e,t,r){switch(this._renderGBuffer&&(this._overrideVisibility(),this._renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this._restoreVisibility()),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.gtaoMaterial.uniforms.cameraWorldMatrix.value.copy(this.camera.matrixWorld),this._renderPass(e,this.gtaoMaterial,this.gtaoRenderTarget,0xffffff,1),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this._renderPass(e,this.pdMaterial,this.pdRenderTarget,0xffffff,1),this.output){case h.OUTPUT.Off:break;case h.OUTPUT.Diffuse:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=i.XIg,this._renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.AO:this.copyMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.copyMaterial.blending=i.XIg,this._renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Denoise:this.copyMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.copyMaterial.blending=i.XIg,this._renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Depth:this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this._renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=i.XIg,this._renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case h.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=i.XIg,this._renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blendMaterial.uniforms.intensity.value=this.blendIntensity,this.blendMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this._renderPass(e,this.blendMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.GTAOPass: Unknown output type.")}}_renderPass(e,t,r,i,a){e.getClearColor(this._originalClearColor);let s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,null!=i&&(e.setClearColor(i),e.setClearAlpha(a||0),e.clear()),this._fsQuad.material=t,this._fsQuad.render(e),e.autoClear=n,e.setClearColor(this._originalClearColor),e.setClearAlpha(s)}_renderOverride(e,t,r,i,a){e.getClearColor(this._originalClearColor);let s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(r),e.autoClear=!1,i=t.clearColor||i,a=t.clearAlpha||a,null!=i&&(e.setClearColor(i),e.setClearAlpha(a||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=n,e.setClearColor(this._originalClearColor),e.setClearAlpha(s)}_overrideVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)})}_restoreVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){let r=t.get(e);e.visible=r}),t.clear()}_generateNoise(e=64){let t=new l.h,r=new Uint8Array(e*e*4);for(let i=0;i<e;i++)for(let a=0;a<e;a++){let s=i,n=a;r[(i*e+a)*4]=(.5*t.noise(s,n)+.5)*255,r[(i*e+a)*4+1]=(.5*t.noise(s+e,n)+.5)*255,r[(i*e+a)*4+2]=(.5*t.noise(s,n+e)+.5)*255,r[(i*e+a)*4+3]=(.5*t.noise(s+e,n+e)+.5)*255}let a=new i.GYF(r,e,e,i.GWd,i.OUM);return a.wrapS=i.GJx,a.wrapT=i.GJx,a.needsUpdate=!0,a}}h.OUTPUT={Off:-1,Default:0,Diffuse:1,Depth:2,Normal:3,AO:4,Denoise:5}},28363:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},58542:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var i=r(49797);function a(e,t,r){let i=r.length-e-1;if(t>=r[i])return i-1;if(t<=r[e])return e;let a=e,s=i,n=Math.floor((a+s)/2);for(;t<r[n]||t>=r[n+1];)t<r[n]?s=n:a=n,n=Math.floor((a+s)/2);return n}class s extends i.Ipv{constructor(e,t,r,a,s){super();let n=t?t.length-1:0,o=r?r.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=a||0,this.endKnot=s||n;for(let e=0;e<o;++e){let t=r[e];this.controlPoints[e]=new i.IUQ(t.x,t.y,t.z,t.w)}}getPoint(e,t=new i.Pq0){let r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=function(e,t,r,s){let n=a(e,s,t),o=function(e,t,r,i){let a=[],s=[],n=[];a[0]=1;for(let o=1;o<=r;++o){s[o]=t-i[e+1-o],n[o]=i[e+o]-t;let r=0;for(let e=0;e<o;++e){let t=n[e+1],i=s[o-e],l=a[e]/(t+i);a[e]=r+t*l,r=i*l}a[o]=r}return a}(n,s,e,t),l=new i.IUQ(0,0,0,0);for(let t=0;t<=e;++t){let i=r[n-e+t],a=o[t],s=i.w*a;l.x+=i.x*s,l.y+=i.y*s,l.z+=i.z*s,l.w+=i.w*a}return l}(this.degree,this.knots,this.controlPoints,r);return 1!==s.w&&s.divideScalar(s.w),t.set(s.x,s.y,s.z)}getTangent(e,t=new i.Pq0){var r,s,n;let o=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=(r=this.degree,s=this.knots,n=this.controlPoints,function(e){let t=e.length,r=[],a=[];for(let s=0;s<t;++s){let t=e[s];r[s]=new i.Pq0(t.x,t.y,t.z),a[s]=t.w}let s=[];for(let e=0;e<t;++e){let t=r[e].clone();for(let r=1;r<=e;++r)t.sub(s[e-r].clone().multiplyScalar(function(e,t){let r=1;for(let t=2;t<=e;++t)r*=t;let i=1;for(let e=2;e<=t;++e)i*=e;for(let r=2;r<=e-t;++r)i*=r;return r/i}(e,r)*a[r]));s[e]=t.divideScalar(a[0])}return s}(function(e,t,r,s,n){let o=1<e?n:e,l=[],h=a(e,s,t),d=function(e,t,r,i,a){let s=[];for(let e=0;e<=r;++e)s[e]=0;let n=[];for(let e=0;e<=i;++e)n[e]=s.slice(0);let o=[];for(let e=0;e<=r;++e)o[e]=s.slice(0);o[0][0]=1;let l=s.slice(0),h=s.slice(0);for(let i=1;i<=r;++i){l[i]=t-a[e+1-i],h[i]=a[e+i]-t;let r=0;for(let e=0;e<i;++e){let t=h[e+1],a=l[i-e];o[i][e]=t+a;let s=o[e][i-1]/o[i][e];o[e][i]=r+t*s,r=a*s}o[i][i]=r}for(let e=0;e<=r;++e)n[0][e]=o[e][r];for(let e=0;e<=r;++e){let t=0,a=1,l=[];for(let e=0;e<=r;++e)l[e]=s.slice(0);l[0][0]=1;for(let s=1;s<=i;++s){let i=0,h=e-s,d=r-s;e>=s&&(l[a][0]=l[t][0]/o[d+1][h],i=l[a][0]*o[h][d]);let u=h>=-1?1:-h,p=e-1<=d?s-1:r-e;for(let e=u;e<=p;++e)l[a][e]=(l[t][e]-l[t][e-1])/o[d+1][h+e],i+=l[a][e]*o[h+e][d];e<=d&&(l[a][s]=-l[t][s-1]/o[d+1][e],i+=l[a][s]*o[e][d]),n[s][e]=i;let c=t;t=a,a=c}}let d=r;for(let e=1;e<=i;++e){for(let t=0;t<=r;++t)n[e][t]*=d;d*=r-e}return n}(h,s,e,o,t),u=[];for(let e=0;e<r.length;++e){let t=r[e].clone(),i=t.w;t.x*=i,t.y*=i,t.z*=i,u[e]=t}for(let t=0;t<=o;++t){let r=u[h-e].clone().multiplyScalar(d[t][0]);for(let i=1;i<=e;++i)r.add(u[h-e+i].clone().multiplyScalar(d[t][i]));l[t]=r}for(let e=o+1;e<=n+1;++e)l[e]=new i.IUQ(0,0,0);return l}(r,s,n,o,1)));return t.copy(l[1]).normalize(),t}toJSON(){let e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(e=>e.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(e=>new i.IUQ(e[0],e[1],e[2],e[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}},62517:function(e,t,r){var i,a,s;s=function(e,t,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={BlockMath:()=>p,InlineMath:()=>c};for(var s in a)Object.defineProperty(e,s,{enumerable:!0,get:a[s]});function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}t=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(i,s,n):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(t),r=n(r),i=n(i);let l=(e,{displayMode:a})=>{let s=({children:r,errorColor:s,math:n,renderError:o})=>{let l=null!=n?n:r,{html:h,error:d}=(0,t.useMemo)(()=>{try{return{html:i.default.renderToString(l,{displayMode:a,errorColor:s,throwOnError:!!o}),error:void 0}}catch(e){if(e instanceof i.default.ParseError||e instanceof TypeError)return{error:e};throw e}},[l,s,o]);return d?o?o(d):t.default.createElement(e,{html:`${d.message}`}):t.default.createElement(e,{html:h})};return s.propTypes={children:r.default.string,errorColor:r.default.string,math:r.default.string,renderError:r.default.func},s},h={html:r.default.string.isRequired},d=({html:e})=>t.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});d.propTypes=h;let u=({html:e})=>t.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});u.propTypes=h;let p=l(d,{displayMode:!0}),c=l(u,{displayMode:!1})},"object"==typeof e.exports?s(t,r(67203),r(79228),r(62416)):(i=[t,r(67203),r(79228),r(62416)],void 0===(a=s.apply(t,i))||(e.exports=a))},77399:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var i=r(49797);class a extends i.N1A{constructor(e,t){let r=new i.LoY;r.setAttribute("position",new i.qtW([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new i.mrM({fog:!1})),this.light=e,this.color=t,this.type="RectAreaLightHelper";let a=new i.LoY;a.setAttribute("position",new i.qtW([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new i.eaF(a,new i.V9B({side:i.hsX,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);let e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}},79228:(e,t,r)=>{e.exports=r(22936)()},86146:()=>{}}]);