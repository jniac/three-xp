(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3982],{13982:(e,t,n)=>{"use strict";n.d(t,{Client:()=>z});var i=n(70691),s=n(84303),o=n(25432),r=n(95736),l=n(48083),a=n(6697),c=n(87381),d=n(36508),u=n(33855),f=n(28737),h=n(49797),x=n(7717),y=n(25809),p=n(56647),w=n(9723),m=n(82091),v=n(72612),g=n(17099);function j(e,t,n,i,s){let o=i-e,r=s-t,l=Math.sqrt(o*o+r*r);return[e+o/l*n,t+r/l*n]}class P extends h.YJl{constructor(...e){super(...e),this.parts=(()=>{(0,c.mj)(new h.eaF(new h.UPV(10,.4,512,64),new w.Y),this),(0,c.mj)(new y.P,{parent:this,rotationX:"90deg"});let e=(0,c.mj)(new m.N,this),t=new h.Pq0,n=new h.Pq0;{let e=new x.AA(16);for(let{x:i,y:s,z:o}of(0,v.loop3)(16,16,16)){t.set(i,s,o);let[r,l]=j(8,8,16/3,i,o);n.set(r,16/6,l);let a=t.distanceTo(n)<16/6;e.getVoxelState(i,s,o).setUint8(0,+!!a)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new x.AA(16);for(let{x:i,y:s,z:o}of(0,v.loop3)(16,16,16)){t.set(i,s,o);let[r,l]=j(8,8,8,i,o);n.set(r,4,l);let a=4>t.distanceTo(n);e.getVoxelState(i,s,o).setUint8(0,+!!a)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new x.AA(16);for(let{x:n,y:i,z:s}of(0,v.loop3)(16,16,16)){let o=15>t.set(n,i,s).length();e.getVoxelState(n,i,s).setUint8(0,+!!o)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#55ff96"})),{parent:this,x:-32})}{let e=new x.AA(new h.Pq0(12,24,4),1);for(let{x:t,y:n,z:i}of(0,v.loop3)(e.size)){let s=.5>Math.random();e.getVoxelState(t,n,i).setUint8(0,+!!s)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}{let e=new x.AA(16);for(let{x:t,y:n,z:i}of(0,v.loop3)(16,16,16)){let s=(0===t||0===n||0===i||15===t||15===n||15===i)&&g.c.chance(.66);e.getVoxelState(t,n,i).setUint8(0,+!!s)}console.log(e.computeBounds()),(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#9900ff"})),{parent:this,x:-16,z:-32})}{let e=new x.AA(16),t=new h.Pq0;for(let{x:n,y:i,z:s}of(0,v.loop3)(16,16,16)){t.set(n-8,i-8,s-8);let o=t.lengthSq()-16;g.c.chance(1-.05*o)&&e.getVoxelState(n,i,s).setUint8(0,1)}let n=(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#00ddff"})),{parent:this,x:-16,z:0});(0,c.mj)(new p.R,{parent:n}).box({box3:e.computeBounds(),asIntBox3:!0}).draw()}return{sky:e}})()}}var C=n(42824),k=n.n(C);function F(){return(0,u.yk)(function*(e){(0,f.O)({three:e});let t=new l.n({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),d.Rv.get("three").set({minActiveDuration:60}),yield(0,d.xy)("three",n=>{let{aspect:i,camera:s}=e;t.update(s,i,n.deltaTime)}),yield(0,r.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new o.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.O0.PostProcessing})},[]),null}function b(){return(0,u.dB)("main",function*(e){(0,c.mj)(new P,e)},[]),null}function z(){return(0,i.jsx)("div",{children:(0,i.jsxs)(u.uB,{children:[(0,i.jsx)(F,{}),(0,i.jsx)(b,{}),(0,i.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,i.jsx)(s.oz,{className:k().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},14277:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var i=n(67203);function s(){let[e,t]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{t(!0)},[]),e}},25809:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var i=n(49797),s=n(22641);let o={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class r extends i.DXC{set(e){let{color:t,opacity:n,size:r,step:l,frame:a,plane:c}={...o,...e},d=(0,s.wX)(r),u=(0,s.wX)(null!=l?l:d),f=[],h=(e,t)=>f.push(new i.Pq0(e,t,0));a&&(h(-d.x/2,d.y/2),h(d.x/2,d.y/2),h(d.x/2,d.y/2),h(d.x/2,-d.y/2),h(d.x/2,-d.y/2),h(-d.x/2,-d.y/2),h(-d.x/2,-d.y/2),h(-d.x/2,d.y/2));let x=Math.ceil(-d.x/2/u.x)*u.x;x===-d.x/2&&(x+=u.x);do h(x,-d.y/2),h(x,d.y/2),x+=u.x;while(x<d.x/2);let y=Math.ceil(-d.y/2/u.y)*u.y;y===-d.y/2&&(y+=u.y);do h(-d.x/2,y),h(d.x/2,y),y+=u.y;while(y<d.y/2);switch(this.geometry.setFromPoints(f),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:o)}}},28737:(e,t,n)=>{"use strict";n.d(t,{Leak:()=>c,O:()=>a});var i={};n.r(i),n.d(i,{distribute:()=>o.mn,every:()=>o.Si,findMaxBy:()=>o.vj,pairwise:()=>o.Ju,recordBy:()=>o.VY,some:()=>o.zN,split:()=>o.mn,uniqueBy:()=>o.pD});var s=n(30158),o=n(43107),r=n(85795),l=n(17099);function a(e){Object.assign(window,{...s,...r,...i,...e,PRNG:l.c})}function c(e){return a(e),null}},33855:(e,t,n)=>{"use strict";n.d(t,{dB:()=>h,q:()=>x,uB:()=>w,yk:()=>f});var i=n(70691),s=n(67203),o=n(49797),r=n(7587),l=n(48083),a=n(6697),c=n(36508),d=n(14277);let u=(0,s.createContext)(null);function f(e,t){let n=(0,s.useContext)(u);return(0,r.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}function h(e,t,n){let i=(0,s.useMemo)(()=>new o.YJl,[]);return i.name=e,f(async function*(e,n){if(e.scene.add(i),yield()=>{i.clear(),i.removeFromParent()},t){let s=t(i,e,n);if(s&&"function"==typeof s.next)do{let{value:e,done:t}=await s.next();if(t)break;yield e}while(n.mounted)}},n),i}function x(e){let{value:t}=e,n=(0,s.useMemo)(()=>"function"==typeof t?new t:t,[t]);return f(async function*(e){if(e.scene.add(n),"initialize"in n){let t=n.initialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{if(n.removeFromParent(),"destroy"in n){var e;null==(e=n.destroy)||e.call(n)}}},[n]),null}let y={className:"",assetsPath:"/",vertigoControls:!1};function p(e){let{children:t,className:n,assetsPath:o,vertigoControls:d}={...y,...e},f=(0,s.useMemo)(()=>new a.XW,[]);f.loader.setPath(o);let{ref:h}=(0,r.IZ)({debounce:!0},function*(e,t){yield f.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:f})},[]);(0,r.C7)(function*(){if(d){let e=new l.n("object"==typeof d?d:{}).initialize(h.current).start();yield e.destroy,yield(0,c.xy)("three",t=>{e.update(f.camera,f.aspect,t.deltaTime)})}},[d]);let x={position:"absolute",inset:0};return(0,i.jsx)("div",{ref:h,className:n,style:x,children:(0,i.jsxs)(u.Provider,{value:f,children:[(0,i.jsx)("div",{style:x}),(0,i.jsx)("div",{style:x,className:"thru",children:f.initialized&&t})]})})}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.D)()&&(0,i.jsx)(p,{...t[0]})}},42824:e=>{e.exports={Markdown:"md_Markdown__RP0EZ"}},82091:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var i=n(49797);let s=new i.WBB(1,4);class o extends i.eaF{constructor(e){super(s,new i.V9B({color:"#0c529d",...e,side:i.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(e,t,n)=>{let i=(n.near+n.far)/2;this.position.copy(n.position),this.scale.setScalar(i),this.updateMatrix(),this.updateMatrixWorld()}}}}}]);