"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3414],{7147:(t,e,n)=>{n.d(e,{bI:()=>b,eR:()=>P});var r=n(888),i=n(30158);let s=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var a=n(49797),o=n(85795);class l{static from(t,e){if(e instanceof o.Observable){if("number"==typeof e.value)return new l(t,e);throw Error("Observable value must be a number")}let n=typeof e;return"object"===n&&(e.constructor===Object||e instanceof a.nc$)&&"value"in e?new l(t,e):"string"===n?new l(t,{value:new a.Q1f(e)}):new l(t,{value:e})}get value(){return this.target.value}computeDeclaration(){let t=this.name,e=this.target.value,n="";if(e instanceof Float32Array)return"uniform float ".concat(t,"[").concat(e.length,"];");if(Array.isArray(e)&&(n="[".concat(e.length,"]"),e=e[0]),"number"==typeof e)return"uniform float ".concat(t).concat(n,";");if(e.isVector2)return"uniform vec2 ".concat(t).concat(n,";");if(e.isVector3||e.isColor)return"uniform vec3 ".concat(t).concat(n,";");if(e.isVector4||e.isQuaternion)return"uniform vec4 ".concat(t).concat(n,";");if(e.isMatrix3)return"uniform mat3 ".concat(t).concat(n,";");if(e.isMatrix4)return"uniform mat4 ".concat(t).concat(n,";");if(e.isTexture)if(e.isCubeTexture)return"uniform samplerCube ".concat(t).concat(n,";");else return"uniform sampler2D ".concat(t).concat(n,";");throw console.log("unhandled value:",e),Error('unhandled value: "'.concat(null==e?void 0:e.constructor.name,'"'))}constructor(t,e){this.name=t,this.target=e}}function c(){let t=(0,r._)(["","s*",""],["","\\s*",""]);return c=function(){return t},t}let u=null,h=t=>(u=t,b),f="// ShaderForge (injected code) ->",d="// <- ShaderForge",p=t=>"".concat(f,"\n").concat(t.trim(),"\n").concat(d),m=t=>{let e=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(String.raw(c(),e(d),e(f)),"g");return t.replaceAll(n,"")};class g{getPattern(t){let{throwError:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="#include <".concat(t,">"),r=this.type;if(e&&!1===u[r].includes(n))throw Error('"'.concat(n,'" is not present in the shader template program.'));return{pattern:n,type:r}}replace(t,e){if(t instanceof RegExp){let{type:n}=this;u[n]=u[n].replace(t,p(e))}else{let{type:n,pattern:r}=this.getPattern(t),i=p(e);u[n]=u[n].replace(r,i)}return b}inject(t,e,n){let{type:r,pattern:i}=this.getPattern(e),s="after"===t?"".concat(i,"\n").concat(p(n)):"".concat(p(n),"\n").concat(i);return u[r]=u[r].replace(i,s),b}injectTokenComments(){for(let t of s){let{type:e,pattern:n}=this.getPattern(t,{throwError:!1});u[e]=u[e].replace(n,"\n        ".concat(n,"\n        // ShaderForge TOKEN: ").concat(t,"\n      "))}return b}header(t){let e=this.type;return u[e]="".concat(t,"\n").concat(u[e]),b}before(t,e){return this.inject("before",t,e)}after(t,e){return this.inject("after",t,e)}top(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u[this.type]=u[this.type].replace("void main() {","\n      ".concat(p(e.join("\n\n")),"\n      void main() {\n    ")),b}mainBeforeAll(t){return u[this.type]=u[this.type].replace("void main() {","void main() {\n        ".concat(p(t))),b}mainAfterAll(t){return u[this.type]=u[this.type].replace(/}\s*$/,"\n      ".concat(p(t),"\n    }")),b}uniforms(t){if("string"==typeof t)this.top(t);else{let e=[];for(let[n,r]of Object.entries(t)){let t=l.from(n,r);e.push(t.computeDeclaration())}this.top(e.join("\n")),function(t){for(let[e,n]of Object.entries(t)){let t=l.from(e,n);if(e in u.uniforms){if(t.value!==u.uniforms[e].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else u.uniforms[e]=t}}(t)}return b}clean(){return u[this.type]=m(u[this.type]),b}printFinalCode(){return console.log(u[this.type].replace(/#include <(.*)>/g,(t,e)=>{let n=i.ShaderChunk[e];if(!n)throw Error('Shader chunk "'.concat(e,'" not found'));return n})),b}constructor(t){this.type=t}}let _={sf_vObjectPosition:()=>{v("\n      varying vec3 sf_vObjectPosition;\n    "),w.mainAfterAll("\n      sf_vObjectPosition = transformed;\n    ")},sf_vWorldPosition:()=>{v("\n      varying vec3 sf_vWorldPosition;\n    "),w.mainAfterAll("\n      vec4 sf_mvPosition = vec4(transformed,1.0 );\n      #ifdef USE_BATCHING\n        sf_mvPosition = batchingMatrix * sf_mvPosition;\n      #endif\n      #ifdef USE_INSTANCING\n        sf_mvPosition = instanceMatrix * sf_mvPosition;\n      #endif\n      sf_vWorldPosition = (modelMatrix * sf_mvPosition).xyz;\n    ")},sf_vWorldNormal:()=>{v("\n      varying vec3 sf_vWorldNormal;\n    "),w.mainAfterAll("\n      #ifdef USE_INSTANCING\n        sf_vWorldNormal = mat3(modelMatrix) * mat3(instanceMatrix) * normal;\n      #elif\n        sf_vWorldNormal = mat3(modelMatrix) * normal;\n      #endif\n\n      #ifdef FLIP_SIDED\n        sf_vWorldNormal = -sf_vWorldNormal;\n      #endif\n    ")}};function v(t){return w.top(t),y.top(t),b}let y=new g("fragmentShader"),w=new g("vertexShader"),b=Object.assign(function(t){return t&&h(t),b},{shaderName:function(t){return u.shaderName="".concat(t," (ShaderForge)"),b},defines:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=e[0];return"string"==typeof r&&(r=Object.fromEntries(e.map(t=>[t,""]))),u.defines?Object.assign(u.defines,r):u.defines=r,b},uniforms:function(t){return w.uniforms(t),y.uniforms(t),b},varying:function(t){let e="";if("string"==typeof t)e=t;else{let n=[];for(let[e,r]of Object.entries(t))n.push("varying ".concat(r," ").concat(e,";"));e=n.join("\n")}return w.top(e),y.top(e),b},createVarying:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e){let e=_[t];e?e():console.warn('No createVarying function found for "'.concat(t,'"'))}return b},top:v,vertex:w,fragment:y,header:function(t){return y.header(t),w.header(t),b},clean:function(){return y.clean(),w.clean(),b},with:h,wrap:(t,e)=>(t.onBeforeCompile=t=>{u=t},t)}),x=new a.Q1f;function P(t){if("string"==typeof t&&t.startsWith("#")){let{r:e,g:n,b:r}=function(t){if(t.startsWith("#")&&(t=t.substring(1)),3===t.length){let e=parseInt(t[0],16)/15;return{r:e,g:parseInt(t[1],16)/15,b:parseInt(t[2],16)/15,a:1}}if(4===t.length){let e=parseInt(t[0],16)/15,n=parseInt(t[1],16)/15;return{r:e,g:n,b:parseInt(t[2],16)/15,a:parseInt(t[3],16)/15}}if(6===t.length){let e=parseInt(t.slice(0,2),16)/255;return{r:e,g:parseInt(t.slice(2,4),16)/255,b:parseInt(t.slice(4,6),16)/255,a:1}}if(8===t.length){let e=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255;return{r:e,g:n,b:parseInt(t.slice(4,6),16)/255,a:parseInt(t.slice(6,8),16)/255}}throw Error("Invalid hex format.")}(t);return"vec3(".concat(e.toFixed(3),", ").concat(n.toFixed(3),", ").concat(r.toFixed(3),")")}let{r:e,g:n,b:r}=x.set(t);return"vec3(".concat(e.toFixed(3),", ").concat(n.toFixed(3),", ").concat(r.toFixed(3),")")}},20537:(t,e,n)=>{function r(t){return!!(null==t?void 0:t.isVector3)}function i(t){return!!(null==t?void 0:t.isEuler)}function s(t){return!!(null==t?void 0:t.isQuaternion)}function a(t){return!!(null==t?void 0:t.isMatrix4)}function o(t){return!!(null==t?void 0:t.isObject3D)}function l(t){return!!(null==t?void 0:t.isMesh)}n.d(e,{MR:()=>a,Th:()=>o,Zz:()=>r,eB:()=>i,f7:()=>s,uW:()=>l})},29338:(t,e,n)=>{var r,i;n.d(e,{s:()=>i,z:()=>r}),function(t){t[t.BeforeUpdate=-1e3]="BeforeUpdate",t[t.Update=0]="Update",t[t.AfterUpdate=1e3]="AfterUpdate",t[t.BeforeRender=2e3]="BeforeRender",t[t.Render=3e3]="Render",t[t.AfterRender=4e3]="AfterRender"}(r||(r={})),function(t){t.WebGL="webgl",t.WebGPU="webgpu"}(i||(i={}))},39787:(t,e,n)=>{n.d(e,{el:()=>c,zr:()=>a});var r=n(28535),i=n(76999),s=n(57368);function a(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e.flat(2))"destroy"in t?t.destroy():t()}var o=new WeakMap,l=new WeakMap;class c{get destroyed(){return(0,r._)(this,l)}get alive(){return!(0,r._)(this,l)}bindTo(t){return(0,r._)(this,l)||t.onDestroy(this),this}onDestroy(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if((0,r._)(this,l))return{destroy:()=>{}};let i=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=[];for(let t of e)if(t)if(Symbol.iterator in t)for(let e of t)e&&r.push(e);else r.push(t);return r}(...e);for(let t of i)(0,r._)(this,o).add(t);return{destroy:()=>{for(let t of i)(0,r._)(this,o).delete(t)}}}collect(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.onDestroy(...e)}destroySelf(){if(!(0,r._)(this,l)){for(let t of((0,s._)(this,l,!0),(0,r._)(this,o)))"function"==typeof t?t():"destroy"in t&&t.destroy();(0,r._)(this,o).clear()}}constructor(t){(0,i._)(this,o,{writable:!0,value:void 0}),(0,i._)(this,l,{writable:!0,value:void 0}),(0,s._)(this,o,new Set),(0,s._)(this,l,!1),this.destroy=()=>{this.destroySelf()},this.customData=null!=t?t:null}}},40951:(t,e,n)=>{n.d(e,{gm:()=>P,K6:()=>m});var r,i,s=n(28535),a=n(76999),o=n(57368),l=n(66066),c=n(15940),u=n(49797),h=n(83743);class f{copy(t){for(let e of Object.keys(t)){let n=this[e];n&&"object"==typeof n?"copy"in n?n.copy(t[e]):Array.isArray(n)?this[e]=t[e].slice():console.warn('Cannot copy property "'.concat(e,'" (').concat(n.constructor.name,") (no copy method on the object value).")):this[e]=t[e]}return this}clone(){return new this.constructor().copy(this)}}var d=n(20537);!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(r||(r={}));class p{copy(t){return this.buttons=t.buttons,this.clientPosition.copy(t.clientPosition),this.screenPosition.copy(t.screenPosition),this}diff(t,e){return this.buttons=t.buttons^e.buttons,this.clientPosition.subVectors(t.clientPosition,e.clientPosition),this.screenPosition.subVectors(t.screenPosition,e.screenPosition),this}constructor(){this.downEvent=null,this.buttons=0,this.clientPosition=new u.I9Y,this.screenPosition=new u.I9Y}}!function(t){t[t.Tap=0]="Tap"}(i||(i={}));class m{static get Type(){return i}get downEvent(){return this.state.downEvent}get downTarget(){return this.downEvent.target}consume(){this.consumed=!0}constructor(t,e,n){this.consumed=!1,this.type=t,this.intersection=e,this.state=n}}var g=new WeakMap,_=new WeakMap,v=new WeakMap,y=new WeakSet,w=new WeakMap,b=new WeakSet,x=new WeakSet;class P{get buttons(){return this.state.buttons}setEventIgnore(t,e){(0,s._)(this,_).set(t,e)}buttonDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return(this.state.buttons&1<<t)!=0}buttonDownOld(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return(this.stateOld.buttons&1<<t)!=0}buttonDownEnter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return this.buttonDown(t)&&!this.buttonDownOld(t)}buttonDownExit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return!this.buttonDown(t)&&this.buttonDownOld(t)}buttonTap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return!1!==this.buttonDownExit(t)&&this.upTimes.get(t)-this.downTimes.get(t)<e}get enabled(){return(0,s._)(this,g)}set enabled(t){this.setEnabled(t)}get clientPosition(){return this.state.clientPosition}get screenPosition(){return this.state.screenPosition}get ray(){return this.raycaster.ray}intersectPlane(t,e){let{oldFactor:n,distance:r}={...P.defaultIntersectPlaneOptions,...e},{rayOld:i,raycaster:{ray:a}}=this,{line:o,result:l,plane:c}=(0,s._)(this,v);if("string"==typeof t)switch(c.constant=0,t){case"X":case"yz":c.normal.set(1,0,0);break;case"Y":case"xz":c.normal.set(0,1,0);break;case"Z":case"xy":c.normal.set(0,0,1)}else c.copy(t);return o.start.lerpVectors(a.origin,i.origin,n),o.end.lerpVectors(a.direction,i.direction,n).normalize().multiplyScalar(r).add(o.start),l.intersected=!!c.intersectLine(o,l.point),l}updatePosition(t,e,n){let{x:r,y:i}=e,s=(r-n.x)/n.width*2-1,a=-((i-n.y)/n.height*2)+1;this.camera=t,this.clientPosition.set(r,i),this.screenPosition.set(s,a),this.raycaster.setFromCamera(this.screenPosition,t)}raycast(t){let e=[];for(let{node:n}of(0,h.$z)(t,{skip:t=>!1===(0,d.uW)(t)||(!0===t.userData.helper||!1===t.visible)&&!0!==t.userData.pointerArea,prune:t=>!1===t.visible||!0===t.userData.ignorePointer}))this.raycaster.intersectObject(n,!1,e);return e.sort((t,e)=>t.distance-e.distance),e}raycastScene(t){return this.raycast(t)}updateStart(t){!1!==(0,s._)(this,g)&&(this.diffState.diff(this.state,this.stateOld),this.intersections=this.raycast(t),this.rayOld.copy(this.raycaster.ray),(0,l._)(this,y,E).call(this,t))}updateEnd(){!1!==(0,s._)(this,g)&&(this.stateOld.copy(this.state),this.event.reset())}setEnabled(t){return(0,s._)(this,g)===t||((0,o._)(this,g,t),t?(0,l._)(this,b,I).call(this):(0,l._)(this,x,k).call(this)),this}initialize(t,e,n,r){return this.domElement=t,this.scope=e,this.camera=n,this.ticker=r,(0,s._)(this,g)&&(0,l._)(this,b,I).call(this),(0,s._)(this,w).disable}constructor(){(0,c._)(this,y),(0,c._)(this,b),(0,c._)(this,x),(0,a._)(this,g,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,o._)(this,g,!0),this.state=new p,this.stateOld=new p,this.diffState=new p,this.downTimes=new Map,this.upTimes=new Map,this.domElement=null,this.scope=null,this.ticker=null,(0,o._)(this,_,new Map),this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.intersections=[],this.raycaster=new u.tBo,this.rayOld=new u.RlV,(0,o._)(this,v,{plane:new u.Zcv,line:new u.cZY,result:new P.IntersectPlaneResult}),(0,o._)(this,w,{disable:()=>{}})}}function E(t){let[e]=this.intersections;if(this.buttonTap()){var n;let r=new m(i.Tap,null!=e?e:null,this.state),a=(0,s._)(this,_).get(r.type);if(null==a?void 0:a(r))return;let o=null!=(n=null==e?void 0:e.object)?n:t;for(;o&&!1===r.consumed;)o.userData.onPointerTap&&((0,o.userData.onPointerTap)(r),r.consume()),o=o.parent}}function I(){let t=this.domElement,e=this.scope,n=this.camera,r=this.ticker,i=e=>{let r=t.getBoundingClientRect(),{clientX:i,clientY:s}=e;this.updatePosition(n,{x:i,y:s},r)},a=t=>{i(t)},o=t=>{i(t),t.target instanceof HTMLCanvasElement!=!1&&(document.addEventListener("pointerup",l),this.state.downEvent=t,this.state.buttons|=1<<t.button,this.downTimes.set(t.button,r.time))},l=t=>{document.removeEventListener("pointerup",l),this.state.buttons&=~(1<<t.button),this.upTimes.set(t.button,r.time)};document.addEventListener("pointermove",a),e.addEventListener("pointerdown",o),(0,s._)(this,w).disable=()=>{document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),e.removeEventListener("pointerdown",o)}}function k(){(0,s._)(this,w).disable(),(0,s._)(this,w).disable=()=>{}}P.defaultIntersectPlaneOptions={oldFactor:0,distance:1e3},P.IntersectPlaneResult=class extends f{constructor(...t){super(...t),this.intersected=!1,this.point=new u.Pq0}}},44019:(t,e,n)=>{n.d(e,{jj:()=>s});var r=n(49797),i=n(44694);function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Pq0;return i.jj(t,e)}},52489:(t,e,n)=>{n.d(e,{$:()=>v});var r=n(28535),i=n(76999),s=n(57368),a=n(49797),o=n(83743),l=n(67235),c=n(36508),u=n(40951),h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap;class m{add(t){let e=(0,r._)(this,f)[(0,r._)(this,d)];return(0,s._)(this,p,(0,r._)(this,p)+(t-e)),(0,r._)(this,f)[(0,r._)(this,d)]=t,(0,s._)(this,d,((0,r._)(this,d)+1)%(0,r._)(this,h)),(0,r._)(this,p)}get current(){return(0,r._)(this,f)[(0,r._)(this,d)]}get sum(){return(0,r._)(this,p)}get size(){return(0,r._)(this,h)}get average(){return(0,r._)(this,p)/(0,r._)(this,h)}constructor(t){(0,i._)(this,h,{writable:!0,value:void 0}),(0,i._)(this,f,{writable:!0,value:void 0}),(0,i._)(this,d,{writable:!0,value:void 0}),(0,i._)(this,p,{writable:!0,value:void 0}),(0,s._)(this,d,0),(0,s._)(this,p,0),(0,s._)(this,h,t),(0,s._)(this,f,new Float32Array(t))}}let g={includeSelf:!0,visibleOnly:!1};var _=new WeakMap;class v{get enabled(){return this._enabled}set enabled(t){this._enabled=t}get aspect(){return this.size.x/this.size.y}get width(){return this.size.x}get height(){return this.size.y}get fullWidth(){return this.fullSize.x}get fullHeight(){return this.fullSize.y}get averageFps(){return 1/(0,r._)(this,_).deltaTimes.average}setSize(t){let{width:e=this.width,height:n=this.height,pixelRatio:r=this.pixelRatio}=t;return e===this.width&&n===this.height&&r===this.pixelRatio||(this.size.set(e,n),this.fullSize.set(e*r,n*r),this.pixelRatio=r,this._onSetSize()),this}_onSetSize(){}setScene(t){return this.scene!==t&&(this.scene=t,this._onSetScene()),this}_onSetScene(){}setFullscreen(t){if("string"==typeof t)switch(t){case"canvas":t=this.domElement;break;case"document":t=document.documentElement;break;default:throw Error("Invalid fullscreen element: ".concat(t))}return document.fullscreenElement===t||(null===t?document.exitFullscreen():t.requestFullscreen()),this}initialize(t,e){throw Error("Not implemented")}renderFrame(t,e){if(!1===this._enabled&&(null==e?void 0:e.force)!==!0)return;let n=performance.now();(0,r._)(this,_).deltaTimes.add((n-(0,r._)(this,_).now)/1e3),(0,r._)(this,_).now=n;let{scene:i,pointer:s}=this;s.updateStart(i),!1===this.skipTickUpdate&&i.traverse(e=>{"onTick"in e&&e.onTick(t,this)}),s.updateEnd()}*queryAll(t,e){let n=function(t){if(void 0===t)return()=>!0;if(null===t)return()=>!1;if("string"==typeof t)return e=>{var n;return(null==e?void 0:e.uuid)===t||(null==e?void 0:e.name)===t||(null==e||null==(n=e.constructor)?void 0:n.name)===t};if(t instanceof RegExp)return e=>{var n;return t.test(null==e?void 0:e.name)||t.test(null==e||null==(n=e.constructor)?void 0:n.name)};if("function"==typeof t)return a.B69.prototype.isPrototypeOf(t.prototype)?e=>e instanceof t:e=>t(e);throw Error("Invalid query selector")}(t),{includeSelf:r,visibleOnly:i}={...g,...e};for(let{node:t}of(0,o.$z)(this.scene,{includeFirstNode:r,getChildren:t=>t.children,skip:t=>!1==!!n(t)||i&&!1===t.visible}))yield t}queryFirst(t,e){for(let n of this.queryAll(t,e))return n;return null}constructor(t){(0,i._)(this,_,{writable:!0,value:void 0}),this._enabled=!0,this.ticker=c.Rv.get("three").set({minActiveDuration:8}),this.size=new a.I9Y,this.fullSize=new a.I9Y,this.pixelRatio=1,this.pointer=new u.gm,this.scene=new a.Z58,this.skipRender=!1,this.skipTickUpdate=!1,this.initialized=!1,(0,s._)(this,_,{now:0,deltaTimes:new m(30)}),this.type=t,(0,r._)(this,_).now=performance.now(),l.Q.on(v,t=>{t.setPayload(this)})}}v.shared={vector2:new a.I9Y,vector3:new a.Pq0}},61249:(t,e,n)=>{n.d(e,{N:()=>l});var r=n(49797),i=n(94065);new r.Pq0(0,0,0),new r.O9p(0,0,0,"XYZ"),new r.Pq0(1,1,1);let s={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,pivot:void 0,visible:void 0,name:void 0,parent:void 0,userData:void 0},a=new r.dwI,o=new r.Pq0;function l(t,e){let{x:n,y:l,z:c,position:u=new r.Pq0(n,l,c),rotationX:h,rotationY:f,rotationZ:d,rotationOrder:p,rotationUnit:m,rotation:g,scaleX:_,scaleY:v,scaleZ:y,scaleScalar:w,scale:b=new r.Pq0(_,v,y).multiplyScalar(w),pivot:x,visible:P,name:E,parent:I,userData:k}={...s,...e};return(0,i.jj)(u,t.position),(0,i.if)(null!=g?g:[h,f,d,p,m],t.rotation),(0,i.jj)(b,t.scale),void 0!==x&&(t.updateMatrix(),a.setFromMatrix4(t.matrix),(0,i.jj)(x,o).applyMatrix3(a),t.position.sub(o)),void 0!==P&&(t.visible=P),void 0!==E&&(t.name=E),void 0!==I&&I!==t.parent&&(null===I?t.removeFromParent():I.add(t)),void 0!==k&&Object.assign(t.userData,k),t}},67235:(t,e,n)=>{n.d(e,{Q:()=>l});var r=n(54530);class i{_getId(){return i._idHash.init().update(++this._count).getValue()}_registerObject(t){let e=this._getId();return this._weakMap.set(t,e),e}_registerPrimitive(t){let e=this._getId();return this._map.set(t,e),e}_requirePrimitiveId(t){var e;return null!=(e=this._map.get(t))?e:this._registerPrimitive(t)}_requireObjectId(t){var e;return null!=(e=this._weakMap.get(t))?e:this._registerObject(t)}_requireArrayId(t){let{_arrayHash:e}=i;for(let n of(e.init(),t.flat(16)))e.update(this.requireId(n));return e.getValue()}requireId(t){return!function(t){if(null==t)return!0;switch(typeof t){case"function":case"object":return!1;default:return!0}}(t)?Array.isArray(t)?this._requireArrayId(t):this._requireObjectId(t):this._requirePrimitiveId(t)}constructor(){this._count=1,this._map=new Map,this._weakMap=new WeakMap}}i._idHash=new r.V,i._arrayHash=new r.V;class s{constructor(t,e){this.filter=t,this.callback=e,this.match="*"===t?()=>!0:"string"==typeof t?e=>e===t:t instanceof RegExp?e=>t.test(e):()=>!1}}let a=new i,o=new Map;class l{setPayload(t){return this.payload=t,this}assignPayload(t){let{overwrite:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.payload=e?{...this.payload,...t}:{...t,...this.payload},this}payloadAssign(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.assignPayload(...e)}assertPayload(){if(void 0!==this.payload)return this.payload;throw Error('Message.payloadAssert: assertion failed for message with target "'.concat(this.target,'"'))}constructor(t,e,n){var r;this.id=l.nextId++,this.debug={currentListenerIndex:-1,listenerCount:0},this.targetId=a.requireId(t),this.target=t,this.type=null!=e?e:"message",this.payload=n;let i=(null!=(r=o.get(this.targetId))?r:[]).filter(t=>t.match(this.type));for(let t of(this.debug.listenerCount=i.length,i))this.debug.currentListenerIndex++,t.callback(this)}}function c(t){if(2===t.length){let[e,n]=t;return[e,"*",n]}return t}function u(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];let[i,l,u]=c(n),h=a.requireId(i),f=new s(l,u);return(null!=(t=o.get(h))?t:(()=>{let t=[];return o.set(h,t),t})()).push(f),{destroy:()=>{!function(t,e){let n=o.get(t);if(n){let r=n.indexOf(e);if(-1!==r)n.splice(r,1),0===n.length&&o.delete(t)}}(h,f)}}}function h(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,i,s]=function(t){let[e,...n]=t;if(2===n.length){let[t,{payload:r}]=n;return[e,t,r]}if(1===n.length){let[t]=n;return"string"==typeof t?[e,t]:[e,void 0,t.payload]}return[e]}(e);return new l(r,i,s)}l.send=h,l.sendDual=function(t,e){h(e,{payload:t}),h(t,e)},l.on=u,l.wait=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise(t=>{let n=e=>{t(e)},[r,i]=c([...e,n]);u(r,i,n)})},l.debug={listenerMap:o,idRegister:a},l.nextId=0},79911:(t,e,n)=>{n.d(e,{$z:()=>u,DN:()=>o,mj:()=>a,rd:()=>l,wV:()=>f});var r=n(49797),i=n(20537),s=n(61249);function a(t,e,n){if(!1===(0,i.Th)(t))throw Error("Child must be an instance of Object3D");return e&&((0,i.Th)(e)?e.add(t):(0,s.N)(t,e)),null==n||n(t),t}let o=a;function l(t,e){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}let c={includeSelf:!1};function*u(t,e){let{includeSelf:n}={...c,...e};for(let e of(n&&(yield t),t.children))yield*u(e,{includeSelf:!0})}let h={includeSelf:!1,root:null,includeRoot:!1};function*f(t,e,n){let i=void 0===e?()=>!0:null===e?()=>!1:"string"==typeof e?t=>t.name===e||t.uuid===e:e instanceof RegExp?t=>e.test(t.name):e.prototype&&e.prototype instanceof r.B69?t=>t instanceof e:t=>!!e(t);for(let e of u(t,n))i(e)&&(yield e)}},83743:(t,e,n)=>{n.d(e,{$z:()=>s});let r=()=>({filter:()=>!0,prune:()=>!1,skip:()=>!1,includeFirstNode:!0,nodesMax:1e6}),i=()=>({...r(),getChildren:t=>t.children,method:"depth-first"});function*s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nodesMax:n,includeFirstNode:r,method:s,filter:a,skip:o,prune:l,getChildren:c}={...i(),...e},u=0,h=r?[t]:[...c(t)],f=new Set;for(;h.length>0;){let t=h.shift();if(!1===a(t)||l(t))continue;if(!1===o(t)&&(yield{node:t},u++),u>=n)break;if(f.has(t)){console.warn("Tree traversal visited the same node twice",t);continue}f.add(t);let e=c(t);"depth-first"===s?h.unshift(...e):h.push(...e)}}},94065:(t,e,n)=>{n.d(e,{ey:()=>i.ey,if:()=>l,Fx:()=>f,vl:()=>g,GD:()=>y,wX:()=>d,jj:()=>p,EC:()=>m,wz:()=>i.wz});var r=n(49797),i=n(44694),s=n(20537);function a(t){return"string"==typeof t&&/^(XYZ|XZY|YXZ|YZX|ZXY|ZYX)$/.test(t)}let o={defaultOrder:"XYZ"};function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[l,c,u]=(()=>{if(1===e.length)return[e[0],o,new r.O9p];if(2===e.length)return(0,s.eB)(e[1])?[e[0],o,e[1]]:[e[0],e[1],new r.O9p];if(3===e.length)return e;throw Error("Invalid number of arguments")})();if("string"==typeof l)return function t(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.O9p,o=(e=e.replace(/\s+\/\s+/g,"/").trim()).split(",").map(t=>t.trim()),[l,c="",u="",h]=o;if(1===o.length&&/\s/.test(e))return console.warn("Detected a single string with spaces, treating it as an Euler declaration string. Commas are expected to separate values."),t(e.replace(/\s/,","),n,s);let f=(0,i.ey)(l)||0,d=(0,i.ey)(c)||0,p=(0,i.ey)(u)||0,m=a(h)?h:n.defaultOrder;return s.set(f,d,p,m)}(l,c,u);if("number"==typeof l)return u.set(l,l,l);if((0,s.eB)(l))return u.copy(l);if((0,s.f7)(l))return u.setFromQuaternion(l);let{defaultOrder:h}=c;if(Array.isArray(l)){let[t,e,n,r,s]=l,o=(0,i.Qm)(r)?r:(0,i.Qm)(s)?s:"rad",c=a(r)?r:a(s)?s:h;return u.set((0,i.ey)(t,o),(0,i.ey)(e,o),(0,i.ey)(n,o),c)}let{x:f,y:d,z:p,order:m=h,unit:g="rad"}=l;return u.set((0,i.ey)(f,g),(0,i.ey)(d,g),(0,i.ey)(p,g),m)}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Pq0;if((0,i.LV)(t))return p(t,e);if("string"==typeof t){let[n,r]=t,i="+"===n?1:-1;switch(r){case"x":return e.set(i,0,0);case"y":return e.set(0,i,0);case"z":return e.set(0,0,i);default:throw Error("Invalid normal declaration: ".concat(t))}}throw Error("Invalid normal declaration")}let u=new r.Pq0,h=new r.Pq0;function f(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Zcv;u.set(0,0,1),h.set(0,0,0);let s=u.length();if("string"==typeof(e=t)&&/^[+-][xyz]$/.test(e)||(0,i.LV)(e))c(t,u);else if(Array.isArray(t)){if(2!==t.length)throw Error("Invalid plane declaration: expected an array of length 2");c(t[0],u),p(t[1],h)}if(0===s)throw Error("Invalid plane normal: zero vector");return n.setFromNormalAndCoplanarPoint(u.divideScalar(s),h)}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.I9Y;return i.wX(t,e)}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Pq0;return i.jj(t,e)}function m(t,e){return null!=e||(e=new r.IUQ),i.EC(t,e)}n(44019);let g=(()=>{let t=new r.Pq0,e=new r.O9p,n=new r.Pq0,i=new r.PTz;return function(r,a){let{x:o=0,y:c=0,z:u=0,position:h={x:o,y:c,z:u},rotationX:f=0,rotationY:d=0,rotationZ:m=0,rotationOrder:g="XYZ",rotation:_={x:f,y:d,z:m,order:g},scaleX:v=1,scaleY:y=1,scaleZ:w=1,scaleScalar:b=1,scale:x={x:v,y:y,z:w}}=r;if((0,s.MR)(a))return p(h,t),l(_,e),p(x,n).multiplyScalar(b),i.setFromEuler(e),a.compose(t,i,n);if((0,s.Th)(a))return p(h,a.position),l(_,a.rotation),p(x,a.scale).multiplyScalar(b),a;throw Error("Invalid out argument")}})(),_=new r.kn4,v=new r.kn4;function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;e.identity();let n=t[Symbol.iterator](),r=n.next();if(r.done)return e;g(r.value,e);for(let t=n.next();!t.done;t=n.next())g(t.value,v),e.multiply(v);return e}}}]);