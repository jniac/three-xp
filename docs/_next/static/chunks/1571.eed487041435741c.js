(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1571],{1295:e=>{e.exports={Client:"client_Client__xAYKJ",Background:"client_Background__G4qOA",ThreeDiv:"client_ThreeDiv__atxk6",Counter:"client_Counter__ME1MG"}},51571:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Client:()=>y});var r=n(70691),i=n(67203);function s(e){let t=e.match(/\s*([0-9.]+)\s*(\/\s*[0-9.]+)?\s*([a-zA-Z]*)\s*?/);if(null===t)throw Error("Invalid number");let[n,r,i,s=""]=t;return[Number.parseFloat(r)/(i?Number.parseFloat(i.slice(1)):1),s]}let l={height:"3/2em",aspect:1.6,strokeWidth:"1px",padding:".3em",active:!1,circleActiveFill:"currentColor"},a=(0,i.forwardRef)(function(e,t){let{height:n,strokeWidth:i,aspect:a,padding:o,active:c,circleActiveFill:d,...u}={...l,...e},[h,m]=s(n),p="".concat(h).concat(m),[x,f]=s(i),v=x.toString()+f,g=(h/2).toString()+m,j=(h*a).toString()+m,y=(x/2).toString()+f;return(0,r.jsxs)("svg",{ref:t,width:j,height:p,stroke:"currentColor",strokeWidth:i,fill:"none",...u,children:[(0,r.jsx)("rect",{x:y,y:y,rx:g,width:"calc(".concat(j," - ").concat(v,")"),height:"calc(".concat(p," - ").concat(v,")")}),(0,r.jsx)("circle",{cx:c?"calc(".concat(j," - ").concat(g,")"):g,cy:g,r:"calc(".concat(g," - ").concat(y," - ").concat(o,")"),fill:c?"currentColor":"transparent",style:{transition:"0.2s"}})]})});var o=n(7587),c=n(97540),d=n(29968),u=n(17953),h=n(49797),m=n(81074),p=n(36508);class x extends h.YJl{static current(){return this.instances.at(-1)}constructor(){super(),this.parts=(()=>{let e=(0,u.PiW)((0,u.fVC)(0));e.onObjectUpdate(()=>p.Rv.get("three").time);let t=(0,u.PiW)((0,u.fVC)(0)),n=(0,u.Fn)(n=>{let{storageTexture:r}=n,i=u.cGD.modInt(512),s=u.cGD.div(512),l=(0,u.aqi)(i,s),a=(0,u.fVC)(i).div(50),o=(0,u.fVC)(s).div(50);(0,u.If)(t.equal(0),()=>{let t=a.sin(),n=o.sin(),i=a.add(o).sin(),s=a.mul(a).add(o.mul(o),e.mul(1.2).sin()).sqrt().add(5,e.sin()).sin(),c=t.add(n,i,s),d=e.mul(2).add(a.div(12).add(o.div(32))).sin().remap(-1,1,0,1),h=c.add(Math.PI).sin(),m=c.add(Math.PI).sub(.5).sin(),p=(0,u.Lrr)((0,u.eR5)(d,h,m),e.sin().remap(-1,1,-1,1));(0,u.TJz)(r,l,(0,u.lnd)(p,1)).toWriteOnly()}).Else(()=>{let t=(0,u.FnD)((0,u.eR5)(a,o,e)),n=(0,u.C2u)((0,u.eR5)(a,o,e).mul(.2)).remap(-.65,.65,0,1),i=(0,u.jhA)((0,u.yWT)("red"),(0,u.yWT)("blue"),(0,u.Lrr)(n,5));i.mixAssign((0,u.yWT)("black"),t.oneMinus()),(0,u.TJz)(r,l,(0,u.lnd)(i,1)).toWriteOnly()})}),r=new h.eaF(new h.bdM,new m.P8l({side:h.$EB,color:"#ffcc00"}));this.add(r);let i=new m.RiJ(512,512),s=n({storageTexture:i}).compute(262144);return r.material.colorNode=(0,u.wHr)(i),{plane:r,computeNode:s,uPhase:t}})(),this.onDestroy=()=>{x.instances.splice(x.instances.indexOf(this),1)},this.onTick=(e,t)=>{t.renderer.computeAsync(this.parts.computeNode)},x.instances.push(this)}}x.instances=[];var f=n(1295),v=n.n(f);function g(){return(0,r.jsx)("div",{className:"".concat(v().Background," layer flex flex-col text-center items-center justify-center"),children:(0,r.jsx)("div",{style:{margin:"-100px",inset:0},children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad dicta unde totam! Iusto rerum tempore provident dolores voluptas sed neque quisquam corrupti impedit quam eum animi sint, eaque non quae?"})})}function j(){let[e,t]=(0,i.useState)(!1),[n,s]=(0,i.useState)(NaN),l=(0,d.yk)(),{ref:u}=(0,o.C7)(function*(t){let r=t.querySelector("#three-div"),i=r.querySelector("span + span"),s=x.current();yield l.ticker.onTick({order:-1},a=>{(0,c.EF)(t,r,l.camera,s),i.innerHTML=[...isNaN(n)?'0.000"':"".concat((a.time-n).toFixed(3),'"')].map(e=>"<span>".concat(e,"</span>")).join(""),e&&(s.rotation.y+=2*a.deltaTime,s.rotation.x+=+a.deltaTime)})},[e,n]);return(0,r.jsxs)("div",{ref:u,className:"layer thru p-8 flex flex-col items-start",children:[(0,r.jsx)(d.q,{value:x}),(0,r.jsxs)("div",{className:"p-4 bg-white text-[#bd71ff] flex flex-col gap-2",children:[(0,r.jsx)("h1",{className:"text-4xl mb-2",children:"Webgpu Demo"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"✅ Transparent background"}),(0,r.jsx)("li",{children:"✅ TSL"}),(0,r.jsx)("li",{children:"✅ Basic context (resize, tick, render)"}),(0,r.jsx)("li",{children:"✅ Vertigo controls"}),(0,r.jsx)("li",{children:"✅ CSS 3D"})]}),(0,r.jsxs)("button",{className:"flex gap-2",onClick:()=>t(!e),children:["Auto-Rotate",(0,r.jsx)(a,{active:e})]}),(0,r.jsx)("button",{className:"border border-[#bd71ff]",onClick:()=>{var e;return null==(e=x.current())?void 0:e.rotation.set(0,0,0)},children:"Reset Rotation"})]}),(0,r.jsxs)("div",{id:"three-div",className:v().ThreeDiv,onPointerEnter:()=>{s(p.Rv.get("three").time),x.current().parts.uPhase.value=1},onPointerLeave:()=>{s(NaN),x.current().parts.uPhase.value=0},children:[(0,r.jsx)("span",{style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"100",fontSize:"2em",lineHeight:".7em",textTransform:"uppercase"},children:"3D div"}),(0,r.jsxs)("span",{className:v().Counter,style:{fontFamily:"'Sofia Sans Extra Condensed', sans-serif",fontWeight:"300",fontSize:"1em",lineHeight:".7em",textTransform:"uppercase"},children:[(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"."}),(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"0"}),(0,r.jsx)("span",{children:"0"})]})]})]})}function y(){return(0,r.jsxs)("div",{className:"".concat(v().Client," layer bg-[#bd71ff]"),children:[(0,r.jsx)(g,{}),(0,r.jsx)("div",{className:"layer",children:(0,r.jsx)(d.uB,{vertigoControls:{size:2},children:(0,r.jsx)(j,{})})})]})}},97540:(e,t,n)=>{"use strict";n.d(t,{AF:()=>m,EF:()=>x,hD:()=>h,s5:()=>l,wZ:()=>p});var r=n(49797),i=n(79285),s=n(61567);function l(e,t){if(0!==e.projectionMatrix.elements[15])return"none";{let n=e.projectionMatrix.elements[5],r=t.clientHeight*n/2;return"".concat(r,"px")}}let a=new r.kn4,o=new r.kn4,c=new r.Pq0,d=new r.Pq0;function u(e,t){if((0,s.Th)(e))return t.setFromMatrixPosition(e.matrixWorld);if((0,s.MR)(e))return t.setFromMatrixPosition(e);if((0,s.Zz)(e))return t.copy(e);throw Error("Invalid object type.")}function h(e,t){return c.set(e.matrixWorld.elements[8],e.matrixWorld.elements[9],e.matrixWorld.elements[10]),u(t,d),c.dot(d)>0}function m(e,t){return c.set(e.matrixWorld.elements[12],e.matrixWorld.elements[13],e.matrixWorld.elements[14]),u(t,d),Math.round(1e4/(1+c.distanceTo(d))).toString()}function p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=e.projectionMatrix.elements[5],m=n.clientHeight*h/2,p=m/r,x=function(e,t){if((0,s.Th)(e))return e.matrixWorld;if((0,s.MR)(e))return e;if((0,s.Zz)(e))return t.makeTranslation(e.x,e.y,e.z);throw Error("Invalid object type.")}(t,o);a.multiplyMatrices(e.matrixWorldInverse,x);let f=a.elements;f[4]*=-1,f[5]*=-1,f[6]*=-1,f[8]*=-1,f[9]*=-1,f[10]*=-1;let v=f[14];return f[14]+=u?-1:1,f[0]*=p,f[1]*=p,f[2]*=p,f[4]*=p,f[5]*=p,f[6]*=p,f[8]*=p,f[9]*=p,f[10]*=p,f[12]*=m,f[13]*=m,f[14]*=m,f[1]*=-1,f[5]*=-1,f[9]*=-1,f[13]*=-1,u&&(f[2]*=-1,f[6]*=-1,f[10]*=-1,f[14]*=-1),l>0&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.elements;c.set(n[0],n[1],n[2]);let r=c.length();n[0]=(0,i.lerp)(n[0],r,t),n[1]=(0,i.lerp)(n[1],0,t),n[2]=(0,i.lerp)(n[2],0,t),c.set(n[4],n[5],n[6]);let s=c.length();n[4]=(0,i.lerp)(n[4],0,t),n[5]=(0,i.lerp)(n[5],s,t),n[6]=(0,i.lerp)(n[6],0,t),c.set(n[8],n[9],n[10]);let l=c.length();n[8]=(0,i.lerp)(n[8],0,t),n[9]=(0,i.lerp)(n[9],0,t),n[10]=(0,i.lerp)(n[10],l,t)}(a,l),d>0&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.elements;c.set(r[0],r[1],r[2]);let s=(0,i.lerp)(1,t/c.length(),n);r[0]*=s,r[1]*=s,r[2]*=s,c.set(r[4],r[5],r[6]);let l=(0,i.lerp)(1,t/c.length(),n);r[4]*=l,r[5]*=l,r[6]*=l,c.set(r[8],r[9],r[10]);let a=(0,i.lerp)(1,t/c.length(),n);r[8]*=a,r[9]*=a,r[10]*=a}(a,u?v:-v,d),"translate(-50%, -50%) matrix3d(".concat(a.elements.join(","),")")}function x(e,t,n,r){let{pixelPerUnit:i=100,resetRotation:s=0,resetScale:a=0,leftHanded:o=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.style.perspective=l(n,e),t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform=p(n,r,e,i,s,a,o),t.style.zIndex=m(n,r)}}}]);