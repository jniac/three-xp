"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7804],{5714:function(e,t,r){r.d(t,{v:function(){return s}});let s={development:!1}},47804:function(e,t,r){r.d(t,{H7:function(){return f},Ky:function(){return d},_v:function(){return u}});var s=r(41291),n=r(81406),i=r(64740),o=r(13841),a=r(53679),l=r(5714),h=r(92605);let c=(0,n.createContext)(null);function d(e,t){let r=(0,n.useContext)(c);return(0,o.sv)(async function*(t,s){if(e){let t=e(r,s);if(t&&"function"==typeof t.next)do{let{value:e,done:r}=await t.next();if(r)break;yield e}while(s.mounted)}},null!=t?t:"always"),r}function u(e,t,r){let s=(0,n.useMemo)(()=>new i.Group,[]);return s.name=e,d(async function*(e,r){if(e.scene.add(s),yield()=>{s.clear(),s.removeFromParent()},t){let n=t(s,e,r);if(n&&"function"==typeof n.next)do{let{value:e,done:t}=await n.next();if(t)break;yield e}while(r.mounted)}},r),s}function p(e){let{children:t,className:r}=e,h=(0,n.useMemo)(()=>new a.Vu,[]),{ref:d}=(0,o.sv)(function*(e){let t=l.v.development?"/assets/":"/three-xp/assets/";h.loader.setPath(t),yield h.init(e),Object.assign(window,{three:h,THREE:i})},[]);return(0,s.jsx)("div",{ref:d,className:"ThreeProvider absolute-through ".concat(null!=r?r:""),children:(0,s.jsx)(c.Provider,{value:h,children:t})})}function f(e){return(0,h.O)()&&(0,s.jsx)(p,{...e})}},92605:function(e,t,r){r.d(t,{O:function(){return n}});var s=r(81406);function n(){let[e,t]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{t(!0)},[]),e}},53679:function(e,t,r){r.d(t,{Vu:function(){return z}});var s,n,i,o,a=r(64740),l=r(51776),h=r(72290),c=r(35459),d=r(4798),u=r(59544),p=r(33628);(s=i||(i={}))[s.Render=0]="Render",s[s.PostProcessing=1e3]="PostProcessing",s[s.GizmoRender=2e3]="GizmoRender",s[s.Outline=3e3]="Outline",s[s.Output=4e3]="Output",s[s.Antialiasing=5e3]="Antialiasing";class f{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let r=e[1],s=t[1];return r.type!==s.type?r.type-s.type:r.insertOrder-s.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,r]of this.passMap)r.type===e&&(yield[t,r])}addPass(e){let{type:t=i.Render,insertOrder:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===r){var s,n,o;r=(null!==(o=null===(n=[...this.getPassesByType(t)].at(-1))||void 0===n?void 0:null===(s=n[1])||void 0===s?void 0:s.insertOrder)&&void 0!==o?o:-1)+1}return this.passMap.set(e,{type:t,insertOrder:r}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,r){this.composer.setSize(e,t),this.composer.setPixelRatio(r),this.basicPasses.fxaa.uniforms.resolution.value.set(1/r/e,1/r/t)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let r of this.composer.passes)r instanceof d.C&&r.scene===t&&(r.scene=e)}render(e){this.composer.render(e)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:r}=this;for(let[s,n]of t.passes.entries()){let t=r.get(n);t?e.push("- ".concat(s,": ").concat(i[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(n.constructor.name)):e.push("- ".concat(s,": NO METADATA for ").concat(n.constructor.name))}return e.join("\n")}constructor(e,t,r,s){let n=new l.x(e),o=new Map,f=new d.C(t,s);f.clearAlpha=0,o.set(f,{type:i.Render,insertOrder:0}),n.addPass(f);let m=new d.C(r,s);o.set(m,{type:i.GizmoRender,insertOrder:0}),m.clear=!1,m.clearDepth=!1,n.addPass(m);let w=new h.f(new a.Vector2,t,s);o.set(w,{type:i.GizmoRender,insertOrder:0}),n.addPass(w);let v=new c.v;o.set(v,{type:i.Output,insertOrder:0}),n.addPass(v);let y=new u.T(p.C);o.set(y,{type:i.Antialiasing,insertOrder:0}),n.addPass(y),this.composer=n,this.basicPasses={mainRender:f,gizmoRender:m,outline:w,output:v,fxaa:y},this.passMap=o}}var m=r(8423),w=r(51845),v=r(35859),y=r(11315),g=r(73437);(n=o||(o={}))[n.None=0]="None",n[n.LeftDown=1]="LeftDown",n[n.LeftDrag=2]="LeftDrag";class P{get ray(){return this.raycaster.ray}update(e,t,r){let{x:s,y:n}=t,i=(s-r.x)/r.width*2-1,o=-((n-r.y)/r.height*2)+1;this.camera=e,this.clientPosition.set(s,n),this.screenPosition.set(i,o),this.raycaster.setFromCamera(this.screenPosition,e)}constructor(){this.status={button:0},this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.clientPosition=new a.Vector2,this.screenPosition=new a.Vector2,this.raycaster=new a.Raycaster}}var b=r(48178),x=r(20893),C=r(91310);let L=["gltf","glb"],A=["png","jpg","jpeg","hdr","exr"];class R{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class E{setPath(e){this.loaders.gltf.setPath(e),this.loaders.texture.setPath(e),this.loaders.rgbeLoader.setPath(e),this.loaders.exrLoader.setPath(e)}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,r)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r)})}async loadRgbe(e){return new Promise((t,r)=>{this.loaders.rgbeLoader.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r)})}async loadExr(e){return new Promise((t,r)=>{this.loaders.exrLoader.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r),this._onAfterLoad.call()})}async load(e){let t=e.split(".").pop();if(L.includes(t))return this.loadGltf(e);if(A.includes(t))return new Promise((t,r)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,r)});throw Error("Unsupported extension: ".concat(t))}constructor(){this.loaders={gltf:new x.E,texture:new a.TextureLoader,rgbeLoader:new C.x,exrLoader:new b.I},this._onAfterLoad=new R}}class z{get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:r=null,target:s=null,element:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(t=(e=this.internal).orbitControls)&&void 0!==t||(e.orbitControls=new m.z(this.camera,this.renderer.domElement)),"string"==typeof n&&(n=document.querySelector(n)),n&&n!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new m.z(this.camera,n)),r&&(0,g.Q7)(r,this.internal.orbitControls.object.position),s&&(0,g.Q7)(s,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}init(e){let{onDestroy:t}=this;e.appendChild(this.renderer.domElement);let r=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},s=new ResizeObserver(r);s.observe(e),t(()=>{s.disconnect()}),r();let n=e=>{let t=this.renderer.domElement.getBoundingClientRect();this.pointer.update(this.camera,{x:e.clientX,y:e.clientY},t)},i=e=>{this.pointer.status.button|=o.LeftDown},a=e=>{this.pointer.status.button&=~o.LeftDown};return e.addEventListener("pointermove",n),e.addEventListener("pointerdown",i),e.addEventListener("pointerup",a),t(()=>{e.removeEventListener("pointermove",n),e.removeEventListener("pointerdown",i),e.removeEventListener("pointerup",a)}),t((0,w.s)(this.ticker.requestActivation),this.ticker.onTick(this.update)),t(()=>{var e;null===(e=this.internal.orbitControls)||void 0===e||e.dispose()}),this}setSize(e){let{width:t,height:r,pixelRatio:s}={...this,...e};if(t===this.width&&r===this.height&&s===this.pixelRatio)return this;this.width=t,this.height=r,this.pixelRatio=s;let{renderer:n,perspectiveCamera:i,pipeline:o}=this;n.setSize(t,r),n.setPixelRatio(s),o.setSize(t,r,s);let a=t/r;return i.aspect=a,i.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,r=[this.scene];for(;r.length>0;){let e=r.shift();t(e)&&(yield e),r.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new a.WebGLRenderer,this.perspectiveCamera=new a.PerspectiveCamera,this.orhtographicCamera=new a.PerspectiveCamera,this.scene=new a.Scene,this.gizmoScene=new a.Scene,this.pointer=new P,this.ticker=y.vB.get("three").set({activeDuration:8}),this.pipeline=new f(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new a.Vector2,fullSize:new a.Vector2,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=new E,this.destroy=()=>{(0,v.o)(this.internal.destroyables)},this.update=e=>{var t;null===(t=this.internal.orbitControls)||void 0===t||t.update(e.deltaTime),this.pipeline.render(e.deltaTime)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0)}}},73437:function(e,t,r){r.d(t,{Gg:function(){return l},Q7:function(){return a},Xe:function(){return h},iK:function(){return o}});var s=r(64740);let n={rad:1,deg:Math.PI/180,turn:2*Math.PI};function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rad",r=t,s=0;if("number"==typeof e)s=e;else{let t=e.match(/^\s*(-?[0-9.]+)\s*(\/\s*-?[0-9.]+)?\s*(rad|deg|turn)\s*$/);if(t){let[e,n,i,o]=t;s=Number.parseFloat(n),i&&(s/=Number.parseFloat(i.slice(1))),r=o}else s=Number.parseFloat(e)}return s*n[r]}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector2;if("number"==typeof e)return t.set(e,e);if(Array.isArray(e)){let[r,s]=e;return t.set(r,s)}if("width"in e){let{width:r,height:s}=e;return t.set(r,s)}let{x:r,y:n}=e;return t.set(r,n)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;if("number"==typeof e)return t.set(e,e,e);if(Array.isArray(e)){let[r,s,n=0]=e;return t.set(r,s,n)}if("width"in e){let{width:r,height:s,depth:n}=e;return t.set(r,s,n)}let{x:r,y:n,z:i=0}=e;return t.set(r,n,i)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Euler;if(e instanceof s.Euler)return t.copy(e);if(Array.isArray(e)){let[r,s,n,o="rad",a="XYZ"]=e;return t.set(i(r,o),i(s,o),i(n,o),a)}let{x:r,y:n,z:o,order:a="XYZ",unit:l="rad"}=e;return t.set(i(r,l),i(n,l),i(o,l),a)}let h=(()=>{let e=new s.Vector3,t=new s.Euler,r=new s.Vector3,n=new s.Quaternion;return function(i,o){let{x:h=0,y:c=0,z:d=0,position:u={x:h,y:c,z:d},rotationX:p=0,rotationY:f=0,rotationZ:m=0,rotationOrder:w="XYZ",rotation:v={x:p,y:f,z:m,order:w},useDegree:y=!1,scaleX:g=1,scaleY:P=1,scaleZ:b=1,scaleScalar:x=1,scale:C={x:g,y:P,z:b}}=i;if(y){let e=Math.PI/180;v.x*=e,v.y*=e,v.z*=e}if(o instanceof s.Matrix4)return a(u,e),l(v,t),a(C,r).multiplyScalar(x),n.setFromEuler(t),o.compose(e,n,r);if(o instanceof s.Object3D)return a(u,o.position),l(v,o.rotation),a(C,o.scale).multiplyScalar(x),o;throw Error("Invalid out argument")}})()},35859:function(e,t,r){r.d(t,{o:function(){return s}});function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}}}]);