(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7193],{9723:(e,t,s)=>{"use strict";s.d(t,{Y:()=>n});var i=s(49797),r=s(60041);let o={luminosity:.5};class n extends i.V9B{constructor(e){let{luminosity:t,...s}={...o,...e},n={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uLuminosity:{value:t}};super(s),this.onBeforeCompile=e=>{r.b.with(e).uniforms(n).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      ")},this.sunPosition=n.uSunPosition.value}}},25809:(e,t,s)=>{"use strict";s.d(t,{P:()=>n});var i=s(49797),r=s(22641);let o={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class n extends i.DXC{set(e){let{color:t,opacity:s,size:n,step:a,frame:l,plane:c}={...o,...e},h=(0,r.wX)(n),p=(0,r.wX)(null!=a?a:h),d=[],u=(e,t)=>d.push(new i.Pq0(e,t,0));l&&(u(-h.x/2,h.y/2),u(h.x/2,h.y/2),u(h.x/2,h.y/2),u(h.x/2,-h.y/2),u(h.x/2,-h.y/2),u(-h.x/2,-h.y/2),u(-h.x/2,-h.y/2),u(-h.x/2,h.y/2));let m=Math.ceil(-h.x/2/p.x)*p.x;m===-h.x/2&&(m+=p.x);do u(m,-h.y/2),u(m,h.y/2),m+=p.x;while(m<h.x/2);let y=Math.ceil(-h.y/2/p.y)*p.y;y===-h.y/2&&(y+=p.y);do u(-h.x/2,y),u(h.x/2,y),y+=p.y;while(y<h.y/2);switch(this.geometry.setFromPoints(d),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=s,this.material.transparent=s<1,this}constructor(e){super(),this.set(null!=e?e:o)}}},39787:(e,t,s)=>{"use strict";function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}s.d(t,{e:()=>r,z:()=>i});class r{collect(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t)if(e)if(Symbol.iterator in e)for(let t of e)t&&this.destroyables.push(t);else this.destroyables.push(e)}constructor(){this.destroyables=[],this.destroy=()=>{i(this.destroyables),this.destroyables=[]}}}},68480:(e,t,s)=>{Promise.resolve().then(s.bind(s,73341))},73341:(e,t,s)=>{"use strict";s.d(t,{Main:()=>y});var i=s(70691),r=s(49797),o=s(12719),n=s(64028),a=s(84306),l=s(25809),c=s(56647),h=s(9723),p=s(87381),d=s(36508);class u extends r.YJl{onTick(e){let{sphere:t,pivot:s,position:i}=this.parts,o=e.lerpSin01Time(.5,1.5,{frequency:.2}),n=new r.Pq0().copy(s.position).addScaledVector(s.position,-o);t.matrixAutoUpdate=!1,t.matrix.makeScale(o,o,o).setPosition(n.add(i.position))}constructor(...e){super(...e),this.parts={sphere:(0,p.mj)(new r.eaF(new r.WBB(1,8),new h.Y),{name:"sphere",parent:this}),circle:(0,p.mj)(new c.R().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,p.mj)(new r.YJl,{name:"pivot",parent:this}),position:(0,p.mj)(new r.YJl,{name:"position",parent:this}),grid:(0,p.mj)(new l.P,{name:"grid",parent:this,rotationX:"90deg"})}}}function m(){let e=(0,a.hG)();return(0,a.yk)(function*(t){t.scene.background=new r.Q1f("#345");let s=new u;t.scene.add(s),yield(0,d.xy)("three",e=>s.onTick(e)),e.sceneSelection.set("Hop!",[s.parts.pivot]),e.toolType.set(o.pv.Move),(0,n._t)(e,s.parts.pivot),yield()=>s.removeFromParent()},[]),null}function y(){return(0,i.jsxs)(a.YV,{children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,i.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,i.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2193,5611,7190,7223,9635,8921,4957,7775,16,9547,4638,6726,2598,7373,4266,4135,4179,7558,1319,6852,7358],()=>t(68480)),_N_E=e.O()}]);