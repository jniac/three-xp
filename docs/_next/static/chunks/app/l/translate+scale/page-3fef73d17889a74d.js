(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7193],{9723:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r});var o=i(49797),n=i(60041);let s={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class r extends o.V9B{constructor(e){let{rampPower:t,shadowColor:i,luminosity:r,onBeforeCompile:a,...l}={...s,...e},c={uSunPosition:{value:new o.Pq0(.5,.7,.3)},uShadowColor:{value:new o.Q1f(i)},uRampPower:{value:t},uLuminosity:{value:r}};super(l),this.onBeforeCompile=e=>{n.b.with(e).uniforms(c).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n        ").fragment.after("map_fragment","\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==a||a(e)},this.sunPosition=c.uSunPosition.value}}},25809:(e,t,i)=>{"use strict";i.d(t,{P:()=>r});var o=i(49797),n=i(92381);let s={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class r extends o.DXC{set(e){let{color:t,opacity:i,size:r,step:a,frame:l,plane:c}={...s,...e},p=(0,n.wX)(r),u=(0,n.wX)(null!=a?a:p),m=[],d=(e,t)=>m.push(new o.Pq0(e,t,0));l&&(d(-p.x/2,p.y/2),d(p.x/2,p.y/2),d(p.x/2,p.y/2),d(p.x/2,-p.y/2),d(p.x/2,-p.y/2),d(-p.x/2,-p.y/2),d(-p.x/2,-p.y/2),d(-p.x/2,p.y/2));let h=Math.ceil(-p.x/2/u.x)*u.x;h===-p.x/2&&(h+=u.x);do d(h,-p.y/2),d(h,p.y/2),h+=u.x;while(h<p.x/2);let x=Math.ceil(-p.y/2/u.y)*u.y;x===-p.y/2&&(x+=u.y);do d(-p.x/2,x),d(p.x/2,x),x+=u.y;while(x<p.y/2);switch(this.geometry.setFromPoints(m),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=i,this.material.transparent=i<1,this}constructor(e){super(),this.set(null!=e?e:s)}}},68480:(e,t,i)=>{Promise.resolve().then(i.bind(i,73341))},73341:(e,t,i)=>{"use strict";i.d(t,{Main:()=>x});var o=i(70691),n=i(49797),s=i(12719),r=i(64028),a=i(84306),l=i(25809),c=i(56647),p=i(9723),u=i(87381),m=i(36508);class d extends n.YJl{onTick(e){let{sphere:t,pivot:i,position:o}=this.parts,s=e.lerpSin01Time(.5,1.5,{frequency:.2}),r=new n.Pq0().copy(i.position).addScaledVector(i.position,-s);t.matrixAutoUpdate=!1,t.matrix.makeScale(s,s,s).setPosition(r.add(o.position))}constructor(...e){super(...e),this.parts={sphere:(0,u.mj)(new n.eaF(new n.WBB(1,8),new p.Y),{name:"sphere",parent:this}),circle:(0,u.mj)(new c.R().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,u.mj)(new n.YJl,{name:"pivot",parent:this}),position:(0,u.mj)(new n.YJl,{name:"position",parent:this}),grid:(0,u.mj)(new l.P,{name:"grid",parent:this,rotationX:"90deg"})}}}function h(){let e=(0,a.hG)();return(0,a.yk)(function*(t){t.scene.background=new n.Q1f("#345");let i=new d;t.scene.add(i),yield(0,m.xy)("three",e=>i.onTick(e)),e.sceneSelection.set("Hop!",[i.parts.pivot]),e.toolType.set(s.pv.Move),(0,r._t)(e,i.parts.pivot),yield()=>i.removeFromParent()},[]),null}function x(){return(0,o.jsxs)(a.YV,{children:[(0,o.jsx)(h,{}),(0,o.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,o.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,o.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2193,5611,7190,7962,9635,8921,4512,7775,7436,7706,4638,6726,3231,9303,7456,7112,7558,6647,1319,6852,7358],()=>t(68480)),_N_E=e.O()}]);