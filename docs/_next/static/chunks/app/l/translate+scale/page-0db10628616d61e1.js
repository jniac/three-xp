(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7193],{15931:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var i=n(49797),o=n(93432);let r={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class s extends i.DXC{set(e){let{color:t,opacity:n,size:s,step:a,frame:l,plane:c}={...r,...e},u=(0,o.wX)(s),d=(0,o.wX)(null!=a?a:u),p=[],m=(e,t)=>p.push(new i.Pq0(e,t,0));l&&(m(-u.x/2,u.y/2),m(u.x/2,u.y/2),m(u.x/2,u.y/2),m(u.x/2,-u.y/2),m(u.x/2,-u.y/2),m(-u.x/2,-u.y/2),m(-u.x/2,-u.y/2),m(-u.x/2,u.y/2));let y=Math.ceil(-u.x/2/d.x)*d.x;y===-u.x/2&&(y+=d.x);do m(y,-u.y/2),m(y,u.y/2),y+=d.x;while(y<u.x/2);let f=Math.ceil(-u.y/2/d.y)*d.y;f===-u.y/2&&(f+=d.y);do m(-u.x/2,f),m(u.x/2,f),f+=d.y;while(f<u.y/2);switch(this.geometry.setFromPoints(p),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:r)}}},16465:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var i=n(49797),o=n(7147);let r={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class s extends i.V9B{constructor(e){let{rampPower:t,shadowColor:n,luminosity:s,onBeforeCompile:a,...l}={...r,...e},c={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uShadowColor:{value:new i.Q1f(n)},uRampPower:{value:t},uLuminosity:{value:s}};super(l),this.onBeforeCompile=e=>{o.bI.with(e).uniforms(c).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vWorldNormal = mat3(instanceMatrix) * vWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==a||a(e)},this.sunPosition=c.uSunPosition.value}}},63106:(e,t,n)=>{"use strict";function i(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{a:()=>a});let o={preventDefault:!1,strictTarget:void 0},r={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:"",phase:"down"},s=0;function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let a=s++,[l,c,u]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:d}={...o,...c},p=null,m=e=>{var t;if((null!=(t=c.strictTarget)?!!t:l===document.body)&&e.target!==l)return;"keydown"===e.type&&(p=e);let{ctrlKey:n=!1,altKey:o=!1,shiftKey:s=!1,metaKey:m=!1}=null!=p?p:{},y={id:a,event:e,downEvent:p,modifiers:{ctrl:n,alt:o,shift:s,meta:m}};for(let t=0,a=u.length;t<a;t++){let[a,l]=u[t],{key:c,keyCaseInsensitive:f,code:h,noModifiers:v,modifiers:w,phase:x="down"}=function(e){let t="string"==typeof e?{...r,key:e}:{...r,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(a);switch(e.type){case"keydown":if("down"!==x)continue;break;case"keyup":if("up"!==x)continue}Object.values({key:i(f?e.key.toLowerCase():e.key,c),code:i(e.code,h),noModifiers:!v||!1===n&&!1===o&&!1===s&&!1===m,modifiers:function(e,t){let{ctrlKey:n,altKey:i,shiftKey:o,metaKey:r}=e;if("function"==typeof t)return t({ctrl:n,alt:i,shift:o,meta:r});let{ctrl:s=!1,alt:a=!1,shift:l=!1,meta:c=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return s===n&&a===i&&l===o&&c===r}(p,w)}).every(Boolean)&&(d&&e.preventDefault(),l(y))}};return l.addEventListener("keydown",m,{passive:!1}),l.addEventListener("keyup",m,{passive:!1}),{destroy:()=>{l.removeEventListener("keydown",m),l.removeEventListener("keyup",m)}}}},68480:(e,t,n)=>{Promise.resolve().then(n.bind(n,73341))},73341:(e,t,n)=>{"use strict";n.d(t,{Main:()=>f});var i=n(70691),o=n(49797),r=n(12719),s=n(64028),a=n(84306),l=n(15931),c=n(48181),u=n(16465),d=n(79911),p=n(36508);class m extends o.YJl{onTick(e){let{sphere:t,pivot:n,position:i}=this.parts,r=e.lerpSin01Time(.5,1.5,{frequency:.2}),s=new o.Pq0().copy(n.position).addScaledVector(n.position,-r);t.matrixAutoUpdate=!1,t.matrix.makeScale(r,r,r).setPosition(s.add(i.position))}constructor(...e){super(...e),this.parts={sphere:(0,d.mj)(new o.eaF(new o.WBB(1,8),new u.Y),{name:"sphere",parent:this}),circle:(0,d.mj)(new c.R().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,d.mj)(new o.YJl,{name:"pivot",parent:this}),position:(0,d.mj)(new o.YJl,{name:"position",parent:this}),grid:(0,d.mj)(new l.P,{name:"grid",parent:this,rotationX:"90deg"})}}}function y(){let e=(0,a.hG)();return(0,a.yk)(function*(t){t.scene.background=new o.Q1f("#345");let n=new m;t.scene.add(n),yield(0,p.xy)("three",e=>n.onTick(e)),e.sceneSelection.set("Hop!",[n.parts.pivot]),e.toolType.set(r.pv.Move),(0,s._t)(e,n.parts.pivot),yield()=>n.removeFromParent()},[]),null}function f(){return(0,i.jsxs)(a.YV,{children:[(0,i.jsx)(y,{}),(0,i.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,i.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,i.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2193,5611,7190,7962,9635,8921,4512,7775,7436,7706,146,6726,3445,9332,3414,2143,7558,8181,1319,6852,7358],()=>t(68480)),_N_E=e.O()}]);