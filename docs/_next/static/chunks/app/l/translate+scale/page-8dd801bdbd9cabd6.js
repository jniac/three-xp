(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7193],{9723:(e,t,o)=>{"use strict";o.d(t,{Y:()=>n});var s=o(49797),i=o(60041);let r={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class n extends s.V9B{constructor(e){let{rampPower:t,shadowColor:o,luminosity:n,onBeforeCompile:a,...l}={...r,...e},c={uSunPosition:{value:new s.Pq0(.5,.7,.3)},uShadowColor:{value:new s.Q1f(o)},uRampPower:{value:t},uLuminosity:{value:n}};super(l),this.onBeforeCompile=e=>{i.b.with(e).uniforms(c).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n        ").fragment.after("map_fragment","\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==a||a(e)},this.sunPosition=c.uSunPosition.value}}},25809:(e,t,o)=>{"use strict";o.d(t,{P:()=>n});var s=o(49797),i=o(96273);let r={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class n extends s.DXC{set(e){let{color:t,opacity:o,size:n,step:a,frame:l,plane:c}={...r,...e},p=(0,i.wX)(n),u=(0,i.wX)(null!=a?a:p),h=[],d=(e,t)=>h.push(new s.Pq0(e,t,0));l&&(d(-p.x/2,p.y/2),d(p.x/2,p.y/2),d(p.x/2,p.y/2),d(p.x/2,-p.y/2),d(p.x/2,-p.y/2),d(-p.x/2,-p.y/2),d(-p.x/2,-p.y/2),d(-p.x/2,p.y/2));let m=Math.ceil(-p.x/2/u.x)*u.x;m===-p.x/2&&(m+=u.x);do d(m,-p.y/2),d(m,p.y/2),m+=u.x;while(m<p.x/2);let y=Math.ceil(-p.y/2/u.y)*u.y;y===-p.y/2&&(y+=u.y);do d(-p.x/2,y),d(p.x/2,y),y+=u.y;while(y<p.y/2);switch(this.geometry.setFromPoints(h),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=o,this.material.transparent=o<1,this}constructor(e){super(),this.set(null!=e?e:r)}}},39787:(e,t,o)=>{"use strict";function s(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}o.d(t,{e:()=>i,z:()=>s});class i{collect(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];for(let e of t)if(e)if(Symbol.iterator in e)for(let t of e)t&&this.destroyables.push(t);else this.destroyables.push(e)}constructor(){this.destroyables=[],this.destroy=()=>{s(this.destroyables),this.destroyables=[]}}}},68480:(e,t,o)=>{Promise.resolve().then(o.bind(o,73341))},73341:(e,t,o)=>{"use strict";o.d(t,{Main:()=>y});var s=o(70691),i=o(49797),r=o(12719),n=o(64028),a=o(84306),l=o(25809),c=o(56647),p=o(9723),u=o(87381),h=o(36508);class d extends i.YJl{onTick(e){let{sphere:t,pivot:o,position:s}=this.parts,r=e.lerpSin01Time(.5,1.5,{frequency:.2}),n=new i.Pq0().copy(o.position).addScaledVector(o.position,-r);t.matrixAutoUpdate=!1,t.matrix.makeScale(r,r,r).setPosition(n.add(s.position))}constructor(...e){super(...e),this.parts={sphere:(0,u.mj)(new i.eaF(new i.WBB(1,8),new p.Y),{name:"sphere",parent:this}),circle:(0,u.mj)(new c.R().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,u.mj)(new i.YJl,{name:"pivot",parent:this}),position:(0,u.mj)(new i.YJl,{name:"position",parent:this}),grid:(0,u.mj)(new l.P,{name:"grid",parent:this,rotationX:"90deg"})}}}function m(){let e=(0,a.hG)();return(0,a.yk)(function*(t){t.scene.background=new i.Q1f("#345");let o=new d;t.scene.add(o),yield(0,h.xy)("three",e=>o.onTick(e)),e.sceneSelection.set("Hop!",[o.parts.pivot]),e.toolType.set(r.pv.Move),(0,n._t)(e,o.parts.pivot),yield()=>o.removeFromParent()},[]),null}function y(){return(0,s.jsxs)(a.YV,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,s.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,s.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2193,5611,7190,7223,9635,8921,4957,7775,6814,9547,4638,6726,2598,1213,7112,4135,4179,7558,1319,6852,7358],()=>t(68480)),_N_E=e.O()}]);