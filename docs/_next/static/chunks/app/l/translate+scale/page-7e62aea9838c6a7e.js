(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3938],{93841:function(e,t,r){Promise.resolve().then(r.bind(r,22125))},22125:function(e,t,r){"use strict";r.d(t,{Main:function(){return g}});var n=r(32617),o=r(88780),a=r(10725),i=r(92059),s=r(33966),c=r(30636),l=r(97219),u=r(12042),p=r(78780),m=r(29368);class f extends o.Group{onTick(e){let{sphere:t,pivot:r,position:n}=this.parts,a=e.lerpSin01Time(.5,1.5,{frequency:.2}),i=new o.Vector3().copy(r.position).addScaledVector(r.position,-a);t.matrixAutoUpdate=!1,t.matrix.makeScale(a,a,a).setPosition(i.add(n.position))}constructor(...e){super(...e),this.parts={sphere:(0,p.cY)(new o.Mesh(new o.IcosahedronGeometry(1,8),new u.P),{name:"sphere",parent:this}),circle:(0,p.cY)(new l.O().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,p.cY)(new o.Group,{name:"pivot",parent:this}),position:(0,p.cY)(new o.Group,{name:"position",parent:this}),grid:(0,p.cY)(new c.K,{name:"grid",parent:this,rotationX:"90deg"})}}}function h(){let e=(0,s.jE)();return(0,s.Ky)(function*(t){t.scene.background=new o.Color("#345");let r=new f;t.scene.add(r),yield(0,m.RC)("three",e=>r.onTick(e)),e.sceneSelection.set("Hop!",[r.parts.pivot]),e.toolType.set(a.qK.Move),(0,i.NR)(e,r.parts.pivot),yield()=>r.removeFromParent()},[]),null}function g(){return(0,n.jsxs)(s.c,{children:[(0,n.jsx)(h,{}),(0,n.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,n.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,n.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}},30636:function(e,t,r){"use strict";r.d(t,{K:function(){return i}});var n=r(88780),o=r(32219);let a={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class i extends n.LineSegments{set(e){let{color:t,opacity:r,size:i,step:s,frame:c}={...a,...e},l=(0,o.iK)(i),u=(0,o.iK)(null!=s?s:l),p=[],m=(e,t)=>p.push(new n.Vector3(e,t,0));c&&(m(-l.x/2,+l.y/2),m(+l.x/2,+l.y/2),m(+l.x/2,+l.y/2),m(+l.x/2,-l.y/2),m(+l.x/2,-l.y/2),m(-l.x/2,-l.y/2),m(-l.x/2,-l.y/2),m(-l.x/2,+l.y/2));let f=Math.ceil(-l.x/2/u.x)*u.x;f===-l.x/2&&(f+=u.x);do m(f,-l.y/2),m(f,+l.y/2),f+=u.x;while(f<l.x/2);let h=Math.ceil(-l.y/2/u.y)*u.y;h===-l.y/2&&(h+=u.y);do m(-l.x/2,h),m(+l.x/2,h),h+=u.y;while(h<l.y/2);return this.geometry.setFromPoints(p),this.material.color.set(t),this.material.opacity=r,this.material.transparent=r<1,this}constructor(e){super(),this.set(null!=e?e:a)}}},97219:function(e,t,r){"use strict";r.d(t,{O:function(){return u}});var n=r(88780),o=r(23420),a=r(32219);let i=new n.Vector2,s=new n.Vector3,c=new n.Matrix4;function l(e,t,r){if(null==r?void 0:r.transform)for(let e of((0,a.Xe)(r.transform,c),t))e.applyMatrix4(c);(null==r?void 0:r.color)&&e.colors.set(e.points.length,new n.Color(r.color)),e.points.push(...t)}class u extends n.LineSegments{showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new n.LineBasicMaterial({color:this.material.color,transparent:!0,depthFunc:n.GreaterDepth,opacity:e}),r=new n.LineSegments(this.geometry,t);return this.add(r),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setFromPoints([new n.Vector3,new n.Vector3]),this}draw(){if(this.geometry.setFromPoints(this.points),this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let t=new n.Color(null!==(e=this.colors.get(0))&&void 0!==e?e:"white"),r=this.points.length,o=function(e){let t=e.attributes.color;if(t)return t;{let t=new n.BufferAttribute(new Float32Array(3*e.attributes.position.count),3);return e.setAttribute("color",t),t}}(this.geometry);for(let e=0;e<r;e++){let r=this.colors.get(e);r&&t.copy(r),o.setXYZ(e,t.r,t.g,t.b)}}return this}line(e,t,r){return l(this,[(0,a.Q7)(e),(0,a.Q7)(t)],r),this}polygon(e,t){let r=e.map(e=>(0,a.Q7)(e)),n=[];for(let e=0;e<r.length;e++)n.push(r[e],r[(e+1)%r.length]);return l(this,n,t),this}polyline(e,t){let r=e.map(e=>(0,a.Q7)(e)),n=[];for(let e=0;e<r.length-1;e++)n.push(r[e],r[e+1]);return l(this,n,t),this}circle(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let{x:o,y:s,radius:c,segments:p,...m}={...u.circleDefaultOptions,...(()=>{if(t.length>1){let[e,r,n]=t,{x:o,y:s}=(0,a.iK)(e,i);return{x:o,y:s,radius:r,...n}}return t[0]})()},f=new n.Vector3(1,0,0),h=new n.Vector3(0,1,0),g=[];for(let e=0;e<p;e++){let t=e/p*Math.PI*2,r=(e+1)/p*Math.PI*2,a=Math.cos(t)*c,i=Math.sin(t)*c,l=Math.cos(r)*c,u=Math.sin(r)*c,m=new n.Vector3(o,s,0).addScaledVector(f,a).addScaledVector(h,i),d=new n.Vector3(o,s,0).addScaledVector(f,l).addScaledVector(h,u);g.push(m,d)}return l(this,g,m),this}rectangle(e,t){let{centerX:r,centerY:a,width:i,height:s}=o.Ae.from(e),c=i/2,u=s/2,p=new n.Vector3(r-c,a-u,0),m=new n.Vector3(r+c,a-u,0),f=new n.Vector3(r+c,a+u,0),h=new n.Vector3(r-c,a+u,0);return l(this,[p,m,m,f,f,h,h,p],t),this}box(){let{center:e=[0,0,0],size:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:r,y:o,z:i}=(0,a.Q7)(e,s),{x:c,y:l,z:u}=(0,a.Q7)(t,s),p=c/2,m=l/2,f=u/2,h=new n.Vector3(r-p,o-m,i-f),g=new n.Vector3(r+p,o-m,i-f),d=new n.Vector3(r+p,o+m,i-f),_=new n.Vector3(r-p,o+m,i-f),v=new n.Vector3(r-p,o-m,i+f),w=new n.Vector3(r+p,o-m,i+f),x=new n.Vector3(r+p,o+m,i+f),y=new n.Vector3(r-p,o+m,i+f);return this.points.push(h,g,g,d,d,_,_,h),this.points.push(v,w,w,x,x,y,y,v),this.points.push(h,v,g,w,d,x,_,y),this}plus(e,t,r){let o=t/2,{x:s,y:c}=(0,a.iK)(e,i),u=new n.Vector3(s-o,c,0);return l(this,[u,new n.Vector3(s+o,c,0),new n.Vector3(s,c-o,0),new n.Vector3(s,c+o,0)],r),this}cross(e,t,r){let o=t/2,{x:s,y:c}=(0,a.iK)(e,i),u=new n.Vector3(s-o,c-o,0);return l(this,[u,new n.Vector3(s+o,c+o,0),new n.Vector3(s-o,c+o,0),new n.Vector3(s+o,c-o,0)],r),this}constructor(...e){super(...e),this.points=[],this.colors=new Map}}u.circleDefaultOptions={x:0,y:0,radius:.5,segments:96}},12042:function(e,t,r){"use strict";r.d(t,{P:function(){return i}});var n=r(88780),o=r(23247);let a={luminosity:.5};class i extends n.MeshBasicMaterial{constructor(e){let{luminosity:t,...r}={...a,...e},i={uSunPosition:{value:new n.Vector3(.5,.7,.3)},uLuminosity:{value:t}};super(r),this.onBeforeCompile=e=>o.b.with(e).uniforms(i).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      "),this.sunPosition=i.uSunPosition.value}}},23247:function(e,t,r){"use strict";r.d(t,{b:function(){return v},R:function(){return x}});var n=r(77478),o=r(88780);let a=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var i=r(58100);class s{static from(e,t){if(t instanceof i.Observable){if("number"==typeof t.value)return new s(e,t);throw Error("Observable value must be a number")}let r=typeof t;return"object"===r&&(t.constructor===Object||t instanceof o.Uniform)&&"value"in t?new s(e,t):"string"===r?new s(e,{value:new o.Color(t)}):new s(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,r="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(r="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(r,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(r,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(r,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(r,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(r,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(r,";");if(t.isTexture)return t.isCubeTexture?"uniform samplerCube ".concat(e).concat(r,";"):"uniform sampler2D ".concat(e).concat(r,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function c(){let e=(0,n._)(["","s*",""],["","\\s*",""]);return c=function(){return e},e}let l=null,u=e=>(l=e,v),p="// ShaderForge (injected code) ->",m="// <- ShaderForge",f=e=>"".concat(p,"\n").concat(e.trim(),"\n").concat(m),h=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=RegExp(String.raw(c(),t(m),t(p)),"g");return e.replaceAll(r,"")};class g{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="#include <".concat(e,">"),n=this.type;if(t&&!1===l[n].includes(r))throw Error('"'.concat(r,'" is not present in the shader template program.'));return{pattern:r,type:n}}replace(e,t){if(e instanceof RegExp){let{type:r}=this;l[r].match(e),l[r]=l[r].replace(e,f(t))}else{let{type:r,pattern:n}=this.getPattern(e),o=f(t);l[r]=l[r].replace(n,o)}return v}inject(e,t,r){let{type:n,pattern:o}=this.getPattern(t),a="after"===e?"".concat(o,"\n").concat(f(r)):"".concat(f(r),"\n").concat(o);return l[n]=l[n].replace(o,a),v}injectTokenComments(){for(let e of a){let{type:t,pattern:r}=this.getPattern(e,{throwError:!1});l[t]=l[t].replace(r,"\n        ".concat(r,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return v}header(e){let t=this.type;return l[t]="".concat(e,"\n").concat(l[t]),v}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l[this.type]=l[this.type].replace("void main() {","\n      ".concat(f(t.join("\n\n")),"\n      void main() {\n    ")),v}mainBeforeAll(e){return l[this.type]=l[this.type].replace("void main() {","void main() {\n        ".concat(f(e))),v}mainAfterAll(e){return l[this.type]=l[this.type].replace(/}\s*$/,"\n      ".concat(f(e),"\n    }")),v}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[r,n]of Object.entries(e)){let e=s.from(r,n);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,r]of Object.entries(e)){let e=s.from(t,r);if(t in l.uniforms){if(e.value!==l.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else l.uniforms[t]=e}}(e)}return v}clean(){return l[this.type]=h(l[this.type]),v}printFinalCode(){return console.log(l[this.type].replace(/#include <(.*)>/g,(e,t)=>{let r=o.ShaderChunk[t];if(!r)throw Error('Shader chunk "'.concat(t,'" not found'));return r})),v}constructor(e){this.type=e}}let d=new g("fragmentShader"),_=new g("vertexShader"),v=Object.assign(function(e){return e&&u(e),v},{shaderName:function(e){return l.shaderName="".concat(e," (ShaderForge)"),v},defines:function(e){return l.defines?Object.assign(l.defines,e):l.defines=e,v},uniforms:function(e){return _.uniforms(e),d.uniforms(e),v},varying:function(e){let t="";if("string"==typeof e)t=e;else{let r=[];for(let[t,n]of Object.entries(e))r.push("varying ".concat(n," ").concat(t,";"));t=r.join("\n")}return _.top(t),d.top(t),v},top:function(e){return _.top(e),d.top(e),v},vertex:_,fragment:d,header:function(e){return d.header(e),_.header(e),v},clean:function(){return d.clean(),_.clean(),v},with:u,wrap:(e,t)=>(e.onBeforeCompile=e=>{l=e},e)}),w=new o.Color;function x(e){let{r:t,g:r,b:n}=w.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(r.toFixed(3),", ").concat(n.toFixed(3),")")}},41737:function(e,t,r){"use strict";r.d(t,{N:function(){return i}});var n=r(88780),o=r(32219);new n.Vector3(0,0,0),new n.Euler(0,0,0,"XYZ"),new n.Vector3(1,1,1);let a={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,visible:void 0,name:void 0,parent:void 0};function i(e,t){let{x:r,y:i,z:s,position:c=new n.Vector3(r,i,s),rotationX:l,rotationY:u,rotationZ:p,rotationOrder:m,rotationUnit:f,rotation:h,scaleX:g,scaleY:d,scaleZ:_,scaleScalar:v,scale:w=new n.Vector3(g,d,_).multiplyScalar(v),visible:x,name:y,parent:b}={...a,...t};return(0,o.Q7)(c,e.position),(0,o.Gg)(null!=h?h:[l,u,p,m,f],e.rotation),(0,o.Q7)(w,e.scale),void 0!==x&&(e.visible=x),void 0!==y&&(e.name=y),void 0!==b&&b!==e.parent&&(null===b?e.removeFromParent():b.add(e)),e}},78780:function(e,t,r){"use strict";r.d(t,{H$:function(){return s},bB:function(){return i},cY:function(){return a}});var n=r(32219),o=r(41737);function a(e,t,r){return t&&((0,n.nK)(t)?t.add(e):(0,o.N)(e,t)),null==r||r(e),e}let i=a;function s(e,t){return function(e,t){let r=e;for(;r.parent;){if(r.parent===t)return!0;r=r.parent}return!1}(t,e)}}},function(e){e.O(0,[7987,7512,1561,7834,6158,3956,1067,3310,749,812,2038,3420,1540,9258,5284,1618,5694,2840,1744],function(){return e(e.s=93841)}),_N_E=e.O()}]);