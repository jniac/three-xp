(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3938],{93841:function(e,t,n){Promise.resolve().then(n.bind(n,22125))},22125:function(e,t,n){"use strict";n.d(t,{Main:function(){return h}});var i=n(32617),r=n(88780),s=n(10725),o=n(92059),a=n(33966),c=n(30636),l=n(97219),u=n(12042),d=n(78780),p=n(29368);class v extends r.Group{onTick(e){let{sphere:t,pivot:n,position:i}=this.parts,s=e.lerpSin01Time(.5,1.5,{frequency:.2}),o=new r.Vector3().copy(n.position).addScaledVector(n.position,-s);t.matrixAutoUpdate=!1,t.matrix.makeScale(s,s,s).setPosition(o.add(i.position))}constructor(...e){super(...e),this.parts={sphere:(0,d.cY)(new r.Mesh(new r.IcosahedronGeometry(1,8),new u.P),{name:"sphere",parent:this}),circle:(0,d.cY)(new l.O().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,d.cY)(new r.Group,{name:"pivot",parent:this}),position:(0,d.cY)(new r.Group,{name:"position",parent:this}),grid:(0,d.cY)(new c.K,{name:"grid",parent:this,rotationX:"90deg"})}}}function m(){let e=(0,a.jE)();return(0,a.Ky)(function*(t){t.scene.background=new r.Color("#345");let n=new v;t.scene.add(n),yield(0,p.RC)("three",e=>n.onTick(e)),e.sceneSelection.set("Hop!",[n.parts.pivot]),e.toolType.set(s.qK.Move),(0,o.NR)(e,n.parts.pivot),yield()=>n.removeFromParent()},[]),null}function h(){return(0,i.jsxs)(a.c,{children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,i.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,i.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}},30699:function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=1===t.length?[window,t[0]]:t,s=()=>{r()};return i.addEventListener("mousemove",s,{passive:!0}),i.addEventListener("mousedown",s,{passive:!0}),i.addEventListener("mouseup",s,{passive:!0}),i.addEventListener("touchstart",s,{passive:!0}),i.addEventListener("touchmove",s,{passive:!0}),i.addEventListener("wheel",s,{passive:!0}),i.addEventListener("keydown",s,{passive:!0}),i.addEventListener("keyup",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0}),{destroy:()=>{i.removeEventListener("mousemove",s),i.removeEventListener("mousedown",s),i.removeEventListener("mouseup",s),i.removeEventListener("touchstart",s),i.removeEventListener("touchmove",s),i.removeEventListener("wheel",s),i.removeEventListener("keydown",s),i.removeEventListener("keyup",s),window.removeEventListener("resize",s)}}}n.d(t,{s:function(){return i}})},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var i=n(88780),r=n(32219);let s={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class o extends i.LineSegments{set(e){let{color:t,opacity:n,size:o,step:a,frame:c}={...s,...e},l=(0,r.iK)(o),u=(0,r.iK)(null!=a?a:l),d=[],p=(e,t)=>d.push(new i.Vector3(e,t,0));c&&(p(-l.x/2,+l.y/2),p(+l.x/2,+l.y/2),p(+l.x/2,+l.y/2),p(+l.x/2,-l.y/2),p(+l.x/2,-l.y/2),p(-l.x/2,-l.y/2),p(-l.x/2,-l.y/2),p(-l.x/2,+l.y/2));let v=Math.ceil(-l.x/2/u.x)*u.x;v===-l.x/2&&(v+=u.x);do p(v,-l.y/2),p(v,+l.y/2),v+=u.x;while(v<l.x/2);let m=Math.ceil(-l.y/2/u.y)*u.y;m===-l.y/2&&(m+=u.y);do p(-l.x/2,m),p(+l.x/2,m),m+=u.y;while(m<l.y/2);return this.geometry.setFromPoints(d),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:s)}}},12042:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var i=n(88780),r=n(23247);let s={luminosity:.5};class o extends i.MeshBasicMaterial{constructor(e){let{luminosity:t,...n}={...s,...e},o={uSunPosition:{value:new i.Vector3(.5,.7,.3)},uLuminosity:{value:t}};super(n),this.onBeforeCompile=e=>r.b.with(e).uniforms(o).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      "),this.sunPosition=o.uSunPosition.value}}},2132:function(e,t,n){"use strict";function i(e,t,n,i){return t-(t-e)*Math.exp(- -Math.log(n)*i)}function r(e,t){return 1-Math.exp(- -Math.log(e)*t)}function s(e,t,n){return r(e**(1/t),n)}n.d(t,{Lj:function(){return i},M3:function(){return r},zl:function(){return s}})}},function(e){e.O(0,[7987,7512,1561,7834,6158,3956,1067,3310,749,812,3420,1540,8100,9258,1174,5284,1618,5694,2840,1744],function(){return e(e.s=93841)}),_N_E=e.O()}]);