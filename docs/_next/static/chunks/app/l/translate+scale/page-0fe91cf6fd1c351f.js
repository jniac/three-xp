(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3938],{93841:function(e,t,n){Promise.resolve().then(n.bind(n,22125))},22125:function(e,t,n){"use strict";n.d(t,{Main:function(){return f}});var i=n(32617),o=n(88780),r=n(10725),s=n(92059),a=n(33966),l=n(30636),c=n(97219),u=n(12042),p=n(78780),d=n(29368);class h extends o.Group{onTick(e){let{sphere:t,pivot:n,position:i}=this.parts,r=e.lerpSin01Time(.5,1.5,{frequency:.2}),s=new o.Vector3().copy(n.position).addScaledVector(n.position,-r);t.matrixAutoUpdate=!1,t.matrix.makeScale(r,r,r).setPosition(s.add(i.position))}constructor(...e){super(...e),this.parts={sphere:(0,p.cY)(new o.Mesh(new o.IcosahedronGeometry(1,8),new u.P),{name:"sphere",parent:this}),circle:(0,p.cY)(new c.O().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,p.cY)(new o.Group,{name:"pivot",parent:this}),position:(0,p.cY)(new o.Group,{name:"position",parent:this}),grid:(0,p.cY)(new l.K,{name:"grid",parent:this,rotationX:"90deg"})}}}function m(){let e=(0,a.jE)();return(0,a.Ky)(function*(t){t.scene.background=new o.Color("#345");let n=new h;t.scene.add(n),yield(0,d.RC)("three",e=>n.onTick(e)),e.sceneSelection.set("Hop!",[n.parts.pivot]),e.toolType.set(r.qK.Move),(0,s.NR)(e,n.parts.pivot),yield()=>n.removeFromParent()},[]),null}function f(){return(0,i.jsxs)(a.c,{children:[(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,i.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,i.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(88780),o=n(32219);let r={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class s extends i.LineSegments{set(e){let{color:t,opacity:n,size:s,step:a,frame:l}={...r,...e},c=(0,o.iK)(s),u=(0,o.iK)(null!=a?a:c),p=[],d=(e,t)=>p.push(new i.Vector3(e,t,0));l&&(d(-c.x/2,+c.y/2),d(+c.x/2,+c.y/2),d(+c.x/2,+c.y/2),d(+c.x/2,-c.y/2),d(+c.x/2,-c.y/2),d(-c.x/2,-c.y/2),d(-c.x/2,-c.y/2),d(-c.x/2,+c.y/2));let h=Math.ceil(-c.x/2/u.x)*u.x;h===-c.x/2&&(h+=u.x);do d(h,-c.y/2),d(h,+c.y/2),h+=u.x;while(h<c.x/2);let m=Math.ceil(-c.y/2/u.y)*u.y;m===-c.y/2&&(m+=u.y);do d(-c.x/2,m),d(+c.x/2,m),m+=u.y;while(m<c.y/2);return this.geometry.setFromPoints(p),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:r)}}},12042:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(88780),o=n(23247);let r={luminosity:.5};class s extends i.MeshBasicMaterial{constructor(e){let{luminosity:t,...n}={...r,...e},s={uSunPosition:{value:new i.Vector3(.5,.7,.3)},uLuminosity:{value:t}};super(n),this.onBeforeCompile=e=>o.b.with(e).uniforms(s).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      "),this.sunPosition=s.uSunPosition.value}}}},function(e){e.O(0,[7987,7512,1561,7834,6158,3956,1067,3310,749,812,3420,1540,167,9258,1174,5284,1618,5694,2840,1744],function(){return e(e.s=93841)}),_N_E=e.O()}]);