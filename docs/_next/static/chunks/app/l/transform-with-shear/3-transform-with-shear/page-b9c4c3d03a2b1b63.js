(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9845],{16465:(t,e,r)=>{"use strict";r.d(e,{Y:()=>o});var n=r(49797),i=r(7147);let s={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class o extends n.V9B{constructor(t){let{rampPower:e,shadowColor:r,luminosity:o,onBeforeCompile:a,...l}={...s,...t},u={uSunPosition:{value:new n.Pq0(.5,.7,.3)},uShadowColor:{value:new n.Q1f(r)},uRampPower:{value:e},uLuminosity:{value:o}};super(l),this.onBeforeCompile=t=>{i.bI.with(t).uniforms(u).varying({vAutoLitWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vAutoLitWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vAutoLitWorldNormal = mat3(instanceMatrix) * vAutoLitWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vAutoLitWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==a||a(t)},this.sunPosition=u.uSunPosition.value}}},17099:(t,e,r)=>{"use strict";r.d(e,{c:()=>a});var n=r(79105);let i=t=>t,s={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function o(){let t=(0,n.K2)((0,n.K2)((0,n.Ts)(n.KP)));function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.KP;return"string"==typeof e&&(e=e.split("").reduce((t,e)=>7*t+e.charCodeAt(0),0)),t=(0,n.K2)((0,n.K2)((0,n.Ts)(e))),c}function r(){return t=(0,n.K2)(t),(0,n.Tj)(t)}function o(t){switch(t.length){default:return[0,1,i];case 1:return[0,t[0],i];case 2:return[t[0],t[1],i];case 3:return[t[0],t[1],t[2]]}}function a(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,s,a]=o(e);return i+(s-i)*a(r())}function l(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];let[o,a,{weightsAreNormalized:l,indexOffset:u,forbiddenItems:c}]=function(t){let[e,r=null,n]=t,i={...s,...n};if(Array.isArray(e))return[e,r,i];if("object"==typeof e)return[Object.values(e),r?Object.values(r):null,i];throw Error("pick: unsupported options type")}(n);if(c.length>0){let e=new Set;for(let t of c){let r=o.indexOf(t);r>=0&&e.add(r)}if(o=o.filter((t,r)=>!e.has(r)),a=null!=(t=null==a?void 0:a.filter((t,r)=>!e.has(r)))?t:null,0===o.length)throw Error("pick: all items are forbidden")}if(null===a){let t=Math.floor(r()*o.length);return u&&(t+=u,(t%=o.length)<0&&(t+=o.length)),o[t]}if(!l){let t=a.reduce((t,e)=>t+e,0);a=a.map(e=>e/t)}let h=r(),f=0;for(let t=0;t<o.length;t++)if(h<(f+=a[t]))return o[t];throw Error("among: unreachable")}function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=r(),i=r(),s=Math.sqrt(-2*Math.log(n)),o=2*Math.PI*i;return[t+e*s*Math.cos(o),t+e*s*Math.sin(o)]}let c={seed:e,seedMax:function(){return n.Zu},reset:function(){return e(n.KP),c},next:function(){return t=(0,n.K2)(t),c},getState:function(){return t},setState:function(e){return t=e&n.Zu,c},random:r,between:a,around:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[s=1,o=i]=e,a=2*r();return(a>1?1:-1)*o(a>1?a-1:a)*s},int:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,s,a]=o(e);return i+Math.floor(a(r())*(s-i))},chance:function(t){return r()<t},shuffle:function(t){let{mutate:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&Array.isArray(t)?t:[...t],i=n.length;for(let t=0;t<i;t++){let e=Math.floor(i*r()),s=n[t];n[t]=n[e],n[e]=s}return n},pick:l,createPicker:function(t){let e=t.map(t=>{let[e]=t;return e}),r=t.map(t=>{let[e,r]=t;return r}),n=r.reduce((t,e)=>t+e,0);for(let[t,e]of r.entries())r[t]=e/n;return()=>l(e,r,{weightsAreNormalized:!0})},vector:function(t,e){let[r=0,n=1]=Array.isArray(e)?e:[null==e?void 0:e.min,null==e?void 0:e.max];for(let e of Object.keys(t))t[e]=a(r,n);return t},unitVector2:function(t){let e=2*Math.PI*r();return t.x=Math.cos(e),t.y=Math.sin(e),t},unitVector3:function(t){let e=r(),n=r(),i=2*Math.PI*e,s=Math.acos(1-2*n);return t.x=Math.sin(s)*Math.cos(i),t.y=Math.sin(s)*Math.sin(i),t.z=Math.cos(s),t},normalVector:function(t){let e=Object.keys(t),r=e.length,n=Math.sqrt(r);for(let i=0;i<r;i+=2){let[s,o]=u();t[e[i]]=s/n,i+1<r&&(t[e[i+1]]=o/n)}return t},unitVector:function(t){let e=Object.keys(t),r=e.length,n=0;for(let i=0;i<r;i+=2){let[s,o]=u();t[e[i]]=s,n+=s*s,i+1<r&&(t[e[i+1]]=o,n+=o*o)}n=Math.sqrt(n);for(let i=0;i<r;i++)t[e[i]]/=n;return t},boxMuller:u,quaternion:function(t){let e=r(),n=r(),i=r(),s=Math.sqrt(1-e),o=Math.sqrt(e);return t.x=s*Math.sin(2*Math.PI*n),t.y=s*Math.cos(2*Math.PI*n),t.z=o*Math.sin(2*Math.PI*i),t.w=o*Math.cos(2*Math.PI*i),t},insideCircle:function(t,e){let n=2*r()*Math.PI,i=Math.sqrt(r())*t;return e.x=i*Math.cos(n),e.y=i*Math.sin(n),e}};return c}let a=class{constructor(t){Object.assign(this,o().seed(t))}};Object.assign(a,o())},28737:(t,e,r)=>{"use strict";r.d(e,{Leak:()=>f,O:()=>h});var n={};r.r(n),r.d(n,{distribute:()=>s.mn,every:()=>s.Si,findMaxBy:()=>s.vj,pairwise:()=>s.Ju,recordBy:()=>s.VY,some:()=>s.zN,split:()=>s.mn,uniqueBy:()=>s.pD});var i=r(30158),s=r(43107),o=r(38062),a=r(85795),l=r(17099),u=r(96122),c=r(36508);function h(t){Object.assign(window,{...i,...a,...n,...t,PRNG:l.c,waveform:o.o,dedent:u.T,Ticker:c.Rv})}function f(t){return h(t),null}},37833:(t,e,r)=>{"use strict";r.d(e,{Client:()=>M,X:()=>g});var n=r(70691),i=r(49797),s=r(33540),o=r(2210),a=r(77794),l=r(79911),u=r(79285),c=r(4941),h=r(38062),f=r(67235),m=r(36508),d=r(28737),p=r(69621),x=r(31763);function w(){return(0,n.jsxs)(p.kE,{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"Some Shear Examples"}),(0,n.jsx)(p.$n,{label:"Orthographic (reset)",onClick:()=>{f.Q.send(x.n).assertPayload().vertigo.set({perspective:0,zoom:1,rotation:[0,0,0]})}}),(0,n.jsx)(p.$n,{label:"Perspective",onClick:()=>{f.Q.send(x.n).assertPayload().vertigo.set({perspective:1})}}),(0,n.jsx)(p.$n,{label:"Negate Matrix",onClick:()=>{let t=f.Q.send(g).payload;t&&(t.negateMatrix=!t.negateMatrix)}}),(0,n.jsxs)("p",{className:"mt-4",children:["Using ",(0,n.jsx)("code",{children:"TransformWithShear"})," from ",(0,n.jsx)("code",{children:"some-utils-three/experimental/transform-with-shear"}),"."]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("span",{className:"text-yellow-500",children:"yellow object"})," is defined by position, rotation, scale, and shear (transform props)."]}),(0,n.jsxs)("p",{children:["The ",(0,n.jsx)("span",{className:"text-cyan-500",children:"cyan object"})," is defined by basis vectors (matrix), transform is inferred from matrix."]}),(0,n.jsx)("p",{children:'Works with reflections too (try clicking "Negate Matrix" button).'})]})}class v extends p.QT{setTransform(t){return this.transform.from(t),this.transform.toMatrix(this.matrix),this}constructor(t="white"){super(t),this.transform=new o.d,this.matrixAutoUpdate=!1}}class g{constructor(){this.negateMatrix=!1,f.Q.on(g,t=>t.setPayload(this))}}function b(){return(0,s.dB)("my-test-1",function*(t,e){let r=new g,n=(0,l.mj)(new v("yellow"),t).setTransform({position:[-2,-3,-1],scale:[3,2,1],rotation:["30deg","-120deg","10deg"],shear:[.1,.2,.3]}),s=(0,l.mj)(new v("cyan"),t),o=(0,l.mj)(new v("white"),t);yield(0,m.xy)("three",t=>{let e=new i.Pq0(0,1,-.5),a=new i.Pq0(0,.5,3),l=new i.Pq0(2.5,0,.5);r.negateMatrix&&l.negate(),s.matrix.makeBasis(e,a,l).setPosition(new i.Pq0(1,2,-1)),s.transform.from(s.matrix);let f=c.kY.inOut4((0,u.inverseLerp)(.05,.95,h.o.triangle(t.time,{f:.2})));o.transform.lerpTransforms(n.transform,s.transform,f),o.transform.toMatrix(o.matrix)})},[]),null}function y(){return(0,s.Fw)(function*(t){t.pipeline.basicPasses.fxaa.enabled=!1}),(0,s.dB)("my-settings",function*(t,e){(0,l.mj)(new a.u,t).regularGrid({size:12,subdivisions:[2,6],opacity:[1,.1]})},[]),null}function M(){return(0,n.jsxs)(s.uB,{vertigoControls:{eventTarget:"canvas",size:12,zoom:.7,rotation:["8deg","12deg","0deg"],focus:[0,0,.5]},children:[(0,n.jsx)(d.Leak,{}),(0,n.jsx)(y,{}),(0,n.jsx)(b,{}),(0,n.jsx)(w,{})]})}},43107:(t,e,r)=>{"use strict";function n(t,e){for(let r of t)if(e(r))return!0;return!1}function i(t,e){for(let r of t)if(!e(r))return!1;return!0}function s(t,e,r){let n=[];function i(t){let e=[];return n[t]=e,e}if(void 0!==r)for(let t=0;t<r;t++)i(t);for(let r of t){var s;let t=e(r);(null!=(s=n[t])?s:i(t)).push(r)}return n}function*o(t){let e;for(let r of t)void 0!==e&&(yield[e,r]),e=r}function a(t,e){let r,n=-1/0;for(let i of t){let t=e(i);t>n&&(n=t,r=i)}return r}function l(t){let e=new Set;return r=>{let n=t(r);return!e.has(n)&&(e.add(n),!0)}}function u(t){return(e,r)=>{if(null!==e&&"object"!=typeof e)throw Error("Accumulator must be an object");let n=null===e?{}:e,i=t(r);return n[i]||(n[i]=[]),n[i].push(r),n}}r.d(e,{Ju:()=>o,Si:()=>i,VY:()=>u,mn:()=>s,pD:()=>l,vj:()=>a,zN:()=>n})},46163:(t,e,r)=>{Promise.resolve().then(r.bind(r,37833))},66620:(t,e,r)=>{"use strict";r.d(e,{_:()=>s});var n=r(89868),i=r(44138);function s(t,e){var r=(0,i._)(t,e,"update");return(0,n._)(t,r)}},69621:(t,e,r)=>{"use strict";r.d(e,{$n:()=>m,QT:()=>c,Yr:()=>h,kE:()=>f});var n=r(70691),i=r(49797),s=r(34011),o=r(13160),a=r(16465),l=r(79911);class u{set(t,e,r,n){return this.p.copy(t),this.u.copy(e),this.v.copy(r),this.w.copy(n),this}fromMatrix4(t){return this.p.setFromMatrixPosition(t),this.u.setFromMatrixColumn(t,0),this.v.setFromMatrixColumn(t,1),this.w.setFromMatrixColumn(t,2),this}scale(t){return this.u.multiplyScalar(t.x),this.v.multiplyScalar(t.y),this.w.multiplyScalar(t.z),this}lerpBasis(t,e,r){return this.p.lerpVectors(t.p,e.p,r),this.u.lerpVectors(t.u,e.u,r),this.v.lerpVectors(t.v,e.v,r),this.w.lerpVectors(t.w,e.w,r),this}lerp(t,e){return this.p.lerp(t.p,e),this.u.lerp(t.u,e),this.v.lerp(t.v,e),this.w.lerp(t.w,e),this}toMatrix4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.kn4;return t.makeBasis(this.u,this.v,this.w),t.setPosition(this.p),t}constructor(){this.p=new i.Pq0,this.u=new i.Pq0(1,0,0),this.v=new i.Pq0(0,1,0),this.w=new i.Pq0(0,0,1)}}class c extends i.YJl{constructor(t="white"){super();let{torusKnotGeometry:e,axesGeometry:r,autoLitVertexColorsMaterial:n,cubeGeometry:s}=c.shared;(0,l.mj)(new i.eaF(e,new a.Y({color:t})),this),(0,l.mj)(new i.eaF(r,n),this),(0,l.mj)(new i.DXC(s,new i.mrM({color:t})),this)}}c.shared={torusKnotGeometry:new i.UPV(.15,.07,256,64),axesGeometry:new s.k,cubeGeometry:o.Q.setAsBounds(new i.LoY,0,1),autoLitVertexColorsMaterial:new a.Y({vertexColors:!0})};class h extends i.YJl{onTick(t){let e=t.sin01Time({frequency:.2});this.objC.matrixAutoUpdate=!1,this.basisA.fromMatrix4(this.objA.matrix),this.basisB.fromMatrix4(this.objB.matrix),this.basisC.lerpBasis(this.basisA,this.basisB,e),this.basisC.toMatrix4(this.objC.matrix)}constructor(...t){super(...t),this.objA=(0,l.mj)(new c,this),this.objB=(0,l.mj)(new c("yellow"),this),this.objC=(0,l.mj)(new c("red"),this),this.basisA=new u,this.basisB=new u,this.basisC=new u}}function f(t){let{children:e}=t;return(0,n.jsx)("div",{className:"ui layer thru p-8 flex flex-col gap-4 items-start",children:(0,n.jsx)("div",{className:"max-w-md flex flex-col gap-2 items-start p-4 backdrop-blur rounded-xl border border-white/10 bg-white/2",children:e})})}function m(t){let{label:e="Button",onClick:r=()=>{}}=t;return(0,n.jsx)("button",{className:"btn border rounded px-4 py-2",onClick:r,children:e})}},79105:(t,e,r)=>{"use strict";r.d(e,{K2:()=>o,KP:()=>i,Tj:()=>a,Ts:()=>s,Zu:()=>n});let n=0x7fffffff,i=123456,s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if(Number.isNaN(t))throw Error("NaN is not a valid seed.");let e=t;if(10>Math.abs(e)&&(e*=1e6),e%=n,(e=e<0?e+n:e)>1)return e&n;if(0===e)return i;throw Error("Impossible. ".concat(e))},o=t=>t=Math.imul(t,48271)&n,a=t=>(t-1)/(n-1)},96122:(t,e,r)=>{"use strict";function n(t){let e=t.split("\n"),r=0;for(let t of e){let e=t.match(/^(\s*)\S/);if(e){r=e[1].length;break}}return e.map(t=>t.slice(Math.min(t.length,r))).join("\n")}r.d(e,{T:()=>n})}},t=>{var e=e=>t(t.s=e);t.O(0,[5611,7190,6564,7962,9635,8921,7953,4512,7775,7436,146,487,9332,3445,3414,9717,1763,2143,3540,4354,1319,6852,7358],()=>e(46163)),_N_E=t.O()}]);