(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9698],{48684:function(e,t,n){Promise.resolve().then(n.t.bind(n,34709,23)),Promise.resolve().then(n.bind(n,58904)),Promise.resolve().then(n.bind(n,47537)),Promise.resolve().then(n.bind(n,22125)),Promise.resolve().then(n.bind(n,36636))},47537:function(e,t,n){"use strict";n.d(t,{Main:function(){return m}});var r=n(32617),o=n(88780),i=n(33966),s=n(62274),c=n(97219),l=n(12042),a=n(78780),u=n(29368);class h extends o.Mesh{constructor(){super(new o.PlaneGeometry(4,.2),new l.P({color:"#ff9900"}))}}class d extends o.Mesh{constructor(){super(new o.PlaneGeometry(4,.2),new o.ShaderMaterial({uniforms:{uColor:{value:new o.Color("#ff9900")},uSunPosition:{value:new o.Vector3(.5,.7,.3)},uLuminosity:{value:.5}},vertexShader:"\n      varying vec3 vWorldNormal;\n      \n      void main() {\n        vWorldNormal = mat3(modelMatrix) * normal;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        gl_Position.z += -0.01;\n      }\n    ",fragmentShader:"\n      varying vec3 vWorldNormal;\n      varying vec3 vColor;\n      \n      uniform vec3 uSunPosition;\n      uniform vec3 uColor;\n      uniform float uLuminosity;\n      \n      void main() {\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        gl_FragColor = vec4(uColor * light, 1.0);\n      }\n    "}))}}function p(){return(0,i.jE)(function*(e){e.useOrbitControls=!1;let t=new s.F({size:[8,8]});t.start(e.three.renderer.domElement),yield(0,u.RC)("three",n=>{t.update(e.three.camera,e.three.aspect)})}),(0,i.Ky)(function*(e){e.scene.background=new o.Color("#6699cc"),(0,a.cY)(new o.Mesh(new o.IcosahedronGeometry(1,4),new l.P({color:"red"})),e.scene),(0,a.cY)(new c.O,e.scene).box({size:2}).draw().showOccludedLines(),(0,a.cY)(new h,{parent:e.scene,position:[0,.5,0]}),(0,a.cY)(new d,{parent:e.scene,position:[0,-.5,0]}),yield()=>e.scene.clear()},[]),null}function m(){return(0,r.jsx)(i.c,{children:(0,r.jsx)(p,{})})}},22125:function(e,t,n){"use strict";n.d(t,{Main:function(){return w}});var r=n(32617),o=n(88780),i=n(10725),s=n(92059),c=n(33966),l=n(30636),a=n(97219),u=n(12042),h=n(78780),d=n(29368);class p extends o.Group{onTick(e){let{sphere:t,pivot:n,position:r}=this.parts,i=e.lerpSin01Time(.5,1.5,{frequency:.2}),s=new o.Vector3().copy(n.position).addScaledVector(n.position,-i);t.matrixAutoUpdate=!1,t.matrix.makeScale(i,i,i).setPosition(s.add(r.position))}constructor(...e){super(...e),this.parts={sphere:(0,h.cY)(new o.Mesh(new o.IcosahedronGeometry(1,8),new u.P),{name:"sphere",parent:this}),circle:(0,h.cY)(new a.O().circle({radius:.5}).circle({radius:1}).circle({radius:1.5}).draw(),{name:"circle",parent:this}),pivot:(0,h.cY)(new o.Group,{name:"pivot",parent:this}),position:(0,h.cY)(new o.Group,{name:"position",parent:this}),grid:(0,h.cY)(new l.K,{name:"grid",parent:this,rotationX:"90deg"})}}}function m(){let e=(0,c.jE)();return(0,c.Ky)(function*(t){t.scene.background=new o.Color("#345");let n=new p;t.scene.add(n),yield(0,d.RC)("three",e=>n.onTick(e)),e.sceneSelection.set("Hop!",[n.parts.pivot]),e.toolType.set(i.qK.Move),(0,s.NR)(e,n.parts.pivot),yield()=>n.removeFromParent()},[]),null}function w(){return(0,r.jsxs)(c.c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,r.jsx)("p",{children:"Pivot offset to perform translate and scale is quite straightforward:"}),(0,r.jsx)("pre",{className:"bg-[#fff1] rounded px-2 py-1",children:"\nconst scale = ... // some value\nconst translate = new Vector3()\n  .copy(pivot.position)\n  .addScaledVector(pivot.position, -scale)\n\nmatrix\n  .makeScale(scale, scale, scale)\n  .setPosition(translate)\n".trim()})]})]})}},36636:function(e,t,n){"use strict";n.d(t,{ServerProof:function(){return s}});var r=n(32617),o=n(87200);let i=function(){return(0,r.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:"loading..."})};function s(){let[,e]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let t=!0;return Promise.all([n.e(7512),n.e(3935),n.e(1561),n.e(812),n.e(5236)]).then(n.bind(n,55236)).then(n=>{t&&(i=n.ChooseOne,e(Math.random()))}),()=>{t=!1}},[]),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsx)("div",{className:"absolute-through",children:(0,r.jsx)(i,{})})})}},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(88780),o=n(32219);let i={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class s extends r.LineSegments{set(e){let{color:t,opacity:n,size:s,step:c,frame:l}={...i,...e},a=(0,o.iK)(s),u=(0,o.iK)(null!=c?c:a),h=[],d=(e,t)=>h.push(new r.Vector3(e,t,0));l&&(d(-a.x/2,+a.y/2),d(+a.x/2,+a.y/2),d(+a.x/2,+a.y/2),d(+a.x/2,-a.y/2),d(+a.x/2,-a.y/2),d(-a.x/2,-a.y/2),d(-a.x/2,-a.y/2),d(-a.x/2,+a.y/2));let p=Math.ceil(-a.x/2/u.x)*u.x;p===-a.x/2&&(p+=u.x);do d(p,-a.y/2),d(p,+a.y/2),p+=u.x;while(p<a.x/2);let m=Math.ceil(-a.y/2/u.y)*u.y;m===-a.y/2&&(m+=u.y);do d(-a.x/2,m),d(+a.x/2,m),m+=u.y;while(m<a.y/2);return this.geometry.setFromPoints(h),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:i)}}},97219:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(88780),o=n(23420),i=n(32219);let s=new r.Vector2,c=new r.Vector3,l=new r.Matrix4;function a(e,t,n){if(null==n?void 0:n.transform)for(let e of((0,i.Xe)(n.transform,l),t))e.applyMatrix4(l);(null==n?void 0:n.color)&&e.colors.set(e.points.length,new r.Color(n.color)),e.points.push(...t)}class u extends r.LineSegments{showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new r.LineBasicMaterial({color:this.material.color,transparent:!0,depthFunc:r.GreaterDepth,opacity:e}),n=new r.LineSegments(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setFromPoints([new r.Vector3,new r.Vector3]),this}draw(){if(this.geometry.setFromPoints(this.points),this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let t=new r.Color(null!==(e=this.colors.get(0))&&void 0!==e?e:"white"),n=this.points.length,o=function(e){let t=e.attributes.color;if(t)return t;{let t=new r.BufferAttribute(new Float32Array(3*e.attributes.position.count),3);return e.setAttribute("color",t),t}}(this.geometry);for(let e=0;e<n;e++){let n=this.colors.get(e);n&&t.copy(n),o.setXYZ(e,t.r,t.g,t.b)}}return this}line(e,t,n){return a(this,[(0,i.Q7)(e),(0,i.Q7)(t)],n),this}polygon(e,t){let n=e.map(e=>(0,i.Q7)(e)),r=[];for(let e=0;e<n.length;e++)r.push(n[e],n[(e+1)%n.length]);return a(this,r,t),this}polyline(e,t){let n=e.map(e=>(0,i.Q7)(e)),r=[];for(let e=0;e<n.length-1;e++)r.push(n[e],n[e+1]);return a(this,r,t),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:o,y:c,radius:l,segments:h,...d}={...u.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,r]=t,{x:o,y:c}=(0,i.iK)(e,s);return{x:o,y:c,radius:n,...r}}return t[0]})()},p=new r.Vector3(1,0,0),m=new r.Vector3(0,1,0),w=[];for(let e=0;e<h;e++){let t=e/h*Math.PI*2,n=(e+1)/h*Math.PI*2,i=Math.cos(t)*l,s=Math.sin(t)*l,a=Math.cos(n)*l,u=Math.sin(n)*l,d=new r.Vector3(o,c,0).addScaledVector(p,i).addScaledVector(m,s),f=new r.Vector3(o,c,0).addScaledVector(p,a).addScaledVector(m,u);w.push(d,f)}return a(this,w,d),this}rectangle(e,t){let{centerX:n,centerY:i,width:s,height:c}=o.Ae.from(e),l=s/2,u=c/2,h=new r.Vector3(n-l,i-u,0),d=new r.Vector3(n+l,i-u,0),p=new r.Vector3(n+l,i+u,0),m=new r.Vector3(n-l,i+u,0);return a(this,[h,d,d,p,p,m,m,h],t),this}box(){let{center:e=[0,0,0],size:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:n,y:o,z:s}=(0,i.Q7)(e,c),{x:l,y:a,z:u}=(0,i.Q7)(t,c),h=l/2,d=a/2,p=u/2,m=new r.Vector3(n-h,o-d,s-p),w=new r.Vector3(n+h,o-d,s-p),f=new r.Vector3(n+h,o+d,s-p),v=new r.Vector3(n-h,o+d,s-p),x=new r.Vector3(n-h,o-d,s+p),y=new r.Vector3(n+h,o-d,s+p),g=new r.Vector3(n+h,o+d,s+p),V=new r.Vector3(n-h,o+d,s+p);return this.points.push(m,w,w,f,f,v,v,m),this.points.push(x,y,y,g,g,V,V,x),this.points.push(m,x,w,y,f,g,v,V),this}plus(e,t,n){let o=t/2,{x:c,y:l}=(0,i.iK)(e,s),u=new r.Vector3(c-o,l,0);return a(this,[u,new r.Vector3(c+o,l,0),new r.Vector3(c,l-o,0),new r.Vector3(c,l+o,0)],n),this}cross(e,t,n){let o=t/2,{x:c,y:l}=(0,i.iK)(e,s),u=new r.Vector3(c-o,l-o,0);return a(this,[u,new r.Vector3(c+o,l+o,0),new r.Vector3(c-o,l+o,0),new r.Vector3(c+o,l-o,0)],n),this}constructor(...e){super(...e),this.points=[],this.colors=new Map}}u.circleDefaultOptions={x:0,y:0,radius:.5,segments:96}}},function(e){e.O(0,[7987,7512,1561,7834,6158,3956,1067,3310,749,4709,812,2038,3420,1540,9258,4157,3977,5284,1618,8904,5694,2840,1744],function(){return e(e.s=48684)}),_N_E=e.O()}]);