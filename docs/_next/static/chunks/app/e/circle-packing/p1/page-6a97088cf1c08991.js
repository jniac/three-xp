(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4389],{16465:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var n=r(49797),o=r(7147);let i={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class a extends n.V9B{constructor(e){let{rampPower:t,shadowColor:r,luminosity:a,onBeforeCompile:l,...s}={...i,...e},u={uSunPosition:{value:new n.Pq0(.5,.7,.3)},uShadowColor:{value:new n.Q1f(r)},uRampPower:{value:t},uLuminosity:{value:a}};super(s),this.onBeforeCompile=e=>{o.bI.with(e).uniforms(u).varying({vAutoLitWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vAutoLitWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vAutoLitWorldNormal = mat3(instanceMatrix) * vAutoLitWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vAutoLitWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==l||l(e)},this.sunPosition=u.uSunPosition.value}}},35382:(e,t,r)=>{"use strict";r.d(t,{PageClient:()=>S});var n=r(28535),o=r(76999),i=r(57368),a=r(70691),l=r(49797),s=r(33540),u=r(77794),h=r(16465),c=r(3293),f=r(79911),d=r(72612),g=r(80446),p=r(66587),m=r(86710),y=r(99332);function w(){let e=(0,s.Fw)();return e.pipeline.basicPasses.fxaa.enabled=!1,e.ticker.set({inactivityWaitDurationMinimum:"localhost"===window.location.hostname?20:180}),null}var v=new WeakMap;class M{get scale(){return(0,n._)(this,v)}set scale(e){if((0,n._)(this,v)!==e){(0,i._)(this,v,e),this.bundle.mesh.scale.setScalar(e);let t=new m.e.SphereShape(.5*this.scale);this.bundle.bodyInterface.SetShape(this.bundle.body.GetID(),t,!0,m.e.EActivation_Activate)}}constructor(e,t){(0,o._)(this,v,{writable:!0,value:void 0}),this.bundle=e,this.index=t,(0,i._)(this,v,1)}}class A extends l.YJl{*onInitialize(e){(0,p.uW)(e).then(e=>{g.n.setRandom("parkmiller","circle-packing"),this.parts.items=(0,d.loopArray)(32,t=>{let r=g.n.pick(["#fbff00ff","#7be87bff","#395cd0ff"]),n=new h.Y({color:(0,c.f8)(r)}),o=t.t*Math.PI*2,i=5*Math.cos(o),a=5*Math.sin(o),l=new M(e.createBody({parent:this,shape:new p.AQ.Shape.Sphere(.5),position:[i,a,0],gravityFactor:0,meshMaterial:n,allowedDOFs:p.AQ.AllowedDOF.Plane2D,linearDamping:10,numPositionStepsOverride:40}),t.i);return l.scale=g.n.pick([.25,.5,1,2]),l}),Object.assign(window,{liwa:this})}),yield(0,y.s)(e.domElement,{onTap:()=>{let[t]=e.pointer.raycast(this);if(t){let e=this.parts.items.find(e=>e.bundle.mesh===t.object);e.scale+=.1}}})}onTick(e){for(let[,e]of this.parts.items.entries()){let{bundle:t}=e,r=t.body.GetCenterOfMassPosition(),n=new m.e.Vec3(r.GetX(),r.GetY(),r.GetZ()),o=new m.e.Vec3(0,0,0).Sub(n),i=o.Length();if(i>.01){let e=t.body.GetMotionProperties().GetInverseMass(),r=Math.min(i/1.5,1);t.body.AddImpulse(o.Normalized().MulFloat(r/e))}}}constructor(...e){super(...e),this.parts={items:[],debugHelper:(0,f.mj)(new u.u,this).circle({radius:1.5,quality:"ultra"})}}}function S(){return(0,a.jsxs)(s.uB,{webgl:!0,vertigoControls:{fixed:!0,size:4,perspective:.1},children:[(0,a.jsx)(w,{}),(0,a.jsx)(s.q,{value:A}),(0,a.jsx)("div",{className:"layer thru p-16",children:(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Circle Packing P1"})})]})}},42184:(e,t,r)=>{Promise.resolve().then(r.bind(r,35382))},66587:(e,t,r)=>{"use strict";r.d(t,{AQ:()=>M,uW:()=>A});var n,o,i=r(77674),a=r(49797),l=r(44694),s=r(86710),u=r(96555),h=r(94065);let c=new a.Pq0,f=new a.O9p,d=new a.PTz;var g=function(e){return e[e.STATIC=0]="STATIC",e[e.KINEMATIC=1]="KINEMATIC",e[e.DYNAMIC=2]="DYNAMIC",e}({}),p=function(e){return e[e.All=63]="All",e[e.Plane2D=35]="Plane2D",e[e.RotationX=8]="RotationX",e[e.RotationY=16]="RotationY",e[e.RotationZ=32]="RotationZ",e[e.TranslationX=1]="TranslationX",e[e.TranslationY=2]="TranslationY",e[e.TranslationZ=4]="TranslationZ",e}({}),m=function(e){return e[e.STATIC=0]="STATIC",e[e.MOVING=1]="MOVING",e}({});let y=Object.keys(m).length/2;class w{toJoltShape(){throw Error("Not implemented")}toMesh(){throw Error("Not implemented")}}n=class extends w{toJoltShape(){return new s.e.SphereShape(this.radius)}toMesh(){let e=(0,i._)(w.Sphere,n,o).get(this.radius);return e||(e=new a.WBB(this.radius,8),(0,i._)(w.Sphere,n,o).set(this.radius,e)),new a.eaF(e)}constructor(e){super(),this.radius=e}},o={writable:!0,value:new Map},w.Sphere=n,w.Box=class extends w{toJoltShape(){let e=function(e,t){null!=t||(t=new u.A.Vec3);let{x:r,y:n,z:o}=(0,l.jj)(e,c);return t.SetX(r),t.SetY(n),t.SetZ(o),t}(this.halfExtents,new s.e.Vec3);return new s.e.BoxShape(e)}toMesh(){let{x:e,y:t,z:r}=(0,l.jj)(this.halfExtents);return new a.eaF(new a.iNn(2*e,2*t,2*r))}constructor(e){super(),this.halfExtents=e}};class v{constructor(e,t,r){this.body=e,this.bodyInterface=t,this.mesh=r}}let M={MotionType:g,AllowedDOF:p,Layers:m,Shape:w,PhysicBundle:v};async function A(e){await (0,s._)();let t=new s.e.JoltSettings;t.mMaxWorkerThreads=3;let r=new s.e.ObjectLayerPairFilterTable(y);r.EnableCollision(0,1),r.EnableCollision(1,1);let n=new s.e.BroadPhaseLayer(0),o=new s.e.BroadPhaseLayer(1),i=new s.e.BroadPhaseLayerInterfaceTable(y,2);i.MapObjectToBroadPhaseLayer(0,n),i.MapObjectToBroadPhaseLayer(1,o),t.mObjectLayerPairFilter=r,t.mBroadPhaseLayerInterface=i,t.mObjectVsBroadPhaseLayerFilter=new s.e.ObjectVsBroadPhaseLayerFilterTable(i,2,r,y);let u=new s.e.JoltInterface(t);s.e.destroy(t);let g={moving:[]},p=u.GetPhysicsSystem(),m=p.GetBodyInterface(),M=e=>{for(let{mesh:t,body:r}of(u.Step(e,e>1/55?2:1),g.moving))!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Pq0;t.set(e.GetX(),e.GetY(),e.GetZ())}(r.GetPosition(),t.position),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.PTz;t.set(e.GetX(),e.GetY(),e.GetZ(),e.GetW())}(r.GetRotation(),t.quaternion)};return e.ticker.onTick(e=>{M(e.deltaTime)}),{jolt:u,physicsSystem:p,bodyInterface:m,createBody:function(){let{shape:t=new w.Sphere(.5),type:r=2,allowedDOFs:n=63,mesh:o=null,position:i=[0,0,0],rotation:a=[0,0,0],parent:u=e.scene,gravityFactor:p=1,restitution:y=0,inertiaMultiplier:M=1,linearDamping:A=.05,allowSleeping:S=!1,meshMaterial:b=null,numPositionStepsOverride:P=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=new s.e.BodyCreationSettings(t.toJoltShape(),function(e,t){let{x:r,y:n,z:o}=(0,l.jj)(e,c);return t.SetX(r),t.SetY(n),t.SetZ(o),t}(i,new s.e.RVec3),function(e,t){(0,h.if)(e,f);let{x:r,y:n,z:o,w:i}=d.setFromEuler(f);return t.SetX(r),t.SetY(n),t.SetZ(o),t.SetW(i),t}(a,new s.e.Quat),r,1);x.mAllowedDOFs=n,x.mGravityFactor=p,x.mRestitution=y,x.mInertiaMultiplier=M,x.mAllowSleeping=S,x.mLinearDamping=A,x.mNumPositionStepsOverride=P;let I=m.CreateBody(x);s.e.destroy(x),m.AddBody(I.GetID(),s.e.EActivation_Activate),null!=o||(o=t.toMesh()),u.add(o),b&&(o.material=b);let T=new v(I,m,o);return(1===r||2===r)&&g.moving.push(T),T}}}},66620:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});var n=r(89868),o=r(44138);function i(e,t){var r=(0,o._)(e,t,"update");return(0,n._)(e,r)}},72612:(e,t,r)=>{"use strict";function*n(e){let t=0,r={get i(){return t},get t(){return t/e},get p(){return t/(e-1)},get size(){return e},clone(){return{...this}}};for(t=0;t<e;t++)yield r}function o(e,t){let r=[];for(let o of n(e)){let e=o.clone();r.push(t?t(e):e)}return r}function*i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0,o=0;2===t.length?(n=t[0],o=t[1]):Array.isArray(t[0])?(n=t[0][0],o=t[0][1]):(n=t[0].x,o=t[0].y);let i=0,a=0,l=0,s={get i(){return i},get x(){return a},get y(){return l},get tx(){return a/n},get ty(){return l/o},get px(){return a/(n-1)},get py(){return l/(o-1)},get sizeX(){return n},get sizeY(){return o},clone(){return{...this}}};for(l=0;l<o;l++)for(a=0;a<n;a++)yield s,i++}function a(){let e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let o=0,a=0;"number"==typeof r[0]?(o=r[0],a=r[1],e=r[2]):(Array.isArray(r[0])?(o=r[0][0],a=r[0][1]):(o=r[0].x,a=r[0].y),e=r[1]);let l=[];for(let t of i(o,a)){let r=t.clone();l.push(e?e(r):r)}return l}function*l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0,o=0,i=0;3===t.length?(n=t[0],o=t[1],i=t[2]):Array.isArray(t[0])?(n=t[0][0],o=t[0][1],i=t[0][2]):(n=t[0].x,o=t[0].y,i=t[0].z);let a=0,l=0,s=0,u=0,h={get i(){return a},get x(){return l},get y(){return s},get z(){return u},get tx(){return l/n},get ty(){return s/o},get tz(){return u/i},get px(){return l/(n-1)},get py(){return s/(o-1)},get pz(){return u/(i-1)},clone(){return{...this}}};for(u=0;u<i;u++)for(s=0;s<o;s++)for(l=0;l<n;l++)yield h,a++}function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of l(...t))n.push(e.clone());return n}r.r(t),r.d(t,{loop:()=>n,loop2:()=>i,loop2Array:()=>a,loop3:()=>l,loop3Array:()=>s,loopArray:()=>o})},79105:(e,t,r)=>{"use strict";r.d(t,{K2:()=>a,KP:()=>o,Tj:()=>l,Ts:()=>i,Zu:()=>n});let n=0x7fffffff,o=123456,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(Number.isNaN(e))throw Error("NaN is not a valid seed.");let t=e;if(10>Math.abs(t)&&(t*=1e6),t%=n,(t=t<0?t+n:t)>1)return t&n;if(0===t)return o;throw Error("Impossible. ".concat(t))},a=e=>e=Math.imul(e,48271)&n,l=e=>(e-1)/(n-1)},80446:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});var n=r(79105);let o=function e(){let t=Math.random,r=()=>{};function o(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function i(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(0===r.length)return t();if(1===r.length)return t()*r[0];if(2===r.length)return t()*(r[1]-r[0])+r[0];throw Error("Invalid arguments")}function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(1===r.length)return Math.floor(t()*r[0]);if(2===r.length)return Math.floor(t()*(r[1]-r[0]))+r[0];throw Error("Invalid arguments")}function l(e){let{weightsAreNormalized:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.length)throw Error("Weights array is empty");if(!1===r){let r=e.reduce((e,t)=>e+t,0),n=t()*r,o=0;for(let t=0;t<e.length;t++)if(n<(o+=e[t]))return t;return e.length-1}{let r=t(),n=0;for(let t=0;t<e.length;t++)if(r<(n+=e[t]))return t;return e.length-1}}let s={new:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e().setRandom(...r)},setRandom:function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];let[l,u=0]=i,h="string"==typeof u?o(u):u;if("parkmiller"===l){let e=n.Ts(h);t=()=>(e=n.K2(e),n.Tj(e)),r=t=>{e=n.Ts(t)}}else{if(void 0!==l&&"function"!=typeof l)throw Error("Invalid random function");t=null!=l?l:Math.random,r=()=>{}}return r(h),s},seed:function(e){return r("string"==typeof e?o(e):null!=e?e:0),s},get random(){return t},chance:function(e){return t()<e},number:i,float:i,f:i,sign:function(){return .5>t()?-1:1},int:a,i:a,hexColor:function(){let e=Math.floor(0xffffff*t());return"#".concat(e.toString(16).padStart(6,"0"))},pickIndex:l,pick:function(e,r){if(0===e.length)throw Error("Array is empty");if(r)return e[l(r)];let n=Math.floor(t()*e.length);return e[n]},createPicker:function(e){let t=e.map(e=>e[0]),r=e.map(e=>e[1]),n=t.reduce((e,t)=>e+t,0);for(let e=0;e<t.length;e++)t[e]/=n;return()=>r[l(t,{weightsAreNormalized:!0})]},direction2:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=t()*Math.PI*2;return e.x=Math.cos(r),e.y=Math.sin(r),e},direction3:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},r=t(),n=t(),o=2*Math.PI*r,i=Math.acos(1-2*n);return e.x=Math.sin(i)*Math.cos(o),e.y=Math.sin(i)*Math.sin(o),e.z=Math.cos(i),e},quaternion:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0,w:1},r=t(),n=t(),o=t(),i=Math.sqrt(1-r),a=Math.sqrt(r);return e.x=i*Math.sin(2*Math.PI*n),e.y=i*Math.cos(2*Math.PI*n),e.z=a*Math.sin(2*Math.PI*o),e.w=a*Math.cos(2*Math.PI*o),e},shuffleIndexes:function*(e){if(e<=0)throw Error("N must be greater than 0");let r=0,n=Math.floor((2+2*t())*e);for(;1!==function(e,t){for(;0!==t;)[e,t]=[t,e%t];return e}(e,n);){if(++r>1e3)throw Error("Failed to find a suitable a value after 1000 attempts");n=e+Math.floor(t()*e)}let o=Math.floor(t()*e);for(let t=0;t<e;t++)yield(o+t*n)%e},shuffleArray:function(e){let{inPlace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r?e:e.slice(),o=n.length;for(let e=o-1;e>0;e--){let r=Math.floor(t()*(e+1));[n[e],n[r]]=[n[r],n[e]]}return n}};return s}()},86710:(e,t,r)=>{"use strict";let n;r.d(t,{_:()=>i,e:()=>n});var o=r(96555);async function i(){return n||(n=await (0,o.A)()),n}}},e=>{var t=t=>e(e.s=t);e.O(0,[5611,7190,6564,4272,7962,9635,8921,7953,4512,7775,7436,9901,146,487,3445,9332,3414,9717,1763,2143,3540,1319,6852,7358],()=>t(42184)),_N_E=e.O()}]);