(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{45350:function(t,e,o){Promise.resolve().then(o.bind(o,11737))},92941:function(t,e,o){"use strict";o.d(e,{e:function(){return l}});var n=o(88780);function r(t,e,o){let n=o.length-t-1;if(e>=o[n])return n-1;if(e<=o[t])return t;let r=t,l=n,s=Math.floor((r+l)/2);for(;e<o[s]||e>=o[s+1];)e<o[s]?l=s:r=s,s=Math.floor((r+l)/2);return s}class l extends n.Curve{constructor(t,e,o,r,l){super();let s=e?e.length-1:0,i=o?o.length:0;this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=r||0,this.endKnot=l||s;for(let t=0;t<i;++t){let e=o[t];this.controlPoints[t]=new n.Vector4(e.x,e.y,e.z,e.w)}}getPoint(t,e=new n.Vector3){let o=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),l=function(t,e,o,l){let s=r(t,l,e),i=function(t,e,o,n){let r=[],l=[],s=[];r[0]=1;for(let i=1;i<=o;++i){l[i]=e-n[t+1-i],s[i]=n[t+i]-e;let o=0;for(let t=0;t<i;++t){let e=s[t+1],n=l[i-t],c=r[t]/(e+n);r[t]=o+e*c,o=n*c}r[i]=o}return r}(s,l,t,e),c=new n.Vector4(0,0,0,0);for(let e=0;e<=t;++e){let n=o[s-t+e],r=i[e],l=n.w*r;c.x+=n.x*l,c.y+=n.y*l,c.z+=n.z*l,c.w+=n.w*r}return c}(this.degree,this.knots,this.controlPoints,o);return 1!==l.w&&l.divideScalar(l.w),e.set(l.x,l.y,l.z)}getTangent(t,e=new n.Vector3){var o;let l=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),s=(o=this.degree,function(t){let e=t.length,o=[],r=[];for(let l=0;l<e;++l){let e=t[l];o[l]=new n.Vector3(e.x,e.y,e.z),r[l]=e.w}let l=[];for(let t=0;t<e;++t){let e=o[t].clone();for(let o=1;o<=t;++o)e.sub(l[t-o].clone().multiplyScalar(function(t,e){let o=1;for(let e=2;e<=t;++e)o*=e;let n=1;for(let t=2;t<=e;++t)n*=t;for(let o=2;o<=t-e;++o)n*=o;return o/n}(t,o)*r[o]));l[t]=e.divideScalar(r[0])}return l}(function(t,e,o,l,s){let i=1<t?1:t,c=[],f=r(t,l,e),h=function(t,e,o,n,r){let l=[];for(let t=0;t<=o;++t)l[t]=0;let s=[];for(let t=0;t<=n;++t)s[t]=l.slice(0);let i=[];for(let t=0;t<=o;++t)i[t]=l.slice(0);i[0][0]=1;let c=l.slice(0),f=l.slice(0);for(let n=1;n<=o;++n){c[n]=e-r[t+1-n],f[n]=r[t+n]-e;let o=0;for(let t=0;t<n;++t){let e=f[t+1],r=c[n-t];i[n][t]=e+r;let l=i[t][n-1]/i[n][t];i[t][n]=o+e*l,o=r*l}i[n][n]=o}for(let t=0;t<=o;++t)s[0][t]=i[t][o];for(let t=0;t<=o;++t){let e=0,r=1,c=[];for(let t=0;t<=o;++t)c[t]=l.slice(0);c[0][0]=1;for(let l=1;l<=n;++l){let n=0,f=t-l,h=o-l;t>=l&&(c[r][0]=c[e][0]/i[h+1][f],n=c[r][0]*i[f][h]);let u=f>=-1?1:-f,a=t-1<=h?l-1:o-t;for(let t=u;t<=a;++t)c[r][t]=(c[e][t]-c[e][t-1])/i[h+1][f+t],n+=c[r][t]*i[f+t][h];t<=h&&(c[r][l]=-c[e][l-1]/i[h+1][t],n+=c[r][l]*i[t][h]),s[l][t]=n;let d=e;e=r,r=d}}let h=o;for(let t=1;t<=n;++t){for(let e=0;e<=o;++e)s[t][e]*=h;h*=o-t}return s}(f,l,t,i,e),u=[];for(let t=0;t<o.length;++t){let e=o[t].clone(),n=e.w;e.x*=n,e.y*=n,e.z*=n,u[t]=e}for(let e=0;e<=i;++e){let o=u[f-t].clone().multiplyScalar(h[e][0]);for(let n=1;n<=t;++n)o.add(u[f-t+n].clone().multiplyScalar(h[e][n]));c[e]=o}for(let t=i+1;t<=s+1;++t)c[t]=new n.Vector4(0,0,0);return c}(o,this.knots,this.controlPoints,l,1)));return e.copy(s[1]).normalize(),e}toJSON(){let t=super.toJSON();return t.degree=this.degree,t.knots=[...this.knots],t.controlPoints=this.controlPoints.map(t=>t.toArray()),t.startKnot=this.startKnot,t.endKnot=this.endKnot,t}fromJSON(t){return super.fromJSON(t),this.degree=t.degree,this.knots=[...t.knots],this.controlPoints=t.controlPoints.map(t=>new n.Vector4(t[0],t[1],t[2],t[3])),this.startKnot=t.startKnot,this.endKnot=t.endKnot,this}}}},function(t){t.O(0,[7987,7512,1561,7834,6158,3956,1067,3310,749,812,2038,3420,1540,9258,4157,3977,5284,1618,1737,5694,2840,1744],function(){return t(t.s=45350)}),_N_E=t.O()}]);