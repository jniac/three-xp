(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4106],{8597:(t,e,l)=>{"use strict";l.d(e,{Bg:()=>r,Dm:()=>a,NP:()=>o,OZ:()=>s,RY:()=>h,gc:()=>m,mj:()=>w,rU:()=>i,uJ:()=>d,xO:()=>g});var n=l(49797);let o=6,r=4,s=new n.Pq0(o,r,o+r-1),i=[new n.Pq0(0,0,r),new n.Pq0(0,r,0),new n.Pq0(o,0,r+o-1),new n.Pq0(o,r,o)],a=new n.Pq0(0,-2*r,2*r),c=new n.Pq0(1,0,1).normalize(),u=new n.Pq0(0,1,-1).normalize(),f=new n.Pq0().crossVectors(c,u).normalize();u.crossVectors(f,c).normalize();let d={U:c,V:u,W:f},h=new n.kn4().makeBasis(c,u,f).setPosition(a),w=new n.kn4().copy(h).invert(),g=new n.O9p().setFromRotationMatrix(h),m=new n.Zcv().setFromNormalAndCoplanarPoint(f,a)},23120:(t,e,l)=>{"use strict";l.d(e,{hB:()=>h,hf:()=>x});var n=l(49797),o=l(93432),r=l(68955),s=l(16465),i=l(3293),a=l(79911),c=l(72612),u=l(17099),f=l(8597);function d(t,e){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n.Pq0;return l.set(t,e,t-e)}function h(){let t;for(var e,l,o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];let i=0,a=0;if("number"==typeof r[0])[i,a]=r,t=null!=(e=r[3])?e:new n.I9Y;else{let[e]=r;i=e.x,a=e.y,t=null!=(l=r[1])?l:new n.I9Y}let c=-Math.log2((a/f.Bg+1)/2)-1,u=.5**c,d=i/(f.NP*u);return t.set(d,c)}function w(t,e,l){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{x:o,y:r,z:s}=e,i=o+l,a=r+l,c=s+l;for(let e=s;e<c;e++)for(let l=r;l<a;l++)for(let r=o;r<i;r++)t.getVoxelState(r,l,e+4*f.Bg).setInt8(0,n)}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,l=f.OZ.clone().multiplyScalar(4/e),o=[];for(let r of(0,c.loop3)(l)){let l=r.x*e,s=r.y*e,i=r.z*e;(function(t,e,l,n){var o,r,s,i,a,c;let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!!(t.getVoxelState(e,l,n).getInt8(0)>0)&&!((null!=(i=null==(o=t.tryGetVoxelState(e-u,l,n))?void 0:o.getInt8(0))?i:0)>0)&&!((null!=(a=null==(r=t.tryGetVoxelState(e,l+u,n))?void 0:r.getInt8(0))?a:0)>0)&&!((null!=(c=null==(s=t.tryGetVoxelState(e,l,n+u))?void 0:s.getInt8(0))?c:0)>0)})(t,l,s,i,e)&&u.c.chance(1-r.py)&&o.push(new n.Pq0(l,s,i))}return o}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,l=f.OZ.clone().multiplyScalar(4/e),o=[];for(let r of(0,c.loop3)(l)){let l=r.x*e,s=r.y*e,i=r.z*e;(function(t,e,l,n){var o,r,s,i,a,c;let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!(t.getVoxelState(e,l,n).getInt8(0)>0)&&!!((null!=(i=null==(o=t.tryGetVoxelState(e+u,l,n))?void 0:o.getInt8(0))?i:0)>0)&&!!((null!=(a=null==(r=t.tryGetVoxelState(e,l-u,n))?void 0:r.getInt8(0))?a:0)>0)&&!!((null!=(c=null==(s=t.tryGetVoxelState(e,l,n-u))?void 0:s.getInt8(0))?c:0)>0)})(t,l,s,i,e)&&u.c.chance(1-r.py)&&o.push(new n.Pq0(l,s,i))}return o}let p=new n.Pq0;new n.Pq0;class x extends n.eaF{createDots(){let t=new n.ZLX(new n.WBB(.1,8),new s.Y,4);for(let[e,l]of((0,a.mj)(t,this),f.rU.entries()))t.setMatrixAt(e,(0,i.w)({position:l})),t.setColorAt(e,(0,i._)("#ffffff"));return this.dots=t,this}updateDots(t){this.dots||this.createDots();let e=this.dots;for(let[l,n]of f.rU.entries()){e.setMatrixAt(l,(0,i.w)({position:n}));let o=t.isWithin(n)?"#00ffa6":"#ff0000";e.setColorAt(l,(0,i._)(o))}e.instanceMatrix.needsUpdate=!0,e.instanceColor.needsUpdate=!0}get gridCoords(){return this._gridCoords}setGridCoords(t){(0,o.wX)(t,this._gridCoords);let{x:e,y:l}=this._gridCoords;this.scale.setScalar(.5**l),function(t,e){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n.Pq0,o=.5**e,r=t*f.NP*o,s=f.Bg*(.5*o*2-1),i=t*f.NP*o+2*f.Bg*(1-o);l.set(r,s,i)}(e,l,this.position)}toWhite(){this.material.color.set(0xffffff)}toColor(){this.material.color.set(this.color)}constructor({world:t=null,color:e=0xffffff*u.c.random()}={}){let l=Math.ceil(f.NP*f.Bg*4.8),o=new r.AA(l,1);for(let{x:t,y:e}of(0,c.loop2)(f.NP,f.Bg))d(t,e,p).multiplyScalar(4),w(o,p,4);for(let t=0;t<f.NP;t+=2)d(t,f.Bg-1,p).add(new n.Pq0(1,0,0)).multiplyScalar(4),w(o,p,4),u.c.chance(.8)&&(d(t,f.Bg-1,p).add(new n.Pq0(1,1,0)).multiplyScalar(4),w(o,p,4));{let t=m(o,2),e=g(o,2);for(let e of t)w(o,e,2,1);for(let t of e)w(o,t,2,0)}{let t=m(o,1),e=g(o,1);for(let e of t)u.c.chance(.25)&&w(o,e,1,1);for(let t of e)u.c.chance(.25)&&w(o,t,1,0)}console.time("geometry");let i=(0,r.Cx)(o.voxelFaces());console.timeEnd("geometry");i.scale(.25,.25,.25);let h=new s.Y({color:e});super(i,new s.Y({color:e,side:n.$EB})),this._gridCoords=new n.I9Y,this.world=null,this.dots=null,(0,a.mj)(new n.eaF(i,h),this),(0,a.mj)(new n.IzY,this),this.chunk=o,this.color=e,this.world=t}}},66225:(t,e,l)=>{Promise.resolve().then(l.bind(l,74978))},66620:(t,e,l)=>{"use strict";l.d(e,{_:()=>r});var n=l(89868),o=l(44138);function r(t,e){var l=(0,o._)(t,e,"update");return(0,n._)(t,l)}},74978:(t,e,l)=>{"use strict";l.d(e,{Main:()=>f});var n=l(70691),o=l(49797),r=l(53097),s=l(48181),i=l(16465),a=l(79911),c=l(23120);class u extends o.YJl{onTick(t){let{mesh:e}=this.parts;e.rotation.y+=t.deltaTime}constructor(...t){super(...t),this.parts=(()=>{let t=(0,a.mj)(new o.eaF(new o.WBB,new i.Y),{parent:this,userData:{onPointerTap:()=>alert("Hello, world!")}}),e=(0,a.mj)(new s.R,this);e.grid2().draw();let l=new c.hf;return(0,a.mj)(l,this),{mesh:t,line:e}})()}}function f(){return(0,n.jsx)(r.uB,{webgl:!0,vertigoControls:{size:20},children:(0,n.jsxs)("div",{className:"Main layer thru flex flex-col items-start justify-start p-4",children:[(0,n.jsx)("h1",{children:"Chunk Viewer"}),(0,n.jsx)(r.q,{value:u})]})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[5611,7190,6564,7962,9635,8921,7953,4512,7775,7436,146,6726,3445,9332,3414,9717,1763,9215,3097,8181,5033,1319,6852,7358],()=>e(66225)),_N_E=t.O()}]);