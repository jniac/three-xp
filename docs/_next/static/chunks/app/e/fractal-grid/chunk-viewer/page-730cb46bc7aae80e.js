(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4106],{888:(e,t,n)=>{"use strict";function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{_:()=>o})},8597:(e,t,n)=>{"use strict";n.d(t,{Bg:()=>l,Dm:()=>a,NP:()=>r,OZ:()=>i,RY:()=>h,gc:()=>y,mj:()=>w,rU:()=>s,uJ:()=>d,xO:()=>g});var o=n(49797);let r=6,l=4,i=new o.Pq0(r,l,r+l-1),s=[new o.Pq0(0,0,l),new o.Pq0(0,l,0),new o.Pq0(r,0,l+r-1),new o.Pq0(r,l,r)],a=new o.Pq0(0,-2*l,2*l),c=new o.Pq0(1,0,1).normalize(),u=new o.Pq0(0,1,-1).normalize(),f=new o.Pq0().crossVectors(c,u).normalize();u.crossVectors(f,c).normalize();let d={U:c,V:u,W:f},h=new o.kn4().makeBasis(c,u,f).setPosition(a),w=new o.kn4().copy(h).invert(),g=new o.O9p().setFromRotationMatrix(h),y=new o.Zcv().setFromNormalAndCoplanarPoint(f,a)},23120:(e,t,n)=>{"use strict";n.d(t,{hB:()=>h,hf:()=>v});var o=n(49797),r=n(96273),l=n(7717),i=n(9723),s=n(66851),a=n(87381),c=n(72612),u=n(17099),f=n(8597);function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.Pq0;return n.set(e,t,e-t)}function h(){let e;for(var t,n,r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];let s=0,a=0;if("number"==typeof l[0])[s,a]=l,e=null!=(t=l[3])?t:new o.I9Y;else{let[t]=l;s=t.x,a=t.y,e=null!=(n=l[1])?n:new o.I9Y}let c=-Math.log2((a/f.Bg+1)/2)-1,u=.5**c,d=s/(f.NP*u);return e.set(d,c)}function w(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{x:r,y:l,z:i}=t,s=r+n,a=l+n,c=i+n;for(let t=i;t<c;t++)for(let n=l;n<a;n++)for(let l=r;l<s;l++)e.getVoxelState(l,n,t+4*f.Bg).setInt8(0,o)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=f.OZ.clone().multiplyScalar(4/t),r=[];for(let l of(0,c.loop3)(n)){let n=l.x*t,i=l.y*t,s=l.z*t;(function(e,t,n,o){var r,l,i,s,a,c;let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!!(e.getVoxelState(t,n,o).getInt8(0)>0)&&!((null!=(s=null==(r=e.tryGetVoxelState(t-u,n,o))?void 0:r.getInt8(0))?s:0)>0)&&!((null!=(a=null==(l=e.tryGetVoxelState(t,n+u,o))?void 0:l.getInt8(0))?a:0)>0)&&!((null!=(c=null==(i=e.tryGetVoxelState(t,n,o+u))?void 0:i.getInt8(0))?c:0)>0)})(e,n,i,s,t)&&u.c.chance(1-l.py)&&r.push(new o.Pq0(n,i,s))}return r}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=f.OZ.clone().multiplyScalar(4/t),r=[];for(let l of(0,c.loop3)(n)){let n=l.x*t,i=l.y*t,s=l.z*t;(function(e,t,n,o){var r,l,i,s,a,c;let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!(e.getVoxelState(t,n,o).getInt8(0)>0)&&!!((null!=(s=null==(r=e.tryGetVoxelState(t+u,n,o))?void 0:r.getInt8(0))?s:0)>0)&&!!((null!=(a=null==(l=e.tryGetVoxelState(t,n-u,o))?void 0:l.getInt8(0))?a:0)>0)&&!!((null!=(c=null==(i=e.tryGetVoxelState(t,n,o-u))?void 0:i.getInt8(0))?c:0)>0)})(e,n,i,s,t)&&u.c.chance(1-l.py)&&r.push(new o.Pq0(n,i,s))}return r}let p=new o.Pq0;new o.Pq0;class v extends o.eaF{createDots(){let e=new o.ZLX(new o.WBB(.1,8),new i.Y,4);for(let[t,n]of((0,a.mj)(e,this),f.rU.entries()))e.setMatrixAt(t,(0,s.w)({position:n})),e.setColorAt(t,(0,s._)("#ffffff"));return this.dots=e,this}updateDots(e){this.dots||this.createDots();let t=this.dots;for(let[n,o]of f.rU.entries()){t.setMatrixAt(n,(0,s.w)({position:o}));let r=e.isWithin(o)?"#00ffa6":"#ff0000";t.setColorAt(n,(0,s._)(r))}t.instanceMatrix.needsUpdate=!0,t.instanceColor.needsUpdate=!0}get gridCoords(){return this._gridCoords}setGridCoords(e){(0,r.wX)(e,this._gridCoords);let{x:t,y:n}=this._gridCoords;this.scale.setScalar(.5**n),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.Pq0,r=.5**t,l=e*f.NP*r,i=f.Bg*(.5*r*2-1),s=e*f.NP*r+2*f.Bg*(1-r);n.set(l,i,s)}(t,n,this.position)}toWhite(){this.material.color.set(0xffffff)}toColor(){this.material.color.set(this.color)}constructor({world:e=null,color:t=0xffffff*u.c.random()}={}){let n=Math.ceil(f.NP*f.Bg*4.8),r=new l.AA(n,1);for(let{x:e,y:t}of(0,c.loop2)(f.NP,f.Bg))d(e,t,p).multiplyScalar(4),w(r,p,4);for(let e=0;e<f.NP;e+=2)d(e,f.Bg-1,p).add(new o.Pq0(1,0,0)).multiplyScalar(4),w(r,p,4),u.c.chance(.8)&&(d(e,f.Bg-1,p).add(new o.Pq0(1,1,0)).multiplyScalar(4),w(r,p,4));{let e=y(r,2),t=g(r,2);for(let t of e)w(r,t,2,1);for(let e of t)w(r,e,2,0)}{let e=y(r,1),t=g(r,1);for(let t of e)u.c.chance(.25)&&w(r,t,1,1);for(let e of t)u.c.chance(.25)&&w(r,e,1,0)}console.time("geometry");let s=(0,l.Cx)(r.voxelFaces());console.timeEnd("geometry");s.scale(.25,.25,.25);let h=new i.Y({color:t});super(s,new i.Y({color:t,side:o.$EB})),this._gridCoords=new o.I9Y,this.world=null,this.dots=null,(0,a.mj)(new o.eaF(s,h),this),(0,a.mj)(new o.IzY,this),this.chunk=r,this.color=t,this.world=e}}},66225:(e,t,n)=>{Promise.resolve().then(n.bind(n,74978))},66851:(e,t,n)=>{"use strict";n.d(t,{_:()=>a,w:()=>i});var o=n(49797),r=n(96273);let l=new o.kn4;function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return(0,r.vl)(e,t)}let s=new o.Q1f;function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return t.set(e)}},74978:(e,t,n)=>{"use strict";n.d(t,{Main:()=>f});var o=n(70691),r=n(49797),l=n(53097),i=n(56647),s=n(9723),a=n(87381),c=n(23120);class u extends r.YJl{onTick(e){let{mesh:t}=this.parts;t.rotation.y+=e.deltaTime}constructor(...e){super(...e),this.parts=(()=>{let e=(0,a.mj)(new r.eaF(new r.WBB,new s.Y),{parent:this,userData:{onPointerTap:()=>alert("Hello, world!")}}),t=(0,a.mj)(new i.R,this);t.grid2().draw();let n=new c.hf;return(0,a.mj)(n,this),{mesh:e,line:t}})()}}function f(){return(0,o.jsx)(l.uB,{webgl:!0,vertigoControls:{size:20},children:(0,o.jsxs)("div",{className:"Main layer thru flex flex-col items-start justify-start p-4",children:[(0,o.jsx)("h1",{children:"Chunk Viewer"}),(0,o.jsx)(l.q,{value:u})]})})}},95736:(e,t,n)=>{"use strict";function o(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{a:()=>s});let r={preventDefault:!1,strictTarget:void 0},l={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:"",phase:"down"},i=0;function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let s=i++,[a,c,u]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:f}={...r,...c},d=null,h=e=>{var t;if((null!=(t=c.strictTarget)?!!t:a===document.body)&&e.target!==a)return;"keydown"===e.type&&(d=e);let{ctrlKey:n=!1,altKey:r=!1,shiftKey:i=!1,metaKey:h=!1}=null!=d?d:{},w={id:s,event:e,downEvent:d,modifiers:{ctrl:n,alt:r,shift:i,meta:h}};for(let t=0,s=u.length;t<s;t++){let[s,a]=u[t],{key:c,keyCaseInsensitive:g,code:y,noModifiers:p,modifiers:v,phase:m="down"}=function(e){let t="string"==typeof e?{...l,key:e}:{...l,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(s);switch(e.type){case"keydown":if("down"!==m)continue;break;case"keyup":if("up"!==m)continue}Object.values({key:o(g?e.key.toLowerCase():e.key,c),code:o(e.code,y),noModifiers:!p||!1===n&&!1===r&&!1===i&&!1===h,modifiers:function(e,t){let{ctrlKey:n,altKey:o,shiftKey:r,metaKey:l}=e;if("function"==typeof t)return t({ctrl:n,alt:o,shift:r,meta:l});let{ctrl:i=!1,alt:s=!1,shift:a=!1,meta:c=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return i===n&&s===o&&a===r&&c===l}(d,v)}).every(Boolean)&&(f&&e.preventDefault(),a(w))}};return a.addEventListener("keydown",h,{passive:!1}),a.addEventListener("keyup",h,{passive:!1}),{destroy:()=>{a.removeEventListener("keydown",h),a.removeEventListener("keyup",h)}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5611,7190,6564,7223,9635,8921,4957,7775,6814,7953,4638,6726,2598,1213,9673,8083,7112,41,6647,5117,3097,1319,6852,7358],()=>t(66225)),_N_E=e.O()}]);