(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6640],{65513:(e,t,n)=>{"use strict";n.d(t,{Main:()=>f});var l=n(70691),r=n(49797),a=n(17953),o=n(81074),i=n(33540),s=n(48181),u=n(94065);let d={emissive:.2,shadowColor:"#808080",power:2,sunDirection:[1,3,-1]},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white",t=arguments.length>1?arguments[1]:void 0;return(0,a.Fn)(()=>{let{emissive:n,shadowColor:l,power:r,sunDirection:o}={...d,...t},i=(0,u.jj)(o).negate().normalize(),s=a.O7c.normalize().dot((0,a.eR5)(i)).add(1).mul(.5).pow(r).oneMinus(),m=(0,a.jhA)(n,1,s);return(0,a.jhA)((0,a.yWT)(l),(0,a.yWT)(e),m.mul(1))})()};(0,a.Fn)(e=>{let[t,n=1]=e,l=t.length().max(n);return t.mul((0,a.fVC)(n).div(l))}),(0,a.Fn)(e=>{let[t,n]=e;return(0,a.fVC)(t).sign().mul((0,a.fVC)(t).abs().pow(n))}),(0,a.Fn)(e=>{let[t,n]=e;return(0,a.fVC)(1).sub((0,a.fVC)(2).mul(t).sub(1).abs().pow(n))}),(0,a.Fn)(e=>{let[t]=e,n=(0,a.eR5)(t),l=n.length(),r=(0,a.lnd)().toVar();return(0,a.If)(l.greaterThan(a.p8E),()=>{r.assign((0,a.lnd)(n.div(l),l))}),r}),(0,a.Fn)(e=>{let[t,n]=e,l=(0,a.ZcS)(t);(0,a.fVC)(n);let r=(0,a.fVC)(n).cos(),o=(0,a.fVC)(n).sin();return(0,a.ZcS)(l.x.mul(r).sub(l.y.mul(o)),l.x.mul(o).add(l.y.mul(r)))}),(0,a.Fn)(e=>{let[t,n,l]=e,r=(0,a.ZcS)(t),o=(0,a.ZcS)(n),i=(0,a.ZcS)(l);return r.sub(i).mul(o).add(i)}),(0,a.Fn)(e=>{let[t,n]=e,l=n.cos(),r=n.sin(),o=l.oneMinus(),i=t.x,s=t.y,u=t.z;return(0,a.w00)(l.add(i.mul(i).mul(o)),i.mul(s).mul(o).sub(u.mul(r)),i.mul(u).mul(o).add(s.mul(r)),i.mul(s).mul(o).add(u.mul(r)),l.add(s.mul(s).mul(o)),s.mul(u).mul(o).sub(i.mul(r)),i.mul(u).mul(o).sub(s.mul(r)),s.mul(u).mul(o).add(i.mul(r)),l.add(u.mul(u).mul(o)))}),(0,a.Fn)(e=>{let[t,n=0,l=437]=e,r=(0,a.tWU)(t.add(n).mul(l)),o=(0,a.tWU)(t.add(n).add(1).mul(l)),i=(0,a.tWU)(t.add(n).add(2).mul(l));return(0,a.eR5)(r,o,i)}),(0,a.Fn)(e=>{let[t,n=0,l=437]=e,r=(0,a.tWU)(t.add(n).mul(l)),o=(0,a.tWU)(t.add(n).add(1).mul(l)),i=(0,a.tWU)(t.add(n).add(2).mul(l)),s=(0,a.tWU)(t.add(n).add(3).mul(l));return(0,a.lnd)(r,o,i,s)}),(0,a.Fn)(e=>{let[t]=e,n=(0,a.tWU)(t.add(17).mul(437)),l=(0,a.tWU)(t.add(23).mul(439)),r=n.mul(2*Math.PI),o=l.mul(2).sub(1),i=o.mul(o).oneMinus().sqrt();return(0,a.eR5)(i.mul(r.cos()),i.mul(r.sin()),o)});var c=n(79911),h=n(72612),p=n(66587);class w extends r.YJl{onDestroy(){}constructor(...e){super(...e),this.parts=(()=>{let e=(0,c.mj)(new s.R,this).rectangle([1,1]);for(let t of(e.line([.05,.5],[.3,.5]),e.line([.95,.5],[.7,.5]),e.polyline([[.4,.05],[.6,.05]]),e.polyline([[.4,.95],[.6,.95]]),(0,h.loop)(10))){let n=.05+.2*t.p;e.line([n,.05],[n,.25]),e.line([n,.75],[n,.95]),e.line([1-n,.05],[1-n,.25]),e.line([1-n,.75],[1-n,.95])}return e.circle([.5,.5],.2),e.circle([.5,.5],.22),e.capsule2([.67,.67],[.32999999999999996,.32999999999999996],.05),e.capsule2([.67,.32999999999999996],[.32999999999999996,.67],.05),e.cross([.5,.5],.05),e.draw(),{line:e}})()}}class y extends r.YJl{onInitialize(e){(0,p.uW)(e).then(e=>{var t=this;let n=e.createBody({parent:this,position:[-.3,0,0]});n.mesh.material=new o.P8l({colorNode:m().mul((0,a.eR5)((0,a.uv)().mul((0,a.ZcS)(15,10)).fract(),1))}),!function(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.createBody({parent:t,position:[l+a/2,r+o/2,0],shape:new p.AQ.Shape.Box([a/2,o/2,.1]),type:p.AQ.MotionType.KINEMATIC}).mesh.material=n.mesh.material}(-2,-2,8,1),e.createBody({parent:this,position:[.1,-2,0],type:p.AQ.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({parent:this,position:[-.9,-2,-.1],type:p.AQ.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({parent:this,position:[-.5,-2,1],type:p.AQ.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({shape:new p.AQ.Shape.Box([.5,.5,.01]),allowedDOFs:p.AQ.AllowedDOF.Plane2D,position:[.15,3,0],parent:this})})}constructor(...e){super(...e),this.parts=(()=>{let e=(0,c.mj)(new s.R,this).grid2({size:4}).opacity(.05).draw();return(0,c.mj)(new w,this),(0,c.mj)(new w,{parent:this,position:[1,0,0]}),{line:e}})()}}function f(){return(0,l.jsx)(i.uB,{webgpu:!0,vertigoControls:{size:5},children:(0,l.jsxs)("div",{className:"Main layer thru flex flex-col items-start justify-start p-4",children:[(0,l.jsx)("h1",{children:"Jolt Physics Test"}),(0,l.jsx)(i.q,{value:y})]})})}},66587:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>f,uW:()=>T});var l=n(49797),r=n(44694),a=n(86710),o=n(96555),i=n(94065);let s=new l.Pq0,u=new l.O9p,d=new l.PTz;var m=function(e){return e[e.STATIC=0]="STATIC",e[e.KINEMATIC=1]="KINEMATIC",e[e.DYNAMIC=2]="DYNAMIC",e}({}),c=function(e){return e[e.All=63]="All",e[e.Plane2D=35]="Plane2D",e[e.RotationX=8]="RotationX",e[e.RotationY=16]="RotationY",e[e.RotationZ=32]="RotationZ",e[e.TranslationX=1]="TranslationX",e[e.TranslationY=2]="TranslationY",e[e.TranslationZ=4]="TranslationZ",e}({}),h=function(e){return e[e.STATIC=0]="STATIC",e[e.MOVING=1]="MOVING",e}({});let p=Object.keys(h).length/2;class w{toJoltShape(){throw Error("Not implemented")}toMesh(){throw Error("Not implemented")}}w.Sphere=class extends w{toJoltShape(){return new a.e.SphereShape(this.radius)}toMesh(){return new l.eaF(new l.WBB(this.radius,8))}constructor(e){super(),this.radius=e}},w.Box=class extends w{toJoltShape(){let e=function(e,t){null!=t||(t=new o.A.Vec3);let{x:n,y:l,z:a}=(0,r.jj)(e,s);return t.SetX(n),t.SetY(l),t.SetZ(a),t}(this.halfExtents,new a.e.Vec3);return new a.e.BoxShape(e)}toMesh(){let{x:e,y:t,z:n}=(0,r.jj)(this.halfExtents);return new l.eaF(new l.iNn(2*e,2*t,2*n))}constructor(e){super(),this.halfExtents=e}};class y{constructor(e,t,n){this.body=e,this.bodyInterface=t,this.mesh=n}}let f={MotionType:m,AllowedDOF:c,Layers:h,Shape:w,JoltBundle:y};async function T(e){await (0,a._)();let t=new a.e.JoltSettings;t.mMaxWorkerThreads=3;let n=new a.e.ObjectLayerPairFilterTable(p);n.EnableCollision(0,1),n.EnableCollision(1,1);let o=new a.e.BroadPhaseLayer(0),m=new a.e.BroadPhaseLayer(1),c=new a.e.BroadPhaseLayerInterfaceTable(p,2);c.MapObjectToBroadPhaseLayer(0,o),c.MapObjectToBroadPhaseLayer(1,m),t.mObjectLayerPairFilter=n,t.mBroadPhaseLayerInterface=c,t.mObjectVsBroadPhaseLayerFilter=new a.e.ObjectVsBroadPhaseLayerFilterTable(c,2,n,p);let h=new a.e.JoltInterface(t);a.e.destroy(t);let f={moving:[]},T=h.GetPhysicsSystem(),S=T.GetBodyInterface(),v=e=>{for(let{mesh:t,body:n}of(h.Step(e,e>1/55?2:1),f.moving))!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Pq0;t.set(e.GetX(),e.GetY(),e.GetZ())}(n.GetPosition(),t.position),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.PTz;t.set(e.GetX(),e.GetY(),e.GetZ(),e.GetW())}(n.GetRotation(),t.quaternion)};return e.ticker.onTick(e=>{v(e.deltaTime)}),{jolt:h,physicsSystem:T,bodyInterface:S,createBody:function(){let{shape:t=new w.Sphere(.5),type:n=2,allowedDOFs:l=63,mesh:o=null,position:m=[0,0,0],rotation:c=[0,0,0],parent:h=e.scene,gravityFactor:p=1,restitution:T=0,inertiaMultiplier:v=1,allowSleeping:A=!1,meshMaterial:I=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=new a.e.BodyCreationSettings(t.toJoltShape(),function(e,t){let{x:n,y:l,z:a}=(0,r.jj)(e,s);return t.SetX(n),t.SetY(l),t.SetZ(a),t}(m,new a.e.RVec3),function(e,t){(0,i.if)(e,u);let{x:n,y:l,z:r,w:a}=d.setFromEuler(u);return t.SetX(n),t.SetY(l),t.SetZ(r),t.SetW(a),t}(c,new a.e.Quat),n,1);b.mAllowedDOFs=l,b.mGravityFactor=p,b.mRestitution=T,b.mInertiaMultiplier=v,b.mAllowSleeping=A;let C=S.CreateBody(b);a.e.destroy(b),S.AddBody(C.GetID(),a.e.EActivation_Activate),null!=o||(o=t.toMesh()),h.add(o),I&&(o.material=I);let M=new y(C,S,o);return(1===n||2===n)&&f.moving.push(M),M}}}},66620:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var l=n(89868),r=n(44138);function a(e,t){var n=(0,r._)(e,t,"update");return(0,l._)(e,n)}},84733:(e,t,n)=>{Promise.resolve().then(n.bind(n,65513))},86710:(e,t,n)=>{"use strict";let l;n.d(t,{_:()=>a,e:()=>l});var r=n(96555);async function a(){return l||(l=await (0,r.A)()),l}}},e=>{var t=t=>e(e.s=t);e.O(0,[5611,7190,6564,4272,7962,9635,8921,7953,4512,7775,7436,9901,146,487,9332,3445,3414,9717,1763,2143,3540,8181,1319,6852,7358],()=>t(84733)),_N_E=e.O()}]);