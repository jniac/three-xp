(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091,5721,2544],{5932:function(e,t,n){Promise.resolve().then(n.t.bind(n,34709,23)),Promise.resolve().then(n.bind(n,85493)),Promise.resolve().then(n.bind(n,28249)),Promise.resolve().then(n.bind(n,10358)),Promise.resolve().then(n.bind(n,28227)),Promise.resolve().then(n.bind(n,84501)),Promise.resolve().then(n.bind(n,11737)),Promise.resolve().then(n.bind(n,73861)),Promise.resolve().then(n.bind(n,3604)),Promise.resolve().then(n.bind(n,41558)),Promise.resolve().then(n.bind(n,75061)),Promise.resolve().then(n.t.bind(n,96687,23)),Promise.resolve().then(n.bind(n,92948))},85493:function(e,t,n){"use strict";n.d(t,{Main:function(){return A}});var i=n(32617),r=n(87200),a=n(23657),s=n(59989),o=n(30176),l=n(37186),c=n(7974),d=n(94116),h=n(19932),u=n(24277),f=n(88068),p=n(57452),v=n(44403),m=n(29368),g=n(30699),x=n(69315),w=n(6549),y=n(10313),b=n(17557),M=n(50897);class S extends w.w{dispose(){this.gtaoNoiseTexture.dispose(),this.pdNoiseTexture.dispose(),this.normalRenderTarget.dispose(),this.gtaoRenderTarget.dispose(),this.pdRenderTarget.dispose(),this.normalMaterial.dispose(),this.pdMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}get gtaoMap(){return this.pdRenderTarget.texture}setGBuffer(e,t){void 0!==e?(this.depthTexture=e,this.normalTexture=t,this._renderGBuffer=!1):(this.depthTexture=new l.$YQ,this.depthTexture.format=l.brP,this.depthTexture.type=l.wJv,this.normalRenderTarget=new l.dd2(this.width,this.height,{minFilter:l.TyD,magFilter:l.TyD,type:l.cLu,depthTexture:this.depthTexture}),this.normalTexture=this.normalRenderTarget.texture,this._renderGBuffer=!0);let n=this.normalTexture?1:0,i=this.depthTexture===this.normalTexture?"w":"x";this.gtaoMaterial.defines.NORMAL_VECTOR_TYPE=n,this.gtaoMaterial.defines.DEPTH_SWIZZLING=i,this.gtaoMaterial.uniforms.tNormal.value=this.normalTexture,this.gtaoMaterial.uniforms.tDepth.value=this.depthTexture,this.pdMaterial.defines.NORMAL_VECTOR_TYPE=n,this.pdMaterial.defines.DEPTH_SWIZZLING=i,this.pdMaterial.uniforms.tNormal.value=this.normalTexture,this.pdMaterial.uniforms.tDepth.value=this.depthTexture,this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture}setSceneClipBox(e){e?(this.gtaoMaterial.needsUpdate=1!==this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=1,this.gtaoMaterial.uniforms.sceneBoxMin.value.copy(e.min),this.gtaoMaterial.uniforms.sceneBoxMax.value.copy(e.max)):(this.gtaoMaterial.needsUpdate=0===this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=0)}updateGtaoMaterial(e){void 0!==e.radius&&(this.gtaoMaterial.uniforms.radius.value=e.radius),void 0!==e.distanceExponent&&(this.gtaoMaterial.uniforms.distanceExponent.value=e.distanceExponent),void 0!==e.thickness&&(this.gtaoMaterial.uniforms.thickness.value=e.thickness),void 0!==e.distanceFallOff&&(this.gtaoMaterial.uniforms.distanceFallOff.value=e.distanceFallOff,this.gtaoMaterial.needsUpdate=!0),void 0!==e.scale&&(this.gtaoMaterial.uniforms.scale.value=e.scale),void 0!==e.samples&&e.samples!==this.gtaoMaterial.defines.SAMPLES&&(this.gtaoMaterial.defines.SAMPLES=e.samples,this.gtaoMaterial.needsUpdate=!0),void 0!==e.screenSpaceRadius&&(e.screenSpaceRadius?1:0)!==this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS&&(this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS=e.screenSpaceRadius?1:0,this.gtaoMaterial.needsUpdate=!0)}updatePdMaterial(e){let t=!1;void 0!==e.lumaPhi&&(this.pdMaterial.uniforms.lumaPhi.value=e.lumaPhi),void 0!==e.depthPhi&&(this.pdMaterial.uniforms.depthPhi.value=e.depthPhi),void 0!==e.normalPhi&&(this.pdMaterial.uniforms.normalPhi.value=e.normalPhi),void 0!==e.radius&&e.radius!==this.radius&&(this.pdMaterial.uniforms.radius.value=e.radius),void 0!==e.radiusExponent&&e.radiusExponent!==this.pdRadiusExponent&&(this.pdRadiusExponent=e.radiusExponent,t=!0),void 0!==e.rings&&e.rings!==this.pdRings&&(this.pdRings=e.rings,t=!0),void 0!==e.samples&&e.samples!==this.pdSamples&&(this.pdSamples=e.samples,t=!0),t&&(this.pdMaterial.defines.SAMPLES=this.pdSamples,this.pdMaterial.defines.SAMPLE_VECTORS=(0,M.a)(this.pdSamples,this.pdRings,this.pdRadiusExponent),this.pdMaterial.needsUpdate=!0)}render(e,t,n){switch(this._renderGBuffer&&(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility()),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.gtaoMaterial.uniforms.cameraWorldMatrix.value.copy(this.camera.matrixWorld),this.renderPass(e,this.gtaoMaterial,this.gtaoRenderTarget,16777215,1),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.renderPass(e,this.pdMaterial,this.pdRenderTarget,16777215,1),this.output){case S.OUTPUT.Off:break;case S.OUTPUT.Diffuse:this.copyMaterial.uniforms.tDiffuse.value=n.texture,this.copyMaterial.blending=l.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case S.OUTPUT.AO:this.copyMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.copyMaterial.blending=l.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case S.OUTPUT.Denoise:this.copyMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.copyMaterial.blending=l.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case S.OUTPUT.Depth:this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case S.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=l.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case S.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=n.texture,this.copyMaterial.blending=l.jFi,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blendMaterial.uniforms.intensity.value=this.blendIntensity,this.blendMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.renderPass(e,this.blendMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.GTAOPass: Unknown output type.")}}renderPass(e,t,n,i,r){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,null!=i&&(e.setClearColor(i),e.setClearAlpha(r||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,t,n,i,r){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,i=t.clearColor||i,r=t.clearAlpha||r,null!=i&&(e.setClearColor(i),e.setClearAlpha(r||0),e.clear()),this.scene.overrideMaterial=t;let o=this.camera.layers.mask;this.camera.layers.set(0),e.render(this.scene,this.camera),this.camera.layers.mask=o,this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,t){this.width=e,this.height=t,this.gtaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.pdRenderTarget.setSize(e,t),this.gtaoMaterial.uniforms.resolution.value.set(e,t),this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.pdMaterial.uniforms.resolution.value.set(e,t),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse)}overrideVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)})}restoreVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){let n=t.get(e);e.visible=n}),t.clear()}generateNoise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,t=new x.L,n=new Uint8Array(e*e*4);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let a=i,s=r;n[(i*e+r)*4]=(.5*t.noise(a,s)+.5)*255,n[(i*e+r)*4+1]=(.5*t.noise(a+e,s)+.5)*255,n[(i*e+r)*4+2]=(.5*t.noise(a,s+e)+.5)*255,n[(i*e+r)*4+3]=(.5*t.noise(a+e,s+e)+.5)*255}let i=new l.IEO(n,e,e,l.wk1,l.ywz);return i.wrapS=l.rpg,i.wrapT=l.rpg,i.needsUpdate=!0,i}constructor(e,t,n,i,r,a,s){super(),this.width=void 0!==n?n:512,this.height=void 0!==i?i:512,this.clear=!0,this.camera=t,this.scene=e,this.output=0,this._renderGBuffer=!0,this._visibilityCache=new Map,this.blendIntensity=1,this.pdRings=2,this.pdRadiusExponent=2,this.pdSamples=16,this.gtaoNoiseTexture=(0,b.mK)(),this.pdNoiseTexture=this.generateNoise(),this.gtaoRenderTarget=new l.dd2(this.width,this.height,{type:l.cLu}),this.pdRenderTarget=this.gtaoRenderTarget.clone(),this.gtaoMaterial=new l.jyz({defines:Object.assign({},b.Sp.defines),uniforms:l.rDY.clone(b.Sp.uniforms),vertexShader:b.Sp.vertexShader,fragmentShader:b.Sp.fragmentShader,blending:l.jFi,depthTest:!1,depthWrite:!1}),this.gtaoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.gtaoMaterial.uniforms.tNoise.value=this.gtaoNoiseTexture,this.gtaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.normalMaterial=new l.RSm,this.normalMaterial.blending=l.jFi,this.pdMaterial=new l.jyz({defines:Object.assign({},M.m.defines),uniforms:l.rDY.clone(M.m.uniforms),vertexShader:M.m.vertexShader,fragmentShader:M.m.fragmentShader,depthTest:!1,depthWrite:!1}),this.pdMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.pdMaterial.uniforms.tNoise.value=this.pdNoiseTexture,this.pdMaterial.uniforms.resolution.value.set(this.width,this.height),this.pdMaterial.uniforms.lumaPhi.value=10,this.pdMaterial.uniforms.depthPhi.value=2,this.pdMaterial.uniforms.normalPhi.value=3,this.pdMaterial.uniforms.radius.value=8,this.depthRenderMaterial=new l.jyz({defines:Object.assign({},b.gs.defines),uniforms:l.rDY.clone(b.gs.uniforms),vertexShader:b.gs.vertexShader,fragmentShader:b.gs.fragmentShader,blending:l.jFi}),this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new l.jyz({uniforms:l.rDY.clone(y.C.uniforms),vertexShader:y.C.vertexShader,fragmentShader:y.C.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:l.Vdb,blendDst:l.c8b,blendEquation:l.bGH,blendSrcAlpha:l.fSK,blendDstAlpha:l.c8b,blendEquationAlpha:l.bGH}),this.blendMaterial=new l.jyz({uniforms:l.rDY.clone(b.mF.uniforms),vertexShader:b.mF.vertexShader,fragmentShader:b.mF.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:l.Xaj,blendSrc:l.Vdb,blendDst:l.c8b,blendEquation:l.bGH,blendSrcAlpha:l.fSK,blendDstAlpha:l.c8b,blendEquationAlpha:l.bGH}),this.fsQuad=new w.T(null),this.originalClearColor=new l.Ilk,this.setGBuffer(r?r.depthTexture:void 0,r?r.normalTexture:void 0),void 0!==a&&this.updateGtaoMaterial(a),void 0!==s&&this.updatePdMaterial(s)}}S.OUTPUT={Off:-1,Default:0,Diffuse:1,Depth:2,Normal:3,AO:4,Denoise:5};var C=n(32344);class z extends u.C{render(e,t,n,i,r){var a;if(null===(a=this.onBeforeRender)||void 0===a||a.call(this),this.disableBackground){let a=this.scene.background;this.scene.background=null,super.render(e,t,n,i,r),this.scene.background=a}else super.render(e,t,n,i,r)}constructor(...e){super(...e),this.onBeforeRender=null,this.disableBackground=!1}}function P(){let{ref:e}=(0,a.sv)(function*(e){let t=function(e){let{width:t=window.innerWidth,height:n=window.innerHeight}=e,i=new o.WebGLRenderer({});i.setSize(t,n),i.setPixelRatio(window.devicePixelRatio);let r=new l.cPb(75,t/n,.1,1e3);r.position.z=8,new c.z(r,i.domElement);let a=new m.vB().set({activeDuration:30}),s=(0,g.s)(()=>a.requestActivation()),u=function(e){let t=new l.xsS;{let e=new l.Ox3(16777215,1);e.position.set(0,3,1),t.add(e);let n=new l.vmT("#afdbf5","#845244",1);t.add(n)}new C.x().setPath("https://threejs.org/examples/textures/equirectangular/").loadAsync("pedestrian_overpass_1k.hdr").then(e=>{e.mapping=l.dSO,t.environmentIntensity=.1,t.environment=e,t.backgroundBlurriness=.5,t.background=e});let n=new l.Kj0(new l.FE5(2,1,512,64),new l.EJi);t.add(n);let i=new l.Kj0(new l.DvJ(10,1,3),new l.EJi);t.add(i);let r=new l.Kj0(new l.DvJ(1,10,3),new l.EJi);r.position.set(5,0,0),t.add(r);let a=new l.Kj0(new l._12(10,10),new l.EJi({color:"#d1ddff",transmission:1,roughness:0,dispersion:.1,ior:2.5,opacity:1}));return a.layers.set(1),t.add(a),e.onTick(e=>{n.rotation.x+=.5*e.deltaTime,n.rotation.y+=.5*e.deltaTime}),t}(a),x=new d.x(i),w=new z(u,r);w.onBeforeRender=()=>{r.layers.enableAll()},x.addPass(w);let y=new S(u,r,t,n);x.addPass(y);let b=new h.v;x.addPass(b);let M=new f.T(p.C);M.material.uniforms.resolution.value.set(1/t,1/n),x.addPass(M),a.onTick(()=>{x.render()}),v.v.on("REQUIRE:THREE",e=>{e.payload={three:P}});let P={renderer:i,camera:r,scene:u,ticker:a,passes:{render:w,ao:y,output:b},destroy:()=>{i.domElement.remove(),a.destroy(),s.destroy()}};return P}({width:e.clientWidth,height:e.clientHeight});yield t,Object.assign(window,{three:t}),e.appendChild(t.renderer.domElement)},[]);return(0,i.jsx)("div",{ref:e,className:"absolute inset-0"})}function A(){let[e,t]=(0,r.useState)(!0);return(0,i.jsxs)("div",{className:"page",children:[(0,i.jsx)(P,{}),(0,i.jsxs)("div",{className:"absolute inset-0 p-8 flex flex-col items-start justify-start pointer-through",children:[(0,i.jsxs)("div",{className:"flex flex-col items-start justify-start pointer-through max-w-[480px]",children:[(0,i.jsx)("h1",{className:"text-4xl uppercase",children:"ao-transparent"}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsx)("p",{children:"Handling Ambient Occlusion and transparent objects"}),(0,i.jsx)("p",{children:"The glass does not generate AO"}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("p",{children:["This is achieved by using a fork of the ",(0,i.jsx)("a",{href:"https://github.com/mrdoob/three.js/blob/master/examples/jsm/postprocessing/GTAOPass.js",children:"GTAOPass"}),"\xa0where the camera layer mask is set to 0 (default layer) and the glass object is set to layer 1 (transparent objects)."]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl",children:"Pros:"}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:"Simple (layer based)"})})]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl",children:"Cons:"}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:"AO is still rendered on top of transparent objects. For semi-opaque objects, this is could be a problem."})})]})]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("label",{htmlFor:"ao-enabled",className:"select-none",children:"Enable AO"}),(0,i.jsx)("input",{type:"checkbox",name:"ao-enabled",id:"ao-enabled",checked:e,onChange:()=>{let{payload:e}=s.v.send("REQUIRE:THREE");if(e){let{three:n}=e,{passes:i}=n,{ao:r}=i;r.enabled=!r.enabled,t(r.enabled)}}})]})]})]})}},28249:function(e,t,n){"use strict";n.d(t,{Art:function(){return _}});var i,r,a,s,o=n(32617),l=n(81540),c=n(97809),d=n(23657),h=n(47090),u=n(44403),f=n(58100),p=n(29368),v=n(22046),m=n(30176),g=n(37186),x=n(94116),w=n(19932),y=n(24277),b=n(88068),M=n(57452),S=n(30699),C=n(54157),z=n(72793),P=n(99963);function A(){let{ref:e}=(0,d.Nv)(function*(e){let t=function(e){let{width:t=window.innerWidth,height:n=window.innerHeight,pixelRatio:i=window.devicePixelRatio}=e;i=1;let r=new m.WebGLRenderer({antialias:!0});r.setSize(t,n),r.setPixelRatio(i);let a=new g.cPb(75,t/n,.1,1e3);a.position.z=4.7,a.near=a.position.z-2.4,a.far=a.position.z+1,a.updateProjectionMatrix();let s=new g.xsS,o=new g.ZAu;s.add(o);let l=new g.FE5(2,1.02,1024,512),c=new g.FE5(2,.9,1024,512);c.computeBoundingSphere(),c.computeBoundingBox();let d=new g.Kj0(l,new g.vBJ({color:16776960,side:g.ehD}));o.add(d);let h=new g.Kj0(new g.FE5(2,.25,1024,512),new g.vBJ({color:16711935,side:g.ehD}));d.add(h);let f=new g.Kj0(new g.FE5(2,.35,1024,512),new g.vBJ({color:16711935,side:g.ehD}));d.add(f);let v={camera:a,knotWrapper:o,knot:d,knotGeometry1:l,knotGeometry2:c},A=new g.dd2(t*i,n*i,{depthBuffer:!0,depthTexture:new g.$YQ(t*i,n*i,g.LsT)});function T(e){let{r:t,g:n,b:i}=new g.Ilk(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(i.toFixed(3),")")}let F=new g.jyz({uniforms:{depthTexture:{value:A.depthTexture},cameraNear:{value:a.near},cameraFar:{value:a.far}},vertexShader:"\n      varying vec2 vUv;\n  \n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    ",fragmentShader:"\n      ".concat(z.g,"\n      ").concat(P.i,"\n  \n      vec3[] COLORS = vec3[](\n        aliceblue,\n        ").concat(T("#471864"),",\n        aqua,\n        aquamarine,\n        ").concat(T("#c8d50d"),"\n      );\n      int COLORS_COUNT = 5;\n  \n      uniform sampler2D depthTexture;\n      uniform float cameraNear;\n      uniform float cameraFar;\n      varying vec2 vUv;\n  \n      float lines(float x) {\n        // Inside your fragment shader\n        float lineWidth = 0.03; // Adjust line width to what you need\n        float edgeSmoothness = 0.01; // Controls the smooth transition around the line edge\n  \n        // Get the position in the UV space (assuming you're using UV coordinates)\n  \n  \n        // Calculate the fract values to simulate lines\n        float linePattern = 1.0 - fract(x * 20.0); // 10.0 determines the spacing of the lines\n  \n        // Use smoothstep to soften the edge of the line\n        float line = smoothstep(lineWidth - edgeSmoothness, lineWidth + edgeSmoothness, linePattern);\n  \n        return line;\n      }\n  \n      vec3 removeGamma(vec3 color) {\n        return pow(color, vec3(2.2));  // Linearize color\n      }\n  \n      vec3 applyGamma(vec3 color) {\n        return pow(color, vec3(1.0 / 2.2));  // Apply gamma\n      }\n  \n      float linearizeDepth(float depth) {\n        float z = depth * 2.0 - 1.0; // Back to NDC\n        return (2.0 * cameraNear * cameraFar) / (cameraFar + cameraNear - z * (cameraFar - cameraNear));\n      }\n  \n      void main() {\n        float depth = texture2D(depthTexture, vUv).r;\n        float linearDepth = linearizeDepth(depth);\n        // gl_FragColor = vec4(vec3(linearDepth), 1.0);\n        // gl_FragColor = vec4(vec3(depth), 1.0);\n        // gl_FragColor = vec4(vUv, 1.0, 1.0);\n  \n        float x = 1.0 - depth;\n        x *= float(COLORS_COUNT);\n        float f = 1.0 - fract(x);\n        int i = int(floor(x));\n        vec3 color1 = COLORS[i];\n        vec3 color2 = COLORS[(i + COLORS_COUNT - 1) % COLORS_COUNT];\n  \n        vec3 color = mix(color1, color2, easeInOut4(f));\n        // color *= mix(0.8, 1.1, f * f * f);\n  \n        color = 1.0 - color;\n  \n        gl_FragColor.a = 1.0;\n        gl_FragColor.rgb = color;\n        // gl_FragColor.rgb *= lines(depth);\n      }\n    ")}),D=new g._12(2,2),j=new g.Kj0(D,F),E=new g.iKG(-1,1,1,-1,0,1),R=new x.x(r),k=new y.C(j,E);R.addPass(k);let B=new b.T(M.C);B.material.uniforms.resolution.value.set(1/t,1/n),R.addPass(B);let O=new w.v;R.addPass(O);let N=p.vB.current();function _(){r.dispose(),r.domElement.remove(),A.dispose(),R.dispose(),N.destroy()}return N.set({activeDuration:60}),N.onTick(e=>{C.fw.core.updateInstances(e.deltaTime),r.setRenderTarget(A),r.render(s,a),r.setRenderTarget(null),R.render()}),{renderer:r,scene:s,camera:a,artParts:v,resize:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;r.setSize(e,t),r.setPixelRatio(n),a.aspect=e/t,a.updateProjectionMatrix(),A.setSize(e*n,t*n),R.setSize(e,t),R.setPixelRatio(n),B.material.uniforms.resolution.value.set(1/e,1/t)},init:function*(){yield(0,S.s)(N.requestActivation),yield _,yield u.v.on("REQUIRE:ART_PARTS",e=>{e.payloadAssign(v)})},destroy:_}}({width:e.clientWidth,height:e.clientHeight});yield*t.init(),e.appendChild(t.renderer.domElement),yield(0,c.f)(e,{onSize:e=>{t.resize(e.size.x,e.size.y)}}),yield()=>t.renderer.domElement.remove()},[]);return(0,o.jsx)("div",{ref:e,className:"absolute inset-0"})}var T=n(6246),F=n(87200);let D=["#452E00","#F8FEF0","#FF0000","#BC0172","#AE9DFF"];function j(){return{lineShapeObs:new f.Observable("circle")}}function E(){let{ref:e}=(0,d.Nv)(function*(e){let t=e.querySelector("circle"),n=new f.ObservableNumber(0);yield n.onPass("through",5,()=>{n.passed("above",5)?(C.fw.during({target:"CallToAction:Fade",duration:1}).onUpdate(t=>{let{progress:n}=t,i=C.fw.ease("out3")(n);e.setAttribute("opacity",i.toFixed(3))}),C.fw.during({target:"CallToAction:Scale",duration:3}).onUpdate(e=>{let{progress:n,complete:i}=e;n=i?1:2*n%1;let r=C.fw.ease("out3")(n),a=Math.sin(r*Math.PI);t.setAttribute("opacity",a.toFixed(3)),t.setAttribute("r",(0,h.t7)(200,300,r).toFixed(3))})):C.fw.during({target:"CallToAction:Fade",duration:.2}).onUpdate(t=>{let{progress:n}=t,i=C.fw.ease("inOut3")(n);e.setAttribute("opacity",(1-i).toFixed(3))})}),yield(0,l.w)(document.documentElement,{onChange:()=>{n.set(0)},onDown:()=>{n.set(0)}}),yield p.vB.current().onTick(e=>{n.increment(e.deltaTime),n.passed("above",15)&&n.set(0)})},[]);return(0,o.jsx)("g",{ref:e,children:(0,o.jsx)("circle",{r:150,fill:"none",stroke:"white",strokeWidth:1.5,opacity:0})})}function R(){let e=(0,F.useMemo)(j,[]),{ref:t}=(0,d.Nv)(function*(t){let n=t.querySelector("svg"),i=[...n.querySelectorAll("circle")],r=[...n.querySelectorAll("polygon")];yield u.v.on("REQUIRE:ART_PARTS",t=>{t.payloadAssign(e)});let{lineShapeObs:a}=e;a.onChange({executeImmediately:!0},e=>{"circle"===e?(n.querySelector(".rectangles").setAttribute("style","display: none"),n.querySelector(".circles").removeAttribute("style")):(n.querySelector(".rectangles").removeAttribute("style"),n.querySelector(".circles").setAttribute("style","display: none"))});let s=new f.ObservableNumber(0),o=new f.ObservableNumber(120),c=new g.FM8,d=i.map(()=>new g.FM8);yield(0,l.w)(document.documentElement,{onChange:e=>{},onDrag:e=>{let{x:n,y:i}=e.position,r=t.getBoundingClientRect();c.x=(0,h.a2)(n,r.left,r.right,-512,512),c.y=(0,h.a2)(i,r.top,r.bottom,-512,512)},onDown:()=>{s.set(0),o.set(84),c.set(0,0);for(let e=0;e<20;e++)d[e].copy(c)}}),yield p.vB.current().onTick(e=>{s.increment(e.deltaTime);let t=s.get(),n=t<1?120:0,a=t<1?.999:(0,h.a2)(t,1,2,0,.9);o.exponentialGrow(n,[a,.2],e.deltaTime);for(let e=0;e<20;e++){let t=i[e],n=d[e];n.lerp(0===e?c:d[e-1],.1),t.setAttribute("cx",n.x.toString()),t.setAttribute("cy",n.y.toString()),t.setAttribute("stroke-width",o.get().toFixed(3));let a=r[e];a.setAttribute("transform","translate(".concat(n.x,",").concat(n.y,")")),a.setAttribute("stroke-width",o.get().toFixed(3))}})},[20]);return(0,o.jsx)("div",{ref:t,className:"absolute inset-0",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-512 -512 1024 1024",className:"w-full h-full",children:[(0,o.jsx)("g",{className:"circles",style:{display:e.lineShapeObs.is("circle")?"":"none"},children:Array.from({length:20}).map((e,t)=>(0,o.jsx)("circle",{cx:"0",cy:"0",r:120*(.99*t+.25),fill:"none",stroke:D[(t+1)%D.length],strokeWidth:120},t))}),(0,o.jsx)("g",{className:"rectangles",style:{display:e.lineShapeObs.is("rectangle")?"":"none"},children:Array.from({length:20}).map((e,t)=>{T.T.seed(t+4);let n=(t+.25)*238;return(0,o.jsx)("polygon",{points:function(){let{cx:e=0,cy:t=0,r:n=1,count:i=3,turnOffset:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[];for(let s=0;s<i;s++){let o=(s/i+r)*Math.PI*2,l=e+n*Math.cos(o),c=t+n*Math.sin(o);a.push("".concat(l.toFixed(3),",").concat(c.toFixed(3)))}return a.join(" ")}({count:4,r:n*Math.SQRT1_2}),fill:"none",stroke:T.T.pick(D,null,{indexOffset:1}),strokeWidth:120},t)})}),(0,o.jsx)(E,{})]})})}(i=a||(a={})).Circle="circle",i.Rectangle="rectangle";var k=n(57638),B=n.n(k);function O(){return(0,d.sv)(function*(){let e=u.v.send("REQUIRE:ART_PARTS").payload,{camera:t,knotWrapper:n,knot:i,lineShapeObs:r}=e;Object.assign(window,{artParts:e});let s=new f.Observable(0);yield(0,l.w)(document.documentElement,{onDown:e=>{s.set((s.get()+1)%3)}}),s.onChange(t=>{switch(r.set(r.get()===a.Circle?a.Rectangle:a.Circle),t){case 0:i.geometry=e.knotGeometry1;break;case 1:{let t=Math.random()*Math.PI*.4;i.geometry=e.knotGeometry2,i.rotation.x+=t,i.rotation.y+=t,i.rotation.z+=t;break}case 2:i.geometry=e.knotGeometry2}}),yield p.vB.current().onTick(e=>{switch(s.value){case 0:{i.rotation.x=0,i.rotation.y=0,i.rotation.z+=.033*e.deltaTime;let r=(0,h.lw)(.05*e.time),a=(0,h.t7)(.9,1.1,r);n.scale.set(a,a,1),t.position.z=(0,h.t7)(4.9,4.7,r);break}case 1:i.rotation.x+=.05*e.deltaTime,i.rotation.y+=.05*e.deltaTime,i.rotation.z+=.0166*e.deltaTime,n.scale.set(1.4,1.4,1),t.position.z=4.5;break;case 2:i.rotation.x+=-.05*e.deltaTime,i.rotation.y+=-.05*e.deltaTime,i.rotation.z+=.05*e.deltaTime,n.scale.set(1.8,1.8,2),t.position.z=-1}})},[]),(0,o.jsxs)("div",{className:B().Art,children:[(0,o.jsx)(A,{}),(0,o.jsx)(R,{})]})}function N(){let{ref:e}=(0,d.Nv)(function*(e){yield(0,c.f)(document.documentElement,{onSize:t=>{let{size:{x:n,y:i}}=t;!1==n>i?e.style.display="none":e.style.display=""}});let t=new f.ObservableNumber(0);yield p.vB.current().onTick(n=>{t.increment(n.deltaTime),e.classList.toggle(B().hidden,t.get()>1)}),yield(0,l.w)(document.documentElement,{onDown:()=>{t.set(0)},onChange:()=>{t.set(0)}})},[]);return(0,o.jsx)("div",{ref:e,className:"".concat(B().Caption," pointer-through"),children:(0,o.jsxs)("div",{className:"flex flex-row items-center",children:[(0,o.jsxs)("span",{children:["Press ",(0,o.jsx)("kbd",{style:{color:D[3]},children:"F"})," to toggle fullscreen."]}),(0,o.jsx)("span",{className:B().Github,style:{color:D[2]},children:(0,o.jsx)("a",{href:"https://github.com/jniac/three-xp",children:"Github"})}),(0,o.jsx)("span",{className:B().Close,style:{color:D[4]},onPointerDown:t=>{"A"!==t.target.tagName&&(t.preventDefault(),t.stopPropagation(),e.current.style.display="none")}})]})})}function _(){return(0,o.jsxs)("div",{children:[(0,o.jsx)(v.V,{children:(0,o.jsx)(O,{})}),(0,o.jsx)("div",{className:"absolute-through",children:(0,o.jsx)(N,{})})]})}(r=s||(s={}))[r.Static=0]="Static",r[r.Rotating=1]="Rotating",r[r.RotatingCloseUp=2]="RotatingCloseUp"},28227:function(e,t,n){"use strict";n.d(t,{Main:function(){return E}});var i=n(32617),r=n(33966),a=n(37186),s=n(81540),o=n(32219),l=n(88780);let c=new l.nls({color:"white",transparent:!0,depthTest:!1}),d={circle:(()=>{let e=new l.u9r,t=Array.from({length:81},(e,t)=>{let n=t/80*Math.PI*2;return new l.Pa4(Math.cos(n),Math.sin(n),0)});return e.setFromPoints(t),e})(),box2:(()=>{let e=new l.u9r,t=[new l.Pa4(-.5,-.5,0),new l.Pa4(.5,-.5,0),new l.Pa4(.5,.5,0),new l.Pa4(-.5,.5,0),new l.Pa4(-.5,-.5,0)];return e.setFromPoints(t),e})()};class h extends l.ZAu{setupUniforms(e,t){let{value:n}=e,{value:i}=t;n.copy(this.matrixWorld),n.invert()}init(e){this.props=e,this.renderOrder=1}setup(){}set(e){Object.assign(this.props,e),this.setup()}}let u={radius:2,falloff:1};class f extends h{get radius(){return this.props.radius}set radius(e){this.props.radius=e,this.setup()}get falloff(){return this.props.falloff}set falloff(e){this.props.falloff=e,this.setup()}setupUniforms(e,t){super.setupUniforms(e,t);let{radius:n,falloff:i}=this.props;t.value.set(n,i,0,0)}setup(){let{circle0:e,circle1:t}=this.parts,{radius:n,falloff:i}=this.props;e.scale.setScalar(n),t.scale.setScalar(n+i)}constructor(e){super(),this.parts={circle0:new l.x12(d.circle,c),circle1:new l.x12(d.circle,c)},this.init({...u,...e}),this.add(this.parts.circle0),this.add(this.parts.circle1),this.setup()}}f.glsl="\n    struct CircleFalloff {\n      mat4 matrix;\n      float radius;\n      float falloff;\n    };\n    float falloff(CircleFalloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float d = length(p);\n      return 1.0 - (d - falloff.radius) / falloff.falloff;\n    }\n  ";let p={width:1,height:1,falloff:1};class v extends h{setupUniforms(e,t){super.setupUniforms(e,t);let{width:n,height:i,falloff:r}=this.props;t.value.set(n,i,r,0)}setup(){let{box0:e,box1:t}=this.parts,{width:n,height:i,falloff:r}=this.props;e.scale.set(n,i,1),t.scale.set(n+2*r,i+2*r,1)}constructor(e){super(),this.parts={box0:new l.x12(d.box2,c),box1:new l.x12(d.box2,c)},this.init({...p,...e}),this.add(this.parts.box0),this.add(this.parts.box1),this.setup()}}v.glsl="\n    struct ManhattanBox2Falloff {\n      mat4 matrix;\n      float width;\n      float height;\n      float falloff;\n    };\n    float falloff(ManhattanBox2Falloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float x = abs(p.x) - falloff.width * 0.5;\n      float y = abs(p.y) - falloff.height * 0.5;\n      return 1.0 - max(x, y) / falloff.falloff;\n    }\n  ";var m=n(23247),g=n(85705),x=n(78780),w=n(72793),y=n(99963),b=n(1976),M=n(28104),S=n(47090);function C(e){let{r:t,g:n,b:i}=new a.Ilk(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(i.toFixed(3),")")}let z={grid:[16,16]},P=new a._12(1,1,1,1),A=new a.vBJ({side:a.ehD,transparent:!0}),T={uRadiusScalar:new a.xWb(.9),uCircleMat:new a.xWb(new a.yGw().identity()),uCircleProps:new a.xWb(new a.Ltg(1,2,0,0)),uBox0Mat:new a.xWb(new a.yGw().identity()),uBox0Props:new a.xWb(new a.Ltg(1,1,0,0))};A.onBeforeCompile=e=>m.b.with(e).defines({USE_UV:""}).uniforms(T).varying({vCenter:"vec3",vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n    vWorldPosition2 = (modelMatrix * instanceMatrix * vec4(transformed, 1.0)).xyz;\n    vCenter = (modelMatrix * instanceMatrix[3]).xyz;\n  ").fragment.top(b.U,w.g,y.i).fragment.top(f.glsl,v.glsl).fragment.after("color_fragment","\n    CircleFalloff circle = CircleFalloff(uCircleMat, uCircleProps.x, uCircleProps.y);\n    ManhattanBox2Falloff box = ManhattanBox2Falloff(uBox0Mat, uBox0Props.x, uBox0Props.y, uBox0Props.z);\n    float d = 0.0;\n    d += clamp01(falloff(box, vWorldPosition2));\n    d += clamp01(falloff(circle, vWorldPosition2));\n    diffuseColor.rgb = mix(".concat(C("#c2e1ff"),", ").concat(C("#d80773"),", easeInOut3(clamp01(d)));\n  ")).fragment.after("alphamap_fragment","\n    float scalar = 1.0 / uRadiusScalar / mix(1.0, 0.25, easeInOut3(clamp01(d)));\n    float alpha = smoothstep(1.0, 0.99, length(vUv - 0.5) * scalar / 0.5);\n\n    if (alpha < 0.01) discard;\n\n    diffuseColor.a *= alpha;\n  ");class F extends a.SPe{onTick(e){for(let e of Object.values(this.falloffs))e.visible=this.falloffsAreVisible;let{box0:t,circle:n}=this.falloffs;n.falloff=(0,S.t7)(.1,4,e.sin01Time({frequency:.15})),n.radius=(0,S.t7)(1,5,e.sin01Time({frequency:.1,phase:.5})),n.setupUniforms(T.uCircleMat,T.uCircleProps),t.rotation.z+=.1*e.deltaTime,t.set({width:8,falloff:(0,S.t7)(.5,6,e.sin01Time({frequency:.15}))}),t.setupUniforms(T.uBox0Mat,T.uBox0Props)}constructor(e){var t;let{x:n,y:i}=(0,o.iK)(null!==(t=null==e?void 0:e.grid)&&void 0!==t?t:z.grid);for(let t of(super(P,A,n*i),this.internal={grid:new a.FM8},this.falloffsAreVisible=!0,this.falloffs={circle:(0,x.cY)(new f,{parent:this,position:[-3,-2,0]}),box0:(0,x.cY)(new v({}),{parent:this,position:[3,2,0]})},this.props={...z,...e},(0,M.loop2)(n,i)))this.setMatrixAt(t.i,(0,g.$)({x:t.x-n/2,y:t.y-i/2}))}}function*D(e){e.scene.background=new a.Ilk("#1c54e0"),e.ticker.set({activeDuration:30}),e.useOrbitControls();let t=new F;e.scene.add(t),yield()=>t.removeFromParent(),yield(0,s.w)(document.body,{onTap(){t.falloffsAreVisible=!t.falloffsAreVisible}})}function j(){return(0,r.Ky)(D),null}function E(){return(0,i.jsx)("div",{className:"absolute-through",children:(0,i.jsx)(r.H7,{children:(0,i.jsx)(j,{})})})}},84501:function(e,t,n){"use strict";n.d(t,{Main:function(){return eh}});var i,r,a,s=n(32617),o=n(74259),l=n(9258),c=n(42544),d=n(28104),h=n(47090),u=n(2132),f=n(92948),p=n(37186),v=n(81540),m=n(15721),g=n(35357),x=n(29368),w=n(44044),y=n(97219),b=n(78780),M=n(20821);let S=new p.Pa4(6,4,9),C=[new p.Pa4(0,0,4),new p.Pa4(0,4,0),new p.Pa4(6,0,9),new p.Pa4(6,4,6)],z=new p.Pa4(0,-8,8),P=new p.Pa4(1,0,1).normalize(),A=new p.Pa4(0,1,-1).normalize(),T=new p.Pa4().crossVectors(P,A).normalize();A.crossVectors(T,P).normalize();let F=new p.yGw().makeBasis(P,A,T).setPosition(z),D=new p.yGw().copy(F).invert(),j=new p.USm().setFromRotationMatrix(F),E=new p.JOQ().setFromNormalAndCoplanarPoint(T,z);class R extends p.ZAu{static current(){if(0===this.instances.length)throw Error("No Scope!");return this.instances[this.instances.length-1]}updateScope(){let{aspect:e=1,size:t=4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e>1?t:t*e,i=n/e;(n!==this.state.width||i!==this.state.height)&&(this.parts.lines.clear().circle({radius:1}).rectangle([-n/2,-i/2,n,i]).plus([0,0],.2).draw(),this.parts.lines.geometry.computeBoundingSphere(),this.state.width=n,this.state.height=i)}isWithin(e){let{x:t,y:n}=e.clone().applyMatrix4(this.matrixWorldInverse),{width:i,height:r}=this.state;return t>=-i/2&&t<=i/2&&n>=-r/2&&n<=r/2}chunkIntersects(e){this.updateMatrixWorld(),e.updateMatrixWorld();let t=!0,n=!0,i=!0,r=!0,a=this.state.width/2,s=this.state.height/2;for(let o=0;o<4;o++){let{x:l,y:c,z:d}=R._chunkIntersectsVectors[o].copy(C[o]).applyMatrix4(e.matrixWorld).applyMatrix4(this.matrixWorldInverse);if(t&&(t=l<-a),i&&(i=l>a),n&&(n=c<-s),r&&(r=c>s),!1===(t||n||i||r))return!0}return!1}toVertigoProps(){let{width:e,height:t}=this.state;return{perspective:.5,size:[e,t],focus:this.position,rotation:this.rotation}}constructor(){super(),this.parts={lines:(0,b.cY)(new y.O,this),debugLines:(0,b.cY)(new y.O,this)},this.state={width:4,height:4},this.matrixWorldInverse=new p.yGw,this.destroy=()=>{let e=R.instances.indexOf(this);if(-1===e)throw Error("Scope instance not found");R.instances.splice(e,1)},R.instances.push(this),this.position.set(0,0,6),this.rotation.setFromRotationMatrix(F,w.a.default.rotation.order),this.rotation.x+=(0,M.FE)("20deg"),this.updateMatrix(),this.updateMatrixWorld(),this.matrixWorldInverse.copy(this.matrixWorld).invert()}}R.instances=[],R._chunkIntersectsVectors=[new p.Pa4,new p.Pa4,new p.Pa4,new p.Pa4];var k=n(60236),B=n(12042),O=n(32219),N=n(80536),_=n(85705),I=n(6246);function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.Pa4;return n.set(e,t,e-t)}function U(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,{x:r,y:a,z:s}=t,o=r+n,l=a+n,c=s+n;for(let t=s;t<c;t++)for(let n=a;n<l;n++)for(let a=r;a<o;a++)e.getVoxelState(a,n,t+16).setInt8(0,i)}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=S.clone().multiplyScalar(4/t),i=[];for(let r of(0,d.loop3)(n)){let n=r.x*t,a=r.y*t,s=r.z*t;(function(e,t,n,i){var r,a,s,o,l,c;let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return e.getVoxelState(t,n,i).getInt8(0)>0&&!((null!==(o=null===(r=e.tryGetVoxelState(t-d,n,i))||void 0===r?void 0:r.getInt8(0))&&void 0!==o?o:0)>0)&&!((null!==(l=null===(a=e.tryGetVoxelState(t,n+d,i))||void 0===a?void 0:a.getInt8(0))&&void 0!==l?l:0)>0)&&!((null!==(c=null===(s=e.tryGetVoxelState(t,n,i+d))||void 0===s?void 0:s.getInt8(0))&&void 0!==c?c:0)>0)})(e,n,a,s,t)&&I.T.chance(1-r.py)&&i.push(new p.Pa4(n,a,s))}return i}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=S.clone().multiplyScalar(4/t),i=[];for(let r of(0,d.loop3)(n)){let n=r.x*t,a=r.y*t,s=r.z*t;(function(e,t,n,i){var r,a,s,o,l,c;let d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return!(e.getVoxelState(t,n,i).getInt8(0)>0)&&(null!==(o=null===(r=e.tryGetVoxelState(t+d,n,i))||void 0===r?void 0:r.getInt8(0))&&void 0!==o?o:0)>0&&(null!==(l=null===(a=e.tryGetVoxelState(t,n-d,i))||void 0===a?void 0:a.getInt8(0))&&void 0!==l?l:0)>0&&(null!==(c=null===(s=e.tryGetVoxelState(t,n,i-d))||void 0===s?void 0:s.getInt8(0))&&void 0!==c?c:0)>0})(e,n,a,s,t)&&I.T.chance(1-r.py)&&i.push(new p.Pa4(n,a,s))}return i}let G=new p.Pa4;new p.Pa4;class W extends p.Kj0{createDots(){let e=new p.SPe(new p.cJO(.1,8),new B.P,4);for(let[t,n]of((0,b.cY)(e,this),C.entries()))e.setMatrixAt(t,(0,_.$)({position:n})),e.setColorAt(t,(0,_.E)("#ffffff"));return this.dots=e,this}updateDots(e){this.dots||this.createDots();let t=this.dots;for(let[n,i]of C.entries()){t.setMatrixAt(n,(0,_.$)({position:i}));let r=e.isWithin(i)?"#00ffa6":"#ff0000";t.setColorAt(n,(0,_.E)(r))}t.instanceMatrix.needsUpdate=!0,t.instanceColor.needsUpdate=!0}get gridCoords(){return this._gridCoords}setGridCoords(e){(0,O.iK)(e,this._gridCoords);let{x:t,y:n}=this._gridCoords;this.scale.setScalar(.5**n),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.Pa4,i=.5**t;n.set(6*e*i,4*(.5*i*2-1),6*e*i+8*(1-i))}(t,n,this.position)}toWhite(){this.material.color.set(16777215)}toColor(){this.material.color.set(this.color)}constructor({world:e=null,color:t=16777215*I.T.random()}={}){let n=new N.z(Math.ceil(115.19999999999999),1);for(let{x:e,y:t}of(0,d.loop2)(6,4))L(e,t,G).multiplyScalar(4),U(n,G,4);for(let e=0;e<6;e+=2)L(e,3,G).add(new p.Pa4(1,0,0)).multiplyScalar(4),U(n,G,4),I.T.chance(.8)&&(L(e,3,G).add(new p.Pa4(1,1,0)).multiplyScalar(4),U(n,G,4));{let e=V(n,2),t=Y(n,2);for(let t of e)U(n,t,2,1);for(let e of t)U(n,e,2,0)}{let e=V(n,1),t=Y(n,1);for(let t of e)I.T.chance(.25)&&U(n,t,1,1);for(let e of t)I.T.chance(.25)&&U(n,e,1,0)}console.time("geometry");let i=new p.u9r;console.timeEnd("geometry"),i.scale(.25,.25,.25);let r=new B.P({color:t});super(function(){let e=new p.u9r;e.index=new p.TlE(new Uint16Array([0,2,1,0,3,2]),1);let t=new Float32Array(12),n=new p.Pa4(0,0,1);L(0,0).add(n).toArray(t,0),L(6,0).add(n).toArray(t,9),L(6,4).add(n).toArray(t,6),L(0,4).add(n).toArray(t,3),e.setAttribute("position",new p.TlE(t,3));let i=new Float32Array(12);T.toArray(i,0),A.toArray(i,3),T.toArray(i,6),A.toArray(i,9),e.setAttribute("normal",new p.TlE(new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0]),3));let r=new Float32Array(12).fill(1);return e.setAttribute("color",new p.TlE(r,3)),e}(),new B.P({color:t,side:p.ehD})),this._gridCoords=new p.FM8,this.world=null,this.dots=null,(0,b.cY)(new p.Kj0(i,r),this),(0,b.cY)(new p.y8_,this),this.chunk=n,this.color=t,this.world=e}}function X(e,t){if(e<-32768||e>=32768||t<-32768||t>=32768)throw RangeError("x and y must be in the range -0x8000 to 0x7fff, received: ".concat(e," (0x").concat(e.toString(16),"), ").concat(t," (0x").concat(t.toString(16),")"));return(e+=32768)<<16|(t+=32768)}let H=new p.FM8;function*q(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=(()=>{if(1!==t.length)return t;{let{x:e,y:n}=(0,M.iK)(t[0]);return[e,n]}})();yield H.set(Math.floor((i-1)/2),r-1),yield H.set(Math.floor((i+1)/2),r-1),yield H.set(i-1,r),yield H.set(i+1,r),yield H.set(2*i-1,r+1),yield H.set(2*i,r+1),yield H.set(2*i+1,r+1),yield H.set(2*i+2,r+1)}class K extends p.ZAu{drawCircles(){let{count:e=1,step:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let n=1;n<e;n++){let e=1+n*t;(0,b.cY)(new p.ejS(this.parts.circles.geometry,this.parts.circles.material),{parent:this,scaleScalar:e})}return this}constructor(...e){super(...e),this.parts=(()=>{let e=new y.O;e.circle({radius:1,color:k.w.defaultOptions.zColor}).circle({radius:1,color:k.w.defaultOptions.xColor,transform:{rotationY:"90deg"}}).circle({radius:1,color:k.w.defaultOptions.yColor,transform:{rotationX:"90deg"}}).draw();let t=new p.Kj0(new k.w,new B.P({vertexColors:!0}));return{axes:(0,b.cY)(t,this),circles:(0,b.cY)(e,this)}})()}}class J extends p.ZAu{static current(){if(0===this.instances.length)throw Error("No World!");return this.instances[this.instances.length-1]}scopeUpdate(e){let t=(0,u.M3)(1e-4,e);this.dampedScopeCoordinates.lerp(this.scopeCoordinates,t);let{x:n,y:i}=this.dampedScopeCoordinates;this.scope.position.set(0,0,6).addScaledVector(P,n),this.worldScale=2**(.33*i),this.setChunkGroupScale(this.worldScale)}getChunk(e,t){var n;return null!==(n=this.chunks.get(X(e,t)))&&void 0!==n?n:null}ensureChunk(e,t){let n=X(e,t),i=this.chunks.get(n);if(i)return i;{let n=(0,b.cY)(new W({world:this}),this.chunkGroup);return this.chunks.set(X(e,t),n),n.setGridCoords([e,t]),n}}ensureChunkNeighbors(e,t){for(let n of(this.ensureChunk(e,t),q(e,t)))this.ensureChunk(n.x,n.y)}ensureScopeChunks(){let e=new Set([X(0,0)]),t=[this.ensureChunk(0,0)],n=0;for(;t.length>0;){if(n++>100){console.error("Exceeded maximum chunk count of ".concat(100));break}let i=t.pop();if(this.scope.chunkIntersects(i))for(let n of q(i.gridCoords)){let i=X(n.x,n.y);e.has(i)||(e.add(i),t.push(this.ensureChunk(n.x,n.y)))}}}toWhite(){for(let e of this.chunks.values())e.toWhite()}toColor(){for(let e of this.chunks.values())e.toColor()}constructor(){super(),this.origin=(0,b.cY)(new p.y8_,{parent:this,position:z,rotation:j}),this.chunkGroup=(0,b.cY)(new p.ZAu,{parent:this}),this.scopeCoordinates=new p.FM8,this.dampedScopeCoordinates=new p.FM8,this.worldScale=1,this.scopeOriginPoint=new p.Pa4,this.scopeCenterChunkPoint=new p.Pa4,this.scope=(0,b.cY)(new R,this),this.XXX=(0,b.cY)(new K,this.chunkGroup),this.YYY=new p.FM8,this.setChunkGroupScale=(()=>{let e=new p.yGw;return t=>{var n;this.scopeCenterChunkPoint.copy(this.scope.position).applyMatrix4(D),this.scopeOriginPoint.set(this.scopeCenterChunkPoint.x,0,0).applyMatrix4(F),this.chunkGroup.position.copy(this.scopeOriginPoint).addScaledVector(this.scopeOriginPoint,-t),this.chunkGroup.scale.setScalar(t),this.chunkGroup.updateMatrix(),this.XXX.position.copy(this.scope.position).applyMatrix4(D),this.XXX.position.z=0,this.XXX.position.applyMatrix4(F).applyMatrix4(e.copy(this.chunkGroup.matrix).invert());let{x:i,y:r}=function(){let e;for(var t,n,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];let s=0,o=0;if("number"==typeof r[0])[s,o]=r,e=null!==(t=r[3])&&void 0!==t?t:new p.FM8;else{let[t]=r;s=t.x,o=t.y,e=null!==(n=r[1])&&void 0!==n?n:new p.FM8}let l=-Math.log2((o/4+1)/2)-1,c=s/(6*.5**l);return e.set(c,l)}(this.XXX.position,this.YYY);i=Math.round(i-.5),r=Math.round(r+.5),this.toWhite(),null===(n=this.getChunk(i,r))||void 0===n||n.toColor()}})(),this.chunks=new Map,this.destroy=()=>{this.scope.destroy(),this.chunks.clear(),this.clear();let e=J.instances.indexOf(this);if(-1===e)throw Error("World instance not found");J.instances.splice(e,1)},J.instances.push(this)}}J.instances=[],(i=r||(r={}))[i.Free=0]="Free",i[i.Scope=1]="Scope";class Z{initialize(e){return this.element=e,this}*doStart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!==(a=this.element)&&void 0!==a?a:document.body;yield(0,v.w)(e,{onDrag:e=>{let t=J.current();t.scopeCoordinates.x+=-(.005*e.delta.x)/t.worldScale,t.scopeCoordinates.y+=-(.01*e.delta.y)}}),yield(0,x.RC)("three",e=>{let t=J.current();t.scopeUpdate(e.deltaTime);let n=t.scope.position;this.vertigoControls.vertigo.set({focus:n}),this.vertigoControls.dampedVertigo.set({focus:n})})}start(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._started||(this._destroyables.collect(this.doStart(...t)),this._started=!0)}stop(){this._started&&(this._destroyables.destroy(),this._started=!1)}toggle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._started;e?this.start():this.stop()}update(e,t,n){this.vertigoControls.update(e,t,n)}constructor(){this.position=new p.FM8,this.dampedPosition=new p.FM8,this.scale=1,this._destroyables=new g.N,this.vertigoControls=new m.F({perspective:.5}),this._started=!1,this.destroy=()=>{this._destroyables.destroy()}}}class Q{get mode(){return this._mode}set mode(e){this.setMode(e)}initialize(e,t){this.camera=e,this.freeVertigoControls.initialize(t).toggle(0===this._mode),this.scopeCameraHandler.initialize(t).toggle(1===this._mode);let n=R.current().toVertigoProps();return this.scopeCameraHandler.vertigoControls.vertigo.set(n),this.scopeCameraHandler.vertigoControls.dampedVertigo.set(n),this}setMode(e){if(e%=2,this._mode!==e)switch(this._mode=e,this.freeVertigoControls.toggle(0===e),this.scopeCameraHandler.toggle(1===e),e){case 0:(()=>{this.mode=Q.Mode.Free,this.freeVertigoControls.dampedVertigo.copy(this.scopeCameraHandler.vertigoControls.dampedVertigo)})();break;case 1:(()=>{this.mode=Q.Mode.Scope,this.scopeCameraHandler.vertigoControls.dampedVertigo.copy(this.freeVertigoControls.dampedVertigo),this.scopeCameraHandler.vertigoControls.vertigo.set(R.current().toVertigoProps())})()}}onTick(e,t){switch(this._mode){case 0:this.freeVertigoControls.update(this.camera,t,e.deltaTime),console.log();break;case 1:this.scopeCameraHandler.update(this.camera,t,e.deltaTime)}}constructor(){this._mode=0,this.freeVertigoControls=new m.F({size:24,perspective:1}),this.scopeCameraHandler=new Z,this.destroy=()=>{this.freeVertigoControls.destroy(),this.scopeCameraHandler.destroy();let e=Q.instances.indexOf(this);if(-1===e)throw Error("CameraHandler instance not found");Q.instances.splice(e,1)},Q.instances.push(this)}}Q.Mode=r,Q.instances=[];var $=n(67896);function ee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.Ltg,i=2**t,r=2*(1-1/i),a=1/i;return n.x=6*e*a,n.y=-4*r,n.z=4*r+6*e*a,n.w=a,n}class et extends p.ZAu{updatePointer(e){let t=e.intersectPlane(E,new p.Pa4);if(!t)return;let{text:n,pointerText:i}=this.internal,r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.FM8;return n.y=Math.floor(-Math.log2(1- -t/4/2)),n.x=Math.floor(e/6*2**n.y),n}(t.x,t.y);if(Number.isNaN(r.x)||Number.isNaN(r.y))return;let a=1/2**function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.FM8,i=1- -t/4/2;return n.y=-Math.log2(i),n.x=e/(6*i),n}(t.x,t.y,new p.FM8).y;for(let e of this.internal.positions){let t=e.x===r.x&&e.y===r.y?"#ffff66":"white";n.data.setColorAt(e.i+1,{backgroundColor:t})}n.dataTexture.needsUpdate=!0,n.material.needsUpdate=!0,i.setTextAt(0,"".concat(r.x,",").concat(r.y),{textColor:"#ffff66",textOpacity:0,backgroundColor:"#ffff66",backgroundOpacity:1,position:t,size:3*a});let s=ee(r.x,r.y);this.internal.pointerLine.clear().line(t,[s.x,s.y,s.z],{color:"#ffff66"}).draw()}constructor(...e){super(...e),this.internal=(()=>{let e=[new p.Pa4(0,0,0),new p.Pa4(0,-4,4),new p.Pa4(6,-4,10),new p.Pa4(6,0,6)],t=(0,b.cY)(new y.O,this);for(let n=0;n<12;n++){let i=2**n,r=2*(1-1/i),a=1/i,s=new p.Pa4(0,-4*r,4*r);t.polygon(e.map(e=>e.clone().multiplyScalar(a).add(s)))}t.polyline([[0,0,0],z]),t.draw(),(0,b.cY)(new p.Kj0(new k.w,new B.P({vertexColors:!0})),{parent:this,position:z,rotation:j});let n=(0,d.loop2Array)(4,8),i=(0,b.cY)(new c.m({lineCount:1,lineLength:14}),this),r=(0,b.cY)(new y.O,this);for(let e of n){let{x:t,y:n,z:r,w:a}=ee(e.x,e.y);i.setTextAt(e.i+1,"".concat(e.x,",").concat(e.y),{textColor:"white",textOpacity:0,backgroundColor:"white",backgroundOpacity:1,position:[t,n,r],size:2*a})}return{positions:n,text:i,pointerText:(0,b.cY)(new c.m({lineCount:2,lineLength:16}),this),pointerLine:r}})()}}var en=n(87200),ei=n(23657);n(41737);let er=(0,en.createContext)(null);function ea(e,t){let n=(0,en.useContext)(er);return(0,ei.sv)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}let es={className:"",assetsPath:"/"};function eo(e){let{children:t,className:n,assetsPath:i}={...es,...e},r=(0,en.useMemo)(()=>new l.Vu,[]);r.loader.setPath(i);let{ref:a}=(0,ei.Nv)({debounce:!0},function*(e,t){yield r.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:r})},[]);return(0,s.jsx)("div",{ref:a,className:n,style:{position:"absolute",inset:0},children:(0,s.jsxs)(er.Provider,{value:r,children:[(0,s.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,s.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:r.initialized&&t})]})})}function el(e){return function(){let[e,t]=(0,en.useState)(!1);return(0,en.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,s.jsx)(eo,{...e})}function ec(){return!function(e,t,n){let i=(0,en.useMemo)(()=>new p.ZAu,[]);i.name=e,ea(async function*(e,n){if(e.scene.add(i),yield()=>{i.clear(),i.removeFromParent()},t){let r=t(i,e,n);if(r&&"function"==typeof r.next)do{let{value:e,done:t}=await r.next();if(t)break;yield e}while(n.mounted)}},n)}("fractal-grid",function*(e,t){var n;(0,b.cY)(new $.w({color:"#110512"}),e);let i=(0,b.cY)(new et,e);(0,b.cY)(new p.Kj0(new p.FE5(2.5,.025,512,32),new B.P({color:"#0cf"})),e).visible=!1,I.T.seed(98763);let r=(0,b.cY)(new J,e);yield r.destroy,r.visible=!1,r.scope.updateScope({aspect:t.aspect}),r.ensureScopeChunks();let a=new Q().initialize(t.camera,t.renderer.domElement),s=new p.Pa4,o=(0,b.cY)(new p.Kj0(new p.cJO(.1),new B.P({color:"#f0f"})),e);yield(0,x.RC)("three",e=>{a.onTick(e,t.aspect),r.scope.updateScope({aspect:t.aspect}),t.pointer.ray.intersectPlane(E,s),o.position.copy(s),i.updatePointer(t.pointer.ray)}),r.toColor(),null===(n=r.getChunk(0,0))||void 0===n||n.toWhite(),Object.assign(window,{world:r,cameraHandler:a}),(0,b.cY)(new p.Kj0(new k.w,new B.P({vertexColors:!0})),e)},[]),null}function ed(){return ea(function*(e){let t=new o.n(e.scene,e.camera);t.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:2,radiusExponent:2,rings:2,samples:24}),yield e.pipeline.addPass(t,{type:l.GR.PostProcessing}),(0,f.a)({three:e,...d,TextHelper:c.m,calculateExponentialDecayLerpRatio:u.M3,calculateExponentialDecayLerpRatio2:u.zl,lerp:h.t7})},[]),null}function eh(){return(0,s.jsx)("div",{className:"FractalGrid",children:(0,s.jsxs)(el,{children:[(0,s.jsxs)("div",{className:"layer thru flex flex-col p-4 gap-2 items-start",children:[(0,s.jsx)("h1",{className:"text-2xl",children:"FractalGrid"}),(0,s.jsx)("button",{className:"border border-white px-2 py-1 rounded",onClick:()=>Q.instances[0].mode++,children:"Switch camera"})]}),(0,s.jsx)(ed,{}),(0,s.jsx)(ec,{})]})})}},11737:function(e,t,n){"use strict";n.d(t,{Main:function(){return L}});var i=n(32617),r=n(37186),a=n(33966),s=n(47365),o=n(81540),l=n(15721),c=n(29368),d=n(62411),h=n(92948);function u(){return(0,a.Ky)(function*(e){Object.assign(window,{three:e,Ticker:c.vB})},[]),null}var f=n(30636),p=n(78780),v=n(97219),m=n(23247),g=n(99963),x=n(1976),w=n(47090),y=n(6246),b=JSON.parse('[{"phi":1.7045171372513754,"theta":0.9426432714835036},{"phi":1.2138204764190186,"theta":0.5877279735536564},{"phi":2.018280663352346,"theta":0.4225774045053551},{"phi":1.58623960126316,"theta":0.11530620356664824},{"phi":1.4858931296682674,"theta":0.09988610745985425},{"phi":1.370250993061531,"theta":-0.6152078487213142},{"phi":0.9459811008591165,"theta":-0.4116473816238604},{"phi":1.06660504904375,"theta":-0.22199053344895067},{"phi":2.675243191552906,"theta":-0.6045343364962831},{"phi":2.5901332086293296,"theta":-0.45113353839646375},{"phi":3.0820510158643644,"theta":-0.20059237206688585},{"phi":2.920796326794876,"theta":-0.3506750512589778},{"phi":2.707382312980871,"theta":0.025009035614594027},{"phi":-2.771515207166003,"theta":0.43045560632597474},{"phi":-3.068326429226437,"theta":0.6129817652939101},{"phi":3.1105233820660763,"theta":0.7241618779795415},{"phi":-2.5251632895865317,"theta":0.6535499652931851},{"phi":-3.015091410598426,"theta":0.8642317265005449},{"phi":3.0788690924417255,"theta":0.8159956971859744},{"phi":-2.370767607902747,"theta":0.787316008336757},{"phi":-2.5030942996270586,"theta":0.7163689975296974},{"phi":-0.28189011450089596,"theta":0.6816391217572154},{"phi":-0.2988148637926313,"theta":0.5717768908896973},{"phi":-0.1772652581758269,"theta":0.4716751222011235},{"phi":-0.05544012907477782,"theta":-0.028486000516249495},{"phi":-0.06314162733968252,"theta":0.061655565733329316},{"phi":-0.8760666510861576,"theta":-0.6838346154783156},{"phi":-0.7161612255722236,"theta":-0.11386479380967202},{"phi":-0.5032773150049611,"theta":-0.5860256589964206},{"phi":1.7599491315598337,"theta":1.0140201131361222},{"phi":1.555598726738203,"theta":1.0275620052067571},{"phi":1.5867188262212921,"theta":1.091601234052012},{"phi":1.5622775626534053,"theta":1.1451634884556725},{"phi":1.8064000451323763,"theta":0.8291516658764525},{"phi":1.7711742769485577,"theta":0.8002332318072503},{"phi":1.5274585527636149,"theta":0.838434437058171},{"phi":1.3559514207428152,"theta":0.7754675571543634},{"phi":1.1792807716216012,"theta":0.7682476175679409},{"phi":1.3076110196152615,"theta":0.9387650274681301},{"phi":1.4565810952604292,"theta":1.0264229286514035}]');let M=new r.dpR;function S(){let{theta:e=0,phi:t=0,radius:n=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return null!=i||(i=new r.Pa4),i.x=n*Math.cos(e)*Math.cos(t),i.y=n*Math.sin(e),i.z=n*Math.cos(e)*Math.sin(t),i}class C extends r.x12{constructor(e,{color:t="white"}={}){let n=new r.u9r().setFromPoints(e),i=new r.FT0({color:t}),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,t=new Uint8Array(4*e),n=0;for(;n<e;){let i=y.T.int(10,20);n+i>e&&(i=e-n);for(let e=0;e<i;e++)t[4*(n+e)]=255;n+=i+y.T.int(1,80)}for(let n=0;n<e;n+=2)t[4*n+1]=255;let i=new r.IEO(t,e,1,r.wk1);return i.minFilter=i.magFilter=r.TyD,i.wrapS=i.wrapT=r.rpg,i.needsUpdate=!0,i}(),s={uTime:c.vB.get("three").uTime,uTextureLengthRatio:{value:40},uScale:{value:1},uTexture:{value:a},uLineLength:{value:-1}};i.onBeforeCompile=e=>m.b.with(e).uniforms(s).varying({vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n        vWorldPosition2 = (modelMatrix * vec4(position, 1.0)).xyz;\n      ").fragment.top("\n        float hash(vec3 p) {\n          // Combine the components of the vec3 using dot products\n          vec3 k = vec3(127.1, 311.7, 74.7); // Large primes to create randomness\n          return fract(sin(dot(p, k)) * 43758.5453123); // Sine and fract create pseudo-randomness\n        }\n      ").fragment.replace(/if .* {\s*discard;\s*}/,"\n        float alpha = vLineDistance / uLineLength;\n        alpha = pow(alpha, 1.0 / 2.0);\n        float x = mod(uLineLength * alpha / uTextureLengthRatio + uTime * -0.05, 1.0);\n        vec4 texel = texture2D(uTexture, vec2(x, 0.5));\n        float outHash = fract(hash(vWorldPosition2) + uTime * 10.0) + mix(5.0, -1.0, alpha);\n        if (texel.r * outHash < 0.5) {\n          discard;\n        }\n      "),super(n,i),this.computeLineDistances(),s.uLineLength.value=this.geometry.attributes.lineDistance.array.at(-1)}}class z extends r.ZAu{constructor(e,{pointsPerCurve:t=80,curveSubdivisions:n=256}={}){super();let i=e.length*t,a=new r.u9r,s=new Float32Array(3*i);a.setAttribute("position",new r.TlE(s,3));let o=new Float32Array(4*i);y.T.seed(987632);for(let e=0;e<o.length;e++)o[e]=y.T.random();a.setAttribute("random",new r.TlE(o,4));let l=new Float32Array(e.length*n*4),d=new Float32Array(e.length*n*4);for(let i=0;i<e.length;i++){for(let e=0;e<t;e++){let n=i*t+e;s[3*n]=e,s[3*n+1]=i,s[3*n+2]=0}let r=e[i].nurbsCurve;if(!r)throw Error("NURBS curve not set.");for(let e=0;e<n;e++){let t=e/n,a=r.getPoint(t),s=r.getTangent(t),o=i*n+e;l[4*o]=a.x,l[4*o+1]=a.y,l[4*o+2]=a.z,d[4*o]=s.x,d[4*o+1]=s.y,d[4*o+2]=s.z}}let h=t=>{let i=new r.IEO(t,n,e.length,r.wk1,r.VzW,r.xfE,r.uWy,r.uWy,r.TyD,r.TyD);return i.generateMipmaps=!1,i.needsUpdate=!0,i},u=h(l),f=h(d);y.T.seed(5678492);let p={uTime:c.vB.get("three").uTime,uPointsPerCurve:{value:t},uCurvesMapSize:{value:new r.FM8(n,e.length)},uCurvesPositionMap:{value:u},uCurvesTangentMap:{value:f},uColors:{value:e.map(e=>e.color)},uCurveRandom:{value:e.map(()=>y.T.random())},uMaskMaps:{value:[M.load("textures/rounded-square.png"),M.load("textures/rounded-plus.png"),M.load("textures/rounded-rhomb.png")]}},v=new r.UY4({vertexColors:!0,size:.5});v.onBeforeCompile=e=>m.b.with(e).uniforms(p).varying({vRandom:"vec4"}).vertex.top(g.i).vertex.top("\n        attribute vec4 random;\n      ").vertex.replace("begin_vertex","\n        int j = gl_VertexID / int(uPointsPerCurve);\n        int i = gl_VertexID - j * int(uPointsPerCurve);\n        float r = uCurveRandom[j]; // Curve random value\n\n        vColor = uColors[j] * mix(0.8, 1.2, random.x);\n\n        float curveFraction = 0.2;\n        float curveSpeed = 0.0125;\n        float curveInnerSpeed = 0.05;\n\n        float t3 = fract(position.x / uPointsPerCurve + uTime * curveInnerSpeed);\n        float t0 = fract(curveFraction * t3 + r + uTime * curveSpeed);\n        t0 = easeIn2(t0);\n\n        float x = t0;\n        float y = position.y / uCurvesMapSize.y;\n        float xMax = uCurvesMapSize.x - 1.0; // one less because of linear interpolation (x0 -> x1)\n        float xT = fract(x * xMax);\n        float x0 = floor(x * xMax) / xMax;\n        float x1 = floor(x * xMax + 1.0) / xMax;\n        \n        vec3 p0 = texture(uCurvesPositionMap, vec2(x0, y)).xyz;\n        vec3 p1 = texture(uCurvesPositionMap, vec2(x1, y)).xyz;\n        vec3 p = mix(p0, p1, xT);\n\n        vec3 tangent0 = texture(uCurvesTangentMap, vec2(x0, y)).xyz;\n        vec3 tangent1 = texture(uCurvesTangentMap, vec2(x1, y)).xyz;\n        vec3 tangent = mix(tangent0, tangent1, xT);\n\n        vec3 normal = normalize(cross(tangent, vec3(0.0, 1.0, 0.0)));\n        vec3 binormal = normalize(cross(normal, tangent));\n\n        float t1 = sin(random.x * PI2 + uTime * mix(0.5, 1.0, random.z));\n        float t2 = sin(random.y * PI2 + uTime * mix(0.5, 1.0, random.w));\n        float dispersion = mix(0.005, 0.2, easeOut8(t0));\n        vec3 transformed = p \n          + normal * (random.z - 0.5) * dispersion * t1 \n          + binormal * (random.w - 0.5) * dispersion * t2;\n      ").vertex.mainAfterAll("\n        gl_PointSize *= mix(0.2, 1.0, easeInThenOut(t0, 16.0))\n          * mix(0.25, 1.0, easeInThenOut(t3, 6.0))\n          * mix(0.25, 1.0, random.z);\n\n        vRandom = random;\n      ").fragment.mainAfterAll("\n        if (vRandom.x < 0.5) {\n          if (texture2D(uMaskMaps[0], gl_PointCoord).r < 0.5) discard;\n        } else if (vRandom.y < 0.2) {\n          if (texture2D(uMaskMaps[1], gl_PointCoord).r < 0.5) discard;\n        } else {\n          if (texture2D(uMaskMaps[2], gl_PointCoord).r < 0.5) discard;\n        }\n      ");let x=new r.woe(a,v);this.add(x)}}var P=n(22634),A=n(32219);class T extends r.ZAu{setControlPoints(e){let{curveSubdivisions:t=512}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{degree:n,color:i}=this,a=e.map(e=>e instanceof r.Pa4?new r.Ltg(e.x,e.y,e.z,1):e),s=[],o=a.length;for(let e=0;e<=n;e++)s.push(0);for(let e=1;e<=o-n;e++)s.push(e);for(let e=0;e<n;e++)s.push(o-n);let l=new P.e(n,s,a),c=l.getSpacedPoints(t),d=new r.u9r().setFromPoints(c),h=new r.x12(d,new r.nls({color:i}));this.add(h);let u=new r.SPe(T.instancedGeometry,new r.vBJ({color:i}),a.length);this.add(u);let f=new r.yGw;for(let[e,t]of a.entries()){let{x:n,y:i,z:r,w:a}=t;u.setMatrixAt(e,(0,A.Xe)({x:n,y:i,z:r,scaleScalar:a},f))}this.controlPoints=a,this.nurbsCurve=l,this.points=c}constructor(...e){super(...e),this.degree=8,this.color=new r.Ilk(16711680),this.nurbsCurve=null,this.controlPoints=[],this.points=[]}}T.instancedGeometry=new r.cJO(.005,12);let F=["#3366ff","#009a27","#00943b","#2512cf","#bb1d81","#67cd6c","#fed801","#ff1f02"];class D extends r.ZAu{addSpot(e,t){let{x:n,y:i,z:r}=e,{matrix:a,color:s}=D.shared;this.instancedMesh.setMatrixAt(this.index,a.makeTranslation(n,i,r)),this.instancedMesh.setColorAt(this.index,s.set(t)),this.index++}constructor({sizeBase:e=400}={}){super(),this.index=0;let{geometry:t,material:n,matrix:i,color:a}=D.shared;this.instancedMesh=new r.SPe(t,n,e),this.add(this.instancedMesh),i.makeScale(0,0,0),a.set("white");for(let t=0;t<e;t++)this.instancedMesh.setMatrixAt(t,i),this.instancedMesh.setColorAt(t,a)}}D.shared={geometry:new r.cJO(.005,12),material:new r.vBJ,matrix:new r.yGw().makeScale(0,0,0),color:new r.Ilk("white")};class j extends r.ZAu{onTick(e){}earthRaycast(e){var t;let n=e.clone().applyMatrix4(this.matrixWorld.clone().invert()).intersectSphere(new r.aLr(new r.Pa4,1),new r.Pa4);return null!==(t=null==n?void 0:n.applyMatrix4(this.matrixWorld))&&void 0!==t?t:null}addSphericalSpot(e){let{phi:t,theta:n,color:i="white"}=e;this.parts.miniSpots.addSpot(S({phi:t,theta:n,radius:1}),i);let r=new T;r.degree=8,r.color.set(i);let a=[S({phi:t,theta:n,radius:1})],s=n,o=t;for(let e=0;e<12;e++){let t=(0,w.t7)(2,5,e/12);a.push(S({theta:s,phi:o,radius:t})),s=(0,w.t7)(s,0,.5),o+=-.65}return r.setControlPoints(a),r}constructor(){super(),this.uniforms={uTime:c.vB.get("three").uTime,uSpherize:{value:1},uSunPosition:{value:new r.Pa4(.5,.7,.3)},uSide:{value:0}},this.userData=function(e,t){for(let[n,i]of Object.entries(t)){let[t,r="value"]=i.bind;Object.defineProperty(e,n,{enumerable:!0,get:()=>t[r],set:e=>t[r]=e}),i.meta&&Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,get:()=>i.meta})}return e}({},{spherize:{bind:[this.uniforms.uSpherize,"value"],meta:"Slider(0, 1)"}}),this.parts={miniSpots:new D,back:null,front:null},this.sphericalSpots=[];let e=M.load("images/blank-world-map-alt.png"),{uniforms:t}=this,n=new r.vBJ({map:e,transparent:!0,side:r.ehD,depthWrite:!1});n.onBeforeCompile=e=>m.b.with(e).uniforms(t).varying({vWorldNormal:"vec3",vWorldPosition2:"vec3"}).vertex.replace("begin_vertex","\n        float tx = position.x;\n        float ty = position.y;\n\n        vec3 transformed;\n        vec3 normal;\n        if (uSpherize < 0.001) {\n          transformed = vec3(tx * 2.0, ty, 0.0) * PI;\n          normal = vec3(0.0, 0.0, 1.0);\n        } else {\n          float r = 1.0 / uSpherize;\n          float phi = tx * PI * 2.0 * uSpherize - PI * 0.5;\n          float theta = ty * PI * uSpherize;\n          float x = cos(theta) * cos(phi);\n          float z = cos(theta) * -sin(phi);\n          float y = sin(theta);\n          transformed = vec3(x, y, z - 1.0) * r + vec3(0.0, 0.0, uSpherize);\n          normal = vec3(x, y, z);\n        }\n        vWorldNormal = normalize(mat3(modelMatrix) * normal);\n        vWorldPosition2 = (modelMatrix * vec4(transformed, 1.0)).xyz;\n      ").vertex.mainAfterAll("\n      ").fragment.top(x.U,g.i).fragment.mainBeforeAll("\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n\n        vec3 viewDir = normalize(cameraPosition - vWorldPosition2);\n        float cosTheta = dot(normalize(vWorldNormal * uSide), viewDir);\n        float fresnelBias = 0.1;\n        float fresnelPower = 3.0;\n        float fresnel = fresnelBias + (1.0 - fresnelBias) * pow(1.0 - cosTheta, fresnelPower);\n      ").fragment.replace("map_fragment","\n        #ifdef USE_MAP\n          vec2 uv = vMapUv;\n          float r = uv.y * 2.0;\n          if (r > 1.0) r = 2.0 - r;\n          r = 1.0 - r;          \n\n          float a = 0.0;\n          a += pow(r, 2.4) * 0.205;\n          a += pow(r, 10.0) * 0.03;\n          float x = uv.x;\n          \n          float padding = 0.005;\n          uv.x = mix(padding + a, 1.0 - padding - a, x);\n          // uv.x = 1.0 - uv.x;\n          vec4 sampledDiffuseColor = texture2D(map, uv);\n\n          diffuseColor.rgb *= vec3(mix(0.75, 1.0, light));\n          float alpha = (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) > 0.1 ? 1.0 : 0.0;\n          diffuseColor.a *= alpha + fresnel * 1.2;\n          // diffuseColor.rgb = vec3(fresnel);\n          // diffuseColor.rgb = vWorldNormal;\n          // diffuseColor.a = 1.0;\n        #endif\n      ");let i=new r._12(1,1,256,128);(0,p.cY)(this,{name:"earth"});let a=(0,p.cY)(new r.Kj0(i,n),{parent:this,name:"back"});a.onBeforeRender=()=>{t.uSide.value=-1,n.color.set("#cdcdcd"),n.side=r._Li,n.needsUpdate=!0},this.parts.back=a;let s=(0,p.cY)(new r.Kj0(i,n),{parent:this,name:"front"});s.onBeforeRender=()=>{t.uSide.value=1,n.color.set("#ffffff"),n.side=r.Wl3,n.needsUpdate=!0},this.parts.front=s,(0,p.cY)(new r.Kj0(new r._12,n),{parent:this,y:-1.5,scaleX:3,visible:!1}),(0,p.cY)(new v.O,{parent:this}).circle({radius:1.04}).draw(),y.T.seed(123);let o=[...b.map(e=>this.addSphericalSpot({...e,color:y.T.pick(F)})),...b.filter(()=>y.T.chance(.8)).map(e=>{let{phi:t,theta:n}=e;return t+=.04*y.T.around(),n+=.04*y.T.around(),this.addSphericalSpot({phi:t,theta:n,color:y.T.pick(F)})})];this.add(...o.map(e=>new C(e.points,{color:e.color})));let l=new z(o);this.add(l),this.add(this.parts.miniSpots)}}j.sphericalCoordinates={paris:{theta:.9426432714835036,phi:1.7045171372513754}};class E extends r.Kj0{constructor(){let e=new r.vBJ({color:"#cccccc",side:r._Li}),t={uResolution:{value:new r.FM8}};e.onBeforeCompile=e=>m.b.with(e).uniforms(t).fragment.replace("map_fragment","\n        vec2 p = gl_FragCoord.xy / uResolution * 2.0 - 1.0;\n        float aspect = uResolution.x / uResolution.y;\n        p *= aspect > 1.0 ? vec2(1.0, 1.0 / aspect) : vec2(aspect, 1.0);\n        float alpha = 1.0 - length(p);\n        diffuseColor.rgb *= mix(0.8, 1.4, alpha);\n      "),super(new r.cJO(40,12),e),this.onBeforeRender=e=>{e.getSize(t.uResolution.value).multiplyScalar(e.getPixelRatio())}}}class R extends r.woe{constructor(e=5e3){let t=new r.u9r,n=new Float32Array(3*e),i=new Float32Array(e),a=new r.Pa4;for(let t=0;t<e;t++)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Pa4,t=2*Math.random()*Math.PI,n=Math.acos(2*Math.random()-1);return e.x=Math.sin(n)*Math.cos(t),e.y=Math.sin(n)*Math.sin(t),e.z=Math.cos(n),e})(a).multiplyScalar(36).toArray(n,3*t),i[t]=y.T.between(.2,.5);t.setAttribute("position",new r.a$l(n,3)),t.setAttribute("instanceSize",new r.a$l(i,1));let s=new r.UY4({color:"#ffffff"});s.onBeforeCompile=e=>m.b.with(e).vertex.top("\n        attribute float instanceSize;\n      ").vertex.mainAfterAll("\n        gl_PointSize *= instanceSize;\n      ").fragment.mainBeforeAll("\n        float dist = length(gl_PointCoord - 0.5);\n        if (dist > 0.5) discard;\n      "),super(t,s)}}class k extends r.ZAu{constructor(...e){super(...e),this.parts={sphere:(0,p.cY)(new E,this),stars:(0,p.cY)(new R,this)}}}class B extends r.ZAu{constructor(...e){super(...e),this.parts={ambient:(0,p.cY)(new r.Mig(16777215,1.5),this),directional:(0,p.cY)(new r.Ox3(16777215,1.5),this)}}}class O extends r.ZAu{constructor(...e){super(...e),this.parts={sky:(0,p.cY)(new k,this),earth:(0,p.cY)(new j,this),lights:(0,p.cY)(new B,this),grid:(0,p.cY)(new f.K({size:[20,20]}),{parent:this,visible:!1})}}}class N{initialize(e,t){return this.initialized?console.warn("Pointer already initialized."):(this.initialized=!0,this.destroyables.push(...this.doInitialize(e,t))),this}*doInitialize(e,t){yield(0,o.w)(e,{onChange:n=>{this.screen.position.copy(n.position);let i=e.getBoundingClientRect(),{x:r,y:a}=n.position;r-=i.left,a-=i.top,r/=i.width,a/=i.height,r=2*r-1,a=-(2*a-1),this.ndc.position.set(r,a),this.raycaster.setFromCamera(this.ndc.position,t)},onDown:()=>{this.screen.positionDown.copy(this.screen.position),this.ndc.positionDown.copy(this.ndc.position)}})}constructor(){this.screen={position:new r.FM8,positionDown:new r.FM8},this.ndc={position:new r.FM8,positionDown:new r.FM8},this.raycaster=new r.iMs,this.destroyables=[],this.initialized=!1}}function _(){return(0,a.Ky)(function*(e){let t=new O;e.scene.add(t),yield()=>{t.clear().removeFromParent()},e.ticker.set({minActiveDuration:100});let n=new N;n.initialize(e.renderer.domElement,e.camera);let i=new l.F({perspective:.25,size:4});i.start(e.renderer.domElement),yield(0,c.RC)("three",()=>{i.update(e.camera,e.aspect)}),yield(0,o.w)(e.renderer.domElement,{onTap:()=>{let e=t.parts.earth.earthRaycast(n.raycaster.ray);if(e){let{x:n,y:i,z:r}=e,a=Math.atan2(i,Math.sqrt(n**2+r**2)),s=Math.atan2(r,n);t.parts.earth.addSphericalSpot({theta:a,phi:s})}}}),yield(0,s.p)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]),Object.assign(window,{poc1:t,three:e,controls:i})},"always"),null}function I(){return(0,a.Ky)(function*(e){(0,h.a)(e),M.setPath(d.v.assets()),console.log("Assets config.assetsPath: ".concat(d.v.assets()))},[]),null}function L(){return(0,i.jsxs)("div",{className:"layer thru",children:[(0,i.jsxs)(a.H7,{children:[(0,i.jsx)(I,{}),(0,i.jsx)(u,{}),(0,i.jsx)(_,{})]}),(0,i.jsx)("header",{className:"absolute thru w-full top-0 p-8",children:(0,i.jsx)("img",{width:100,src:d.v.assets("images/acme-logo.png"),alt:""})}),(0,i.jsx)("footer",{className:"absolute thru w-full bottom-0 p-12 flex flex-row justify-center"}),(0,i.jsx)("div",{className:"layer thru",children:(0,i.jsx)("div",{className:"absolute left-0 top-0 w-[300px] h-full"})})]})}},73861:function(e,t,n){"use strict";n.d(t,{Client:function(){return S}});var i=n(32617),r=n(30699),a=n(23657),s=n(29368),o=n(87200),l=n(82711),c=n(85284),d=n(58100),h=n(46314);class u{paint(e){let{ctx:t,pixelRatio:n}=this;t.clearRect(0,0,t.canvas.width,t.canvas.height),e.computeLayout();let i=e=>{let t=0;for(let n of e.allAncestors({includeSelf:!0}))t+=n.positioning===h.J8.Detached?100:1;return t};for(let r of[...e.allDescendants({includeSelf:!1})].filter(e=>!e.userData.skipPaint).sort((e,t)=>i(e)-i(t))){let e=r.rect.clone().multiplyScalar(n),i=function(e){let t;for(;!t&&e;){if(void 0!==(t=e.userData.color))return t;e=e.parent}return"#ffffff"}(r);r.userData.plain?(t.strokeStyle="",t.fillStyle=i,t.fillRect(e.x,e.y,e.width,e.height)):(t.lineWidth=2*n,t.strokeStyle=i,t.fillStyle="rgba(0, 0, 0, .5)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height))}}constructor(e,{pixelRatio:t=window.devicePixelRatio,width:n=800,height:i=600}={}){e.width=n*t,e.height=i*t,e.style.width="".concat(n,"px"),e.style.height="".concat(i,"px"),this.ctx=e.getContext("2d"),this.pixelRatio=t,this.width=n,this.height=i}}let f={yellow:"#ffcc00",magenta:"#cc00ff",paleGreen:"#00ffcc",blue:"#00ccff",vibrantBlue:"#1c55ff"},p=[{direction:c.Nm.Horizontal,aspect:1},{direction:c.Nm.Vertical,aspect:2},{direction:c.Nm.Vertical,aspect:8},{direction:c.Nm.Vertical,aspect:.5},{direction:c.Nm.Horizontal,aspect:.5},{direction:c.Nm.Horizontal,aspect:1/4}];function v(){let e=(0,o.useMemo)(()=>new d.ObservableNumber(0),[]),{ref:t}=(0,a.sv)(function*(t){let n=new u(t.querySelector("canvas")),{direction:i,aspect:r}=p[e.value],a=new c.T({direction:i,size:[n.width,n.height],spacing:10,alignChildren:1}).add(new c.T({alignChildren:.5,aspect:r,spacing:10,userData:{color:f.yellow}}).add(new c.T({size:["50%","50%"]}),new c.T({size:["10%","10%"]})),new c.T({aspect:r,spacing:10,userData:{color:f.paleGreen}}).add(new c.T,new c.T),new c.T({aspect:r,userData:{color:f.magenta}}));yield e.onChange(e=>{let{direction:t,aspect:n}=p[e];for(let e of(a.set({direction:t}),a.children))e.set({aspect:n})}),yield(0,s.RC)("layout",e=>{a.set({alignChildren:e.cos01Time({frequency:.1})}),a.get(2).set({alignSelf:e.cos01Time({frequency:.3})}),n.paint(a)})},[]),n=()=>{e.value=(e.value+1)%p.length};return(0,i.jsxs)("div",{ref:t,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1",cursor:"pointer"},onClick:n}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("button",{className:"border border-white rounded px-2 py-1",onClick:n,children:[(0,i.jsxs)("span",{children:["Direction: ",c.Nm[p[(0,l.y)(e)].direction],","]}),"\xa0",(0,i.jsxs)("span",{children:["Aspect: ",p[(0,l.y)(e)].aspect]})]})}),(0,i.jsxs)("p",{style:{color:f.magenta},children:[(0,i.jsx)("code",{children:"alignSelf"})," allows the children to override the parent's ",(0,i.jsx)("code",{children:"alignChildren"}),"."]})]})]})}function m(){let{ref:e}=(0,a.sv)(function*(e){let t=e.querySelector("canvas"),n=new c.T({direction:c.Nm.Horizontal,offset:[100,100],size:[600,400],padding:10,gap:10,userData:{color:f.yellow}});n.add(new c.T({direction:c.Nm.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:f.vibrantBlue}}),new c.T({direction:c.Nm.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:f.vibrantBlue}}),new c.T({direction:c.Nm.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:f.vibrantBlue}}));for(let e=0;e<3;e++)n.get(0).add(new c.T({size:"".concat(e+1,"fr"),spacing:10,userData:{color:f.paleGreen}}));n.computeLayout();let i=window.devicePixelRatio;t.width=800*i,t.height=600*i,t.style.width="800px",t.style.height="600px";let r=t.getContext("2d");for(let e of n.allDescendants({includeSelf:!0})){var a;r.lineWidth=2*i,r.strokeStyle=null!==(a=e.userData.color)&&void 0!==a?a:"#fff",r.strokeRect(...e.rect.tupple(i))}},[]);return(0,i.jsxs)("div",{ref:e,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsx)("div",{className:"text-center"})]})}function g(){let e=[10,30,90,0],t=[10,80],{ref:n}=(0,a.sv)(function*(n){let i=new u(n.querySelector("canvas")),r=new c.T({direction:c.Nm.Horizontal,size:[i.width,i.height],spacing:10,alignChildren:1}).add(new c.T({userData:{color:f.yellow}}).add(new c.T({margin:e,userData:{color:f.yellow}}).add(new c.T({margin:e,userData:{color:f.yellow}}).add(new c.T({margin:e,userData:{color:f.yellow}}).add(new c.T({margin:e,userData:{color:f.yellow}}).add(new c.T({margin:e,userData:{color:f.yellow}})))))),new c.T({userData:{color:f.paleGreen}}).add(new c.T({margin:t,userData:{color:f.paleGreen}})),new c.T({padding:10,userData:{color:f.magenta}}).add(new c.T({margin:[0,60],marginRight:0,userData:{color:f.magenta}}),new c.T({margin:[0,60],marginLeft:0,userData:{color:f.magenta}})));yield(0,s.RC)("layout",e=>{var t;null===(t=r.get(2))||void 0===t||t.set({padding:10+40*e.sin01Time({frequency:.2})}),i.paint(r)})},[]);return(0,i.jsxs)("div",{ref:n,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{children:"css-like margins:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{style:{color:f.yellow},children:["4 values (",e.join(", "),") (top, right, bottom, left)"]}),(0,i.jsxs)("li",{style:{color:f.paleGreen},children:["2 values (",t.join(", "),") (vertical, horizontal)"]}),(0,i.jsxs)("li",{style:{color:f.magenta},children:["specific overrides: ",(0,i.jsx)("code",{children:"marginLeft"}),' overrides "2 values" declaration']})]})]})]})}function x(){let e=e=>{switch(e){case 40:return f.magenta;case 120:return f.paleGreen;default:return f.yellow}},{ref:t}=(0,a.sv)(function*(t){var n,i;let r=new u(t.querySelector("canvas"));function a(t){return{userData:{color:e(t)},margin:t}}let s=new c.T({direction:c.Nm.Horizontal,size:[r.width,r.height],spacing:10,alignChildren:1}).add(new c.T({spacing:10,userData:{color:"#fff2"}}).add(new c.T({...a(0)}),new c.T({...a(0)}),new c.T({...a(40)}),new c.T({...a(40)}),new c.T({...a(120)}),new c.T({...a(0)})));null===(n=s.get(0,2))||void 0===n||n.add(new c.T({positioning:h.J8.Detached,alignSelf:0,size:[38,38],offset:[-39,-39],userData:{color:"#fff2",plain:!0}})),null===(i=s.get(0,4))||void 0===i||i.add(new c.T({positioning:h.J8.Detached,alignSelf:0,size:[118,118],offset:[-119,-119],userData:{color:"#fff2",plain:!0}})),r.paint(s)},[]);return(0,i.jsxs)("div",{ref:t,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{children:'Margins "collapse" when they are adjacent to each other or to the edge (padding) of the container.'}),(0,i.jsx)("p",{style:{color:e(0)},children:"margin: 0"}),(0,i.jsx)("p",{style:{color:e(40)},children:"margin: 40"}),(0,i.jsx)("p",{style:{color:e(120)},children:"margin: 120"})]})]})}var w=n(26774),y=n.n(w),b=n(6246);function M(){let{ref:e}=(0,a.sv)(function*(e){let t=new u(e.querySelector("canvas"));b.T.reset();let n=new c.T({direction:c.Nm.Horizontal,size:[t.width,t.height],spacing:10,userData:{color:f.blue}}).add(new c.T({direction:c.Nm.Vertical,size:"1part",spacing:10,userData:{color:f.paleGreen}}).populate(5,{spacing:10}),new c.T({direction:c.Nm.Vertical,size:"2sh",userData:{color:f.magenta},spacing:10}),new c.T({direction:c.Nm.Vertical,size:"1part",spacing:10}).add(new c.T().setSize("40"),new c.T().setSize("1part"),new c.T().setSize("40"),new c.T().setSize("1part").setSpacing(10).add(new c.T({direction:"vertical",size:"1part"}),new c.T({direction:"vertical",size:"1part"}),new c.T({direction:"vertical",size:"1part"})),new c.T().setSize("40")),new c.T().setPositioning("detached").setUserData({skipPaint:!0}).setPadding(20).setSize("1rel").add(new c.T({positioning:c.J8.Detached,offset:["0rel","1rel"],size:".7sm"})));n.get(0,3).populate(3),n.get(1).add(new c.T({positioning:c.J8.Detached,direction:c.Nm.Vertical,size:90,spacing:10}).populate(4),new c.T({positioning:c.J8.Detached,alignSelf:0,offset:[0,0],size:70,spacing:10}).populate(3),new c.T({positioning:c.J8.Detached,alignSelf:[0,1],size:30,spacing:10}).populate(1),new c.T({positioning:c.J8.Detached,alignSelf:1,size:50,spacing:10}).populate(2));let i=new c.T({positioning:c.J8.Detached,size:30}).populate(3).addTo(n.get(0,3));for(let e of n.allDescendants({includeSelf:!0}))e.positioning===c.J8.Detached&&e.set({userData:{color:f.yellow}});n.computeLayout(),yield(0,s.RC)("layout",e=>{n.get([0]).sizeX.value=e.lerpCos01Time(2,1,{frequency:1/6}),n.get([1]).sizeX.value=e.lerpCos01Time(0,4,{frequency:1/6}),i.set({alignSelf:e.sin01Time({frequency:1/3})}),t.paint(n)})},[]);return(0,i.jsxs)("div",{ref:e,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)("p",{children:["When positioning is set to ",(0,i.jsx)("code",{style:{color:f.yellow},children:"detached"}),", spaces are not affected by their parent's size."]})})]})}function S(){let{ref:e}=(0,a.sv)(function*(e){let[t,...n]=e.children;t.style.flex="0 0 ".concat((n.length-1)*800,"px");let i=s.vB.get("layout").set({minActiveDuration:4});yield(0,r.s)(i.requestActivation)},[]);return(0,i.jsxs)("div",{ref:e,className:"".concat(y().Client," page overflow-scroll"),children:[(0,i.jsx)("div",{}),(0,i.jsx)(m,{}),(0,i.jsx)(g,{}),(0,i.jsx)(x,{}),(0,i.jsx)(v,{}),(0,i.jsx)(M,{})]})}},3604:function(e,t,n){"use strict";n.d(t,{Client:function(){return B}});var i=n(32617),r=n(5693),a=n(77478);n(75653);var s=n(39345),o=n(37186),l=n(30699),c=n(23657),d=n(6246),h=n(29368);let u=function(e,t){let{h:n=.3,w:i=1,p:r=3,q:a=1,a:s=.3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t**a;e.x=(t+s*Math.sin(o*Math.PI*2))*i,e.y=n*Math.pow(Math.sin(o*Math.PI),r)},f="\nvec2 looping(float t, float h, float w, float p, float q, float a) {\n  float t2 = pow(t, q);\n  return vec2(\n    (t + a * sin(t2 * PI * 2.0)) * w,\n    h * pow(sin(t2 * PI), p)\n  );\n}\n\nvec2 looping(float t) {\n  return looping(t, 0.3, 1.0, 3.0, 1.0, 0.3);\n}\n";function p(){let e=(0,a._)(["x(t) = w cdot left( t + a cdot sin(2 pi cdot t^q) \right)"],["x(t) = w \\cdot \\left( t + a \\cdot \\sin(2 \\pi \\cdot t^q) \\right)"]);return p=function(){return e},e}function v(){let e=(0,a._)(["y(t) = h cdot left( sin(pi cdot t^q) \right)^p"],["y(t) = h \\cdot \\left( \\sin(\\pi \\cdot t^q) \\right)^p"]);return v=function(){return e},e}let m=(()=>{let e=new o.FM8;return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Array.from({length:n+1},(i,r)=>(t(e,r/n),"".concat(e.x.toFixed(5),",").concat(e.y.toFixed(5)))).join(" ")}})();function g(){let{samples:e=300,curve:t=(e,t)=>{e.x=t,e.y=t},color:n="#fff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=m(t,e),{ref:a}=(0,c.sv)(function*(e){let n=new o.FM8;console.log("foo"),yield h.vB.get("three").onTick(i=>{t(n,.5*i.time%1),e.setAttribute("cx",n.x.toFixed(5)),e.setAttribute("cy",n.y.toFixed(5))})},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("polyline",{stroke:n,points:r,opacity:.25}),(0,i.jsx)("circle",{ref:a,cx:0,cy:0,r:.005,fill:n,stroke:"none"})]})}function x(){return(0,i.jsxs)("div",{className:"absolute inset-0 text-sm p-4 pt-12",children:[(0,i.jsx)(s.BlockMath,{math:String.raw(p())}),(0,i.jsx)(s.BlockMath,{math:String.raw(v())})]})}function w(){(0,c.sv)(function*(){yield(0,l.s)(h.vB.current().requestActivation)},[]);let e=new o.FM8(.5,.5),t=new o.FM8(1,1),n="".concat(e.x-t.x/2-.05," ").concat(e.y-t.y/2-.05," ").concat(t.x+.1," ").concat(t.y+.1);return d.T.reset(),(0,i.jsxs)("div",{className:"relative self-start",children:[(0,i.jsx)(x,{}),(0,i.jsx)("svg",{viewBox:n,width:400,style:{border:"1px solid #fff3",borderRadius:".25em"},children:(0,i.jsxs)("g",{transform:"scale(1, -1) translate(0, -1)",children:[(0,i.jsxs)("g",{stroke:"#fff2",strokeWidth:.002,children:[(0,i.jsx)("line",{x1:-10,x2:10}),(0,i.jsx)("line",{y1:-10,y2:10}),(0,i.jsx)("line",{x1:1,x2:1,y1:-10,y2:10}),(0,i.jsx)("line",{x1:-10,x2:10,y1:1,y2:1})]}),(0,i.jsxs)("g",{id:"curves",stroke:"#fff",fill:"none",strokeWidth:.002,children:[Array.from({length:10},(e,t)=>{let n=d.T.between(3,5),r=d.T.between(1/3,1.5),a=d.T.between(.1,.5),s=d.T.between(.2,.3),o="hsl(".concat(d.T.between(180,360),", 100%, 70%)");return(0,i.jsx)(g,{curve:(e,t)=>u(e,t,{a:s,p:n,h:a,q:r}),color:o},t)}),(0,i.jsx)(g,{curve:u})]})]})})]})}var y=n(60236),b=n(12042),M=n(23247),S=n(78780),C=n(99963);class z extends o.Kj0{constructor(){super(new y.w({xColor:"#ff338b",yColor:"#33cc9c",zColor:"#4e33ff"}),new b.P)}}class P extends o.Tme{constructor(){super(),this.axes1=(0,S.bB)(new z,this),this.axes2=(0,S.bB)(new z,this),this.onTick=e=>{let{deltaTime:t}=e,{axes1:n,axes2:i}=this;n.rotation.y+=.5*t,i.rotation.x+=.5*t};let{axes1:e,axes2:t}=this;e.position.set(-1,0,0),e.rotation.x=-Math.PI/2,t.position.set(1,0,0),t.rotation.x=-Math.PI/2;let n=new o._12(1,1,1e3,1).translate(.5,.5,0),i=new o.EJi({side:o.ehD,flatShading:!0,emissiveIntensity:.25,emissive:"#ffffff"});(0,S.bB)(new o.Kj0(n,i),this);let r={uTime:h.vB.get("three").uTime,uWidth:{value:.6},uStartMatrix:{value:e.matrix},uEndMatrix:{value:t.matrix}};i.onBeforeCompile=e=>M.b.with(e).uniforms(r).vertex.top(C.i,f).vertex.top("\n        vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          vec3 ab = mix(a, b, t);\n          vec3 bc = mix(b, c, t);\n          vec3 cd = mix(c, d, t);  \n          vec3 ab_bc = mix(ab, bc, t);\n          vec3 bc_cd = mix(bc, cd, t);\n          return mix(ab_bc, bc_cd, t);\n        }\n\n        vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          return 3.0 * ( \n            (1.0 - t) * (1.0 - t) * (b - a) + \n            2.0 * (1.0 - t) * t * (c - b) + \n            t * t * (d - c));\n        }\n      ").vertex.replace("begin_vertex","\n        vec3 start = uStartMatrix[3].xyz;\n        vec3 end = uEndMatrix[3].xyz;\n\n        vec3 p0 = start;\n        vec3 p1 = mix(start, end, 0.0) + uStartMatrix[2].xyz;\n        vec3 p2 = mix(start, end, 1.0) + uEndMatrix[2].xyz;\n        vec3 p3 = end;\n\n        vec3 up = mix(uStartMatrix[1].xyz, uEndMatrix[1].xyz, position.x);\n        vec3 tangent = bezier3_tangent(p0, p1, p2, p3, position.x);\n        vec3 normal = cross(tangent, up);\n\n        float width = (position.y - 0.5)\n          // * easeInThenOut(position.x, 3.0)\n          * uWidth;\n\n        vec2 loop = looping(position.x);\n\n        vec3 transformed = \n          bezier3(p0, p1, p2, p3, position.x)\n          + tangent * (loop.x - position.x) * 2.0 + normal * loop.y * 2.0\n          + up * width;\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4( transformed, 1.0 );\n        #ifdef USE_BATCHING\n          mvPosition = batchingMatrix * mvPosition;\n        #endif\n        #ifdef USE_INSTANCING\n          mvPosition = instanceMatrix * mvPosition;\n        #endif\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;\n      ")}}var A=n(86521),T=n(88780);function F(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=Array.isArray(t)?t.map(e=>new T.Ilk(e)):[new T.Ilk(t)],s=e.attributes.position.count,o=null!==(n=e.attributes.color)&&void 0!==n?n:function(){let t=new T.TlE(new Float32Array(3*s),3);return e.setAttribute("color",t),t}(),l=r<0?s:r;if(1===a.length){let{r:e,g:t,b:n}=a[0];for(let r=i;r<l;r++)o.setXYZ(r,e,t,n)}else for(let e=i;e<l;e++){let{r:t,g:n,b:i}=a[e%a.length];o.setXYZ(e,t,n,i)}o.needsUpdate=!0}let D=(()=>{let e=new T.Pa4(0,1,0),t=new T.Pa4(0,0,-1),n=new T.Pa4,i=new T.Pa4,r=new T.Pa4;return function(a,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;i.crossVectors(o,s),1e-6>i.lengthSq()&&i.crossVectors(t,s),i.normalize(),r.crossVectors(s,i).normalize(),a.set(i.x,r.x,s.x,l.x,i.y,r.y,s.y,l.y,i.z,r.z,s.z,l.z,0,0,0,1)}})();var j=n(1976);class E extends o.SPe{static getGeometry(){if(E._geometry)return E._geometry;let e=new o.BVQ(.05,1,1,6).rotateZ(Math.PI/2).translate(.5,0,0);F(e,"#c60613");let t=e.clone().rotateZ(Math.PI/2);F(t,"#01b35a");let n=e.clone().rotateY(-Math.PI/2);return F(n,"#321bc7"),E._geometry=(0,A.n4)([e,t,n]),E._geometry}static getMaterial(){return E._material||(E._material=new o.vBJ({vertexColors:!0}),E._material.onBeforeCompile=e=>M.b.with(e).uniforms(E.uniforms).vertex.replace("begin_vertex","\n        vec3 transformed = vec3(position);\n        transformed *= uSize;\n        #ifdef USE_ALPHAHASH\n          vPosition = vec3(position);\n        #endif\n      ")),E._material}addTo(e){return e.add(this),this}constructor(e,t=.1){super(E.getGeometry(),E.getMaterial(),e.count),this.instanceMatrix=e,this.size=t,this.onBeforeRender=()=>{E.uniforms.uSize.value=this.size}}}E.uniforms={uSize:{value:.1}};class R extends o.ZAu{constructor(){var e,t;super(),d.T.reset();let n=new o.vmT("#ffffff","#926969",1);this.add(n);let i=new o.Ox3("#ffffff",2);this.add(i),i.position.set(2,4,1);let r=new o.cJO(1,8),a=r.clone(),s=new o.woe(r,new o.UY4({size:.05}));this.add(s);let l=new o.woe(a,new o.UY4({size:.05}));this.add(l),l.scale.setScalar(.33),l.position.set(0,0,-8),l.rotation.set(0,0,.66*Math.PI),this.onTick=e=>{let{deltaTime:t,time:n}=e;l.position.y=.5*Math.sin(.33*n)};let c=r.attributes.position.count,u=new o.SPe(new o._12(1,1,100,1).translate(.5,.5,0),new o.EJi({side:o.ehD,flatShading:!0}),c);this.add(u),u.frustumCulled=!1;let p=new o.lb7(new Float32Array(16*c),16),v=new o.lb7(new Float32Array(16*c),16);u.geometry.setAttribute("aStartMat",p),u.geometry.setAttribute("aEndMat",v);let m=new o.yGw,g=new o.Pa4(0,1,0),x=new o.Pa4,w=new o.Pa4,y=new o.Ilk;for(let e=0;e<c;e++)x.fromBufferAttribute(r.attributes.position,e),w.copy(x),D(m,w,g,x),m.toArray(p.array,16*e),x.fromBufferAttribute(a.attributes.position,e),D(m,w,g,x),m.toArray(v.array,16*e),y.set("hsl(".concat(d.T.between(180,360),", 100%, 70%)")),u.setColorAt(e,y);let b={uTime:h.vB.get("three").uTime,uLength:{value:.1},uRand:{value:d.T.vector(new o.Ltg,{min:0,max:1})},uWorldStartMatrix:{value:s.matrix},uWorldEndMatrix:{value:l.matrix},uWidth:{value:.1}};u.material.onBeforeCompile=e=>M.b.with(e).shaderName("with-loop").uniforms(b).vertex.top(j.U,C.i,f).vertex.top("\n      attribute mat4 aStartMat;\n      attribute mat4 aEndMat;\n\n      float rand(vec3 p) {\n        return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n      }\n\n      // float rand(vec3 p) {\n      //   p = fract(p * vec3(443.8975, 441.4236, 437.1954));\n      //   p += dot(p, p.yzx + 19.19);\n      //   return fract((p.x + p.y) * p.z);\n      // }\n\n      float rand(vec3 p, float rangeMin, float rangeMax) {\n        return mix(rangeMin, rangeMax, rand(p));\n      }\n\n      float rand11(vec3 p) {\n        float r = rand(p) * 2.0 - 1.0;\n        float s = sign(r);\n        r = fract(r);\n        r *= r * r * r;\n        return r * s;\n      }\n\n      float rand11(vec3 p, float rangeMin, float rangeMax) {\n        return (rand11(p) * 0.5 + 0.5) * (rangeMax - rangeMin) + rangeMin;\n      }\n\n      vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        vec3 ab = mix(a, b, t);\n        vec3 bc = mix(b, c, t);\n        vec3 cd = mix(c, d, t);  \n        vec3 ab_bc = mix(ab, bc, t);\n        vec3 bc_cd = mix(bc, cd, t);\n        return mix(ab_bc, bc_cd, t);\n      }\n\n      vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        return 3.0 * ( \n          (1.0 - t) * (1.0 - t) * (b - a) + \n          2.0 * (1.0 - t) * t * (c - b) + \n          t * t * (d - c));\n      }\n    ").vertex.replace("begin_vertex","\n      mat4 startMat = uWorldStartMatrix * aStartMat;\n      mat4 endMat = uWorldEndMatrix * aEndMat;\n\n      vec3 start = startMat[3].xyz;\n      vec3 end = endMat[3].xyz;\n\n      start += vec3(rand11(start.xyz), rand11(start.yzx), rand11(start.zxy)) * 0.66;\n      end += vec3(rand11(start.zyx), rand11(start.xzy), rand11(start.yxz)) * 0.33;\n      \n      float dt = mix(-uLength, 1.0, fract(uTime * 0.33 + rand11(start) * 0.4));\n      float t = position.x * uLength + dt;\n      t = clamp(t, 0.0, 1.0);\n      float d = distance(start, end);\n\n      vec3 p0 = start;\n      vec3 p1 = mix(start, end, 0.2) + d * 0.2 * startMat[2].xyz;\n      vec3 p2 = mix(start, end, 0.8) + d * 0.2 * endMat[2].xyz;\n      vec3 p3 = end;\n      \n      // p1 = mix(start, end, 0.33);\n      // p2 = mix(start, end, 0.66);\n\n      vec3 normal = normalize(mix(startMat[2].xyz, endMat[2].xyz, t));\n      vec3 up = normalize(mix(startMat[1].xyz, endMat[1].xyz, t));\n      vec3 tangent = normalize(bezier3_tangent(p0, p1, p2, p3, t));\n      \n      float shortT = (t - dt) / uLength;\n      float width = (position.y - 0.5)\n        * easeInThenOut(t, 6.0)\n        * easeInThenOut(shortT, 3.0)\n        * mix(0.33, 1.0, pcurve(t, 1.0, 2.0)) // Narrower at the end.\n        * uWidth;\n      \n      float randomness = 0.2;\n      float startLoopT = rand(start) * randomness;\n      float loopT = startLoopT + inverseLerp(0.0, 1.0 - randomness, t);\n\n      vec2 loop = looping(loopT, 0.3, 1.0, 3.0, rand11(start, 0.6, 1.2), 0.3);\n      // loop = vec2(t, 0.0);\n      \n      // Loop Random Scalar:\n      vec2 lrs = vec2(\n        rand11(start, 0.4, 1.0),\n        rand11(start.zyx, 0.9, 1.1));\n      vec3 transformed = \n        bezier3(p0, p1, p2, p3, t)\n        + tangent * (loop.x - loopT) * d * lrs.x + normal * loop.y * d * lrs.y\n        + up * width;\n      \n      #ifdef USE_ALPHAHASH\n        vPosition = transformed;\n      #endif\n    ").vertex.replace("beginnormal_vertex","\n      vec3 objectNormal = vec3(normal);\n\n      #ifdef USE_TANGENT\n        vec3 objectTangent = vec3(tangent.xyz);\n      #endif\n    "),r.computeBoundingBox(),r.computeBoundingSphere(),a.computeBoundingBox(),a.computeBoundingSphere(),u.computeBoundingBox(),null===(e=u.boundingBox)||void 0===e||e.copy(r.boundingBox.clone()).union(a.boundingBox).expandByScalar(1),u.computeBoundingSphere(),null===(t=u.boundingSphere)||void 0===t||t.copy(r.boundingSphere.clone()).union(a.boundingSphere).expandByPoint(new o.Pa4().setScalar(1)),u.geometry.computeBoundingBox=()=>{},u.geometry.computeBoundingSphere=()=>{},s.visible=!1,l.visible=!1}}function k(){return(0,r._v)("ThreeDemo",async function*(e,t){t.useOrbitControls({position:[2,4.5,8],target:[-1.2,1.2,-.2]}),e.add(new o.VLJ(10,10,"#5c4f7d","#352945"));let n=new P;n.position.set(-5,0,0),yield t.onTick(n.onTick),e.add(n);let i=new R;i.position.set(0,0,0),yield t.onTick(i.onTick),e.add(i)},[]),null}function B(){return(0,i.jsxs)("div",{className:"absolute-through p-4 flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"absolute-through",children:(0,i.jsx)(r.H7,{children:(0,i.jsx)(k,{})})}),(0,i.jsx)("h1",{className:"text-4xl",children:"Path with loop"}),(0,i.jsx)(w,{})]})}},41558:function(e,t,n){"use strict";n.d(t,{Client:function(){return B}});var i=n(32617),r=n(37186),a=n(92059),s=n(33966),o=n(60236),l=n(12042),c=n(85705),d=n(78780),h=n(6246),u=n(62411),f=n(5693),p=n(92948),v=n(32219),m=n(85284),g=n(47090);class x{constructor(e,t,n,i){this.space=e,this.rect=t,this.uvRect=n,this.scatterCoeff=i,this.r0=h.T.random(),this.r1=h.T.random()}}class w{constructor(e,t){this.props={...w.defaultProps,...t};let{position:n,size:i,scatterPadding:r,sizeOptions:a,seed:s}=this.props,{col:o,row:l}=e.props;h.T.seed(s);let c=h.T.createPicker(a),d=Array.from({length:o}).map(c),u=Array.from({length:l}).map(c),{x:f,y:p}=(0,v.iK)(n),{x:y,y:b}=(0,v.iK)(i),M=new m.T(m.Nm.Horizontal).setSize(y,b).setOffset(f-y/2,p-b/2);for(let e of d){let t=new m.T(m.Nm.Vertical).setSize("".concat(e,"fr")).addTo(M);for(let e of u)new m.T(m.Nm.Horizontal).setSize("".concat(e,"fr")).addTo(t)}M.computeLayout();let S=M.rect,C=[...M.allLeaves({includeSelf:!1})],z=(y+b)/2,P=C.map(e=>{let t=e.rect.clone(),n=t.clone().relativeTo(S),{x:i,y:a}=t.getCenter(),s=(0,g.ii)(.5,1,(Math.abs(i-f)+Math.abs(a-p))/z);return t.centerX+=h.T.between(-r,r)*s,t.centerY+=h.T.between(-r,r)*s,new x(e,t,n,s)});this.root=M,this.nodes=P}}w.defaultProps={seed:87654,position:new r.FM8(0,0),size:new r.FM8(3,2),scatterPadding:.1,sizeOptions:[[.5,1],[1,10],[2,2],[3,1]]};var y=n(97219),b=n(85369),M=n(23247),S=n(99963),C=n(1976),z=n(29334),P=n(23420);class A extends r.Tme{constructor(){super();let e=new r.vmT("#ffffff","#926969",1);this.add(e);let t=new r.Ox3("#ffffff",2);this.add(t),t.position.set(2,4,1)}}class T extends r.vBJ{get mapAspect(){return this.uniforms.uMapInfo.value.x}set mapAspect(e){this.uniforms.uMapInfo.value.x=e}getScatteredSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.FM8;return e.x=this.uniforms.uScatteredInfo.value.x,e.y=this.uniforms.uScatteredInfo.value.y,e}setScatteredSize(e){this.uniforms.uScatteredInfo.value.x=e.x,this.uniforms.uScatteredInfo.value.y=e.y}get scatteredSize(){return this.getScatteredSize()}set scatteredSize(e){this.setScatteredSize(e)}update(e){e*=.33,this.uniforms.uDispersionTime.value+=e*this.uniforms.uDispersion.value.x,this.uniforms.uLowDispersionTime.value+=e*this.uniforms.uLowDispersion.value.x}constructor(){super({side:r.ehD}),this.uniforms={uDispersionTime:{value:0},uLowDispersionTime:{value:0},uDispersion:{value:new r.Ltg(1,-.6,.4,2)},uLowDispersion:{value:new r.Ltg(0,-.6,.4,0)},uMainParams:{value:new r.Ltg(1,0)},uCenter:{value:new r.Pa4},uMapInfo:{value:new r.Ltg(1,1,.5,.5)},uScatteredInfo:{value:new r.Ltg(1,1,0,0)},uNormalMap:{value:b.R.get("three").loadTexture("textures/rough_concrete_nor_gl_1k.jpg",e=>{e.wrapS=e.wrapT=r.rpg})}},this.userData=function(e,t){for(let[n,i,r,a]of t)Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,value:a}),Object.defineProperty(e,n,{enumerable:!0,get:()=>i[r],set(e){i[r]=e}});return e}({},[["chunkScale",this.uniforms.uMainParams.value,"x","\n        Name(chunk.scale)\n        Slider(0, 1, step: any)\n      "],["imageVisibility",this.uniforms.uMainParams.value,"y","\n        Name(image.visibility)\n        Slider(0, 1, step: any)\n      "],["dispX",this.uniforms.uDispersion.value,"x","\n        Name(disp.x)\n        Slider(0, 1, step: any)\n      "],["dispY",this.uniforms.uDispersion.value,"y","\n        Name(disp.y)\n        Slider(-1, 1, step: any)\n      "],["dispZ",this.uniforms.uDispersion.value,"z","\n        Name(disp.z)\n        Slider(-1, 1, step: any)\n      "],["dispW",this.uniforms.uDispersion.value,"w","\n        Name(disp.cycle)\n        Slider(1, 20, step: 1)\n      "],["lowDispX",this.uniforms.uLowDispersion.value,"x","\n        Name(lowDisp.x)\n        Slider(0, 1, step: any)\n      "]]),this.onBeforeCompile=e=>M.b.with(e).defines({USE_UV:""}).uniforms(this.uniforms).varying({vRand:"vec4"}).vertex.top(C.U,S.i,'\n  // sizeMode: 0 for "contain", 1 for "cover"\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale) {\n    align.y = 1.0 - align.y; // Flip y-coordinate\n    if ((outerAspect > innerAspect) != (sizeMode == 1.0)) { // XOR condition for mode\n      float scaleFactor = outerAspect / innerAspect;\n      uv.x = (uv.x - align.x) * scaleFactor + align.x; // Adjust x-coordinate\n    } else {\n      float scaleFactor = innerAspect / outerAspect;\n      uv.y = (uv.y - align.y) * scaleFactor + align.y; // Adjust y-coordinate\n    }\n    uv = (uv - align) / scale + align;\n    return uv;\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, float scale) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(scale));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, vec2(0.5));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect) {\n    return applyUvSize(uv, outerAspect, innerAspect, 1.0);\n  }\n').vertex.top("\n        attribute vec4 aRectUv;\n        attribute vec4 aRand;\n      ").vertex.top("\n        vec2 delta;\n        float scatterRatio;\n\n        vec4 computeDispersion() {\n          if (uDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float duration = lerp(8.0, 1.0, aRand.x * aRand.y * aRand.z);\n          float cycleCount = max(floor(uDispersion.w), 1.0);\n          float time = mod(uDispersionTime + duration * cycleCount * aRand.x, duration * cycleCount) / duration;\n          float cycleVisibility = time <= 1.0 ? 1.0 : easeInOut3(1.0 - inverseLerp(.8 * aRand.w + .1, .8 * aRand.w + .2, uDispersion.x));\n          time = mod(time, 1.0);\n          float size = easeInThenOut(time, 8.0) * lerp(2.0, 1.0, time * time) * cycleVisibility;\n          size = mix(1.0, size, pow(uDispersion.x, 1.0 / 2.0));\n\n          // Apply scale before instanceMatrix (shrinking).\n          vec3 dispersed;\n          dispersed.xy = -delta * lerp(uDispersion.y, uDispersion.z, time);\n          dispersed.z = lerp(1.0, 0.0, time);\n          dispersed *= uDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n\n        float getStartEffect(float time, float duration) {\n          return min(1.0, time / duration);\n        }\n\n        float getEndEffect(float time, float timeMax, float duration) {\n          return max(0.0, time - (timeMax - duration)) / duration;\n        }\n\n        vec4 computeLowDispersion() {\n          if (uLowDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float periodScalarT = inverseLerp(0.1, 0.9, scatterRatio);\n          float period = lerp(2.0, 8.0, aRand.x) * lerp(60.0, 1.0, periodScalarT);\n          float time = mod(uLowDispersionTime + period * aRand.z, period);\n\n          float duration = 1.0;\n          float effectStart = min(1.0, time);\n          float effectEnd = getEndEffect(time, period, duration);\n\n          float size = getStartEffect(time, 0.3) * (1.0 - getEndEffect(time, period, 0.3));\n          size = pow(size, 1.0 / 4.0);\n          size = mix(1.0, size, pow(uLowDispersion.x, 1.0 / 4.0));\n\n          vec3 dispersed;\n\n          dispersed.xy = delta * 0.1;\n          dispersed.z = 0.2;\n          dispersed.xyz *= getEndEffect(time, period, 1.0);\n          dispersed *= uLowDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4(position, 1.0);\n        delta = instanceMatrix[3].xy - uCenter.xy;\n        scatterRatio = clamp(1.1 * length(delta) / (length(uScatteredInfo.xy) / 2.0), 0.0, 1.0);\n\n        vec4 dispersion = computeDispersion();\n        vec4 lowDispersion = computeLowDispersion();\n\n        float scale = clamp01(uMainParams.x * 3.0 - 2.0 * aRand.w);\n        mvPosition.xyz *= dispersion.w * lowDispersion.w * easeInOut3(scale);\n\n        mvPosition = instanceMatrix * mvPosition;\n        mvPosition.xyz += dispersion.xyz + lowDispersion.xyz;\n\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;      \n      ").vertex.replace("uv_vertex","\n        #if defined( USE_UV ) || defined( USE_ANISOTROPY )\n          vUv = vec3( uv, 1 ).xy;\n          vUv = aRectUv.xy + aRectUv.zw * vUv;\n        #endif\n        #ifdef USE_MAP\n          vec2 instanceUv = aRectUv.xy + aRectUv.zw * MAP_UV;\n\n          // vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale\n          float outerAspect = uScatteredInfo.x / uScatteredInfo.y;\n          float innerAspect = uMapInfo.x;\n          float sizeMode = uMapInfo.y;\n          vec2 align = uMapInfo.zw;\n          instanceUv = applyUvSize(instanceUv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n          \n          vMapUv = ( mapTransform * vec3( instanceUv, 1 ) ).xy;\n        #endif\n      ").vertex.mainAfterAll("\n        vRand = aRand;\n      ").fragment.top(C.U,S.i).fragment.replace("color_fragment","\n        vec3 normal = texture2D(uNormalMap, vUv * 4.0).rgb;\n        vec3 light = normalize(vec3(0.5, 2.5, 1.0));\n        float colorAlteration = mix(0.333, 1.0, dot(normal, light));\n        float transition = inverseLerp(0.0, 0.2, uMainParams.y - 0.8 * vRand.w);\n        diffuseColor.rgb = mix(vColor * colorAlteration, diffuseColor.rgb, transition);\n      ")}}class F extends r.Tme{static createPlane(e){let{row:t,col:n}=e,i=t*n,a=new r._12,s=new r.lb7(new Float32Array(4*i),4);a.setAttribute("aRectUv",s);let o=new r.lb7(new Float32Array(4*i),4);a.setAttribute("aRand",o);for(let e=0;e<i;e++)o.setXYZW(e,h.T.random(),h.T.random(),h.T.random(),h.T.random());let l=new T,c=new r.SPe(a,l,i);return c.name="plane",c}get count(){return this.internal.count}onTick(e){this.internal.plane.material.update(e.deltaTime)}getDistribution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w(this,e)}drawDistribution(e){let{position:t,size:n,scatterPadding:i}=e.props,{x:r,y:a}=(0,v.iK)(t),{x:s,y:o}=(0,v.iK)(n);this.internal.lineHelper.rectangle([r,a,s,o]).rectangle([r,a,s+2*i,o+2*i])}distribute(e){let{count:t,plane:n}=this.internal,{aRectUv:i}=n.geometry.attributes;for(let r=0;r<t;r++){let{rect:t,uvRect:a}=e.nodes[r];n.setMatrixAt(r,(0,c.$)({position:t.getCenter(),scale:t.getSize()})),i.setXYZW(r,a.x,a.y,a.width,a.height)}n.material.setScatteredSize(e.root.rect.getSize());let r=e.root.rect;n.material.setScatteredSize(r.getSize()),n.material.uniforms.uCenter.value.copy(r.getCenter())}lerpDistribute(e,t,n){let{count:i,plane:a}=this.internal,{aRectUv:s}=a.geometry.attributes,o=new P.Ae,l=new P.Ae,d=new P.Ae,h=new r.Pa4,u=new r.Pa4;for(let r=0;r<i;r++){let i=e.nodes[r],d=t.nodes[r],f=.3*(1-i.r0*(i.scatterCoeff+.2*d.r0)),p=(0,g.ii)(f,.7+f,n),v=(0,z.xD)(p);o.lerpRectangles(i.rect,d.rect,v),l.lerpRectangles(i.uvRect,d.uvRect,v),a.setMatrixAt(r,(0,c.$)({position:o.getCenter(h),scale:o.getSize(u),rotationY:(d.r0<.5?0:1)*v*Math.PI*2,rotationZ:.3*Math.sin(p*Math.PI)*(-1+2*i.r0)})),s.setXYZW(r,l.x,l.y,l.width,l.height)}let f=(0,z.uN)((0,g.ii)(.3,.7,n));d.lerpRectangles(e.root.rect,t.root.rect,f),a.material.setScatteredSize(d.getSize()),a.material.uniforms.uCenter.value.copy(d.getCenter()),a.instanceMatrix.needsUpdate=!0,s.needsUpdate=!0}constructor(e={}){super(),this.transition=0;let t={...F.defaultProps,...e},{col:n,row:i}=t,r=F.createPlane(t);(0,d.bB)(r,this);let a=new y.O;(0,d.bB)(a,this);let s=new A;(0,d.bB)(s,this),this.internal={count:i*n,plane:r,lineHelper:a,lightSetup:s},this.props=t,this.distribute(this.getDistribution())}}F.displayName="ScatteredPlane",F.defaultProps={row:20,col:30,imageAspect:1,imageResizeMode:"cover"},F.transition_meta="Range(0, 1)";class D extends r.Kj0{constructor(){super(new r.cJO(40,1),new r.vBJ({color:"#aeb4e9",side:r._Li})),this.onBeforeRender=(e,t,n)=>{this.position.copy(n.position)}}}let j={darkBlue:"#002c52",orange:"#ff5c35",white:"#ffffff",lightGrey:"#c9cfd3"};function E(){let e=(0,s.jE)();return e.three.pipeline.basicPasses.outline.enabled=!1,(0,f._v)("ScatteredDemo",async function*(t,n){(0,d.bB)(new D,t),(0,d.bB)(new r.Kj0(new o.w,new l.P),t);let i=await n.loader.load("/assets/textures/DebugTexture.png");i.colorSpace=r.KI_;let s=(0,d.bB)(new F,t);s.internal.plane.material.map=i,s.internal.plane.material.mapAspect=i.image.width/i.image.height;let u=s.getDistribution({seed:4789,position:[-2,0],size:[2,3]}),f=s.getDistribution({seed:3249,position:[2,0],size:[2,4]});s.drawDistribution(u),s.drawDistribution(f),t.userData.transition=0,t.userData.transition_meta="Slider(0, 1, step: 0.01)",t.userData.scale=1,t.userData.scale_meta="Slider(-1, 1, pow: 10, step: .1)",t.userData.links=[s.internal.plane.material.userData];let p=Object.values(j);for(let e=0,t=s.count;e<t;e++)s.internal.plane.setColorAt(e,(0,c.E)(h.T.pick(p)));yield n.onTick(()=>{s.lerpDistribute(u,f,t.userData.transition),s.scale.setScalar(t.userData.scale)}),(0,a.v)(e,t),e.sceneSelection.add("Select ScatteredDemo",t)},[]),null}function R(){return(0,f.Ky)(function*(e){e.useOrbitControls({position:[-2,0,8],target:[-2,0,0]})},[]),null}function k(e){let{children:t}=e,n=(0,f.Ky)();return n.loader.setPath(u.v.assetsPath),(0,i.jsx)(s.KU,{three:n,backgroundColor:"#26163c4f",children:t})}function B(){return(0,i.jsxs)("div",{className:"layer thru",children:[(0,i.jsx)(p.Leak,{}),(0,i.jsx)(f.H7,{children:(0,i.jsxs)(k,{children:[(0,i.jsx)("div",{className:"layer thru px-3 py-2 flex flex-col gap-4",children:(0,i.jsx)("h1",{className:"text-4xl",children:"ScatteredPlane"})}),(0,i.jsx)(R,{}),(0,i.jsx)(E,{})]})})]})}},5693:function(e,t,n){"use strict";n.d(t,{H7:function(){return m},Ky:function(){return u},_v:function(){return f}});var i=n(32617),r=n(87200),a=n(37186),s=n(23657),o=n(15721),l=n(9258),c=n(29368),d=n(74707);let h=(0,r.createContext)(null);function u(e,t){let n=(0,r.useContext)(h);return(0,s.sv)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}function f(e,t,n){let i=(0,r.useMemo)(()=>new a.ZAu,[]);return i.name=e,u(async function*(e,n){if(e.scene.add(i),yield()=>{i.clear(),i.removeFromParent()},t){let r=t(i,e,n);if(r&&"function"==typeof r.next)do{let{value:e,done:t}=await r.next();if(t)break;yield e}while(n.mounted)}},n),i}let p={className:"",assetsPath:"/",vertigoControls:!1};function v(e){let{children:t,className:n,assetsPath:a,vertigoControls:d}={...p,...e},u=(0,r.useMemo)(()=>new l.Vu,[]);u.loader.setPath(a);let{ref:f}=(0,s.Nv)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:u})},[]);(0,s.sv)(function*(){if(d){let e=new o.F("object"==typeof d?d:{}).initialize(f.current).start();yield e.destroy,yield(0,c.RC)("three",t=>{e.update(u.camera,u.aspect,t.deltaTime)})}},[d]);let v={position:"absolute",inset:0};return(0,i.jsx)("div",{ref:f,className:n,style:v,children:(0,i.jsxs)(h.Provider,{value:u,children:[(0,i.jsx)("div",{style:v}),(0,i.jsx)("div",{style:v,className:"thru",children:u.initialized&&t})]})})}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.O)()&&(0,i.jsx)(v,{...t[0]})}},11648:function(e,t,n){"use strict";function i(e,t){for(let[n,i]of Object.entries(t))e.addEventListener(n,i);return{destroy(){for(let[n,i]of Object.entries(t))e.removeEventListener(n,i)}}}n.d(t,{f:function(){return i}})},44044:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var i=n(88780),r=n(71964),a=n(32219);let s=new i.yGw,o=new i.Pa4,l=new i._fP,c=new i._fP,d={fov:"45deg",perspective:1,zoom:1,focus:[0,0,0],size:[4,4],before:1e3,after:1e3,rotation:[0,0,0,"YXZ"],frame:"contain",allowOrthographic:!0,fovEpsilon:"1.5deg",nearMin:.1};class h{static get default(){return u}set(e){let{perspective:t,fov:n,zoom:i,focus:r,size:s,before:o,after:l,rotation:c,frame:d,allowOrthographic:h,fovEpsilon:u,nearMin:f}=e;return void 0!==t&&(this.perspective=t),void 0!==n&&(this.fov=(0,a.FE)(n)),void 0!==i&&(this.zoom=i),void 0!==r&&(0,a.Q7)(r,this.focus),void 0!==s&&(0,a.iK)(s,this.size),void 0!==o&&(this.before=o),void 0!==l&&(this.after=l),void 0!==c&&(0,a.Gg)(c,{defaultOrder:"YXZ"},this.rotation),void 0!==d&&(this.frame="string"==typeof d?"cover"===d?0:1:d),void 0!==h&&(this.allowOrthographic=h),void 0!==u&&(this.fovEpsilon=(0,a.FE)(u)),void 0!==f&&(this.nearMin=f),this}copy(e){return this.perspective=e.perspective,this.fov=e.fov,this.zoom=e.zoom,this.focus.copy(e.focus),this.size.copy(e.size),this.before=e.before,this.after=e.after,this.rotation.copy(e.rotation),this.frame=e.frame,this.allowOrthographic=e.allowOrthographic,this.fovEpsilon=e.fovEpsilon,this.nearMin=e.nearMin,this}clone(){return new h().copy(this)}lerpVertigos(e,t,n){this.perspective=e.perspective+(t.perspective-e.perspective)*n,this.fov=e.fov+(t.fov-e.fov)*n;let i=Math.log(e.zoom)/Math.log(.001),r=i+(Math.log(t.zoom)/Math.log(.001)-i)*n;return this.zoom=.001**r,this.focus.lerpVectors(e.focus,t.focus,n),this.size.lerpVectors(e.size,t.size,n),this.before=e.before+(t.before-e.before)*n,this.after=e.after+(t.after-e.after)*n,l.setFromEuler(e.rotation),c.setFromEuler(t.rotation),this.rotation.setFromQuaternion(l.slerp(c,n)),this.frame=e.frame+(t.frame-e.frame)*n,this.allowOrthographic=n<.5?e.allowOrthographic:t.allowOrthographic,this.fovEpsilon=e.fovEpsilon+(t.fovEpsilon-e.fovEpsilon)*n,this.nearMin=e.nearMin+(t.nearMin-e.nearMin)*n,this}lerp(e,t){return this.lerpVertigos(this,e,t)}apply(e,t){let n=this.size.x/this.size.y/t,i=1+(n>1?this.frame:1-this.frame)*(n-1),r=this.size.y*i/this.zoom,a=this.fovEpsilon,l=this.perspective*this.fov;!this.allowOrthographic&&l<a&&(l=a);let c=r/2/Math.tan(l/2),d=l>=a,h=d?c:this.before+this.nearMin;if(s.makeRotationFromEuler(this.rotation),o.set(s.elements[8],s.elements[9],s.elements[10]).multiplyScalar(h).add(this.focus),e.position.copy(o),e.rotation.copy(this.rotation),e.updateMatrix(),e.updateMatrixWorld(!0),e.isPerspectiveCamera=d,e.isOrthographicCamera=!d,d){let n=Math.max(this.nearMin/this.zoom,c-this.before),i=c+this.after,a=r*n/c/2,s=a*t;e.fov=180*l/Math.PI,e.projectionMatrix.makePerspective(-s,s,a,-a,n,i)}else{let n=this.nearMin/this.zoom,i=n+this.before+this.after,a=r/2,s=a*t;e.fov=0,e.projectionMatrix.makeOrthographic(-s,s,a,-a,n,i)}return e.projectionMatrixInverse.copy(e.projectionMatrix).invert(),this.computedNdcScalar.set(i*t,i),this.computedSize.set(r*t,r),this}toDeclaration(){let e=[(0,a.ux)(this.rotation.x,"deg"),(0,a.ux)(this.rotation.y,"deg"),(0,a.ux)(this.rotation.z,"deg"),this.rotation.order];return{perspective:this.perspective,fov:(0,a.ux)(this.fov,"deg"),zoom:this.zoom,focus:this.focus.toArray(),size:this.size.toArray(),before:this.before,after:this.after,rotation:e,frame:this.frame,allowOrthographic:this.allowOrthographic,fovEpsilon:(0,a.ux)(this.fovEpsilon,"deg"),nearMin:this.nearMin}}constructor(e){this.focus=new i.Pa4,this.size=new i.FM8,this.rotation=new i.USm,this.computedNdcScalar=new i.FM8,this.computedSize=new i.FM8,this.set({...d,...e})}}let u=(0,r._A)(new h)},15721:function(e,t,n){"use strict";n.d(t,{F:function(){return m}});var i,r=n(88780),a=n(11648),s=n(81540),o=n(54157),l=n(35357),c=n(2132),d=n(32219),h=n(44044);let u=new r._fP,f=new r.Pa4,p=new r.Pa4;function v(e){u.setFromEuler(e),f.set(1,0,0).applyQuaternion(u),p.set(0,1,0).applyQuaternion(u)}class m extends l.N{pan(e,t){v(this.vertigo.rotation);let n=1/this.vertigo.zoom;this.vertigo.focus.addScaledVector(f,e*n).addScaledVector(p,t*n)}rotate(e,t){this.vertigo.rotation.x+=e,this.vertigo.rotation.y+=t}zoomAt(e,t){let n=this.vertigo.size.x/this.vertigo.zoom,i=this.vertigo.size.y/this.vertigo.zoom,r=this.vertigo.size.x/e,a=this.vertigo.size.y/e;v(this.vertigo.rotation);let{x:s,y:o}=t;this.vertigo.focus.addScaledVector(f,-((r-n)*s)).addScaledVector(p,-((a-i)*o)),this.vertigo.zoom=e}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return this.element=e,this}*doStart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!==(i=this.element)&&void 0!==i?i:document.body;yield(0,a.f)(e,{contextmenu:e=>{e.preventDefault()}});let t=new r.FM8;yield(0,s.w)(e,{onChange:n=>{let i=e.getBoundingClientRect(),r=(n.localPosition.x-i.x)/i.width*2-1,a=-((n.localPosition.y-i.y)/i.height*2-1);t.set(r/2,a/2).multiply(this.vertigo.computedNdcScalar)},dragButton:-1,onDrag:e=>{switch(e.button){case s.M.Left:this.rotate(-.01*e.delta.y,-.01*e.delta.x);break;case s.M.Right:this.pan(-.025*e.delta.x,.025*e.delta.y)}},wheelPreventDefault:!0,onWheel:e=>{let n=this.vertigo.zoom*(1-.001*e.delta.y);e.event.altKey?this.zoomAt(n,t):this.zoomAt(n,{x:0,y:0})}})}start(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!1===this.started&&(this.started=!0,this.collect(this.doStart(...t))),this}stop(){this.started&&(this.started=!1,this.destroy())}toggle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.started;e?this.start():this.stop()}update(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/60,i=(0,c.M3)(this.dampingDecayFactor,n);this.dampedVertigo.lerp(this.vertigo,i).apply(e,t)}constructor(e={}){super(),this.dampingDecayFactor=1e-4,this.vertigo=new h.a,this.dampedVertigo=new h.a,this.actions={togglePerspective:()=>{let e=this.vertigo.perspective>.5?0:1;o.fw.tween({target:[this.vertigo,"perspective"],to:{perspective:e},duration:1,ease:"inOut3"})},focus:e=>{o.fw.tween({target:this.vertigo.focus,to:(0,d.Q7)(e),duration:1,ease:"inOut3"})},rotate:(e,t,n)=>{let i=new r._fP().setFromEuler(this.vertigo.rotation),a=new r._fP().setFromEuler(new r.USm(e,t,n,"YXZ")),s=new r._fP;o.fw.during({target:[this.vertigo,"rotation"],duration:1}).onUpdate(e=>{let{progress:t}=e;s.slerpQuaternions(i,a,o.fw.ease("inOut3")(t)),this.vertigo.rotation.setFromQuaternion(s)})},positiveXAlign:()=>{this.actions.rotate(0,Math.PI/2,0)},negativeXAlign:()=>{this.actions.rotate(0,-Math.PI/2,0)},positiveYAlign:()=>{this.actions.rotate(-Math.PI/2,0,0)},negativeYAlign:()=>{this.actions.rotate(Math.PI/2,0,0)},positiveZAlign:()=>{this.actions.rotate(0,0,0)},negativeZAlign:()=>{this.actions.rotate(0,Math.PI,0)}},this.started=!1,this.vertigo.set(e),this.dampedVertigo.set(e)}}},9258:function(e,t,n){"use strict";n.d(t,{GR:function(){return a},Vu:function(){return S}});var i,r,a,s,o=n(88780),l=n(52241),c=n(63310),d=n(44792),h=n(79456),u=n(5461),f=n(9573);function p(e){return e.isRenderPass}(i=a||(a={}))[i.Render=0]="Render",i[i.PostProcessing=1e3]="PostProcessing",i[i.GizmoRender=2e3]="GizmoRender",i[i.Outline=3e3]="Outline",i[i.Output=4e3]="Output",i[i.Antialiasing=5e3]="Antialiasing";class v{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let n=e[1],i=t[1];return n.type!==i.type?n.type-i.type:n.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,n]of this.passMap)n.type===e&&(yield[t,n])}addPass(e){let{type:t=a.Render,insertOrder:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n){var i,r,s;n=(null!==(s=null===(r=[...this.getPassesByType(t)].at(-1))||void 0===r?void 0:null===(i=r[1])||void 0===i?void 0:i.insertOrder)&&void 0!==s?s:-1)+1}return this.passMap.set(e,{type:t,insertOrder:n}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,n){this.composer.setSize(e,t),this.composer.setPixelRatio(n),this.basicPasses.fxaa.uniforms.resolution.value.set(1/n/e,1/n/t)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let n of this.composer.passes)p(n)&&n.scene===t&&(n.scene=e)}render(e){for(let t of this.composer.passes)p(t)&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:n}=this;for(let[i,r]of t.passes.entries()){let t=n.get(r);t?e.push("- ".concat(i,": ").concat(a[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(r.constructor.name)):e.push("- ".concat(i,": NO METADATA for ").concat(r.constructor.name))}return e.join("\n")}constructor(e,t,n,i){let r=new l.x(e),s=new Map,p=new h.C(t,i);p.clearAlpha=0,s.set(p,{type:a.Render,insertOrder:0}),r.addPass(p);let v=new h.C(n,i);s.set(v,{type:a.GizmoRender,insertOrder:0}),v.clear=!1,v.clearDepth=!1,r.addPass(v);let m=new c.f(new o.FM8,t,i);s.set(m,{type:a.GizmoRender,insertOrder:0}),r.addPass(m);let g=new d.v;s.set(g,{type:a.Output,insertOrder:0}),r.addPass(g);let x=new u.T(f.C);s.set(x,{type:a.Antialiasing,insertOrder:0}),r.addPass(x),this.composer=r,this.basicPasses={mainRender:p,gizmoRender:v,outline:m,output:g,fxaa:x},this.passMap=s}}var m=n(11561),g=n(30699),x=n(35357),w=n(29368),y=n(32219),b=n(85369);(r=s||(s={}))[r.None=0]="None",r[r.LeftDown=1]="LeftDown",r[r.LeftDrag=2]="LeftDrag";class M{get ray(){return this.raycaster.ray}update(e,t,n){let{x:i,y:r}=t,a=(i-n.x)/n.width*2-1,s=-((r-n.y)/n.height*2)+1;this.camera=e,this.clientPosition.set(i,r),this.screenPosition.set(a,s),this.raycaster.setFromCamera(this.screenPosition,e)}constructor(){this.status={button:0},this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.clientPosition=new o.FM8,this.screenPosition=new o.FM8,this.raycaster=new o.iMs}}class S{static current(){return this.instances[this.instances.length-1]}get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:n=null,target:i=null,element:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==(t=(e=this.internal).orbitControls)&&void 0!==t||(e.orbitControls=new m.z(this.camera,this.renderer.domElement)),"string"==typeof r&&(r=document.querySelector(r)),r&&r!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new m.z(this.camera,r)),n&&(0,y.Q7)(n,this.internal.orbitControls.object.position),i&&(0,y.Q7)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:t}=this;e.appendChild(this.renderer.domElement);let n=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},i=new ResizeObserver(n);i.observe(e),t(()=>{i.disconnect()}),n();let r=e=>{let t=this.renderer.domElement.getBoundingClientRect();this.pointer.update(this.camera,{x:e.clientX,y:e.clientY},t)},a=e=>{this.pointer.status.button|=s.LeftDown},o=e=>{this.pointer.status.button&=~s.LeftDown};return e.addEventListener("pointermove",r),e.addEventListener("pointerdown",a),e.addEventListener("pointerup",o),t(()=>{e.removeEventListener("pointermove",r),e.removeEventListener("pointerdown",a),e.removeEventListener("pointerup",o)}),t((0,g.s)(this.ticker.requestActivation),this.ticker.onTick(this.update)),t(()=>{var e;null===(e=this.internal.orbitControls)||void 0===e||e.dispose()}),this}setSize(e){let{width:t,height:n,pixelRatio:i}={...this,...e};if(t===this.width&&n===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=i;let{renderer:r,perspectiveCamera:a,pipeline:s}=this;r.setSize(t,n),r.setPixelRatio(i),s.setSize(t,n,i);let o=t/n;return a.aspect=o,a.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,n=[this.scene];for(;n.length>0;){let e=n.shift();t(e)&&(yield e),n.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new o.CP7,this.perspectiveCamera=new o.cPb,this.orhtographicCamera=new o.cPb,this.scene=new o.xsS,this.gizmoScene=new o.xsS,this.pointer=new M,this.ticker=w.vB.get("three").set({minActiveDuration:8}),this.pipeline=new v(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new o.FM8,fullSize:new o.FM8,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=b.R.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed){console.warn("ThreeWebglContext is already destroyed.");return}Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,x.o)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.update=e=>{var t;null===(t=this.internal.orbitControls)||void 0===t||t.update(e.deltaTime),this.pipeline.render(e)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),S.instances.push(this)}}S.instances=[]},60236:function(e,t,n){"use strict";n.d(t,{w:function(){return c}});var i=n(88780),r=n(27834);let a={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white"},s=new i.Ilk;function o(e){let{axis:t,length:n,radius:o,radialSegments:l,coneRatio:c,radiusScale:d,vertexColor:h,baseCap:u,color:f}={...a,...e},p=o*d,v=n*c,m=new i.b_z(3*p,v,l),g=new i.fHI(p,p,1,l,1,!0),x=n-v,w=n-.5*v;m.rotateZ(-Math.PI/2).translate(w,0,0),g.scale(1,x,1).rotateZ(-Math.PI/2).translate(.5*x,0,0);let y="none"===u?new i.u9r:"flat"===u?new i.zf8(p,l).rotateY(-Math.PI/2):new i.xo$(p,l,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),b=(0,r.n4)([m,g,y]);switch(t){case"y":b.rotateZ(Math.PI/2);break;case"z":b.rotateY(-Math.PI/2)}if(h){let e=b.attributes.position.count,t=new i.TlE(new Float32Array(3*e),3);b.setAttribute("color",t),s.set(f);for(let n=0;n<e;n++)t.setXYZ(n,s.r,s.g,s.b)}return b}let l={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class c extends i.u9r{static get defaultOptions(){return{...l}}constructor(e){super();let{xColor:t,yColor:n,zColor:i,...a}={...l,...e},s=o({...a,axis:"x",color:t}),c=o({...a,axis:"y",color:n}),d=o({...a,axis:"z",color:i}),h=(0,r.n4)([s,c,d]);this.copy(h),h.dispose()}}},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(88780),r=n(32219);let a={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class s extends i.ejS{set(e){let{color:t,opacity:n,size:s,step:o,frame:l}={...a,...e},c=(0,r.iK)(s),d=(0,r.iK)(null!=o?o:c),h=[],u=(e,t)=>h.push(new i.Pa4(e,t,0));l&&(u(-c.x/2,+c.y/2),u(+c.x/2,+c.y/2),u(+c.x/2,+c.y/2),u(+c.x/2,-c.y/2),u(+c.x/2,-c.y/2),u(-c.x/2,-c.y/2),u(-c.x/2,-c.y/2),u(-c.x/2,+c.y/2));let f=Math.ceil(-c.x/2/d.x)*d.x;f===-c.x/2&&(f+=d.x);do u(f,-c.y/2),u(f,+c.y/2),f+=d.x;while(f<c.x/2);let p=Math.ceil(-c.y/2/d.y)*d.y;p===-c.y/2&&(p+=d.y);do u(-c.x/2,p),u(+c.x/2,p),p+=d.y;while(p<c.y/2);return this.geometry.setFromPoints(h),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:a)}}},97219:function(e,t,n){"use strict";n.d(t,{O:function(){return d}});var i=n(88780),r=n(23420),a=n(32219);let s=new i.FM8,o=new i.Pa4,l=new i.yGw;function c(e,t,n){if(null==n?void 0:n.transform)for(let e of((0,a.Xe)(n.transform,l),t))e.applyMatrix4(l);(null==n?void 0:n.color)&&e.colors.set(e.points.length,new i.Ilk(n.color)),e.points.push(...t)}class d extends i.ejS{showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new i.nls({color:this.material.color,transparent:!0,depthFunc:i.w$m,opacity:e}),n=new i.ejS(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setFromPoints([new i.Pa4,new i.Pa4]),this}draw(){if(this.geometry.setFromPoints(this.points),this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let t=new i.Ilk(null!==(e=this.colors.get(0))&&void 0!==e?e:"white"),n=this.points.length,r=function(e){let t=e.attributes.color;if(t)return t;{let t=new i.TlE(new Float32Array(3*e.attributes.position.count),3);return e.setAttribute("color",t),t}}(this.geometry);for(let e=0;e<n;e++){let n=this.colors.get(e);n&&t.copy(n),r.setXYZ(e,t.r,t.g,t.b)}}return this}line(e,t,n){return c(this,[(0,a.Q7)(e),(0,a.Q7)(t)],n),this}polygon(e,t){let n=e.map(e=>(0,a.Q7)(e)),i=[];for(let e=0;e<n.length;e++)i.push(n[e],n[(e+1)%n.length]);return c(this,i,t),this}polyline(e,t){let n=e.map(e=>(0,a.Q7)(e)),i=[];for(let e=0;e<n.length-1;e++)i.push(n[e],n[e+1]);return c(this,i,t),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:r,y:o,radius:l,segments:h,...u}={...d.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,i]=t,{x:r,y:o}=(0,a.iK)(e,s);return{x:r,y:o,radius:n,...i}}return t[0]})()},f=new i.Pa4(1,0,0),p=new i.Pa4(0,1,0),v=[];for(let e=0;e<h;e++){let t=e/h*Math.PI*2,n=(e+1)/h*Math.PI*2,a=Math.cos(t)*l,s=Math.sin(t)*l,c=Math.cos(n)*l,d=Math.sin(n)*l,u=new i.Pa4(r,o,0).addScaledVector(f,a).addScaledVector(p,s),m=new i.Pa4(r,o,0).addScaledVector(f,c).addScaledVector(p,d);v.push(u,m)}return c(this,v,u),this}rectangle(e,t){let{centerX:n,centerY:a,width:s,height:o}=r.Ae.from(e),l=s/2,d=o/2,h=new i.Pa4(n-l,a-d,0),u=new i.Pa4(n+l,a-d,0),f=new i.Pa4(n+l,a+d,0),p=new i.Pa4(n-l,a+d,0);return c(this,[h,u,u,f,f,p,p,h],t),this}box(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=0,r=0,s=1,l=1,c=1,{center:d,size:h,box3:u}=e;if(void 0!==d&&({x:t,y:n,z:r}=(0,a.Q7)(d,o)),void 0!==h&&({x:s,y:l,z:c}=(0,a.Q7)(h,o)),void 0!==u){let{min:i,max:a}=u,{x:o,y:d,z:h}=i,{x:f,y:p,z:v}=a;e.asIntBox3&&(f+=1,p+=1,v+=1),t=(o+f)/2,n=(d+p)/2,r=(h+v)/2,s=f-o,l=p-d,c=v-h}let f=s/2,p=l/2,v=c/2,m=new i.Pa4(t-f,n-p,r-v),g=new i.Pa4(t+f,n-p,r-v),x=new i.Pa4(t+f,n+p,r-v),w=new i.Pa4(t-f,n+p,r-v),y=new i.Pa4(t-f,n-p,r+v),b=new i.Pa4(t+f,n-p,r+v),M=new i.Pa4(t+f,n+p,r+v),S=new i.Pa4(t-f,n+p,r+v);return this.points.push(m,g,g,x,x,w,w,m),this.points.push(y,b,b,M,M,S,S,y),this.points.push(m,y,g,b,x,M,w,S),this}plus(e,t,n){let r=t/2,{x:o,y:l}=(0,a.iK)(e,s),d=new i.Pa4(o-r,l,0);return c(this,[d,new i.Pa4(o+r,l,0),new i.Pa4(o,l-r,0),new i.Pa4(o,l+r,0)],n),this}cross(e,t,n){let r=t/2,{x:o,y:l}=(0,a.iK)(e,s),d=new i.Pa4(o-r,l-r,0);return c(this,[d,new i.Pa4(o+r,l+r,0),new i.Pa4(o-r,l+r,0),new i.Pa4(o+r,l-r,0)],n),this}constructor(...e){super(...e),this.points=[],this.colors=new Map}}d.circleDefaultOptions={x:0,y:0,radius:.5,segments:96}},42544:function(e,t,n){"use strict";n.d(t,{m:function(){return p}});var i,r,a=n(88780),s=n(23247),o=n(85705),l=n(47090);function c(){return[...new Set(["",..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",..."\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff",..."0123456789",..." .,!?\xbf:;-+*/=%&|()[]{}<>$'\""])].join("")}class d{constructor(){let e=c(),t=new a.FM8(16,24),n=t.x/t.y,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.FM8;return n.x=Math.ceil(Math.sqrt(e/t)),n.y=Math.ceil(e/n.x),n}(e.length,n),r=t.clone().multiplyScalar(3),s=(0,l.h3)(r.x*i.x),o=(0,l.h3)(r.y*i.y),d=s/(r.x*i.x),h=o/(r.y*i.y),u=document.createElement("canvas");u.width=s,u.height=o;let f=u.getContext("2d");f.font="".concat(.8*r.y,"px monospace"),f.textBaseline="top",f.fillStyle="black",f.fillRect(0,0,s,o),f.fillStyle="white",f.transform(d,0,0,h,0,0);for(let t=0;t<e.length;t++){let n=Math.floor(t/i.x),a=(t-n*i.x+.12)*r.x,s=r.y*(n+.19999999999999996);f.fillText(e[t],a,s)}this.canvas=u,this.texture=new a.ROQ(u),this.symbols=e,this.charGrid=i}}d.getDefaultSymbols=c;class h{get textCount(){return this.metadata.textCount}get lineCount(){return this.metadata.lineCount}get lineLength(){return this.metadata.lineLength}get strideHeaderByteSize(){return this.metadata.strideHeaderByteSize}get strideByteSize(){return this.metadata.strideByteSize}get textureSize(){return new a.FM8(this.metadata.textureWidth,this.metadata.textureHeight)}encode(){let e=JSON.stringify(this.metadata),t=new TextEncoder().encode(e),n=t.length,i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,n,!0);let r=new Uint8Array(4+n+this.array.length);return r.set(i,0),r.set(t,4),r.set(this.array,4+n),r}static decode(e){let t=new DataView(e.buffer).getUint32(0,!0),n=e.slice(4,4+t),i=JSON.parse(new TextDecoder().decode(n)),r=new h(i.symbols,i.textCount,i.lineCount,i.lineLength),a=e.slice(4+t);return r.array.set(a),r}info(){return"data: ".concat(this.array.length," bytes, ").concat(this.textureSize.x,"x").concat(this.textureSize.y)}getTextAt(e){let{array:t}=this,{symbols:n,lineLength:i,strideByteSize:r,strideHeaderByteSize:a}=this.metadata,s=e*r,o=t[s+0],l=t[s+16],c=e=>e.toString(16).padStart(2,"0"),d="#".concat(c(t[s+4])).concat(c(t[s+4+1])).concat(c(t[s+4+2])),h=t[s+4+3],u="#".concat(c(t[s+8])).concat(c(t[s+8+1])).concat(c(t[s+8+2])),f=t[s+8+3],p=[];for(let e=0;e<o;e++){let r=s+a+e*i,o=[];for(let e=0;e<l;e++){let i=n[t[r+e]];o.push(i)}p.push(o.join(""))}return{text:p.join("\n"),textColor:d,textOpacity:h,backgroundColor:u,backgroundOpacity:f,currentLineCount:o,currentLineLength:l}}setSizeAt(e,t){let{array:n}=this,{strideByteSize:i}=this.metadata;return new DataView(n.buffer).setFloat32(e*i+12,t),this}setColorAt(e,t){let{color:n,textColor:i=n,textOpacity:r,backgroundColor:a=i,backgroundOpacity:s}=t,{array:c}=this,{strideByteSize:d}=this.metadata;{let t=e*d+4;if(void 0!==i){let{r:e,g:n,b:r}=(0,o.E)(i);c[t+0]=255*e,c[t+1]=255*n,c[t+2]=255*r}void 0!==r&&(c[t+3]=(0,l.UM)(r))}{let t=e*d+8;if(void 0!==a){let{r:e,g:n,b:i}=(0,o.E)(a);c[t+0]=255*e,c[t+1]=255*n,c[t+2]=255*i}void 0!==s&&(c[t+3]=(0,l.UM)(s))}return this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{trim:i=!1,size:r=1,...a}=n;this.setColorAt(e,a),this.setSizeAt(e,r);let{array:s}=this,{symbols:o,lineCount:l,lineLength:c,strideByteSize:d,strideHeaderByteSize:h}=this.metadata,u=(i?t.trim():t).split("\n");u.length>l&&(console.warn("TextHelper: Text has more lines than ".concat(l,", truncating.")),u=u.slice(0,l)),u=u.map(e=>(i&&(e=e.trim()),e.length>c)?(console.warn("TextHelper: Line length is greater than ".concat(c," characters, clamping.")),e.slice(0,c)):e),s[e*d+0]=u.length;let f=e*d,p=u.length;for(let e=0;e<l;e++){let t=0;e<p&&(s[f+16+4*e]=u[e].length,t=u[e].length);let n=f+h+e*c;for(let i=0;i<c;i++){let r=n+i;if(e>=p||i>=t)s[r]=0;else{let t=o.indexOf(u[e].charAt(i));s[r]=-1===t?0:t}}}}constructor(e,t,n,i,{defaultColor:r="#ff00ff",defaultTextOpacity:a=1,defaultBackgroundOpacity:s=0}={}){let c=16+4*n,d=c+4*Math.ceil(n*i/4),h=Math.ceil((c+t*d)/4),u=(0,l.h3)(Math.sqrt(h)),f=Math.ceil(h/u);this.metadata={symbols:e,textCount:t,lineCount:n,lineLength:i,strideHeaderByteSize:c,strideByteSize:d,textureWidth:u,textureHeight:f};let p=new Uint8Array(u*f*4),{r:v,g:m,b:g}=(0,o.E)(r);for(let e=0;e<t;e++){let t=e*d;p[(t+=4)+0]=255*v,p[t+1]=255*m,p[t+2]=255*g,p[t+3]=255*a,p[(t+=4)+0]=255*v,p[t+1]=255*m,p[t+2]=255*g,p[t+3]=255*s}this.array=p}}(i=r||(r={}))[i.Normal=0]="Normal",i[i.Billboard=1]="Billboard";let u={textCount:1e3,lineLength:24,lineCount:2,charSize:new a.FM8(.2,.3),textSize:1,orientation:1},f=0;class p extends a.SPe{setData(e){return this.data=e,this.dataTexture.image.data=e.array,this.dataTexture.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.data.setTextAt(e,t,n),this.dataTexture.needsUpdate=!0,this.setMatrixAt(e,(0,o.$)(n)),this.instanceMatrix.needsUpdate=!0,this}setColorAt(e,t){this.data.setColorAt(e,{color:t}),this.dataTexture.needsUpdate=!0}setTextColorAt(e,t){return this.data.setColorAt(e,t),this.dataTexture.needsUpdate=!0,this}getDataStringView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(e,t,n,i,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,o=Array.from({length:t.length/4},(e,n)=>{let i=4*n,r=t[i+0];return[r,t[i+1],t[i+2],t[i+3]]}).slice(a*n/4,s*n/4),l=[];l.push("\nData texture array (".concat(t.length," bytes):")),l.push("\ndataStride: ".concat(n," (").concat(n/4," x 4 bytes)"));let c=4+i;for(let t=0;t<o.length;t++){let a=t%(n/4);0===a&&(l.push("\npack #".concat(t/(n/4))),l.push("info:")),4===a&&l.push("lines (".concat(i,"):")),a===c&&l.push("chars (".concat(r,"):"));let[s,d,h,u]=o[t],f="".concat(t.toString().padEnd(3)," - ").concat((4*t).toString().padEnd(4),":   ").concat(s.toString().padStart(3),", ").concat(d.toString().padStart(3),", ").concat(h.toString().padStart(3),", ").concat(u.toString().padStart(3));a>=c&&(f+="     ".concat(e.symbols[s]).concat(e.symbols[d]).concat(e.symbols[h]).concat(e.symbols[u])),l.push("  "+f)}return l.join("\n")}(this.atlas,this.data.array,this.data.strideByteSize,this.options.lineCount,this.options.lineLength,e,t)}constructor(e){let t=new d,n={...u,...e},i=new a.FM8(n.textSize*n.lineLength*n.charSize.x,n.textSize*n.lineCount*n.charSize.y),r=new a._12(i.width,i.height),o=new h(t.symbols,n.textCount,n.lineCount,n.lineLength),l=new a.IEO(o.array,o.textureSize.width,o.textureSize.height,a.wk1,a.ywz);l.needsUpdate=!0;let c=new a.vBJ({map:t.texture,transparent:!0,alphaTest:.5,side:a.ehD});c.name="TextHelperMaterial",c.onBeforeCompile=e=>s.b.with(e).uniforms({uOrientation:{value:n.orientation},uPlaneSize:{value:i},uCharSize:{value:n.charSize},uLineLength:{value:n.lineLength},uLineCount:{value:n.lineCount},uAtlasCharGrid:{value:t.charGrid},uDataStrideHeader:{value:o.strideHeaderByteSize},uDataStride:{value:o.strideByteSize/4},uDataTexture:{value:l},uDataTextureSize:{value:o.textureSize},uBoxBorderWidth:{value:0}}).varying({vInstanceId:"float",vTextColor:"vec4",vBackgroundColor:"vec4",vCurrentLineCount:"float"}).top("\n        vec4 getData4(int instanceId, int offset) {\n          int width = int(uDataTextureSize.x);\n          int index = instanceId * int(uDataStride) + offset;\n          int dataY = index / width;\n          int dataX = index - dataY * width;\n          return texelFetch(uDataTexture, ivec2(dataX, dataY), 0);\n        }\n        vec4 getData4(float instanceId, int offset) {\n          return getData4(int(instanceId), offset);\n        }\n          \n        vec2 getCharOffset(float instanceId, float charIndex) {\n          int p = int(uDataStrideHeader + charIndex);\n          int q = p / 4;\n          int r = p - q * 4; // p % 4;\n          vec4 charIndexes = getData4(instanceId, q);\n          float i = charIndexes[r] * 255.0;\n          float x = mod(i, uAtlasCharGrid.x);\n          float y = floor(i / uAtlasCharGrid.x);\n          return vec2(x, uAtlasCharGrid.y - y - 1.0) / uAtlasCharGrid;\n        }\n        vec2 getCharOffset(float instanceId, float line, float char) {\n          // return vec2(line * 82.0 + char, 0.0) / uAtlasCharGrid;\n          return getCharOffset(instanceId, line * uLineLength + char);\n        }\n      ").vertex.replace("project_vertex","\n        vec4 infoTexel = getData4(gl_InstanceID, 0);\n        vCurrentLineCount = infoTexel.r * 255.0;\n\n        vTextColor = getData4(gl_InstanceID, 1);\n        vBackgroundColor = getData4(gl_InstanceID, 2);\n\n        vec4 sizeBytes = getData4(gl_InstanceID, 3) * 255.0;\n        uint encoded =\n          uint(sizeBytes.x) << 24 |\n          uint(sizeBytes.y) << 16 |\n          uint(sizeBytes.z) << 8  |\n          uint(sizeBytes.w);\n        float size = uintBitsToFloat(encoded);\n\n        vec4 mvPosition = vec4(transformed * size, 1.0);\n\n        mat4 localMatrix = instanceMatrix;\n\n        if (uOrientation == 1.0) {\n          mat3 v = mat3(viewMatrix);\n          v = inverse(v);\n          localMatrix = mat4(v);\n          localMatrix[3] = vec4(instanceMatrix[3].xyz, 1.0);\n        }\n\n        mvPosition = viewMatrix * modelMatrix * localMatrix * mvPosition;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n        vInstanceId = float(gl_InstanceID);\n      ").fragment.top("\n        float sdBox(in vec2 p, in vec2 b) {\n          vec2 d = abs(p) - b;\n          return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n        }\n\n        vec4 getCharColor() {\n          vec2 uv = vMapUv * vec2(uLineLength, uLineCount);\n\n          uv.y += (uLineCount - vCurrentLineCount) * 0.5;\n          float lineIndex = floor((uLineCount - uv.y));\n\n          if (lineIndex < 0.0 || lineIndex >= vCurrentLineCount)\n            discard;\n\n          float currentLineLength = getData4(vInstanceId, 4 + int(lineIndex)).r * 255.0;\n          // vec2 ddx = dFdx(uv);\n          // vec2 ddy = dFdy(uv);\n          uv.x += (uLineLength - currentLineLength) * -0.5;\n          float charIndex = floor(uv.x);\n\n          if (charIndex < 0.0 || charIndex >= currentLineLength)\n            discard;\n\n          uv = fract(uv);\n          // diffuseColor = vec4(uv, 1.0, 1.0);\n          uv /= uAtlasCharGrid;\n\n          uv += getCharOffset(vInstanceId, lineIndex, charIndex);\n          // float lod = log2(max(length(dFdx(vMapUv)), length(dFdy(vMapUv))));\n          vec4 charColor = textureLod(map, uv, 0.0);\n          // Use textureGrad for better quality, when the square texture will be used\n          // vec4 sampledDiffuseColor = textureGrad(map, uv, ddx, ddy);\n          float char = charColor.r;\n          \n          return vec4(\n            mix(vBackgroundColor.rgb, vTextColor.rgb, charColor.r),\n            mix(vBackgroundColor.a, vTextColor.a, charColor.r));\n        }\n\n        vec4 getCharColorWithBorder() {\n          if (uBoxBorderWidth > 0.0) {\n            vec2 p = (vMapUv - 0.5) * uPlaneSize;\n            float d = sdBox(p, uPlaneSize * 0.5) + uBoxBorderWidth;\n            if (d > 0.0) {\n              return vTextColor;\n            }\n          }\n          return getCharColor();\n        }\n      ").fragment.replace("map_fragment","\n        diffuseColor = getCharColorWithBorder();\n      "),super(r,c,n.textCount),this.textHelperId=f++,this.frustumCulled=!1,this.layers,this.options=n,this.atlas=t,this.data=o,this.dataTexture=l,this.derived={planeSize:i}}}p.defaultOptions=u,p.Orientation=r,p.Atlas=d,p.Data=h},85369:function(e,t,n){"use strict";n.d(t,{R:function(){return h}});var i=n(88780),r=n(95092),a=n(91067),s=n(47133);function o(e){let t,n;let i=new Promise((i,r)=>{t=()=>{i(e)},n=e=>{r(e)}});return Object.assign(e,{then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),resolve:t,reject:n}),e}let l=["gltf","glb"],c=["png","jpg","jpeg","hdr","exr"];class d{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class h{static current(){var e;return null!==(e=this.instances[this.instances.length-1])&&void 0!==e?e:new h}static get(e){var t;return null!==(t=this.instances.find(t=>t.name===e))&&void 0!==t?t:new h({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,n)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)})}async loadRgbe(e){let t=o(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=o(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let n=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(n)){let e=this.textureCache.get(n);return null==t||t(e),e}let i=o(this.loaders.texture.load(n,e=>{this.textureCache.set(n,i),null==t||t(e),i.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(n))}));return i}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(c.includes(t))return new Promise((t,n)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=h.nextId++,this.loaders={gltf:new a.E,texture:new i.dpR,rgbeLoader:new s.x,exrLoader:new r.I},this.path="",this._onAfterLoad=new d,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),h.instances.push(this)}}h.nextId=0,h.instances=[]},85705:function(e,t,n){"use strict";n.d(t,{$:function(){return s},E:function(){return l}});var i=n(88780),r=n(32219);let a=new i.yGw;function s(e){return(0,r.Xe)(e,a)}let o=new i.Ilk;function l(e){return o.set(e)}},78780:function(e,t,n){"use strict";n.d(t,{H$:function(){return o},bB:function(){return s},cY:function(){return a}});var i=n(26211),r=n(41737);function a(e,t,n){return t&&((0,i.nK)(t)?t.add(e):(0,r.N)(e,t)),null==n||n(e),e}let s=a;function o(e,t){return function(e,t){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}(t,e)}},85284:function(e,t,n){"use strict";n.d(t,{Nm:function(){return u.Nm},J8:function(){return u.J8},wx:function(){return o},T:function(){return w}}),(s=o||(o={}))[s.Auto=0]="Auto",s[s.Absolute=1]="Absolute",s[s.Relative=2]="Relative",s[s.OppositeRelative=3]="OppositeRelative",s[s.SmallerRelative=4]="SmallerRelative",s[s.LargerRelative=5]="LargerRelative",s[s.Fraction=6]="Fraction";let i={abs:1,rel:2,opp:3,sm:4,lg:5,fr:6,"%":2,part:6,sh:6},r=Object.fromEntries(Object.entries(i).map(e=>{let[t,n]=e;return[n,t]}));class a{static parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a;return t.parse(e),t}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.type;this.value=e,this.type=t}compute(e,t){switch(this.type){case 1:return this.value;case 2:return this.value*e;case 3:return this.value*t;case 4:return this.value*Math.min(e,t);case 5:return this.value*Math.max(e,t);case 0:case 6:return e}}parse(e){return!function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a;if("auto"===e)return n.value=1,n.type=0;if("number"==typeof e)return n.value=e,n.type=1;if("string"!=typeof e)throw console.log("received:",e),Error("Invalid scalar declaration");let r=e.match(/([\d\.]+)([a-z%]+)?$/);if(!r)throw console.log("received:",e),Error("Invalid scalar declaration");let[s,o,l]=r,c=Number.parseFloat(o),d=null!==(t=i[l])&&void 0!==t?t:1;if(Number.isNaN(c))throw Error("Invalid scalar declaration");"%"===l&&(c/=100),n.value=c,n.type=d}(e,this),this}toString(){return"".concat(this.value).concat(r[this.type])}constructor(e=0,t=1){this.value=e,this.type=t}}var s,o,l=n(20821),c=n(23420),d=n(90118),h=n(1154),u=n(46314);let f=new h.Z,p=[];function v(e,t,n,i,r){let a=0,s=0;if(i===u.Nm.Horizontal&&(e.sizeX.type===o.Auto||e.sizeX.type===o.Fraction)&&(n=Math.max(0,n-Math.max(0,r.top-f.top)-Math.max(0,r.bottom-f.bottom))),i===u.Nm.Vertical&&(e.sizeY.type===o.Auto||e.sizeY.type===o.Fraction)&&(t=Math.max(0,t-Math.max(0,r.left-f.left)-Math.max(0,r.right-f.right))),null!==e.aspect){let r=!1;if(e.sizeX.type===o.Auto)r=e.sizeY.type!==o.Auto||i===u.Nm.Horizontal;else if(e.sizeY.type===o.Auto)r=!1;else throw Error('When aspect ratio is defined, at least one of the sizeX or sizeY must be "auto"');r?s=(a=e.sizeX.compute(t,n))/e.aspect:a=(s=e.sizeY.compute(n,t))*e.aspect}else a=e.sizeX.compute(t,n),s=e.sizeY.compute(n,t);e.rect.width=e.extraSizeX.compute(a,s),e.rect.height=e.extraSizeY.compute(s,a)}let m=new c.Ae;function g(e,t,n){if(Array.isArray(e)){let[i,r]=e;return t.parse(i),n.parse(r),[t,n]}return"object"==typeof e?(t.parse(e.x),n.parse(e.y)):(t.parse(e),n.parse(e)),[t,n]}function x(e){if(!1===Array.isArray(e))return[e,e,e,e];if(1===e.length)return[e[0],e[0],e[0],e[0]];if(2===e.length)return[e[0],e[1],e[0],e[1]];if(4===e.length)return e;throw Error("Invalid number of arguments")}class w{set(e){if(void 0!==e.direction&&(this.direction=(0,u.yW)(e.direction)),void 0!==e.positioning&&(this.positioning=(0,u.wb)(e.positioning)),void 0!==e.offset&&g(e.offset,this.offsetX,this.offsetY),void 0!==e.offsetX&&this.offsetX.parse(e.offsetX),void 0!==e.offsetY&&this.offsetY.parse(e.offsetY),void 0!==e.size&&g(e.size,this.sizeX,this.sizeY),void 0!==e.sizeX&&this.sizeX.parse(e.sizeX),void 0!==e.sizeY&&this.sizeY.parse(e.sizeY),void 0!==e.aspect&&(this.aspect=e.aspect),void 0!==e.alignChildren){let{x:t,y:n}=(0,l.iK)(e.alignChildren);this.alignChildrenX=t,this.alignChildrenY=n}if(void 0!==e.alignChildrenX&&(this.alignChildrenX=e.alignChildrenX),void 0!==e.alignChildrenY&&(this.alignChildrenY=e.alignChildrenY),void 0!==e.alignSelf){let{x:t,y:n}=(0,l.iK)(e.alignSelf);this.alignSelfX=t,this.alignSelfY=n}if(void 0!==e.alignSelfX&&(this.alignSelfX=e.alignSelfX),void 0!==e.alignSelfY&&(this.alignSelfY=e.alignSelfY),void 0!==e.padding){let[t,n,i,r]=x(e.padding);this.padding[0].parse(t),this.padding[1].parse(n),this.padding[2].parse(i),this.padding[3].parse(r)}if(void 0!==e.paddingTop&&this.padding[0].parse(e.paddingTop),void 0!==e.paddingRight&&this.padding[1].parse(e.paddingRight),void 0!==e.paddingBottom&&this.padding[2].parse(e.paddingBottom),void 0!==e.paddingLeft&&this.padding[3].parse(e.paddingLeft),void 0!==e.margin){let[t,n,i,r]=x(e.margin);this.margin[0].parse(t),this.margin[1].parse(n),this.margin[2].parse(i),this.margin[3].parse(r)}if(void 0!==e.marginTop&&this.margin[0].parse(e.marginTop),void 0!==e.marginRight&&this.margin[1].parse(e.marginRight),void 0!==e.marginBottom&&this.margin[2].parse(e.marginBottom),void 0!==e.marginLeft&&this.margin[3].parse(e.marginLeft),void 0!==e.gap&&this.gap.parse(e.gap),void 0!==e.spacing){let[t,n,i,r,a]=function(e){if(!1===Array.isArray(e))return[e,e,e,e,e];let[t,...n]=e;return[t,...x(n)]}(e.spacing);this.gap.parse(t),this.padding[0].parse(n),this.padding[1].parse(i),this.padding[2].parse(r),this.padding[3].parse(a)}return void 0!==e.userData&&Object.assign(this.userData,e.userData),this}setDirection(e){return this.direction=(0,u.yW)(e),this}setPositioning(e){return this.positioning=(0,u.wb)(e),this}setOffset(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&"object"==typeof t[0]){let{x:e,y:n=e}=t[0];this.offsetX.parse(e),this.offsetY.parse(n)}else{let[e,n=e]=t;this.offsetX.parse(e),this.offsetY.parse(n)}return this}setSize(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&"object"==typeof t[0]){let{x:e,y:n=e}=t[0];this.sizeX.parse(e),this.sizeY.parse(n)}else{let[e,n=e]=t;this.sizeX.parse(e),this.sizeY.parse(n)}return this}setOffsetSizeAsAbsoluteRect(e){return this.offsetX.set(e.x,o.Absolute),this.offsetY.set(e.y,o.Absolute),this.sizeX.set(e.width,o.Absolute),this.sizeY.set(e.height,o.Absolute),this}setAlign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.alignChildrenX=e,this.alignChildrenY=t,this}setUserData(e){return Object.assign(this.userData,e),this}setPadding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&Array.isArray(t[0])&&(t=t[0]);let[i,r,a,s]=x(t);return this.padding[0].parse(i),this.padding[1].parse(r),this.padding[2].parse(a),this.padding[3].parse(s),this}setGap(e){return this.gap.parse(e),this}setSpacing(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,...r]=t;return this.setGap(i),r.length>0?this.setPadding.apply(this,r):this.setPadding(i),this}isRoot(){return this.root===this}isLeaf(){return 0===this.children.length}depth(){let e=0,t=this;for(;t;)t=t.parent,e++;return e}*allDescendants(){let{includeSelf:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t of(e&&(yield this),this.children))yield*t.allDescendants({includeSelf:!0})}descendantsCount(){let{includeSelf:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;for(let n of this.allDescendants({includeSelf:e}))t++;return t}*allAncestors(){let{includeSelf:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e?this:this.parent;for(;t;)yield t,t=t.parent}*allLeaves(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t of this.allDescendants({includeSelf:e}))0===t.children.length&&(yield t)}leavesCount(){let{includeSelf:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;for(let n of this.allLeaves({includeSelf:e}))t++;return t}path(){let e=[],t=this;for(;t.parent;)e.push(t.parent.children.indexOf(t)),t=t.parent;return e.reverse()}get(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t[0]&&"object"==typeof t[0]&&Symbol.iterator in t[0]?t[0]:t,r=this;for(let e of i)if(e<0&&(e=r.children.length+e),!(r=r.children[e]))return null;return r}find(e){let{includeSelf:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let n of this.allDescendants({includeSelf:t}))if(e(n))return n;return null}*findAll(e){let{includeSelf:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let n of this.allDescendants({includeSelf:t}))e(n)&&(yield n)}pointCast(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=1===t.length?[t[0].x,t[0].y]:t;for(let e of this.allLeaves())if(e.rect.containsXY(i,r))return e;return null}add(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.removeFromParent(),e.parent=this,e.root=this.root,this.children.push(e);return this}populate(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length&&"object"==typeof t[0]){let{count:e,...n}=t[0];return this.populate(e,n)}let[i,r]=t;for(let e=0;e<i;e++)this.add(new w(r));return this}addTo(e){return e.add(this),this}prepend(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.removeFromParent(),this.children.unshift(e),e.parent=this,e.root=this.root;return this}prependTo(e){return e.prepend(this),this}removeFromParent(){return this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=null,this.root=this),this}remove(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)e.parent===this&&e.removeFromParent();return this}sort(e){return this.children.sort(e),this}tangentSize(){var e,t;return(null!==(t=null===(e=this.parent)||void 0===e?void 0:e.direction)&&void 0!==t?t:this.direction)===u.Nm.Horizontal?this.sizeX:this.sizeY}normalSize(){return this.direction===u.Nm.Horizontal?this.sizeX:this.sizeY}getUvRect(){return this.rect.clone().relativeTo(this.root.rect)}parse(e){let t;if(!e)return;let n=/(\w+)(?:\(([^)]+)\))?/g,i=[];for(;null!==(t=n.exec(e));){let e=t[1],n=t[2]?t[2].split(",").map(e=>e.trim()):[];i.push({token:e,args:n})}for(let{token:t,args:n}of i)switch(t){case"horizontal":this.direction=u.Nm.Horizontal;break;case"vertical":this.direction=u.Nm.Vertical;break;case"size":{let[e,t=e]=n;this.sizeX.parse(e),this.sizeY.parse(t);break}default:throw console.log(e,i),Error('Unknow type: "'.concat(t,'"'))}}computeLayout(){this.isRoot()&&function(e){let{offsetX:t,offsetY:n,sizeX:i,sizeY:r}=e;for(let e of[t,n,i,r])if(e.type!==o.Absolute)throw Error("Root space must have absolute offset and size");e.rect.set(t.value,n.value,i.value,r.value)}(this);let e=[this];for(;e.length>0;){let t=e.shift();!function(e){var t,n,i,r,a,s;let{direction:l,alignChildrenX:c,alignChildrenY:g}=e,[x,w]=(0,d.split)(e.children,e=>e.enabled?0:1);if(w)for(let e of w)for(let t of e.allDescendants({includeSelf:!0}))t.rect.set(0,0,0,0);if(void 0===x)return;!function(e){let{width:t,height:n}=e.rect;for(let t of e.padding)if(t.type===o.Fraction)throw Error("Share padding is not allowed");f.setTRBL(e.padding[0].compute(n,t),e.padding[1].compute(t,n),e.padding[2].compute(n,t),e.padding[3].compute(t,n))}(e);let{x:y,y:b,width:M,height:S}=m.copy(e.rect).applyPadding(f),C=e.gap.compute(M,S),[z,P,A,T,F]=x.reduce((e,t)=>{if(t.positioning===u.J8.Detached)e[0].push(t);else{e[1].push(t);let n=l===u.Nm.Horizontal?t.sizeX:t.sizeY;n.type!==o.Fraction&&n.type!==o.Auto?e[2].push(t):(e[3].push(t),e[4]+=n.value)}return e},[[],[],[],[],0]);!function(e){for(;p.length<e.children.length;)p.push(new h.Z);let{width:t,height:n}=e.rect;for(let i=0;i<e.children.length;i++){let r=e.children[i];p[i].setTRBL(r.margin[0].compute(n,t),r.margin[1].compute(t,n),r.margin[2].compute(n,t),r.margin[3].compute(t,n))}}(e);let D=Array.from({length:P.length+1}),j=0,E=0;if(l===u.Nm.Horizontal){j+=E=Math.max(p[0].left,f.left),D[0]=E;for(let e=1,t=P.length;e<t;e++)j+=E=Math.max(p[e-1].right,p[e].left,C),D[e]=E;P.length>0&&(j+=E=Math.max(p[P.length-1].right,f.right),D[P.length]=E)}else{j+=E=Math.max(p[0].top,f.top),D[0]=E;for(let e=1,t=P.length;e<t;e++)j+=E=Math.max(p[e-1].bottom,p[e].top,C),D[e]=E;P.length>0&&(j+=E=Math.max(p[P.length-1].bottom,f.bottom),D[P.length]=E)}for(let e of z){v(e,M,S,l,p[0]);let i=M-e.rect.width,r=S-e.rect.height;e.rect.x=y+i*(null!==(t=e.alignSelfX)&&void 0!==t?t:c)+e.offsetX.compute(M,S),e.rect.y=b+r*(null!==(n=e.alignSelfY)&&void 0!==n?n:g)+e.offsetY.compute(S,M)}let R=0;if(l===u.Nm.Horizontal)for(let e=0,t=A.length;e<t;e++){let t=A[e];v(t,M,S,l,p[e]),R+=t.rect.width}else for(let e=0,t=A.length;e<t;e++){let t=A[e];v(t,M,S,l,p[e]),R+=t.rect.height}let k=(l===u.Nm.Horizontal?e.rect.width:e.rect.height)-R-j,B=k>0?k/F:0;if(l===u.Nm.Horizontal)for(let e=0,t=T.length;e<t;e++){let t=T[e];v(t,B*t.sizeX.value,S,l,p[e])}else for(let e=0,t=T.length;e<t;e++){let t=T[e];v(t,M,B*t.sizeY.value,l,p[e])}let O=0;if(l===u.Nm.Horizontal)for(let t of(O=e.rect.width-j,P))O-=t.rect.width;else for(let t of(O=e.rect.height-j,P))O-=t.rect.height;if(l===u.Nm.Horizontal){let t=e.rect.x+D[0]+O*c;for(let e=0,n=P.length;e<n;e++){let n=P[e],a=n.offsetX.compute(n.rect.width,n.rect.height),s=n.offsetY.compute(n.rect.height,n.rect.width);if(n.rect.x=a+t,n.sizeY.type===o.Fraction||n.sizeY.type===o.Auto){let t=Math.max(0,p[e].top-f.top),r=Math.max(0,p[e].bottom-f.bottom);n.rect.y=s+m.y+t+(m.height-n.rect.height-t-r)*(null!==(i=n.alignSelfY)&&void 0!==i?i:g)}else n.rect.y=s+m.y+(m.height-n.rect.height)*(null!==(r=n.alignSelfY)&&void 0!==r?r:g);t+=n.rect.width+D[e+1]}}else{let t=e.rect.y+D[0]+O*g;for(let e=0,n=P.length;e<n;e++){let n=P[e],i=n.offsetX.compute(n.rect.width,n.rect.height),r=n.offsetY.compute(n.rect.height,n.rect.width);if(n.sizeX.type===o.Fraction||n.sizeX.type===o.Auto){let t=Math.max(0,p[e].left-f.left),r=Math.max(0,p[e].right-f.right);n.rect.x=i+m.x+t+(m.width-n.rect.width-t-r)*(null!==(a=n.alignSelfX)&&void 0!==a?a:c)}else n.rect.x=i+m.x+(m.width-n.rect.width)*(null!==(s=n.alignSelfX)&&void 0!==s?s:c);n.rect.y=r+t,t+=n.rect.height+D[e+1]}}}(t),e.push(...t.children)}return this}constructor(e){this.enabled=!0,this.root=this,this.parent=null,this.children=[],this.direction=u.Nm.Horizontal,this.positioning=u.J8.Flow,this.aspect=null,this.offsetX=new a(0,o.Absolute),this.offsetY=new a(0,o.Absolute),this.sizeX=new a(1,o.Auto),this.sizeY=new a(1,o.Auto),this.extraSizeX=new a(1,o.Relative),this.extraSizeY=new a(1,o.Relative),this.padding=[new a(0,o.Absolute),new a(0,o.Absolute),new a(0,o.Absolute),new a(0,o.Absolute)],this.margin=[new a(0,o.Absolute),new a(0,o.Absolute),new a(0,o.Absolute),new a(0,o.Absolute)],this.gap=new a(0,o.Absolute),this.alignChildrenX=.5,this.alignChildrenY=.5,this.alignSelfX=null,this.alignSelfY=null,this.rect=new c.Ae,this.userData={},e&&("object"==typeof e?this.set(e):this.direction=e,this.root=this)}}},46314:function(e,t,n){"use strict";var i,r,a,s,o,l;function c(e){if(e in a)return e;if("string"==typeof e)return"flow"===e?0:1;throw Error("Invalid positioning value: ".concat(e))}function d(e){if(e in r)return e;if("string"==typeof e)return"horizontal"===e?2:3;throw Error("Invalid direction value: ".concat(e))}n.d(t,{J8:function(){return a},Nm:function(){return r},wb:function(){return c},yW:function(){return d}}),(s=i||(i={}))[s.Flow=0]="Flow",s[s.Detached=1]="Detached",s[s.Horizontal=2]="Horizontal",s[s.Vertical=3]="Vertical",(o=r||(r={}))[o.Horizontal=2]="Horizontal",o[o.Vertical=3]="Vertical",(l=a||(a={}))[l.Flow=0]="Flow",l[l.Detached=1]="Detached"},72793:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});let i="\n  // #F0F8FF\n  #define aliceblue vec3(240.0 / 255.0, 248.0 / 255.0, 255.0 / 255.0) \n  // #FAEBD7\n  #define antiquewhite vec3(250.0 / 255.0, 235.0 / 255.0, 215.0 / 255.0) \n  // #00FFFF\n  #define aqua vec3(0.0 / 255.0, 255.0 / 255.0, 255.0 / 255.0) \n  // #7FFFD4\n  #define aquamarine vec3(127.0 / 255.0, 255.0 / 255.0, 212.0 / 255.0) \n  // #F0FFFF\n  #define azure vec3(240.0 / 255.0, 255.0 / 255.0, 255.0 / 255.0) \n  // #F5F5DC\n  #define beige vec3(245.0 / 255.0, 245.0 / 255.0, 220.0 / 255.0) \n  // #FFE4C4\n  #define bisque vec3(255.0 / 255.0, 228.0 / 255.0, 196.0 / 255.0) \n  // #000000\n  #define black vec3(0.0 / 255.0, 0.0 / 255.0, 0.0 / 255.0) \n  // #FFEBCD\n  #define blanchedalmond vec3(255.0 / 255.0, 235.0 / 255.0, 205.0 / 255.0) \n  // #0000FF\n  #define blue vec3(0.0 / 255.0, 0.0 / 255.0, 255.0 / 255.0) \n  // #8A2BE2\n  #define blueviolet vec3(138.0 / 255.0, 43.0 / 255.0, 226.0 / 255.0) \n  // #A52A2A\n  #define brown vec3(165.0 / 255.0, 42.0 / 255.0, 42.0 / 255.0) \n  // #DEB887\n  #define burlywood vec3(222.0 / 255.0, 184.0 / 255.0, 135.0 / 255.0) \n  // #5F9EA0\n  #define cadetblue vec3(95.0 / 255.0, 158.0 / 255.0, 160.0 / 255.0) \n  // #7FFF00\n  #define chartreuse vec3(127.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0) \n  // #D2691E\n  #define chocolate vec3(210.0 / 255.0, 105.0 / 255.0, 30.0 / 255.0) \n  // #FF7F50\n  #define coral vec3(255.0 / 255.0, 127.0 / 255.0, 80.0 / 255.0) \n  // #6495ED\n  #define cornflowerblue vec3(100.0 / 255.0, 149.0 / 255.0, 237.0 / 255.0) \n  // #FFF8DC\n  #define cornsilk vec3(255.0 / 255.0, 248.0 / 255.0, 220.0 / 255.0) \n  // #DC143C\n  #define crimson vec3(220.0 / 255.0, 20.0 / 255.0, 60.0 / 255.0) \n  // #00FFFF\n  #define cyan vec3(0.0 / 255.0, 255.0 / 255.0, 255.0 / 255.0) \n  // #00008B\n  #define darkblue vec3(0.0 / 255.0, 0.0 / 255.0, 139.0 / 255.0) \n  // #008B8B\n  #define darkcyan vec3(0.0 / 255.0, 139.0 / 255.0, 139.0 / 255.0) \n  // #B8860B\n  #define darkgoldenrod vec3(184.0 / 255.0, 134.0 / 255.0, 11.0 / 255.0) \n  // #A9A9A9\n  #define darkgray vec3(169.0 / 255.0, 169.0 / 255.0, 169.0 / 255.0) \n  // #A9A9A9\n  #define darkgrey vec3(169.0 / 255.0, 169.0 / 255.0, 169.0 / 255.0) \n  // #006400\n  #define darkgreen vec3(0.0 / 255.0, 100.0 / 255.0, 0.0 / 255.0) \n  // #BDB76B\n  #define darkkhaki vec3(189.0 / 255.0, 183.0 / 255.0, 107.0 / 255.0) \n  // #8B008B\n  #define darkmagenta vec3(139.0 / 255.0, 0.0 / 255.0, 139.0 / 255.0) \n  // #556B2F\n  #define darkolivegreen vec3(85.0 / 255.0, 107.0 / 255.0, 47.0 / 255.0) \n  // #FF8C00\n  #define darkorange vec3(255.0 / 255.0, 140.0 / 255.0, 0.0 / 255.0) \n  // #9932CC\n  #define darkorchid vec3(153.0 / 255.0, 50.0 / 255.0, 204.0 / 255.0) \n  // #8B0000\n  #define darkred vec3(139.0 / 255.0, 0.0 / 255.0, 0.0 / 255.0) \n  // #E9967A\n  #define darksalmon vec3(233.0 / 255.0, 150.0 / 255.0, 122.0 / 255.0) \n  // #8FBC8F\n  #define darkseagreen vec3(143.0 / 255.0, 188.0 / 255.0, 143.0 / 255.0) \n  // #483D8B\n  #define darkslateblue vec3(72.0 / 255.0, 61.0 / 255.0, 139.0 / 255.0) \n  // #2F4F4F\n  #define darkslategray vec3(47.0 / 255.0, 79.0 / 255.0, 79.0 / 255.0) \n  // #2F4F4F\n  #define darkslategrey vec3(47.0 / 255.0, 79.0 / 255.0, 79.0 / 255.0) \n  // #00CED1\n  #define darkturquoise vec3(0.0 / 255.0, 206.0 / 255.0, 209.0 / 255.0) \n  // #9400D3\n  #define darkviolet vec3(148.0 / 255.0, 0.0 / 255.0, 211.0 / 255.0) \n  // #FF1493\n  #define deeppink vec3(255.0 / 255.0, 20.0 / 255.0, 147.0 / 255.0) \n  // #00BFFF\n  #define deepskyblue vec3(0.0 / 255.0, 191.0 / 255.0, 255.0 / 255.0) \n  // #696969\n  #define dimgray vec3(105.0 / 255.0, 105.0 / 255.0, 105.0 / 255.0) \n  // #696969\n  #define dimgrey vec3(105.0 / 255.0, 105.0 / 255.0, 105.0 / 255.0) \n  // #1E90FF\n  #define dodgerblue vec3(30.0 / 255.0, 144.0 / 255.0, 255.0 / 255.0) \n  // #B22222\n  #define firebrick vec3(178.0 / 255.0, 34.0 / 255.0, 34.0 / 255.0) \n  // #FFFAF0\n  #define floralwhite vec3(255.0 / 255.0, 250.0 / 255.0, 240.0 / 255.0) \n  // #228B22\n  #define forestgreen vec3(34.0 / 255.0, 139.0 / 255.0, 34.0 / 255.0) \n  // #FF00FF\n  #define fuchsia vec3(255.0 / 255.0, 0.0 / 255.0, 255.0 / 255.0) \n  // #DCDCDC\n  #define gainsboro vec3(220.0 / 255.0, 220.0 / 255.0, 220.0 / 255.0) \n  // #F8F8FF\n  #define ghostwhite vec3(248.0 / 255.0, 248.0 / 255.0, 255.0 / 255.0) \n  // #FFD700\n  #define gold vec3(255.0 / 255.0, 215.0 / 255.0, 0.0 / 255.0) \n  // #DAA520\n  #define goldenrod vec3(218.0 / 255.0, 165.0 / 255.0, 32.0 / 255.0) \n  // #808080\n  #define gray vec3(128.0 / 255.0, 128.0 / 255.0, 128.0 / 255.0) \n  // #808080\n  #define grey vec3(128.0 / 255.0, 128.0 / 255.0, 128.0 / 255.0) \n  // #008000\n  #define green vec3(0.0 / 255.0, 128.0 / 255.0, 0.0 / 255.0) \n  // #ADFF2F\n  #define greenyellow vec3(173.0 / 255.0, 255.0 / 255.0, 47.0 / 255.0) \n  // #F0FFF0\n  #define honeydew vec3(240.0 / 255.0, 255.0 / 255.0, 240.0 / 255.0) \n  // #FF69B4\n  #define hotpink vec3(255.0 / 255.0, 105.0 / 255.0, 180.0 / 255.0) \n  // #CD5C5C\n  #define indianred vec3(205.0 / 255.0, 92.0 / 255.0, 92.0 / 255.0) \n  // #4B0082\n  #define indigo vec3(75.0 / 255.0, 0.0 / 255.0, 130.0 / 255.0) \n  // #FFFFF0\n  #define ivory vec3(255.0 / 255.0, 255.0 / 255.0, 240.0 / 255.0) \n  // #F0E68C\n  #define khaki vec3(240.0 / 255.0, 230.0 / 255.0, 140.0 / 255.0) \n  // #E6E6FA\n  #define lavender vec3(230.0 / 255.0, 230.0 / 255.0, 250.0 / 255.0) \n  // #FFF0F5\n  #define lavenderblush vec3(255.0 / 255.0, 240.0 / 255.0, 245.0 / 255.0) \n  // #7CFC00\n  #define lawngreen vec3(124.0 / 255.0, 252.0 / 255.0, 0.0 / 255.0) \n  // #FFFACD\n  #define lemonchiffon vec3(255.0 / 255.0, 250.0 / 255.0, 205.0 / 255.0) \n  // #ADD8E6\n  #define lightblue vec3(173.0 / 255.0, 216.0 / 255.0, 230.0 / 255.0) \n  // #F08080\n  #define lightcoral vec3(240.0 / 255.0, 128.0 / 255.0, 128.0 / 255.0) \n  // #E0FFFF\n  #define lightcyan vec3(224.0 / 255.0, 255.0 / 255.0, 255.0 / 255.0) \n  // #FAFAD2\n  #define lightgoldenrodyellow vec3(250.0 / 255.0, 250.0 / 255.0, 210.0 / 255.0) \n  // #D3D3D3\n  #define lightgray vec3(211.0 / 255.0, 211.0 / 255.0, 211.0 / 255.0) \n  // #D3D3D3\n  #define lightgrey vec3(211.0 / 255.0, 211.0 / 255.0, 211.0 / 255.0) \n  // #90EE90\n  #define lightgreen vec3(144.0 / 255.0, 238.0 / 255.0, 144.0 / 255.0) \n  // #FFB6C1\n  #define lightpink vec3(255.0 / 255.0, 182.0 / 255.0, 193.0 / 255.0) \n  // #FFA07A\n  #define lightsalmon vec3(255.0 / 255.0, 160.0 / 255.0, 122.0 / 255.0) \n  // #20B2AA\n  #define lightseagreen vec3(32.0 / 255.0, 178.0 / 255.0, 170.0 / 255.0) \n  // #87CEFA\n  #define lightskyblue vec3(135.0 / 255.0, 206.0 / 255.0, 250.0 / 255.0) \n  // #778899\n  #define lightslategray vec3(119.0 / 255.0, 136.0 / 255.0, 153.0 / 255.0) \n  // #778899\n  #define lightslategrey vec3(119.0 / 255.0, 136.0 / 255.0, 153.0 / 255.0) \n  // #B0C4DE\n  #define lightsteelblue vec3(176.0 / 255.0, 196.0 / 255.0, 222.0 / 255.0) \n  // #FFFFE0\n  #define lightyellow vec3(255.0 / 255.0, 255.0 / 255.0, 224.0 / 255.0) \n  // #00FF00\n  #define lime vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0) \n  // #32CD32\n  #define limegreen vec3(50.0 / 255.0, 205.0 / 255.0, 50.0 / 255.0) \n  // #FAF0E6\n  #define linen vec3(250.0 / 255.0, 240.0 / 255.0, 230.0 / 255.0) \n  // #FF00FF\n  #define magenta vec3(255.0 / 255.0, 0.0 / 255.0, 255.0 / 255.0) \n  // #800000\n  #define maroon vec3(128.0 / 255.0, 0.0 / 255.0, 0.0 / 255.0) \n  // #66CDAA\n  #define mediumaquamarine vec3(102.0 / 255.0, 205.0 / 255.0, 170.0 / 255.0) \n  // #0000CD\n  #define mediumblue vec3(0.0 / 255.0, 0.0 / 255.0, 205.0 / 255.0) \n  // #BA55D3\n  #define mediumorchid vec3(186.0 / 255.0, 85.0 / 255.0, 211.0 / 255.0) \n  // #9370DB\n  #define mediumpurple vec3(147.0 / 255.0, 112.0 / 255.0, 219.0 / 255.0) \n  // #3CB371\n  #define mediumseagreen vec3(60.0 / 255.0, 179.0 / 255.0, 113.0 / 255.0) \n  // #7B68EE\n  #define mediumslateblue vec3(123.0 / 255.0, 104.0 / 255.0, 238.0 / 255.0) \n  // #00FA9A\n  #define mediumspringgreen vec3(0.0 / 255.0, 250.0 / 255.0, 154.0 / 255.0) \n  // #48D1CC\n  #define mediumturquoise vec3(72.0 / 255.0, 209.0 / 255.0, 204.0 / 255.0) \n  // #C71585\n  #define mediumvioletred vec3(199.0 / 255.0, 21.0 / 255.0, 133.0 / 255.0) \n  // #191970\n  #define midnightblue vec3(25.0 / 255.0, 25.0 / 255.0, 112.0 / 255.0) \n  // #F5FFFA\n  #define mintcream vec3(245.0 / 255.0, 255.0 / 255.0, 250.0 / 255.0) \n  // #FFE4E1\n  #define mistyrose vec3(255.0 / 255.0, 228.0 / 255.0, 225.0 / 255.0) \n  // #FFE4B5\n  #define moccasin vec3(255.0 / 255.0, 228.0 / 255.0, 181.0 / 255.0) \n  // #FFDEAD\n  #define navajowhite vec3(255.0 / 255.0, 222.0 / 255.0, 173.0 / 255.0) \n  // #000080\n  #define navy vec3(0.0 / 255.0, 0.0 / 255.0, 128.0 / 255.0) \n  // #FDF5E6\n  #define oldlace vec3(253.0 / 255.0, 245.0 / 255.0, 230.0 / 255.0) \n  // #808000\n  #define olive vec3(128.0 / 255.0, 128.0 / 255.0, 0.0 / 255.0) \n  // #6B8E23\n  #define olivedrab vec3(107.0 / 255.0, 142.0 / 255.0, 35.0 / 255.0) \n  // #FFA500\n  #define orange vec3(255.0 / 255.0, 165.0 / 255.0, 0.0 / 255.0) \n  // #FF4500\n  #define orangered vec3(255.0 / 255.0, 69.0 / 255.0, 0.0 / 255.0) \n  // #DA70D6\n  #define orchid vec3(218.0 / 255.0, 112.0 / 255.0, 214.0 / 255.0) \n  // #EEE8AA\n  #define palegoldenrod vec3(238.0 / 255.0, 232.0 / 255.0, 170.0 / 255.0) \n  // #98FB98\n  #define palegreen vec3(152.0 / 255.0, 251.0 / 255.0, 152.0 / 255.0) \n  // #AFEEEE\n  #define paleturquoise vec3(175.0 / 255.0, 238.0 / 255.0, 238.0 / 255.0) \n  // #DB7093\n  #define palevioletred vec3(219.0 / 255.0, 112.0 / 255.0, 147.0 / 255.0) \n  // #FFEFD5\n  #define papayawhip vec3(255.0 / 255.0, 239.0 / 255.0, 213.0 / 255.0) \n  // #FFDAB9\n  #define peachpuff vec3(255.0 / 255.0, 218.0 / 255.0, 185.0 / 255.0) \n  // #CD853F\n  #define peru vec3(205.0 / 255.0, 133.0 / 255.0, 63.0 / 255.0) \n  // #FFC0CB\n  #define pink vec3(255.0 / 255.0, 192.0 / 255.0, 203.0 / 255.0) \n  // #DDA0DD\n  #define plum vec3(221.0 / 255.0, 160.0 / 255.0, 221.0 / 255.0) \n  // #B0E0E6\n  #define powderblue vec3(176.0 / 255.0, 224.0 / 255.0, 230.0 / 255.0) \n  // #800080\n  #define purple vec3(128.0 / 255.0, 0.0 / 255.0, 128.0 / 255.0) \n  // #663399\n  #define rebeccapurple vec3(102.0 / 255.0, 51.0 / 255.0, 153.0 / 255.0) \n  // #FF0000\n  #define red vec3(255.0 / 255.0, 0.0 / 255.0, 0.0 / 255.0) \n  // #BC8F8F\n  #define rosybrown vec3(188.0 / 255.0, 143.0 / 255.0, 143.0 / 255.0) \n  // #4169E1\n  #define royalblue vec3(65.0 / 255.0, 105.0 / 255.0, 225.0 / 255.0) \n  // #8B4513\n  #define saddlebrown vec3(139.0 / 255.0, 69.0 / 255.0, 19.0 / 255.0) \n  // #FA8072\n  #define salmon vec3(250.0 / 255.0, 128.0 / 255.0, 114.0 / 255.0) \n  // #F4A460\n  #define sandybrown vec3(244.0 / 255.0, 164.0 / 255.0, 96.0 / 255.0) \n  // #2E8B57\n  #define seagreen vec3(46.0 / 255.0, 139.0 / 255.0, 87.0 / 255.0) \n  // #FFF5EE\n  #define seashell vec3(255.0 / 255.0, 245.0 / 255.0, 238.0 / 255.0) \n  // #A0522D\n  #define sienna vec3(160.0 / 255.0, 82.0 / 255.0, 45.0 / 255.0) \n  // #C0C0C0\n  #define silver vec3(192.0 / 255.0, 192.0 / 255.0, 192.0 / 255.0) \n  // #87CEEB\n  #define skyblue vec3(135.0 / 255.0, 206.0 / 255.0, 235.0 / 255.0) \n  // #6A5ACD\n  #define slateblue vec3(106.0 / 255.0, 90.0 / 255.0, 205.0 / 255.0) \n  // #708090\n  #define slategray vec3(112.0 / 255.0, 128.0 / 255.0, 144.0 / 255.0) \n  // #708090\n  #define slategrey vec3(112.0 / 255.0, 128.0 / 255.0, 144.0 / 255.0) \n  // #FFFAFA\n  #define snow vec3(255.0 / 255.0, 250.0 / 255.0, 250.0 / 255.0) \n  // #00FF7F\n  #define springgreen vec3(0.0 / 255.0, 255.0 / 255.0, 127.0 / 255.0) \n  // #4682B4\n  #define steelblue vec3(70.0 / 255.0, 130.0 / 255.0, 180.0 / 255.0) \n  // #D2B48C\n  #define tan_color vec3(210.0 / 255.0, 180.0 / 255.0, 140.0 / 255.0) \n  // #008080\n  #define teal vec3(0.0 / 255.0, 128.0 / 255.0, 128.0 / 255.0) \n  // #D8BFD8\n  #define thistle vec3(216.0 / 255.0, 191.0 / 255.0, 216.0 / 255.0) \n  // #FF6347\n  #define tomato vec3(255.0 / 255.0, 99.0 / 255.0, 71.0 / 255.0) \n  // #40E0D0\n  #define turquoise vec3(64.0 / 255.0, 224.0 / 255.0, 208.0 / 255.0) \n  // #EE82EE\n  #define violet vec3(238.0 / 255.0, 130.0 / 255.0, 238.0 / 255.0) \n  // #F5DEB3\n  #define wheat vec3(245.0 / 255.0, 222.0 / 255.0, 179.0 / 255.0) \n  // #FFFFFF\n  #define white vec3(255.0 / 255.0, 255.0 / 255.0, 255.0 / 255.0) \n  // #F5F5F5\n  #define whitesmoke vec3(245.0 / 255.0, 245.0 / 255.0, 245.0 / 255.0) \n  // #FFFF00\n  #define yellow vec3(255.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0) \n  // #9ACD32\n  #define yellowgreen vec3(154.0 / 255.0, 205.0 / 255.0, 50.0 / 255.0) \n"},29334:function(e,t,n){"use strict";n.d(t,{uN:function(){return r.mv},xD:function(){return r.FR},Ui:function(){return a}});var i=n(36016),r=n(58064);let a={transition:r.eR,bump:i.HU}},35357:function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t.flat(2))"destroy"in e?e.destroy():e()}n.d(t,{N:function(){return r},o:function(){return i}});class r{collect(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t)if(e){if(Symbol.iterator in e)for(let t of e)t&&this.destroyables.push(t);else this.destroyables.push(e)}}constructor(){this.destroyables=[],this.destroy=()=>{i(this.destroyables),this.destroyables=[]}}}},71964:function(e,t,n){"use strict";var i,r;n.d(t,{_A:function(){return function e(t){if(Object.freeze(t),null!==t&&"object"==typeof t)for(let n in t)e(t[n]);return t}}});let a=new Map;a.set(Date,e=>new Date(e.getTime())),a.set(RegExp,e=>new RegExp(e.source,e.flags)),a.set(DOMPoint,e=>DOMPoint.fromPoint(e)),a.set(DOMRect,e=>DOMRect.fromRect(e)),(r=i||(i={})).None="none",r.NotAnObject="not-an-object",r.InvalidIndex="invalid-index",r.CannotCreateAscendants="cannot-create-ascendants",r.CannotPierceNullOrUndefined="cannot-pierce-null-or-undefined"},57638:function(e){e.exports={Caption:"style_Caption__FCtWy",hidden:"style_hidden__PEKsD",Github:"style_Github__qs6RR",Close:"style_Close__E3PRZ"}},26774:function(e){e.exports={Client:"client_Client__zoy80"}}},function(e){e.O(0,[6068,7987,2271,911,5485,411,7512,9829,4964,5406,749,4709,4465,6521,7974,3052,6457,3884,1575,812,3420,1540,167,4157,1618,2835,5061,358,5694,2840,1744],function(){return e(e.s=5932)}),_N_E=e.O()}]);