(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2598,3382,4266,5795,6647,7840],{3589:(e,t,n)=>{"use strict";n.d(t,{Main:()=>b});var i=n(70691),r=n(67203),a=n(7587),s=n(67235),o=n(30158),l=n(49797),c=n(17223),d=n(99613),u=n(64416),h=n(27491),p=n(27146),f=n(28334),m=n(36508),v=n(57165),g=n(58087),x=n(5832);class w extends h.A{render(e,t,n,i,r){var a;if(null==(a=this.onBeforeRender)||a.call(this),this.disableBackground){let a=this.scene.background;this.scene.background=null,super.render(e,t,n,i,r),this.scene.background=a}else super.render(e,t,n,i,r)}constructor(...e){super(...e),this.onBeforeRender=null,this.disableBackground=!1}}function y(){let{ref:e}=(0,a.C7)(function*(e){let t=function(e){let{width:t=window.innerWidth,height:n=window.innerHeight}=e,i=new o.WebGLRenderer({});i.setSize(t,n),i.setPixelRatio(window.devicePixelRatio);let r=new l.ubm(75,t/n,.1,1e3);r.position.z=8,new c.N(r,i.domElement);let a=new m.Rv().set({activeDuration:30}),h=(0,v.O)(()=>a.requestActivation()),y=function(e){let t=new l.Z58;{let e=new l.ZyN(0xffffff,1);e.position.set(0,3,1),t.add(e);let n=new l.dth("#afdbf5","#845244",1);t.add(n)}new x.Y().setPath("https://threejs.org/examples/textures/equirectangular/").loadAsync("pedestrian_overpass_1k.hdr").then(e=>{e.mapping=l.wfO,t.environmentIntensity=.1,t.environment=e,t.backgroundBlurriness=.5,t.background=e});let n=new l.eaF(new l.UPV(2,1,512,64),new l.uSd);t.add(n);let i=new l.eaF(new l.iNn(10,1,3),new l.uSd);t.add(i);let r=new l.eaF(new l.iNn(1,10,3),new l.uSd);r.position.set(5,0,0),t.add(r);let a=new l.eaF(new l.bdM(10,10),new l.uSd({color:"#d1ddff",transmission:1,roughness:0,dispersion:.1,ior:2.5,opacity:1}));return a.layers.set(1),t.add(a),e.onTick(e=>{n.rotation.x+=.5*e.deltaTime,n.rotation.y+=.5*e.deltaTime}),t}(a),b=new d.s(i),P=new w(y,r);P.onBeforeRender=()=>{r.layers.enableAll()},b.addPass(P);let M=new g.F(y,r,t,n);b.addPass(M);let S=new u.X;b.addPass(S);let C=new p.p(f.o);C.material.uniforms.resolution.value.set(1/t,1/n),b.addPass(C),a.onTick(()=>{b.render()}),s.Q.on("REQUIRE:THREE",e=>{e.payload={three:z}});let z={renderer:i,camera:r,scene:y,ticker:a,passes:{render:P,ao:M,output:S},destroy:()=>{i.domElement.remove(),a.destroy(),h.destroy()}};return z}({width:e.clientWidth,height:e.clientHeight});yield t,Object.assign(window,{three:t}),e.appendChild(t.renderer.domElement)},[]);return(0,i.jsx)("div",{ref:e,className:"absolute inset-0"})}function b(){let[e,t]=(0,r.useState)(!0);return(0,i.jsxs)("div",{className:"page",children:[(0,i.jsx)(y,{}),(0,i.jsxs)("div",{className:"absolute inset-0 p-8 flex flex-col items-start justify-start pointer-through",children:[(0,i.jsxs)("div",{className:"flex flex-col items-start justify-start pointer-through max-w-[480px]",children:[(0,i.jsx)("h1",{className:"text-4xl uppercase",children:"ao-transparent"}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsx)("p",{children:"Handling Ambient Occlusion and transparent objects"}),(0,i.jsx)("p",{children:"The glass does not generate AO"}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("p",{children:["This is achieved by using a fork of the ",(0,i.jsx)("a",{href:"https://github.com/mrdoob/three.js/blob/master/examples/jsm/postprocessing/GTAOPass.js",children:"GTAOPass"}),"\xa0where the camera layer mask is set to 0 (default layer) and the glass object is set to layer 1 (transparent objects)."]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl",children:"Pros:"}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:"Simple (layer based)"})})]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl",children:"Cons:"}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:"AO is still rendered on top of transparent objects. For semi-opaque objects, this is could be a problem."})})]})]}),(0,i.jsx)("div",{className:"mt-4"}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("label",{htmlFor:"ao-enabled",className:"select-none",children:"Enable AO"}),(0,i.jsx)("input",{type:"checkbox",name:"ao-enabled",id:"ao-enabled",checked:e,onChange:()=>{let{payload:e}=s.Q.send("REQUIRE:THREE");if(e){let{three:n}=e,{passes:i}=n,{ao:r}=i;r.enabled=!r.enabled,t(r.enabled)}}})]})]})]})}},3905:(e,t,n)=>{"use strict";n.d(t,{Main:()=>j});var i=n(70691),r=n(84306),a=n(49797),s=n(72598),o=n(22641);let l=new a.mrM({color:"white",transparent:!0,depthTest:!1}),c={circle:(()=>{let e=new a.LoY,t=Array.from({length:81},(e,t)=>{let n=t/80*Math.PI*2;return new a.Pq0(Math.cos(n),Math.sin(n),0)});return e.setFromPoints(t),e})(),box2:(()=>{let e=new a.LoY,t=[new a.Pq0(-.5,-.5,0),new a.Pq0(.5,-.5,0),new a.Pq0(.5,.5,0),new a.Pq0(-.5,.5,0),new a.Pq0(-.5,-.5,0)];return e.setFromPoints(t),e})()};class d extends a.YJl{setupUniforms(e,t){let{value:n}=e,{value:i}=t;n.copy(this.matrixWorld),n.invert()}init(e){this.props=e,this.renderOrder=1}setup(){}set(e){Object.assign(this.props,e),this.setup()}}let u={radius:2,falloff:1};class h extends d{get radius(){return this.props.radius}set radius(e){this.props.radius=e,this.setup()}get falloff(){return this.props.falloff}set falloff(e){this.props.falloff=e,this.setup()}setupUniforms(e,t){super.setupUniforms(e,t);let{radius:n,falloff:i}=this.props;t.value.set(n,i,0,0)}setup(){let{circle0:e,circle1:t}=this.parts,{radius:n,falloff:i}=this.props;e.scale.setScalar(n),t.scale.setScalar(n+i)}constructor(e){super(),this.parts={circle0:new a.N1A(c.circle,l),circle1:new a.N1A(c.circle,l)},this.init({...u,...e}),this.add(this.parts.circle0),this.add(this.parts.circle1),this.setup()}}h.glsl="\n    struct CircleFalloff {\n      mat4 matrix;\n      float radius;\n      float falloff;\n    };\n    float falloff(CircleFalloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float d = length(p);\n      return 1.0 - (d - falloff.radius) / falloff.falloff;\n    }\n  ";let p={width:1,height:1,falloff:1};class f extends d{setupUniforms(e,t){super.setupUniforms(e,t);let{width:n,height:i,falloff:r}=this.props;t.value.set(n,i,r,0)}setup(){let{box0:e,box1:t}=this.parts,{width:n,height:i,falloff:r}=this.props;e.scale.set(n,i,1),t.scale.set(n+2*r,i+2*r,1)}constructor(e){super(),this.parts={box0:new a.N1A(c.box2,l),box1:new a.N1A(c.box2,l)},this.init({...p,...e}),this.add(this.parts.box0),this.add(this.parts.box1),this.setup()}}f.glsl="\n    struct ManhattanBox2Falloff {\n      mat4 matrix;\n      float width;\n      float height;\n      float falloff;\n    };\n    float falloff(ManhattanBox2Falloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float x = abs(p.x) - falloff.width * 0.5;\n      float y = abs(p.y) - falloff.height * 0.5;\n      return 1.0 - max(x, y) / falloff.falloff;\n    }\n  ";var m=n(60041),v=n(66851),g=n(87381),x=n(71895),w=n(22899),y=n(8144),b=n(72612),P=n(79285);function M(e){let{r:t,g:n,b:i}=new a.Q1f(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(i.toFixed(3),")")}let S={grid:[16,16]},C=new a.bdM(1,1,1,1),z=new a.V9B({side:a.$EB,transparent:!0}),T={uRadiusScalar:new a.nc$(.9),uCircleMat:new a.nc$(new a.kn4().identity()),uCircleProps:new a.nc$(new a.IUQ(1,2,0,0)),uBox0Mat:new a.nc$(new a.kn4().identity()),uBox0Props:new a.nc$(new a.IUQ(1,1,0,0))};z.onBeforeCompile=e=>m.b.with(e).defines({USE_UV:""}).uniforms(T).varying({vCenter:"vec3",vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n    vWorldPosition2 = (modelMatrix * instanceMatrix * vec4(transformed, 1.0)).xyz;\n    vCenter = (modelMatrix * instanceMatrix[3]).xyz;\n  ").fragment.top(y.H,x.D,w.I).fragment.top(h.glsl,f.glsl).fragment.after("color_fragment","\n    CircleFalloff circle = CircleFalloff(uCircleMat, uCircleProps.x, uCircleProps.y);\n    ManhattanBox2Falloff box = ManhattanBox2Falloff(uBox0Mat, uBox0Props.x, uBox0Props.y, uBox0Props.z);\n    float d = 0.0;\n    d += clamp01(falloff(box, vWorldPosition2));\n    d += clamp01(falloff(circle, vWorldPosition2));\n    diffuseColor.rgb = mix(".concat(M("#c2e1ff"),", ").concat(M("#d80773"),", easeInOut3(clamp01(d)));\n  ")).fragment.after("alphamap_fragment","\n    float scalar = 1.0 / uRadiusScalar / mix(1.0, 0.25, easeInOut3(clamp01(d)));\n    float alpha = smoothstep(1.0, 0.99, length(vUv - 0.5) * scalar / 0.5);\n\n    if (alpha < 0.01) discard;\n\n    diffuseColor.a *= alpha;\n  ");class D extends a.ZLX{onTick(e){for(let e of Object.values(this.falloffs))e.visible=this.falloffsAreVisible;let{box0:t,circle:n}=this.falloffs;n.falloff=(0,P.lerp)(.1,4,e.sin01Time({frequency:.15})),n.radius=(0,P.lerp)(1,5,e.sin01Time({frequency:.1,phase:.5})),n.setupUniforms(T.uCircleMat,T.uCircleProps),t.rotation.z+=.1*e.deltaTime,t.set({width:8,falloff:(0,P.lerp)(.5,6,e.sin01Time({frequency:.15}))}),t.setupUniforms(T.uBox0Mat,T.uBox0Props)}constructor(e){var t;let{x:n,y:i}=(0,o.wX)(null!=(t=null==e?void 0:e.grid)?t:S.grid);for(let t of(super(C,z,n*i),this.internal={grid:new a.I9Y},this.falloffsAreVisible=!0,this.falloffs={circle:(0,g.mj)(new h,{parent:this,position:[-3,-2,0]}),box0:(0,g.mj)(new f({}),{parent:this,position:[3,2,0]})},this.props={...S,...e},(0,b.loop2)(n,i)))this.setMatrixAt(t.i,(0,v.w)({x:t.x-n/2,y:t.y-i/2}))}}function*A(e){e.scene.background=new a.Q1f("#1c54e0"),e.ticker.set({activeDuration:30}),e.useOrbitControls();let t=new D;e.scene.add(t),yield()=>t.removeFromParent(),yield(0,s.s)(document.body,{onTap(){t.falloffsAreVisible=!t.falloffsAreVisible}})}function O(){return(0,r.yk)(A),null}function j(){return(0,i.jsx)("div",{className:"absolute-through",children:(0,i.jsx)(r.uB,{children:(0,i.jsx)(O,{})})})}},4266:(e,t,n)=>{"use strict";n.d(t,{O0:()=>i,XW:()=>M});var i,r=n(49797),a=n(99613),s=n(50373),o=n(64416),l=n(27491),c=n(27146),d=n(71591),u=n(28334);function h(e){return e.isRenderPass}!function(e){e[e.Render=0]="Render",e[e.PostProcessing=1e3]="PostProcessing",e[e.GizmoRender=2e3]="GizmoRender",e[e.Outline=3e3]="Outline",e[e.Output=4e3]="Output",e[e.Antialiasing=5e3]="Antialiasing"}(i||(i={}));class p{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let n=e[1],i=t[1];return n.type!==i.type?n.type-i.type:n.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,n]of this.passMap)n.type===e&&(yield[t,n])}addPass(e){let{type:t=i.Render,insertOrder:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n){var r,a,s;n=(null!=(s=null==(a=[...this.getPassesByType(t)].at(-1))||null==(r=a[1])?void 0:r.insertOrder)?s:-1)+1}return this.passMap.set(e,{type:t,insertOrder:n}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,n){this.composer.setSize(e,t),this.composer.setPixelRatio(n),this.basicPasses.fxaa.uniforms.resolution.value.set(1/n/e,1/n/t),this.basicPasses.smaa.setSize(e*n,t*n)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let n of this.composer.passes)h(n)&&n.scene===t&&(n.scene=e)}render(e){for(let t of this.composer.passes)h(t)&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:n}=this;for(let[r,a]of t.passes.entries()){let t=n.get(a);t?e.push("- ".concat(r,": ").concat(i[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(a.constructor.name)):e.push("- ".concat(r,": NO METADATA for ").concat(a.constructor.name))}return e.join("\n")}constructor(e,t,n,h){let p=new a.s(e),f=new Map,m=new l.A(t,h);m.clearAlpha=0,f.set(m,{type:i.Render,insertOrder:0}),p.addPass(m);let v=new l.A(n,h);f.set(v,{type:i.GizmoRender,insertOrder:0}),v.clear=!1,v.clearDepth=!1,p.addPass(v);let g=new s.G(new r.I9Y,t,h);f.set(g,{type:i.GizmoRender,insertOrder:0}),p.addPass(g);let x=new o.X;f.set(x,{type:i.Output,insertOrder:0}),p.addPass(x);let w=new c.p(u.o);f.set(w,{type:i.Antialiasing,insertOrder:0}),p.addPass(w);let y=new d.I;y.enabled=!1,f.set(y,{type:i.Antialiasing,insertOrder:0}),p.addPass(y),this.composer=p,this.basicPasses={mainRender:m,gizmoRender:v,outline:g,output:x,fxaa:w,smaa:y},this.passMap=f}}var f=n(30158),m=n(17223),v=n(57165),g=n(39787),x=n(36508),w=n(22641),y=n(17475),b=n(43340),P=n(31484);class M{static current(){return this.instances[this.instances.length-1]}get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:n=null,target:i=null,element:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof r&&(r=document.querySelector(r)),null!=(e=this.internal).orbitControls||(e.orbitControls=new m.N(this.camera,r)),r&&r!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new m.N(this.camera,r)),n&&(0,w.jj)(n,this.internal.orbitControls.object.position),i&&(0,w.jj)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:n}=this,{domElement:i}=this.renderer;e.appendChild(i);let r=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},a=new ResizeObserver(r);return a.observe(e),n(()=>{a.disconnect()}),r(),n(this.pointer.initialize(i,t,this.camera,this.ticker)),n((0,v.O)(this.ticker.requestActivation),this.ticker.onTick(this.renderFrame)),n(()=>{var e;null==(e=this.internal.orbitControls)||e.dispose()}),this.domContainer=e,this.domElement=i,this}setSize(e){let{width:t,height:n,pixelRatio:i}={...this,...e};if(t===this.width&&n===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=i;let{renderer:r,perspectiveCamera:a,pipeline:s}=this;return r.setSize(t,n),r.setPixelRatio(i),s.setSize(t,n,i),a.aspect=t/n,a.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,n=[this.scene];for(;n.length>0;){let e=n.shift();t(e)&&(yield e),n.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.type=P.s.WebGL,this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new f.WebGLRenderer,this.perspectiveCamera=new r.ubm,this.orhtographicCamera=new r.ubm,this.scene=new r.Z58,this.gizmoScene=new r.Z58,this.pointer=new b.g,this.skipRender=!1,this.ticker=x.Rv.get("three").set({minActiveDuration:8}),this.pipeline=new p(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new r.I9Y,fullSize:new r.I9Y,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=y.o.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed)return void console.warn("ThreeWebglContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,g.z)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.renderFrame=e=>{var t;let{scene:n,pipeline:i,pointer:r}=this;null==(t=this.internal.orbitControls)||t.update(e.deltaTime),r.update(n),n.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&i.render(e),r.updateEnd()},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),M.instances.push(this)}}M.instances=[]},4941:(e,t,n)=>{"use strict";n.d(t,{_5:()=>r.ol,YN:()=>r.o8,cz:()=>a,kY:()=>r.kY});var i=n(37197),r=n(40074);let a={transition:r.kY,bump:i.$p}},9723:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var i=n(49797),r=n(60041);let a={luminosity:.5};class s extends i.V9B{constructor(e){let{luminosity:t,...n}={...a,...e},s={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uLuminosity:{value:t}};super(n),this.onBeforeCompile=e=>{r.b.with(e).uniforms(s).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      ")},this.sunPosition=s.uSunPosition.value}}},14203:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var i=n(1029);let r="\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20201014 (stegu)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+10.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\n\n\n\n\n// 2D:\n\nvec3 mod289_2d(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_2d(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_2d(vec3 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\n\nfloat snoise(vec2 v) {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_2d(i); // Avoid truncation effects in permutation\n  vec3 p = permute_2d( permute_2d( i.y + vec3(0.0, i1.y, 1.0 ))\n		+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n// 3D: \n\nfloat snoise(vec3 v)\n{ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  // Permutations\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 105.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\n\n\n// addons:\n// Fractal noise, based on Stefan Gustavson's Simplex noise\n".concat((0,i.N)(["vec2","vec3"],"\n  float fnoise(T p, int octaves, float persistence) {\n    float total = 0.0;           // Final noise value\n    float amplitude = 1.0;       // Initial amplitude\n    float frequency = 1.0;       // Initial frequency\n    float maxValue = 0.0;        // Used for normalization\n\n    for (int i = 0; i < octaves; i++) {\n      total += snoise(p * frequency) * amplitude;\n\n      maxValue += amplitude;   // Keep track of max amplitude\n      amplitude *= persistence; // Reduce amplitude for next octave\n      frequency *= 2.0;        // Increase frequency for next octave\n    }\n\n    // Normalize the result to stay within the range [0, 1]\n    return total / maxValue;\n  }\n"),"\n")},14274:(e,t,n)=>{"use strict";n.d(t,{K:()=>d});var i=n(17953),r=n(81074),a=n(49797),s=n(57165),o=n(36508),l=n(43340),c=n(31484);class d{get aspect(){return this.width/this.height}setSize(e){let{width:t,height:n,pixelRatio:i}={...this,...e};if(t===this.width&&n===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=i;let{renderer:r,perspectiveCamera:a,orhtographicCamera:s}=this;r.setSize(t,n),r.setPixelRatio(i);let o=t/n;return a.aspect=o,a.updateProjectionMatrix(),s.left=-o,s.right=o,s.top=1,s.bottom=-1,s.updateProjectionMatrix(),this}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let n=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=n,new ResizeObserver(()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(e);let{domElement:i}=this.renderer;return i.style.display="block",i.style.width="100%",i.style.height="100%",e.appendChild(i),this.setSize({width:i.clientWidth,height:i.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick(()=>{this.renderFrame()}).destroy,this.internal.cancelRequestActivation=(0,s.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,t,this.camera,this.ticker),this.domContainer=e,this.domElement=i,this}renderFrame(){let{scene:e,postProcessing:t,pointer:n}=this;n.update(e),e.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&t.renderAsync(),n.updateEnd()}constructor(){this.type=c.s.WebGPU,this.width=300,this.height=150,this.pixelRatio=1,this.ticker=o.Rv.get("three").set({minActiveDuration:8}),this.pointer=new l.g,this.renderer=new r.uV1({antialias:!0}),this.perspectiveCamera=new a.ubm,this.orhtographicCamera=new a.qUd,this.scene=new a.Z58,this.postProcessing=new r.io7(this.renderer),this.scenePass=(0,i.IXH)(this.scene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.skipRender=!1,this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var e,t,n,i,r,a,s;if(this.destroyed)return void console.warn("ThreeWebglContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(e=this.internal.observer)||e.disconnect(),null==(t=(n=this.internal).cancelTick)||t.call(n),null==(i=(r=this.internal).cancelRequestActivation)||i.call(r),null==(a=(s=this.internal).cancelPointer)||a.call(s)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},17475:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var i=n(49797),r=n(9954),a=n(17775),s=n(5832);function o(e){let t,n,i=new Promise((i,r)=>{t=()=>{i(e)},n=e=>{r(e)}});return Object.assign(e,{then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),resolve:t,reject:n}),e}let l=["gltf","glb"],c=["png","jpg","jpeg","hdr","exr"];class d{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class u{static current(){var e;return null!=(e=this.instances[this.instances.length-1])?e:new u}static get(e){var t;return null!=(t=this.instances.find(t=>t.name===e))?t:new u({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,n)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)})}async loadRgbe(e){let t=o(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=o(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let n=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(n)){let e=this.textureCache.get(n);return null==t||t(e),e}let i=o(this.loaders.texture.load(n,e=>{this.textureCache.set(n,i),null==t||t(e),i.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(n))}));return i}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(c.includes(t))return new Promise((t,n)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=u.nextId++,this.loaders={gltf:new a.B,texture:new i.Tap,rgbeLoader:new s.Y,exrLoader:new r.H},this.path="",this._onAfterLoad=new d,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),u.instances.push(this)}}u.nextId=0,u.instances=[]},22641:(e,t,n)=>{"use strict";n.d(t,{GD:()=>m,ey:()=>r.ey,if:()=>u,jj:()=>c,vl:()=>h,wX:()=>l,wz:()=>r.wz});var i=n(49797),r=n(44694),a=n(61567);function s(e){return"string"==typeof e&&/^(rad|deg|turn)$/.test(e)}function o(e){return"string"==typeof e&&/^(XYZ|XZY|YXZ|YZX|ZXY|ZYX)$/.test(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.I9Y;return r.wX(e,t)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Pq0;return r.jj(e,t)}let d={defaultOrder:"XYZ"};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[l,c,u]=(()=>{if(1===t.length)return[t[0],d,new i.O9p];if(2===t.length)return(0,a.eB)(t[1])?[t[0],d,t[1]]:[t[0],t[1],new i.O9p];if(3===t.length)return t;throw Error("Invalid number of arguments")})();if("string"==typeof l)return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.O9p,[a,s="",l="",c]=e.split(",").map(e=>e.trim()),d=(0,r.ey)(a)||0,u=(0,r.ey)(s)||0,h=(0,r.ey)(l)||0,p=o(c)?c:t.defaultOrder;return n.set(d,u,h,p)}(l,c,u);if((0,a.eB)(l))return u.copy(l);let{defaultOrder:h}=c;if(Array.isArray(l)){let[e,t,n,i,a]=l,c=s(i)?i:s(a)?a:"rad",d=o(i)?i:o(a)?a:h;return u.set((0,r.ey)(e,c),(0,r.ey)(t,c),(0,r.ey)(n,c),d)}let{x:p,y:f,z:m,order:v=h,unit:g="rad"}=l;return u.set((0,r.ey)(p,g),(0,r.ey)(f,g),(0,r.ey)(m,g),v)}let h=(()=>{let e=new i.Pq0,t=new i.O9p,n=new i.Pq0,r=new i.PTz;return function(i,s){let{x:o=0,y:l=0,z:d=0,position:h={x:o,y:l,z:d},rotationX:p=0,rotationY:f=0,rotationZ:m=0,rotationOrder:v="XYZ",rotation:g={x:p,y:f,z:m,order:v},scaleX:x=1,scaleY:w=1,scaleZ:y=1,scaleScalar:b=1,scale:P={x:x,y:w,z:y}}=i;if((0,a.MR)(s))return c(h,e),u(g,t),c(P,n).multiplyScalar(b),r.setFromEuler(t),s.compose(e,r,n);if((0,a.Th)(s))return c(h,s.position),u(g,s.rotation),c(P,s.scale).multiplyScalar(b),s;throw Error("Invalid out argument")}})(),p=new i.kn4,f=new i.kn4;function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;t.identity();let n=e[Symbol.iterator](),i=n.next();if(i.done)return t;h(i.value,t);for(let e=n.next();!e.done;e=n.next())h(e.value,f),t.multiply(f);return t}},23200:(e,t,n)=>{"use strict";n.d(t,{Main:()=>C});var i=n(70691),r=n(48083),a=n(36508),s=n(33855),o=n(28737),l=n(95736),c=n(49797),d=n(82091),u=n(87381),h=n(72612),p=n(6726),f=n(66851);class m extends c.YJl{clear(){let{lines:e}=this.parts;return e.count=0,e.instanceMatrix.array=new Float32Array(0),e.instanceMatrix.needsUpdate=!0,this}moveTo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=1===t.length?[t[0].x,t[0].y]:t;return this.commands.push({type:"moveTo",x:i,y:r,z:0,w:1}),this}lineTo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=1===t.length?[t[0].x,t[0].y]:t;return this.commands.push({type:"lineTo",x:i,y:r,z:0,w:1}),this}draw(){let{lines:e}=this.parts,{thickness:t,commands:n}=this,i=new Float32Array(16*n.length),r=0;for(let[e,{type:a,x:s,y:o}]of n.entries())if("lineTo"===a){let a=n[e-1],l=s-a.x,c=o-a.y,d=a.x+l/2,u=a.y+c/2,h=Math.sqrt(l*l+c*c),p=Math.atan2(c,l);(0,f.w)({x:d,y:u,rotationZ:p,scaleX:h,scaleY:t}).toArray(i,16*r),r++}return e.count=r,e.instanceMatrix.array=i.slice(0,16*r),e.instanceMatrix.needsUpdate=!0,this}constructor(...e){super(...e),this.thickness=.01,this.parts=(()=>{let e=new c.bdM(1,1),t=new c.V9B;return{lines:(0,u.mj)(new c.ZLX(e,t,0),this)}})(),this.commands=[]}}var v=n(60041),g=n(22899),x=n(14203),w=n(8144);let y=new c.bdM(4,4);new c.WBB(1,12);class b extends c.YJl{constructor(...e){super(...e),this.parts=(()=>{let e=["#95c3fb","#fcff99","#0a1521"].map(e=>new c.Q1f(e)),t=new c.V9B,n={uTime:a.Rv.get("three").uTime,uTimeCycleOffset:{value:0},uColors:{value:e}};t.onBeforeCompile=e=>v.b.with(e).uniforms(n).defines({USE_UV:""}).varying({vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n        vWorldPosition2 = (modelMatrix * vec4(position, 1.0)).xyz;\n      ").fragment.top("\n\n  // Inigo Quilez\n  // https://iquilezles.org/articles/distfunctions2d/\n\n  // Circle - exact   (https://www.shadertoy.com/view/3ltSW2)\n  float sdCircle( vec2 p, float r )\n  {\n    return length(p) - r;\n  }\n\n  // Rounded Box - exact   (https://www.shadertoy.com/view/4llXD7 and https://www.youtube.com/watch?v=s5NGeUV2EyU)\n  float sdRoundedBox( in vec2 p, in vec2 b, in vec4 r )\n  {\n    r.xy = (p.x>0.0)?r.xy : r.zw;\n    r.x  = (p.y>0.0)?r.x  : r.y;\n    vec2 q = abs(p)-b+r.x;\n    return min(max(q.x,q.y),0.0) + length(max(q,0.0)) - r.x;\n  }\n\n  // Box - exact   (https://www.youtube.com/watch?v=62-pRVZuS5c)\n  float sdBox( in vec2 p, in vec2 b )\n  {\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n\n  // Segment - exact   (https://www.shadertoy.com/view/3tdSDj and https://www.youtube.com/watch?v=PMltMdi1Wzg)\n  float sdSegment( in vec2 p, in vec2 a, in vec2 b )\n  {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n  }\n\n  // Arc - exact   (https://www.shadertoy.com/view/wl23RK)\n  float sdArc( in vec2 p, in vec2 sc, in float ra, float rb )\n  {\n    // sc is the sin/cos of the arc's aperture\n    p.x = abs(p.x);\n    return ((sc.y*p.x>sc.x*p.y) ? length(p-sc*ra) : \n                                  abs(length(p)-ra)) - rb;\n  }\n\n  float opRound( in float d, in float r )\n  {\n    return d - r;\n  }\n\n  float opOnion( in float d, in float r )\n  {\n    return abs(d) - r;\n  }\n",x.O,w.H,g.I).fragment.top("\n        float globalNoise;\n        void computeGlobalNoise() {\n          globalNoise = fnoise(vec3(vWorldPosition2.xy * 0.5, uTime * 0.01), 8, 0.8);\n        }\n        float radius() {\n          return 0.75;\n        }\n        vec2 point() {\n          return (vUv - 0.5) * 2.0;\n        }\n        float time() {\n          return uTime * 0.05 + uTimeCycleOffset * 1.0;\n        }\n        float noisyBox() {\n          return sdBox(point(), vec2(radius())) + globalNoise * 0.1 * sin01(time());\n        }\n        float noisyCircle() {\n          return length(point()) - radius() + globalNoise * 0.3 * sin01(time());\n        }\n      ").fragment.mainBeforeAll("\n        computeGlobalNoise();\n      ").fragment.after("color_fragment","\n        float d = sdBox(point(), vec2(radius()));\n        float d2 = sin01(time());\n        d2 *= 0.1;\n        vec3 color = mix(uColors[0], uColors[1], smoothstep(0.001, 0.0, noisyBox()));\n\n        float nc = noisyCircle();\n        vec3 circleColor = mix(uColors[1], uColors[2], mix(0.25, 1.0, easeInOut2(inverseLerpUnclamped(-radius(), 0.0, nc))));\n        color = mix(color, circleColor, smoothstep(0.001, 0.0, nc));\n        diffuseColor.rgb = color;\n      ");let i=new c.eaF(y,t);return this.add(i),{plane:i,planeUniforms:n,colors:e}})()}}class P extends c.YJl{constructor(...e){super(...e),this.parts=(()=>{let e=(0,u.mj)(new m,this);e.position.z=1,e.thickness=.0125,e.parts.lines.material.color.set("#15093e"),e.parts.lines.material.color.set("#95c3fb");let t=new p.M_(0,0).applyPadding(4.1+.05,"grow"),n=new p.M_(0,0).applyPadding(6.25,"grow");for(let{t:i}of(0,h.loop)(60)){let r=(i+.5/60)*Math.PI*2,a=Math.cos(r),s=Math.sin(r),o=t.raycast(0,0,a,s).getPointMin(),l=n.raycast(0,0,a,s).getPointMin();e.moveTo(o).lineTo(l)}return e.draw(),{lines:e}})()}}function M(){return(0,s.dB)("four-circles",function*(e){(0,u.mj)(new d.N({color:"#e1dff1"}),e),(0,u.mj)(e,{rotationZ:"45deg"}),(0,u.mj)(new P,{parent:e}),(0,u.mj)(new b,{parent:e,position:[2.0175,2.0175,0]},e=>{e.parts.planeUniforms.uTimeCycleOffset.value=0,e.parts.colors[1].set("#fcff99"),e.parts.colors[2].set("#170551")}),(0,u.mj)(new b,{parent:e,position:[2.0175,-2.0175,0]},e=>{e.parts.planeUniforms.uTimeCycleOffset.value=.25,e.parts.colors[1].set("#18188c"),e.parts.colors[2].set("#72d9ab")}),(0,u.mj)(new b,{parent:e,position:[-2.0175,-2.0175,0]},e=>{e.parts.planeUniforms.uTimeCycleOffset.value=.5,e.parts.colors[1].set("#f3a3b3"),e.parts.colors[2].set("#15093e")}),(0,u.mj)(new b,{parent:e,position:[-2.0175,2.0175,0]},e=>{e.parts.planeUniforms.uTimeCycleOffset.value=.75,e.parts.colors[1].set("#3b3426"),e.parts.colors[2].set("#de2566")}),(0,u.mj)(new b,{parent:e,scaleScalar:4,position:[0,0,-1]},e=>{e.parts.planeUniforms.uTimeCycleOffset.value=.75,e.parts.colors[0].set("#e1dff1"),e.parts.colors[1].set("#95c3fb"),e.parts.colors[2].set("#170551")})},[]),null}function S(){return(0,s.yk)(function*(e){(0,o.O)({three:e});let t=new r.n({size:12.2,perspective:0});yield t.start(e.renderer.domElement),a.Rv.get("three").set({minActiveDuration:60}),yield(0,a.xy)("three",n=>{let{aspect:i,camera:r}=e;t.update(r,i,n.deltaTime)}),yield(0,l.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]])},[]),null}function C(){return(0,i.jsx)("div",{children:(0,i.jsxs)(s.uB,{children:[(0,i.jsx)(S,{}),(0,i.jsx)(M,{})]})})}},31484:(e,t,n)=>{"use strict";var i;n.d(t,{s:()=>i}),function(e){e.WebGL="webgl",e.WebGPU="webgpu"}(i||(i={}))},33855:(e,t,n)=>{"use strict";n.d(t,{dB:()=>p,q:()=>f,uB:()=>g,yk:()=>h});var i=n(70691),r=n(67203),a=n(49797),s=n(7587),o=n(48083),l=n(6697),c=n(36508),d=n(14277);let u=(0,r.createContext)(null);function h(e,t){let n=(0,r.useContext)(u);return(0,s.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}function p(e,t,n){let i=(0,r.useMemo)(()=>new a.YJl,[]);return i.name=e,h(async function*(e,n){if(e.scene.add(i),yield()=>{i.clear(),i.removeFromParent()},t){let r=t(i,e,n);if(r&&"function"==typeof r.next)do{let{value:e,done:t}=await r.next();if(t)break;yield e}while(n.mounted)}},n),i}function f(e){let{value:t}=e,n=(0,r.useMemo)(()=>"function"==typeof t?new t:t,[t]);return h(async function*(e){if(e.scene.add(n),"initialize"in n){let t=n.initialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{if(n.removeFromParent(),"destroy"in n){var e;null==(e=n.destroy)||e.call(n)}}},[n]),null}let m={className:"",assetsPath:"/",vertigoControls:!1};function v(e){let{children:t,className:n,assetsPath:a,vertigoControls:d}={...m,...e},h=(0,r.useMemo)(()=>new l.XW,[]);h.loader.setPath(a);let{ref:p}=(0,s.IZ)({debounce:!0},function*(e,t){yield h.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:h})},[]);(0,s.C7)(function*(){if(d){let e=new o.n("object"==typeof d?d:{}).initialize(p.current).start();yield e.destroy,yield(0,c.xy)("three",t=>{e.update(h.camera,h.aspect,t.deltaTime)})}},[d]);let f={position:"absolute",inset:0};return(0,i.jsx)("div",{ref:p,className:n,style:f,children:(0,i.jsxs)(u.Provider,{value:h,children:[(0,i.jsx)("div",{style:f}),(0,i.jsx)("div",{style:f,className:"thru",children:h.initialized&&t})]})})}function g(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.D)()&&(0,i.jsx)(v,{...t[0]})}},35908:(e,t,n)=>{"use strict";n.d(t,{Main:()=>U});var i=n(70691),r=n(32137),a=n(63357),s=n(49797),o=n(30158),l=n(60041),c=n(90927),d=n(22899),u=n(79285),h=n(17099),p=n(35375),f=n(9954);let m=new(n(5832)).Y;function v(e){return new Promise(t=>{m.load(e,e=>{t(e)})})}let g=new f.H;var x=n(1029);let w="\n\nstruct FloatRamp {\n  float a;\n  float b;\n  float t;\n};\n\nstruct Vec2Ramp {\n  vec2 a;\n  vec2 b;\n  float t;\n};\n\nstruct Vec3Ramp {\n  vec3 a;\n  vec3 b;\n  float t;\n};\n\nstruct Vec4Ramp {\n  vec4 a;\n  vec4 b;\n  float t;\n};\n\n".concat((0,x.N)("vecX",e=>{let t=e[0].toUpperCase()+e.slice(1)+"Ramp";return"\n\n".concat(t," ramp(float t, T a, T b) {\n  return ").concat(t,"(a, b, t);\n}\n\n").concat(t," ramp(float t, T a, T b, T c) {\n  if (t < .5) {\n    return ").concat(t,"(a, b, t * 2.0);\n  } else {\n    return ").concat(t,"(b, c, (t - 0.5) * 2.0);\n  }\n}\n\n").concat(t," ramp(float t, T a, T b, T c, T d) {\n  if (t < .33) {\n    return ").concat(t,"(a, b, t * 3.0);\n  } else if (t < .66) {\n    return ").concat(t,"(b, c, (t - 0.33) * 3.0);\n  } else {\n    return ").concat(t,"(c, d, (t - 0.66) * 3.0);\n  }\n}\n\n").slice(1,-1)})),y="\n#ifndef GLSL_RAMP\n#define GLSL_RAMP\n".concat(d.I,"\n").concat(w,"\n#endif\n"),b={white:new s.Q1f("#ffffff"),grey10:new s.Q1f("#f0f0f0"),grey20:new s.Q1f("#e0e0e0"),notSoWhite:new s.Q1f("#f8f8e8"),yellow:new s.Q1f("#fff700"),black:new s.Q1f("#110111"),red:new s.Q1f("#dd1a41"),brightSkin:new s.Q1f("#ebd8c6"),petrol:new s.Q1f("#005e6b"),brightGreen:new s.Q1f("#22c891"),darkGreen:new s.Q1f("#002f1c"),sand:new s.Q1f("#e6db9f")};class P extends s.eaF{static createMaterial(e){let{color:t,shaded:n,emissiveIntensity:i,side:r}={...P.defaultProps,...e};return n?new s.uSd({color:t,emissiveIntensity:i,emissive:i>0?t:void 0,side:r}):new s.V9B({color:t})}}P.defaultProps={color:b.black,radius:1.3,align:.5,thickness:.3,innerRadiusRatio:null,shaded:!0,emissiveIntensity:.333};class M extends P{constructor(e){let{radius:t,thickness:n,align:i,innerRadiusRatio:r,color:a,shaded:o,...l}={...P.defaultProps,...e},d=t-n*i,u=t+n*(1-i);r&&(d=t*r,u=t),super(new s.rKP(d,u,128),P.createMaterial({...e,side:s.$EB})),(0,c.N)(this,l)}}class S extends s.eaF{constructor(e){let{radius:t,thickness:n,align:i,innerRadiusRatio:r,color:a,shaded:o,emissiveIntensity:l,...d}={...P.defaultProps,...e},u=t-n*i,h=t+n*(1-i);r&&(u=t*r,h=t),super(new s.O3Y((u+h)/2,(h-u)/2,128,512),P.createMaterial({...e,side:s.hB5})),(0,c.N)(this,d)}}class C extends M{constructor(e){super(e),this.material.onBeforeCompile=e=>l.b.with(e).defines({USE_UV:""}).fragment.top(y).fragment.after("map_fragment","\n      vec2 p = vUv - 0.5;\n      float alpha = atan(p.y, p.x) / 6.2831853;\n      alpha = 1.0 - mod(alpha + 0.0, 1.0);\n      Vec3Ramp r = ramp(alpha,\n        ".concat((0,l.e)(b.black),",\n        ").concat((0,l.e)(b.white),",\n        ").concat((0,l.e)(b.yellow),");\n      diffuseColor.rgb = mix(r.a, r.b, easeInOut4(r.t));\n    "))}}var z=n(77399);class T extends s.YJl{constructor({globalIntensity:e=1,debug:t=!1}={}){super(),this.name="lights";let n=new s.dth("#dbebf0","#645d61",e);this.add(n);let i=new s.ure("#e8e6d3",1.3*e);i.position.set(10,10,10),i.width=40,i.height=40,i.lookAt(0,0,0),this.add(i),t&&this.add(new z.g(i));let r=new s.$p8("#f2f0dd",.8*e);this.add(r)}}function D(e){let{precision:t=3}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,r=0;function a(){return"vec3(".concat(n.toFixed(t),", ").concat(i.toFixed(t),", ").concat(r.toFixed(t),")")}switch(typeof e){case"number":return n=(e>>16&255)/255,i=(e>>8&255)/255,r=(255&e)/255,a();case"string":if(e.startsWith("#")){if(4===e.length)return n=parseInt(e[1]+e[1],16)/255,i=parseInt(e[2]+e[2],16)/255,r=parseInt(e[3]+e[3],16)/255,a();return D(parseInt(e.slice(1),16),{precision:t})}throw Error("Invalid string: ".concat(e));case"object":if(Array.isArray(e))return[n,i,r]=e,a();if("r"in e)return n=e.r,i=e.g,r=e.b,a();if("x"in e)return n=e.x,i=e.y,r=e.z,a();throw Error("Invalid object: ".concat(e))}return"vec3(1.0, 0.0, 1.0)"}u.toff;var A=n(14203);let O="\n  ".concat(o.ShaderChunk.cube_uv_reflection_fragment,"\n  ").concat(A.O,"\n\n  varying vec3 vPosition;\n  varying vec3 vWorldNormal;\n\n  struct Plane {\n    vec3 origin;\n    vec3 normal;\n  };\n\n  float signedDistanceToPlane(Plane plane, vec3 p) {\n    return dot(plane.normal, p - plane.origin);\n  }\n\n  vec3 checker3(vec3 position, float scale, float edgeWidth, vec3 color1, vec3 color2) {\n    // Scale the position to control the size of the checker cubes\n    vec3 scaledPos = position / scale;\n\n    // Get the integer part (checker grid location)\n    vec3 checkerPos = floor(scaledPos);\n\n    // Get the fractional part (inside each cube)\n    vec3 fractPos = fract(scaledPos);\n\n    // Calculate the checkerboard pattern (even/odd cubes)\n    float checkerSum = mod(checkerPos.x + checkerPos.y + checkerPos.z, 2.0);\n\n    // Smooth transition using smoothstep on the fractional position\n    float edgeX = smoothstep(0.0, edgeWidth, fractPos.x);\n    float edgeY = smoothstep(0.0, edgeWidth, fractPos.y);\n    float edgeZ = smoothstep(0.0, edgeWidth, fractPos.z);\n\n    // Combine the edges to create a smooth transition\n    float blend = edgeX * edgeY * edgeZ;\n    blend = smoothstep(0.0, edgeWidth, min(min(fractPos.x, fractPos.y), fractPos.z));\n    \n    // Interpolate between black and white with the smoothstep value\n    vec3 baseColor = checkerSum == 0.0 ? color1 : color2;\n    vec3 oppositeColor = checkerSum == 0.0 ? color2 : color1;\n\n    // Use the smooth transition to blend between colors\n    return mix(baseColor, oppositeColor, blend);\n  }\n\n  float sphereGrid(vec3 position, float scale, float edgeWidth) {\n    // Scale the position to control the size of the checker cubes\n    vec3 scaledPos = position / scale;\n\n    // Get the integer part (checker grid location)\n    vec3 checkerPos = floor(scaledPos);\n\n    // Get the fractional part (inside each cube)\n    vec3 fractPos = fract(scaledPos);\n\n    vec3 p = fractPos - 0.5;\n    float alpha = 1.0 - length(p) * 2.0;\n\n    return smoothstep(0.0, edgeWidth, alpha - 0.1);    \n  }\n\n  void main() {\n    vec3 p = vWorldNormal * 0.33;\n    float n1 = snoise(p * 6.0 * 0.2 + 0.2);\n    float n2 = snoise(p * 20.0 + 10.1);\n    float n3 = snoise(p * 40.0 + 10.1);\n    float n4 = snoise(p * 1400.0 + 13.1);\n    float n = n1 * 0.5;\n    n += pow(fract((n1 + n2 * 0.015 + n3 * 0.01 + n4 * 0.005) * 85.0), 4.0) * 0.5;\n    n += pow(fract((n1 + n2 * 0.015) * 85.0), 4.0) * 0.25;\n    n += n4 * 0.2;\n    n += 0.8;\n    n = pow(n, 0.3);\n    float alpha = n;\n\n    gl_FragColor.rgb = mix(").concat(D(b.white),", ").concat(D(b.brightSkin),", alpha);\n    gl_FragColor.a = 1.0;\n\n    // float x = sphereGrid(vPosition, 1.0, 0.01);\n    // gl_FragColor.rgb = mix(").concat(D(b.black),", ").concat(D(b.brightSkin),", x);\n    // gl_FragColor.rgb = checker3(vPosition, 1.0, 0.1, ").concat(D(b.black),", ").concat(D(b.brightSkin),");\n  }\n");class j extends s.eaF{constructor({debug:e=!1}={}){super(new s.WBB(5.5,12),new s.BKk({depthWrite:!1,side:s.hsX,vertexShader:"\n  varying vec3 vWorldNormal;\n  varying vec3 vPosition;\n\n  vec3 rotate(mat4 m, vec3 v) {\n    return vec3(\n      dot(v, vec3(m[0][0], m[1][0], m[2][0])),  // X component\n      dot(v, vec3(m[0][1], m[1][1], m[2][1])),  // Y component\n      dot(v, vec3(m[0][2], m[1][2], m[2][2]))   // Z component\n    );\n  }\n\n  void main() {\n    vPosition = position;\n    vWorldNormal = normalize(rotate(modelMatrix, position));\n\n    // gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    // Ignore the position, we only need the normal:\n    gl_Position = projectionMatrix * vec4(rotate(modelViewMatrix, position), 1.0);\n  }\n",fragmentShader:O,uniforms:{}})),e&&(this.material=new s.V9B({depthWrite:!1,color:"white",wireframe:!0})),this.onBeforeRender=(e,t,n,i,r,a)=>{this.position.copy(n.position)},this.renderOrder=-1,this.frustumCulled=!1,this.name="a-sky"}}var E=n(8144);class _ extends s.eaF{constructor(e){let{radius:t,...n}={..._.defaultProps,...e},i=new s.WBB(t,18),r=new s.uSd({});r.onBeforeCompile=e=>l.b.with(e).defines({USE_UV:""}).fragment.top(y).fragment.after("map_fragment","\n        vec2 p = vUv - 0.5;\n        float alpha = easeInOut(vUv.y, 1.6, 0.5);\n        Vec3Ramp r = ramp(alpha, ".concat((0,l.e)(b.black),", ").concat((0,l.e)(b.white),", ").concat((0,l.e)(b.yellow),");\n        diffuseColor.rgb = mix(r.a, r.b, easeInOut3(r.t));\n      ")),super(i,r),(0,c.N)(this,n)}}_.defaultProps={radius:1};class I{set(e){this.props={...this.props,...e},this.props.center=this.props.center.clone(),this.props.normal=this.props.normal.clone().normalize(),this.props.binormal=this.props.binormal.clone().normalize()}update(e){let{radius:t,turnVelocity:n,turn:i,center:r,normal:a,binormal:s}=this.props,o=i+n*e;this.props.turn=o;let l=Math.cos(o*Math.PI*2),c=Math.sin(o*Math.PI*2);this.target.position.copy(r).addScaledVector(a,t*l).addScaledVector(s,t*c)}constructor(e,t){this.target=e,this.set({...I.defaultProps,...t})}}I.defaultProps={center:new s.Pq0,normal:new s.Pq0(1,0,0),binormal:new s.Pq0(0,1,0),radius:1,turnVelocity:1,turn:0};class B extends s.eaF{get satellite(){var e;return null!=(e=this._satellite)?e:this._satellite=new I(this)}constructor(e){let{radius:t,singleColor:n,emmissiveIntensity:i,lerpIn:r,lerpOut:a,...o}={...B.defaultProps,...e},{colorTop:u=null!=n?n:B.defaultProps.colorTop,colorBottom:h=null!=n?n:B.defaultProps.colorBottom}={...e},p=new s.WBB(t,12),f=new s.uSd({color:u,emissive:h});f.onBeforeCompile=e=>{l.b.with(e).defines({USE_UV:""}).uniforms({uLerpIn:{value:r},uLerpOut:{value:a},uColorTop:{value:new s.Q1f(u)},uColorBottom:{value:new s.Q1f(h)}}).fragment.top(d.I,E.H).fragment.mainBeforeAll("\n          float alpha = inverseLerp(uLerpIn, uLerpOut, vUv.y);\n          vec3 sphereColor = mix(uColorBottom, uColorTop, easeInOut3(alpha));\n        ").fragment.after("map_fragment","\n          diffuseColor.rgb = sphereColor;\n        ").fragment.after("emissivemap_fragment","\n          totalEmissiveRadiance.rgb = sphereColor * ".concat(i.toFixed(2),";\n        "))},super(p,f),this._satellite=null,(0,c.N)(this,o)}}B.defaultProps={radius:.225,singleColor:null,colorTop:b.white,colorBottom:b.yellow,emmissiveIntensity:.25,lerpIn:-.2,lerpOut:1.2};class R extends s.eaF{constructor(e){let t=new s.WBB(.4,12),n=new s.uSd({});n.onBeforeCompile=e=>l.b.with(e).varying({vWorldPosition:"vec3",vNormalWorld:"vec3",vViewDir:"vec3"}).vertex.mainAfterAll("\n        vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n        vNormalWorld = normalize(mat3(modelMatrix) * normal);\n        vViewDir = normalize(cameraPosition - vWorldPosition);\n      ").fragment.top(d.I,"\n\nfloat contrast(float mValue, float mScale, float mMidPoint) {\n	// Why clamp? If necessary, it has to be done outside of this function.\n	// return clamp((mValue - mMidPoint) * mScale + mMidPoint, 0.0, 1.0);\n	return (mValue - mMidPoint) * mScale + mMidPoint;\n}\n\nfloat contrast(float mValue, float mScale) {\n	return contrast(mValue, mScale, 0.5);\n}\n\nvec3 contrast(vec3 mValue, float mScale, float mMidPoint) {\n	return vec3(contrast(mValue.r, mScale, mMidPoint), contrast(mValue.g, mScale, mMidPoint), contrast(mValue.b, mScale, mMidPoint));\n}\n\nvec3 contrast(vec3 mValue, float mScale) {\n	return contrast(mValue, mScale, 0.5);\n}\n\nfloat greyscaleFloat(vec3 color) {\n	return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nvec3 greyscale(vec3 color) {\n    return vec3(greyscaleFloat(color));\n}\n\nvec3 greyscale(vec3 color, float alpha) {\n    return mix(color, greyscale(color), alpha);\n}\n\n").fragment.after("map_fragment","\n        float fresnel = dot(vNormalWorld, vViewDir);\n        vec3 inner = ".concat((0,l.e)(b.white),";\n        vec3 outer = ").concat((0,l.e)(b.black),";\n        float alpha = easeInOut(1.0 - pow(fresnel, 1.5), 2.0, 0.0);\n        diffuseColor.rgb = mix(inner, outer, alpha);\n      ")).fragment.mainAfterAll("\n        // Final tuning\n        gl_FragColor.rgb = mix(contrast(greyscale(gl_FragColor.rgb), 1.5), diffuseColor.rgb, alpha);\n      "),super(t,n),(0,c.N)(this,e)}}class L extends s.eaF{constructor(e){let{color:t,thickness:n,length:i,shaded:r,...a}={...L.defaultProps,...e};super(new s.Ho_(n/2,n/2,i,12,1).rotateZ(.5*Math.PI),r?new s.uSd({color:t}):new s.V9B({color:t})),(0,c.N)(this,a)}}function k(e,t){return t.add(e),e}function*N(e,t){let n=yield*function*(e){let{ticker:t,scene:n}=e;t.set({activeDuration:p.$.development?3:180}),v("https://threejs.org/examples/textures/equirectangular/royal_esplanade_1k.hdr").then(t=>{new o.PMREMGenerator(e.renderer).fromEquirectangular(t).texture});let i=new s.YJl;return n.add(i),yield()=>{i.removeFromParent()},i}(e);if(1===t.renderCount){let{camera:t}=e;t.fov=e.aspect>1?25:180*(2*Math.atan(Math.tan(25*Math.PI/180/2)/e.aspect))/Math.PI,t.far=1e3,t.updateProjectionMatrix(),t.position.set(0,0,10)}n.add(new j),n.add(new T);let i=k(new _,n);n.add(new C({z:-1,radius:1.4,innerRadiusRatio:.805})),n.add(new S({z:-1,radius:.75,thickness:.01,color:b.yellow,emissiveIntensity:1})),n.add(new S({z:-1,radius:.8,thickness:.01,color:b.notSoWhite})),h.c.seed(6789402);let r=h.c.createPicker([[1,4],[2,2],[4,1]]);for(let{i:t}of function*(e){let t=0,n={get i(){return t},get t(){return t/8},get count(){return 8}};for(;t<e;t++)yield n}(8)){let i=h.c.pick(b),a=h.c.pick(b),o=new B({z:-1,radius:.1*r(),colorTop:i,colorBottom:a});o.rotation.set(h.c.between(2*Math.PI),h.c.between(2*Math.PI),h.c.between(2*Math.PI)),n.add(o),o.satellite.set({radius:0===t?.875:h.c.between(.25,.75)*(0,u.lerp)(1,1.5,t),center:new s.Pq0(0,0,-1-.4*t),turnVelocity:h.c.between(.05,.25)}),yield e.ticker.onTick(e=>{o.satellite.update(e.deltaTime)})}let a=new s.YJl;a.rotation.z=-.25*Math.PI,n.add(a),a.add(new B({x:-1.5,z:.5,singleColor:b.yellow})),a.add(new S({x:-1.81,radius:.1,thickness:.01,color:b.notSoWhite}));let l=k(new S({x:-2.315,radius:.2,thickness:.01,color:b.notSoWhite}),a);k(new L({x:-.2,thickness:.01,length:.4,shaded:!0,color:b.notSoWhite}),l),a.add(new B({x:1.7,z:.5,lerpIn:0,lerpOut:1})),a.add(new B({x:1.4,radius:.1,singleColor:b.black}));let d=k(new R({x:2.3}),a);k(new S({radius:.43,thickness:.015,color:b.black}),d),a.add(new L({x:1.5,thickness:.015,color:b.black}));let f=new s.YJl;f.rotation.z=.25*Math.PI,n.add(f),f.add(new L({x:-1.6,thickness:.01,length:.35,shaded:!0,color:b.notSoWhite})),f.add(new L({x:1.6,thickness:.01,length:.35,shaded:!0,color:b.notSoWhite}));let m=new s.YJl;m.rotation.y=.5*Math.PI,n.add(m),m.add(new L({x:-1.2,thickness:.01,length:.35,shaded:!0,color:b.notSoWhite})),m.add(new L({x:1.2,thickness:.01,length:.35,shaded:!0,color:b.notSoWhite})),(function(e){let t=e.split(".").pop();switch(t){case"hdr":return v(e);case"exr":return new Promise(t=>{g.load(e,e=>{t(e)})});default:return Promise.reject("Unsupported texture format: ".concat(t))}})("https://threejs.org/examples/textures/piz_compressed.exr").then(e=>{e.mapping=s.wfO,d.material.envMap=e,d.material.envMapIntensity=.25,d.material.envMapRotation.set(-.1*Math.PI,Math.PI,0),d.material.roughness=.3,d.material.metalness=.5,d.material.needsUpdate=!0,i.material.envMap=e,i.material.roughness=.2,i.material.envMapIntensity=.5,i.material.envMapRotation.set(-.1*Math.PI,Math.PI,0),i.material.needsUpdate=!0});let x=k(new s.YJl,n);x.rotation.z=.25*Math.PI;class w extends s.YJl{constructor(e){super();{let e=new s.Ho_(15,15,5,6,1,!0).rotateY(Math.PI/6),t=new s.uSd({color:new s.Q1f("white").lerp(b.black,.995),side:s.hsX,flatShading:!0});k(new s.eaF(e,t),this)}{let e=new s.Ho_(15,15,5,6,60,!0).rotateY(Math.PI/6),t=new s.uSd({color:b.black,wireframe:!0,flatShading:!0,side:s.hsX});k(new s.eaF(e,t),this)}(0,c.N)(this,e)}}k(new w({y:7.8}),x),k(new w({y:-7.8}),x)}function U(){return(0,i.jsx)("div",{className:"absolute-through",children:(0,i.jsx)(r.Q,{className:"bg-[#ddd]",children:(0,i.jsx)(a.yb,{children:(0,i.jsx)(a.YJ,{fn:N})})})})}L.defaultProps={color:b.black,thickness:.01,shaded:!1,length:1}},37821:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var i=n(67203);function r(){let[e,t]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{t(!0)},[]),e}},40515:(e,t,n)=>{"use strict";n.d(t,{Client:()=>I});var i=n(70691),r=n(33855),a=n(888);n(86146);var s=n(62517),o=n(49797),l=n(57165),c=n(7587),d=n(17099),u=n(36508);let h=function(e,t){let{h:n=.3,w:i=1,p:r=3,q:a=1,a:s=.3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t**a;e.x=(t+s*Math.sin(o*Math.PI*2))*i,e.y=n*Math.pow(Math.sin(o*Math.PI),r)},p="\nvec2 looping(float t, float h, float w, float p, float q, float a) {\n  float t2 = pow(t, q);\n  return vec2(\n    (t + a * sin(t2 * PI * 2.0)) * w,\n    h * pow(sin(t2 * PI), p)\n  );\n}\n\nvec2 looping(float t) {\n  return looping(t, 0.3, 1.0, 3.0, 1.0, 0.3);\n}\n";function f(){let e=(0,a._)(["x(t) = w cdot left( t + a cdot sin(2 pi cdot t^q) \right)"],["x(t) = w \\cdot \\left( t + a \\cdot \\sin(2 \\pi \\cdot t^q) \\right)"]);return f=function(){return e},e}function m(){let e=(0,a._)(["y(t) = h cdot left( sin(pi cdot t^q) \right)^p"],["y(t) = h \\cdot \\left( \\sin(\\pi \\cdot t^q) \\right)^p"]);return m=function(){return e},e}let v=(()=>{let e=new o.I9Y;return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Array.from({length:n+1},(i,r)=>(t(e,r/n),"".concat(e.x.toFixed(5),",").concat(e.y.toFixed(5)))).join(" ")}})();function g(){let{samples:e=300,curve:t=(e,t)=>{e.x=t,e.y=t},color:n="#fff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=v(t,e),{ref:a}=(0,c.C7)(function*(e){let n=new o.I9Y;console.log("foo"),yield u.Rv.get("three").onTick(i=>{t(n,.5*i.time%1),e.setAttribute("cx",n.x.toFixed(5)),e.setAttribute("cy",n.y.toFixed(5))})},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("polyline",{stroke:n,points:r,opacity:.25}),(0,i.jsx)("circle",{ref:a,cx:0,cy:0,r:.005,fill:n,stroke:"none"})]})}function x(){return(0,i.jsxs)("div",{className:"absolute inset-0 text-sm p-4 pt-12",children:[(0,i.jsx)(s.BlockMath,{math:String.raw(f())}),(0,i.jsx)(s.BlockMath,{math:String.raw(m())})]})}function w(){(0,c.C7)(function*(){yield(0,l.O)(u.Rv.current().requestActivation)},[]);let e=new o.I9Y(.5,.5),t=new o.I9Y(1,1),n="".concat(e.x-t.x/2-.05," ").concat(e.y-t.y/2-.05," ").concat(t.x+.1," ").concat(t.y+.1);return d.c.reset(),(0,i.jsxs)("div",{className:"relative self-start",children:[(0,i.jsx)(x,{}),(0,i.jsx)("svg",{viewBox:n,width:400,style:{border:"1px solid #fff3",borderRadius:".25em"},children:(0,i.jsxs)("g",{transform:"scale(1, -1) translate(0, -1)",children:[(0,i.jsxs)("g",{stroke:"#fff2",strokeWidth:.002,children:[(0,i.jsx)("line",{x1:-10,x2:10}),(0,i.jsx)("line",{y1:-10,y2:10}),(0,i.jsx)("line",{x1:1,x2:1,y1:-10,y2:10}),(0,i.jsx)("line",{x1:-10,x2:10,y1:1,y2:1})]}),(0,i.jsxs)("g",{id:"curves",stroke:"#fff",fill:"none",strokeWidth:.002,children:[Array.from({length:10},(e,t)=>{let n=d.c.between(3,5),r=d.c.between(1/3,1.5),a=d.c.between(.1,.5),s=d.c.between(.2,.3),o="hsl(".concat(d.c.between(180,360),", 100%, 70%)");return(0,i.jsx)(g,{curve:(e,t)=>h(e,t,{a:s,p:n,h:a,q:r}),color:o},t)}),(0,i.jsx)(g,{curve:h})]})]})})]})}var y=n(10937),b=n(9723),P=n(60041),M=n(87381),S=n(22899);class C extends o.eaF{constructor(){super(new y.k({xColor:"#ff338b",yColor:"#33cc9c",zColor:"#4e33ff"}),new b.Y)}}class z extends o.B69{constructor(){super(),this.axes1=(0,M.DN)(new C,this),this.axes2=(0,M.DN)(new C,this),this.onTick=e=>{let{deltaTime:t}=e,{axes1:n,axes2:i}=this;n.rotation.y+=.5*t,i.rotation.x+=.5*t};let{axes1:e,axes2:t}=this;e.position.set(-1,0,0),e.rotation.x=-Math.PI/2,t.position.set(1,0,0),t.rotation.x=-Math.PI/2;let n=new o.bdM(1,1,1e3,1).translate(.5,.5,0),i=new o.uSd({side:o.$EB,flatShading:!0,emissiveIntensity:.25,emissive:"#ffffff"});(0,M.DN)(new o.eaF(n,i),this);let r={uTime:u.Rv.get("three").uTime,uWidth:{value:.6},uStartMatrix:{value:e.matrix},uEndMatrix:{value:t.matrix}};i.onBeforeCompile=e=>P.b.with(e).uniforms(r).vertex.top(S.I,p).vertex.top("\n        vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          vec3 ab = mix(a, b, t);\n          vec3 bc = mix(b, c, t);\n          vec3 cd = mix(c, d, t);  \n          vec3 ab_bc = mix(ab, bc, t);\n          vec3 bc_cd = mix(bc, cd, t);\n          return mix(ab_bc, bc_cd, t);\n        }\n\n        vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          return 3.0 * ( \n            (1.0 - t) * (1.0 - t) * (b - a) + \n            2.0 * (1.0 - t) * t * (c - b) + \n            t * t * (d - c));\n        }\n      ").vertex.replace("begin_vertex","\n        vec3 start = uStartMatrix[3].xyz;\n        vec3 end = uEndMatrix[3].xyz;\n\n        vec3 p0 = start;\n        vec3 p1 = mix(start, end, 0.0) + uStartMatrix[2].xyz;\n        vec3 p2 = mix(start, end, 1.0) + uEndMatrix[2].xyz;\n        vec3 p3 = end;\n\n        vec3 up = mix(uStartMatrix[1].xyz, uEndMatrix[1].xyz, position.x);\n        vec3 tangent = bezier3_tangent(p0, p1, p2, p3, position.x);\n        vec3 normal = cross(tangent, up);\n\n        float width = (position.y - 0.5)\n          // * easeInThenOut(position.x, 3.0)\n          * uWidth;\n\n        vec2 loop = looping(position.x);\n\n        vec3 transformed = \n          bezier3(p0, p1, p2, p3, position.x)\n          + tangent * (loop.x - position.x) * 2.0 + normal * loop.y * 2.0\n          + up * width;\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4( transformed, 1.0 );\n        #ifdef USE_BATCHING\n          mvPosition = batchingMatrix * mvPosition;\n        #endif\n        #ifdef USE_INSTANCING\n          mvPosition = instanceMatrix * mvPosition;\n        #endif\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;\n      ")}}var T=n(38921);function D(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=Array.isArray(t)?t.map(e=>new o.Q1f(e)):[new o.Q1f(t)],s=e.attributes.position.count,l=null!=(n=e.attributes.color)?n:function(){let t=new o.THS(new Float32Array(3*s),3);return e.setAttribute("color",t),t}(),c=r<0?s:r;if(1===a.length){let{r:e,g:t,b:n}=a[0];for(let r=i;r<c;r++)l.setXYZ(r,e,t,n)}else for(let e=i;e<c;e++){let{r:t,g:n,b:i}=a[e%a.length];l.setXYZ(e,t,n,i)}l.needsUpdate=!0}let A=(()=>{let e=new o.Pq0(0,1,0),t=new o.Pq0(0,0,-1),n=new o.Pq0,i=new o.Pq0,r=new o.Pq0;return function(a,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;i.crossVectors(o,s),1e-6>i.lengthSq()&&i.crossVectors(t,s),i.normalize(),r.crossVectors(s,i).normalize(),a.set(i.x,r.x,s.x,l.x,i.y,r.y,s.y,l.y,i.z,r.z,s.z,l.z,0,0,0,1)}})();var O=n(8144);class j extends o.ZLX{static getGeometry(){if(j._geometry)return j._geometry;let e=new o.qU7(.05,1,1,6).rotateZ(Math.PI/2).translate(.5,0,0);D(e,"#c60613");let t=e.clone().rotateZ(Math.PI/2);D(t,"#01b35a");let n=e.clone().rotateY(-Math.PI/2);return D(n,"#321bc7"),j._geometry=(0,T.pP)([e,t,n]),j._geometry}static getMaterial(){return j._material||(j._material=new o.V9B({vertexColors:!0}),j._material.onBeforeCompile=e=>P.b.with(e).uniforms(j.uniforms).vertex.replace("begin_vertex","\n        vec3 transformed = vec3(position);\n        transformed *= uSize;\n        #ifdef USE_ALPHAHASH\n          vPosition = vec3(position);\n        #endif\n      ")),j._material}addTo(e){return e.add(this),this}constructor(e,t=.1){super(j.getGeometry(),j.getMaterial(),e.count),this.instanceMatrix=e,this.size=t,this.onBeforeRender=()=>{j.uniforms.uSize.value=this.size}}}j.uniforms={uSize:{value:.1}};class E extends o.YJl{constructor(){var e,t;super(),d.c.reset();let n=new o.dth("#ffffff","#926969",1);this.add(n);let i=new o.ZyN("#ffffff",2);this.add(i),i.position.set(2,4,1);let r=new o.WBB(1,8),a=r.clone(),s=new o.ONl(r,new o.BH$({size:.05}));this.add(s);let l=new o.ONl(a,new o.BH$({size:.05}));this.add(l),l.scale.setScalar(.33),l.position.set(0,0,-8),l.rotation.set(0,0,.66*Math.PI),this.onTick=e=>{let{deltaTime:t,time:n}=e;l.position.y=.5*Math.sin(.33*n)};let c=r.attributes.position.count,h=new o.ZLX(new o.bdM(1,1,100,1).translate(.5,.5,0),new o.uSd({side:o.$EB,flatShading:!0}),c);this.add(h),h.frustumCulled=!1;let f=new o.uWO(new Float32Array(16*c),16),m=new o.uWO(new Float32Array(16*c),16);h.geometry.setAttribute("aStartMat",f),h.geometry.setAttribute("aEndMat",m);let v=new o.kn4,g=new o.Pq0(0,1,0),x=new o.Pq0,w=new o.Pq0,y=new o.Q1f;for(let e=0;e<c;e++)x.fromBufferAttribute(r.attributes.position,e),w.copy(x),A(v,w,g,x),v.toArray(f.array,16*e),x.fromBufferAttribute(a.attributes.position,e),A(v,w,g,x),v.toArray(m.array,16*e),y.set("hsl(".concat(d.c.between(180,360),", 100%, 70%)")),h.setColorAt(e,y);let b={uTime:u.Rv.get("three").uTime,uLength:{value:.1},uRand:{value:d.c.vector(new o.IUQ,{min:0,max:1})},uWorldStartMatrix:{value:s.matrix},uWorldEndMatrix:{value:l.matrix},uWidth:{value:.1}};h.material.onBeforeCompile=e=>P.b.with(e).shaderName("with-loop").uniforms(b).vertex.top(O.H,S.I,p).vertex.top("\n      attribute mat4 aStartMat;\n      attribute mat4 aEndMat;\n\n      float rand(vec3 p) {\n        return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n      }\n\n      // float rand(vec3 p) {\n      //   p = fract(p * vec3(443.8975, 441.4236, 437.1954));\n      //   p += dot(p, p.yzx + 19.19);\n      //   return fract((p.x + p.y) * p.z);\n      // }\n\n      float rand(vec3 p, float rangeMin, float rangeMax) {\n        return mix(rangeMin, rangeMax, rand(p));\n      }\n\n      float rand11(vec3 p) {\n        float r = rand(p) * 2.0 - 1.0;\n        float s = sign(r);\n        r = fract(r);\n        r *= r * r * r;\n        return r * s;\n      }\n\n      float rand11(vec3 p, float rangeMin, float rangeMax) {\n        return (rand11(p) * 0.5 + 0.5) * (rangeMax - rangeMin) + rangeMin;\n      }\n\n      vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        vec3 ab = mix(a, b, t);\n        vec3 bc = mix(b, c, t);\n        vec3 cd = mix(c, d, t);  \n        vec3 ab_bc = mix(ab, bc, t);\n        vec3 bc_cd = mix(bc, cd, t);\n        return mix(ab_bc, bc_cd, t);\n      }\n\n      vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        return 3.0 * ( \n          (1.0 - t) * (1.0 - t) * (b - a) + \n          2.0 * (1.0 - t) * t * (c - b) + \n          t * t * (d - c));\n      }\n    ").vertex.replace("begin_vertex","\n      mat4 startMat = uWorldStartMatrix * aStartMat;\n      mat4 endMat = uWorldEndMatrix * aEndMat;\n\n      vec3 start = startMat[3].xyz;\n      vec3 end = endMat[3].xyz;\n\n      start += vec3(rand11(start.xyz), rand11(start.yzx), rand11(start.zxy)) * 0.66;\n      end += vec3(rand11(start.zyx), rand11(start.xzy), rand11(start.yxz)) * 0.33;\n      \n      float dt = mix(-uLength, 1.0, fract(uTime * 0.33 + rand11(start) * 0.4));\n      float t = position.x * uLength + dt;\n      t = clamp(t, 0.0, 1.0);\n      float d = distance(start, end);\n\n      vec3 p0 = start;\n      vec3 p1 = mix(start, end, 0.2) + d * 0.2 * startMat[2].xyz;\n      vec3 p2 = mix(start, end, 0.8) + d * 0.2 * endMat[2].xyz;\n      vec3 p3 = end;\n      \n      // p1 = mix(start, end, 0.33);\n      // p2 = mix(start, end, 0.66);\n\n      vec3 normal = normalize(mix(startMat[2].xyz, endMat[2].xyz, t));\n      vec3 up = normalize(mix(startMat[1].xyz, endMat[1].xyz, t));\n      vec3 tangent = normalize(bezier3_tangent(p0, p1, p2, p3, t));\n      \n      float shortT = (t - dt) / uLength;\n      float width = (position.y - 0.5)\n        * easeInThenOut(t, 6.0)\n        * easeInThenOut(shortT, 3.0)\n        * mix(0.33, 1.0, pcurve(t, 1.0, 2.0)) // Narrower at the end.\n        * uWidth;\n      \n      float randomness = 0.2;\n      float startLoopT = rand(start) * randomness;\n      float loopT = startLoopT + inverseLerp(0.0, 1.0 - randomness, t);\n\n      vec2 loop = looping(loopT, 0.3, 1.0, 3.0, rand11(start, 0.6, 1.2), 0.3);\n      // loop = vec2(t, 0.0);\n      \n      // Loop Random Scalar:\n      vec2 lrs = vec2(\n        rand11(start, 0.4, 1.0),\n        rand11(start.zyx, 0.9, 1.1));\n      vec3 transformed = \n        bezier3(p0, p1, p2, p3, t)\n        + tangent * (loop.x - loopT) * d * lrs.x + normal * loop.y * d * lrs.y\n        + up * width;\n      \n      #ifdef USE_ALPHAHASH\n        vPosition = transformed;\n      #endif\n    ").vertex.replace("beginnormal_vertex","\n      vec3 objectNormal = vec3(normal);\n\n      #ifdef USE_TANGENT\n        vec3 objectTangent = vec3(tangent.xyz);\n      #endif\n    "),r.computeBoundingBox(),r.computeBoundingSphere(),a.computeBoundingBox(),a.computeBoundingSphere(),h.computeBoundingBox(),null==(e=h.boundingBox)||e.copy(r.boundingBox.clone()).union(a.boundingBox).expandByScalar(1),h.computeBoundingSphere(),null==(t=h.boundingSphere)||t.copy(r.boundingSphere.clone()).union(a.boundingSphere).expandByPoint(new o.Pq0().setScalar(1)),h.geometry.computeBoundingBox=()=>{},h.geometry.computeBoundingSphere=()=>{},s.visible=!1,l.visible=!1}}function _(){return(0,r.dB)("ThreeDemo",async function*(e,t){t.useOrbitControls({position:[2,4.5,8],target:[-1.2,1.2,-.2]}),e.add(new o.fTw(10,10,"#5c4f7d","#352945"));let n=new z;n.position.set(-5,0,0),yield t.onTick(n.onTick),e.add(n);let i=new E;i.position.set(0,0,0),yield t.onTick(i.onTick),e.add(i)},[]),null}function I(){return(0,i.jsxs)("div",{className:"absolute-through p-4 flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"absolute-through",children:(0,i.jsx)(r.uB,{children:(0,i.jsx)(_,{})})}),(0,i.jsx)("h1",{className:"text-4xl",children:"Path with loop"}),(0,i.jsx)(w,{})]})}},43340:(e,t,n)=>{"use strict";n.d(t,{g:()=>u});var i,r=n(28535),a=n(76999),s=n(57368),o=n(49797),l=n(61567);!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(i||(i={}));class c{copy(e){return this.buttons=e.buttons,this.clientPosition.copy(e.clientPosition),this.screenPosition.copy(e.screenPosition),this}diff(e,t){return this.buttons=e.buttons^t.buttons,this.clientPosition.subVectors(e.clientPosition,t.clientPosition),this.screenPosition.subVectors(e.screenPosition,t.screenPosition),this}constructor(){this.buttons=0,this.clientPosition=new o.I9Y,this.screenPosition=new o.I9Y}}var d=new WeakMap;class u{get buttons(){return this.state.buttons}buttonDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Left;return(this.state.buttons&1<<e)!=0}buttonDownOld(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Left;return(this.stateOld.buttons&1<<e)!=0}buttonDownEnter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Left;return this.buttonDown(e)&&!this.buttonDownOld(e)}buttonDownExit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Left;return!this.buttonDown(e)&&this.buttonDownOld(e)}buttonTap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Left,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return!1!==this.buttonDownExit(e)&&this.upTimes.get(e)-this.downTimes.get(e)<t}get clientPosition(){return this.state.clientPosition}get screenPosition(){return this.state.screenPosition}get ray(){return this.raycaster.ray}intersectPlane(e){let{distance:t=1e3,out:n=(0,r._)(this,d).result.point}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ray:i}=this.raycaster,{point:a,line:s,result:o,plane:l}=(0,r._)(this,d);if("string"==typeof e)switch(l.constant=0,e){case"X":l.normal.set(1,0,0);break;case"Y":l.normal.set(0,1,0);break;case"Z":l.normal.set(0,0,1)}else l.copy(e);return s.set(i.origin,a.copy(i.origin).addScaledVector(i.direction,t)),o.intersected=!!l.intersectLine(s,n),o}updatePosition(e,t,n){let{x:i,y:r}=t,a=(i-n.x)/n.width*2-1,s=-((r-n.y)/n.height*2)+1;this.camera=e,this.clientPosition.set(i,r),this.screenPosition.set(a,s),this.raycaster.setFromCamera(this.screenPosition,e)}raycastScene(e){let t=[];e.traverse(e=>{!0!==e.userData.ignorePointer&&(!1!==e.visible&&!0!==e.userData.helper||!0===e.userData.pointerArea)&&(0,l.uW)(e)&&this.raycaster.intersectObject(e,!1,t)}),t.sort((e,t)=>e.distance-t.distance);let[n]=t;if(n){var i,r;let e=null!=(r=n.object.userData.onPointerTap)?r:n.object.userData.pointerArea&&(null==(i=n.object.parent)?void 0:i.userData.onPointerTap);e&&this.buttonTap()&&e()}}update(e){this.diffState.diff(this.state,this.stateOld),this.raycastScene(e)}updateEnd(){this.stateOld.copy(this.state),this.event.reset()}initialize(e,t,n,i){let r=t=>{let i=e.getBoundingClientRect(),{clientX:r,clientY:a}=t;this.updatePosition(n,{x:r,y:a},i)},a=e=>{r(e)},s=e=>{r(e),this.state.buttons|=1<<e.button,this.downTimes.set(e.button,i.time)},o=e=>{this.state.buttons&=~(1<<e.button),this.upTimes.set(e.button,i.time)};return t.addEventListener("pointermove",a),t.addEventListener("pointerdown",s),t.addEventListener("pointerup",o),()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerdown",s),t.removeEventListener("pointerup",o)}}constructor(){(0,a._)(this,d,{writable:!0,value:void 0}),this.state=new c,this.stateOld=new c,this.diffState=new c,this.downTimes=new Map,this.upTimes=new Map,this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.raycaster=new o.tBo,(0,s._)(this,d,{plane:new o.Zcv,point:new o.Pq0,line:new o.cZY,result:{intersected:!1,point:new o.Pq0}})}}},52753:(e,t,n)=>{"use strict";n.d(t,{Client:()=>M});var i=n(70691),r=n(57165),a=n(7587),s=n(36508),o=n(67203),l=n(36575),c=n(42206),d=n(85795),u=n(56905);class h{paint(e){let{ctx:t,pixelRatio:n}=this;t.clearRect(0,0,t.canvas.width,t.canvas.height),e.computeLayout();let i=e=>{let t=0;for(let n of e.allAncestors({includeSelf:!0}))t+=n.positioning===u.EU.Detached?100:1;return t};for(let r of[...e.allDescendants({includeSelf:!1})].filter(e=>!e.userData.skipPaint).sort((e,t)=>i(e)-i(t))){let e=r.rect.clone().multiplyScalar(n),i=function(e){let t;for(;!t&&e;){if(void 0!==(t=e.userData.color))return t;e=e.parent}return"#ffffff"}(r);r.userData.plain?(t.strokeStyle="",t.fillStyle=i,t.fillRect(e.x,e.y,e.width,e.height)):(t.lineWidth=2*n,t.strokeStyle=i,t.fillStyle="rgba(0, 0, 0, .5)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height))}}constructor(e,{pixelRatio:t=window.devicePixelRatio,width:n=800,height:i=600}={}){e.width=n*t,e.height=i*t,e.style.width="".concat(n,"px"),e.style.height="".concat(i,"px"),this.ctx=e.getContext("2d"),this.pixelRatio=t,this.width=n,this.height=i}}let p={yellow:"#ffcc00",magenta:"#cc00ff",paleGreen:"#00ffcc",blue:"#00ccff",vibrantBlue:"#1c55ff"},f=[{direction:c.OP.Horizontal,aspect:1},{direction:c.OP.Vertical,aspect:2},{direction:c.OP.Vertical,aspect:8},{direction:c.OP.Vertical,aspect:.5},{direction:c.OP.Horizontal,aspect:.5},{direction:c.OP.Horizontal,aspect:1/4}];function m(){let e=(0,o.useMemo)(()=>new d.ObservableNumber(0),[]),{ref:t}=(0,a.C7)(function*(t){let n=new h(t.querySelector("canvas")),{direction:i,aspect:r}=f[e.value],a=new c.$x({direction:i,size:[n.width,n.height],spacing:10,alignChildren:1}).add(new c.$x({alignChildren:.5,aspect:r,spacing:10,userData:{color:p.yellow}}).add(new c.$x({size:["50%","50%"]}),new c.$x({size:["10%","10%"]})),new c.$x({aspect:r,spacing:10,userData:{color:p.paleGreen}}).add(new c.$x,new c.$x),new c.$x({aspect:r,userData:{color:p.magenta}}));yield e.onChange(e=>{let{direction:t,aspect:n}=f[e];for(let e of(a.set({direction:t}),a.children))e.set({aspect:n})}),yield(0,s.xy)("layout",e=>{a.set({alignChildren:e.cos01Time({frequency:.1})}),a.get(2).set({alignSelf:e.cos01Time({frequency:.3})}),n.paint(a)})},[]),n=()=>{e.value=(e.value+1)%f.length};return(0,i.jsxs)("div",{ref:t,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1",cursor:"pointer"},onClick:n}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("button",{className:"border border-white rounded px-2 py-1",onClick:n,children:[(0,i.jsxs)("span",{children:["Direction: ",c.OP[f[(0,l.A)(e)].direction],","]}),"\xa0",(0,i.jsxs)("span",{children:["Aspect: ",f[(0,l.A)(e)].aspect]})]})}),(0,i.jsxs)("p",{style:{color:p.magenta},children:[(0,i.jsx)("code",{children:"alignSelf"})," allows the children to override the parent's ",(0,i.jsx)("code",{children:"alignChildren"}),"."]})]})]})}function v(){let{ref:e}=(0,a.C7)(function*(e){let t=e.querySelector("canvas"),n=new c.$x({direction:c.OP.Horizontal,offset:[100,100],size:[600,400],padding:10,gap:10,userData:{color:p.yellow}});n.add(new c.$x({direction:c.OP.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:p.vibrantBlue}}),new c.$x({direction:c.OP.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:p.vibrantBlue}}),new c.$x({direction:c.OP.Vertical,size:[".25rel","1rel"],spacing:10,userData:{color:p.vibrantBlue}}));for(let e=0;e<3;e++)n.get(0).add(new c.$x({size:"".concat(e+1,"fr"),spacing:10,userData:{color:p.paleGreen}}));n.computeLayout();let i=window.devicePixelRatio;t.width=800*i,t.height=600*i,t.style.width="800px",t.style.height="600px";let r=t.getContext("2d");for(let e of n.allDescendants({includeSelf:!0})){var a;r.lineWidth=2*i,r.strokeStyle=null!=(a=e.userData.color)?a:"#fff",r.strokeRect(...e.rect.tupple(i))}},[]);return(0,i.jsxs)("div",{ref:e,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsx)("div",{className:"text-center"})]})}function g(){let e=[10,30,90,0],t=[10,80],{ref:n}=(0,a.C7)(function*(n){let i=new h(n.querySelector("canvas")),r=new c.$x({direction:c.OP.Horizontal,size:[i.width,i.height],spacing:10,alignChildren:1}).add(new c.$x({userData:{color:p.yellow}}).add(new c.$x({margin:e,userData:{color:p.yellow}}).add(new c.$x({margin:e,userData:{color:p.yellow}}).add(new c.$x({margin:e,userData:{color:p.yellow}}).add(new c.$x({margin:e,userData:{color:p.yellow}}).add(new c.$x({margin:e,userData:{color:p.yellow}})))))),new c.$x({userData:{color:p.paleGreen}}).add(new c.$x({margin:t,userData:{color:p.paleGreen}})),new c.$x({padding:10,userData:{color:p.magenta}}).add(new c.$x({margin:[0,60],marginRight:0,userData:{color:p.magenta}}),new c.$x({margin:[0,60],marginLeft:0,userData:{color:p.magenta}})));yield(0,s.xy)("layout",e=>{var t;null==(t=r.get(2))||t.set({padding:10+40*e.sin01Time({frequency:.2})}),i.paint(r)})},[]);return(0,i.jsxs)("div",{ref:n,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{children:"css-like margins:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{style:{color:p.yellow},children:["4 values (",e.join(", "),") (top, right, bottom, left)"]}),(0,i.jsxs)("li",{style:{color:p.paleGreen},children:["2 values (",t.join(", "),") (vertical, horizontal)"]}),(0,i.jsxs)("li",{style:{color:p.magenta},children:["specific overrides: ",(0,i.jsx)("code",{children:"marginLeft"}),' overrides "2 values" declaration']})]})]})]})}function x(){let e=e=>{switch(e){case 40:return p.magenta;case 120:return p.paleGreen;default:return p.yellow}},{ref:t}=(0,a.C7)(function*(t){var n,i;let r=new h(t.querySelector("canvas"));function a(t){return{userData:{color:e(t)},margin:t}}let s=new c.$x({direction:c.OP.Horizontal,size:[r.width,r.height],spacing:10,alignChildren:1}).add(new c.$x({spacing:10,userData:{color:"#fff2"}}).add(new c.$x({...a(0)}),new c.$x({...a(0)}),new c.$x({...a(40)}),new c.$x({...a(40)}),new c.$x({...a(120)}),new c.$x({...a(0)})));null==(n=s.get(0,2))||n.add(new c.$x({positioning:u.EU.Detached,alignSelf:0,size:[38,38],offset:[-39,-39],userData:{color:"#fff2",plain:!0}})),null==(i=s.get(0,4))||i.add(new c.$x({positioning:u.EU.Detached,alignSelf:0,size:[118,118],offset:[-119,-119],userData:{color:"#fff2",plain:!0}})),r.paint(s)},[]);return(0,i.jsxs)("div",{ref:t,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{children:'Margins "collapse" when they are adjacent to each other or to the edge (padding) of the container.'}),(0,i.jsx)("p",{style:{color:e(0)},children:"margin: 0"}),(0,i.jsx)("p",{style:{color:e(40)},children:"margin: 40"}),(0,i.jsx)("p",{style:{color:e(120)},children:"margin: 120"})]})]})}var w=n(67725),y=n.n(w),b=n(17099);function P(){let{ref:e}=(0,a.C7)(function*(e){let t=new h(e.querySelector("canvas"));b.c.reset();let n=new c.$x({direction:c.OP.Horizontal,size:[t.width,t.height],spacing:10,userData:{color:p.blue}}).add(new c.$x({direction:c.OP.Vertical,size:"1part",spacing:10,userData:{color:p.paleGreen}}).populate(5,{spacing:10}),new c.$x({direction:c.OP.Vertical,size:"2sh",userData:{color:p.magenta},spacing:10}),new c.$x({direction:c.OP.Vertical,size:"1part",spacing:10}).add(new c.$x().setSize("40"),new c.$x().setSize("1part"),new c.$x().setSize("40"),new c.$x().setSize("1part").setSpacing(10).add(new c.$x({direction:"vertical",size:"1part"}),new c.$x({direction:"vertical",size:"1part"}),new c.$x({direction:"vertical",size:"1part"})),new c.$x().setSize("40")),new c.$x().setPositioning("detached").setUserData({skipPaint:!0}).setPadding(20).setSize("1rel").add(new c.$x({positioning:c.EU.Detached,offset:["0rel","1rel"],size:".7sm"})));n.get(0,3).populate(3),n.get(1).add(new c.$x({positioning:c.EU.Detached,direction:c.OP.Vertical,size:90,spacing:10}).populate(4),new c.$x({positioning:c.EU.Detached,alignSelf:0,offset:[0,0],size:70,spacing:10}).populate(3),new c.$x({positioning:c.EU.Detached,alignSelf:[0,1],size:30,spacing:10}).populate(1),new c.$x({positioning:c.EU.Detached,alignSelf:1,size:50,spacing:10}).populate(2));let i=new c.$x({positioning:c.EU.Detached,size:30}).populate(3).addTo(n.get(0,3));for(let e of n.allDescendants({includeSelf:!0}))e.positioning===c.EU.Detached&&e.set({userData:{color:p.yellow}});n.computeLayout(),yield(0,s.xy)("layout",e=>{n.get([0]).sizeX.value=e.lerpCos01Time(2,1,{frequency:1/6}),n.get([1]).sizeX.value=e.lerpCos01Time(0,4,{frequency:1/6}),i.set({alignSelf:e.sin01Time({frequency:1/3})}),t.paint(n)})},[]);return(0,i.jsxs)("div",{ref:e,className:"flex flex-col justify-center gap-4",style:{flex:"0 0 800px"},children:[(0,i.jsx)("canvas",{style:{border:"solid 2px #fff1"}}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)("p",{children:["When positioning is set to ",(0,i.jsx)("code",{style:{color:p.yellow},children:"detached"}),", spaces are not affected by their parent's size."]})})]})}function M(){let{ref:e}=(0,a.C7)(function*(e){let[t,...n]=e.children;t.style.flex="0 0 ".concat((n.length-1)*800,"px");let i=s.Rv.get("layout").set({minActiveDuration:4});yield(0,r.O)(i.requestActivation)},[]);return(0,i.jsxs)("div",{ref:e,className:"".concat(y().Client," page overflow-scroll"),children:[(0,i.jsx)("div",{}),(0,i.jsx)(v,{}),(0,i.jsx)(g,{}),(0,i.jsx)(x,{}),(0,i.jsx)(m,{}),(0,i.jsx)(P,{})]})}},56647:(e,t,n)=>{"use strict";n.d(t,{R:()=>h});var i=n(49797),r=n(6726),a=n(72612),s=n(22641);let o=new i.I9Y,l=new i.Pq0,c=new i.kn4;function*d(e){let t=new WeakSet;for(let n of e)t.has(n)||(t.add(n),yield n)}function u(e,t,n,i,r){if(null==n?void 0:n.transform)for(let e of((0,s.vl)(n.transform,c),d(t)))e.applyMatrix4(c);if((null==n?void 0:n.color)!==void 0&&e.color(n.color),i){for(let n=0;n<t.length-1;n++)e.points.push(t[n],t[n+1]);r&&e.points.push(t[t.length-1],t[0])}else e.points.push(...t)}class h extends i.DXC{addTo(e){return e?e.add(this):this.removeFromParent(),this}*uniquePoints(){yield*d(this.points)}opacity(e){return this.material.opacity=e,this.material.transparent=this.state.forceTransparent||e<1,this.material.depthWrite=e>=1,this.material.needsUpdate=!0,this}color(e){return this.colors.set(this.points.length,new i.Q1f(e)),this}forceTransparent(){return this.state.forceTransparent=!0,this.material.transparent=!0,this}translate(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x+=i,e.y+=r,e.z+=a;return this}rescale(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x*=i,e.y*=r,e.z*=a;return this}showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new i.mrM({color:this.material.color,transparent:!0,depthFunc:i.K52,opacity:e}),n=new i.DXC(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setDrawRange(0,0),this}draw(){if(!1===this.state.hasAlreadyBeenRendered&&-1===this.state.reservePoints)this.geometry.setFromPoints(this.points),this.geometry.setDrawRange(0,this.points.length),this.state.reservePoints=this.points.length;else{let{position:e}=this.geometry.attributes;e||(e=new i.THS(new Float32Array(3*this.state.reservePoints),3),this.geometry.setAttribute("position",e));let t=this.points.length;t>e.count&&(console.warn("LineHelper: The number of points (".concat(t,") is greater than the reserved points (").concat(e.count,").")),t=e.count),this.geometry.setDrawRange(0,t);for(let n=0;n<t;n++){let{x:t,y:i,z:r}=this.points[n];e.setXYZ(n,t,i,r)}e.needsUpdate=!0}if(this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let{color:t}=this.geometry.attributes;t||(t=new i.THS(new Float32Array(3*this.geometry.attributes.position.count),3),this.geometry.setAttribute("color",t));let n=new i.Q1f(null!=(e=this.colors.get(0))?e:"white"),r=this.points.length;for(let e=0;e<r;e++){let i=this.colors.get(e);i&&n.copy(i),t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}return this}line(e,t,n){return u(this,[(0,s.jj)(e),(0,s.jj)(t)],n),this}capsule2(e,t,n,r){let o=(0,s.jj)(e),l=(0,s.jj)(t),c=new i.Pq0().subVectors(l,o),d=c.length(),h=c.clone().divideScalar(d),p=new i.Pq0(-h.y,h.x);return u(this,[...(0,a.loopArray)(24,e=>{let t=e.p*Math.PI;return o.clone().addScaledVector(p,n*Math.cos(t)).addScaledVector(h,-n*Math.sin(t))}),...(0,a.loopArray)(24,e=>{let t=e.p*Math.PI;return l.clone().addScaledVector(p,-n*Math.cos(t)).addScaledVector(h,n*Math.sin(t))})],r,!0,!0),this}polygon(e,t){let n=e.map(e=>(0,s.jj)(e)),i=[];for(let e=0;e<n.length;e++)i.push(n[e],n[(e+1)%n.length]);return u(this,i,t),this}polyline(e,t){let n=e.map(e=>(0,s.jj)(e)),i=[];for(let e=0;e<n.length-1;e++)i.push(n[e],n[e+1]);return u(this,i,t),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:r,y:a,z:l,radius:c,segments:d,plane:p,...f}={...h.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,i]=t,{x:r,y:a}=(0,s.wX)(e,o);return{x:r,y:a,radius:n,...i}}return t[0]})()},m=new i.Pq0(1,0,0),v=new i.Pq0(0,1,0),g=[];for(let e=0;e<d;e++){let t=e/d*Math.PI*2,n=(e+1)/d*Math.PI*2,s=Math.cos(t)*c,o=Math.sin(t)*c,u=Math.cos(n)*c,h=Math.sin(n)*c,p=new i.Pq0(r,a,l).addScaledVector(m,s).addScaledVector(v,o),f=new i.Pq0(r,a,l).addScaledVector(m,u).addScaledVector(v,h);g.push(p,f)}if("XZ"===p)for(let e of g)e.set(e.x,0,e.y);if("YZ"===p)for(let e of g)e.set(0,e.x,e.y);return u(this,g,f),this}sphere(e){return this.circle({...e,plane:"XY"}).circle({...e,plane:"XZ"}).circle({...e,plane:"YZ"})}rectangle(e,t){let{centerX:n,centerY:a,width:s,height:o}=r.M_.from(e),l=s/2,c=o/2,d=new i.Pq0(n-l,a-c,0),h=new i.Pq0(n+l,a-c,0),p=new i.Pq0(n+l,a+c,0),f=new i.Pq0(n-l,a+c,0);return u(this,[d,h,h,p,p,f,f,d],t),this}placeholder(e,t){let n=r.M_.from(e);return this.rectangle(n,t).line(n.fromRelativePoint(0,0),n.fromRelativePoint(1,1),t).line(n.fromRelativePoint(1,0),n.fromRelativePoint(0,1),t)}grid2(e){let{plane:t,x:n,y:r,z:a,size:l,subdivisions:c,width:d,height:p,widthSubdivisions:f,heightSubdivisions:m,...v}={...h.grid2DefaultOptions,...e},{x:g,y:x}=(0,s.wX)(l,o),{x:w,y:y}=(0,s.wX)(null!=c?c:l);d&&(g=d),p&&(x=p),f&&(w=f),m&&(y=m);let b=g/2,P=x/2,M=[];for(let e=0;e<=w;e++){let t=e/w*g-b;M.push(new i.Pq0(t,-P,0),new i.Pq0(t,P,0))}for(let e=0;e<=y;e++){let t=e/y*x-P;M.push(new i.Pq0(-b,t,0),new i.Pq0(b,t,0))}let S=new i.Pq0(n,r,a);for(let e of M)e.add(S);if("XZ"===t)for(let e of M)e.set(e.x,0,e.y);if("YZ"===t)for(let e of M)e.set(0,e.x,e.y);return u(this,M,v),this}box(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=0,r=0,a=1,o=1,c=1,{center:d,size:u,box3:h}=e;if(void 0!==d&&({x:t,y:n,z:r}=(0,s.jj)(d,l)),void 0!==u&&({x:a,y:o,z:c}=(0,s.jj)(u,l)),void 0!==h){let{min:i,max:s}=h,{x:l,y:d,z:u}=i,{x:p,y:f,z:m}=s;e.asIntBox3&&(p+=1,f+=1,m+=1),t=(l+p)/2,n=(d+f)/2,r=(u+m)/2,a=p-l,o=f-d,c=m-u}let p=a/2,f=o/2,m=c/2,v=new i.Pq0(t-p,n-f,r-m),g=new i.Pq0(t+p,n-f,r-m),x=new i.Pq0(t+p,n+f,r-m),w=new i.Pq0(t-p,n+f,r-m),y=new i.Pq0(t-p,n-f,r+m),b=new i.Pq0(t+p,n-f,r+m),P=new i.Pq0(t+p,n+f,r+m),M=new i.Pq0(t-p,n+f,r+m);return this.points.push(v,g,g,x,x,w,w,v),this.points.push(y,b,b,P,P,M,M,y),this.points.push(v,y,g,b,x,P,w,M),this}plus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=t/2,{x:a,y:l}=(0,s.wX)(e,o),c=new i.Pq0(a-r,l,0),d=new i.Pq0(a+r,l,0);return u(this,[c,d,new i.Pq0(a,l-r,0),new i.Pq0(a,l+r,0)],n),this}cross(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=t/2,{x:a,y:l}=(0,s.wX)(e,o),c=new i.Pq0(a-r,l-r,0),d=new i.Pq0(a+r,l+r,0);return u(this,[c,d,new i.Pq0(a-r,l+r,0),new i.Pq0(a+r,l-r,0)],n),this}constructor(e=-1,t=new i.mrM({vertexColors:!0})){super(new i.LoY,t),this.points=[],this.colors=new Map,this.state={forceTransparent:!1,hasAlreadyBeenRendered:!1,reservePoints:-1},this.state.reservePoints=e,this.onBeforeRender=()=>{this.state.hasAlreadyBeenRendered=!0}}}h.circleDefaultOptions={plane:"XY",x:0,y:0,z:0,radius:.5,segments:96},h.grid2DefaultOptions={plane:"XY",x:0,y:0,z:0,size:8,width:void 0,height:void 0,subdivisions:void 0,widthSubdivisions:void 0,heightSubdivisions:void 0}},56969:(e,t,n)=>{"use strict";n.d(t,{Client:()=>B});var i=n(70691),r=n(49797),a=n(64028),s=n(84306),o=n(10937),l=n(9723),c=n(66851),d=n(87381),u=n(17099),h=n(35375),p=n(33855),f=n(28737),m=n(22641),v=n(42206),g=n(79285);class x{constructor(e,t,n,i){this.space=e,this.rect=t,this.uvRect=n,this.scatterCoeff=i,this.r0=u.c.random(),this.r1=u.c.random()}}class w{constructor(e,t){this.props={...w.defaultProps,...t};let{position:n,size:i,scatterPadding:r,sizeOptions:a,seed:s}=this.props,{col:o,row:l}=e.props;u.c.seed(s);let c=u.c.createPicker(a),d=Array.from({length:o}).map(c),h=Array.from({length:l}).map(c),{x:p,y:f}=(0,m.wX)(n),{x:y,y:b}=(0,m.wX)(i),P=new v.$x(v.OP.Horizontal).setSize(y,b).setOffset(p-y/2,f-b/2);for(let e of d){let t=new v.$x(v.OP.Vertical).setSize("".concat(e,"fr")).addTo(P);for(let e of h)new v.$x(v.OP.Horizontal).setSize("".concat(e,"fr")).addTo(t)}P.computeLayout();let M=P.rect,S=[...P.allLeaves({includeSelf:!1})],C=(y+b)/2,z=S.map(e=>{let t=e.rect.clone(),n=t.clone().relativeTo(M),{x:i,y:a}=t.getCenter(),s=Math.abs(i-p)+Math.abs(a-f),o=(0,g.inverseLerp)(.5,1,s/C);return t.centerX+=u.c.between(-r,r)*o,t.centerY+=u.c.between(-r,r)*o,new x(e,t,n,o)});this.root=P,this.nodes=z}}w.defaultProps={seed:87654,position:new r.I9Y(0,0),size:new r.I9Y(3,2),scatterPadding:.1,sizeOptions:[[.5,1],[1,10],[2,2],[3,1]]};var y=n(56647),b=n(17475),P=n(60041),M=n(22899),S=n(8144),C=n(4941),z=n(6726);class T extends r.B69{constructor(){super();let e=new r.dth("#ffffff","#926969",1);this.add(e);let t=new r.ZyN("#ffffff",2);this.add(t),t.position.set(2,4,1)}}class D extends r.V9B{get mapAspect(){return this.uniforms.uMapInfo.value.x}set mapAspect(e){this.uniforms.uMapInfo.value.x=e}getScatteredSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.I9Y;return e.x=this.uniforms.uScatteredInfo.value.x,e.y=this.uniforms.uScatteredInfo.value.y,e}setScatteredSize(e){this.uniforms.uScatteredInfo.value.x=e.x,this.uniforms.uScatteredInfo.value.y=e.y}get scatteredSize(){return this.getScatteredSize()}set scatteredSize(e){this.setScatteredSize(e)}update(e){e*=.33,this.uniforms.uDispersionTime.value+=e*this.uniforms.uDispersion.value.x,this.uniforms.uLowDispersionTime.value+=e*this.uniforms.uLowDispersion.value.x}constructor(){super({side:r.$EB}),this.uniforms={uDispersionTime:{value:0},uLowDispersionTime:{value:0},uDispersion:{value:new r.IUQ(1,-.6,.4,2)},uLowDispersion:{value:new r.IUQ(0,-.6,.4,0)},uMainParams:{value:new r.IUQ(1,0)},uCenter:{value:new r.Pq0},uMapInfo:{value:new r.IUQ(1,1,.5,.5)},uScatteredInfo:{value:new r.IUQ(1,1,0,0)},uNormalMap:{value:b.o.get("three").loadTexture("textures/rough_concrete_nor_gl_1k.jpg",e=>{e.wrapS=e.wrapT=r.GJx})}},this.userData=function(e,t){for(let[n,i,r,a]of t)Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,value:a}),Object.defineProperty(e,n,{enumerable:!0,get:()=>i[r],set(e){i[r]=e}});return e}({},[["chunkScale",this.uniforms.uMainParams.value,"x","\n        Name(chunk.scale)\n        Slider(0, 1, step: any)\n      "],["imageVisibility",this.uniforms.uMainParams.value,"y","\n        Name(image.visibility)\n        Slider(0, 1, step: any)\n      "],["dispX",this.uniforms.uDispersion.value,"x","\n        Name(disp.x)\n        Slider(0, 1, step: any)\n      "],["dispY",this.uniforms.uDispersion.value,"y","\n        Name(disp.y)\n        Slider(-1, 1, step: any)\n      "],["dispZ",this.uniforms.uDispersion.value,"z","\n        Name(disp.z)\n        Slider(-1, 1, step: any)\n      "],["dispW",this.uniforms.uDispersion.value,"w","\n        Name(disp.cycle)\n        Slider(1, 20, step: 1)\n      "],["lowDispX",this.uniforms.uLowDispersion.value,"x","\n        Name(lowDisp.x)\n        Slider(0, 1, step: any)\n      "]]),this.onBeforeCompile=e=>P.b.with(e).defines({USE_UV:""}).uniforms(this.uniforms).varying({vRand:"vec4"}).vertex.top(S.H,M.I,'\n  // sizeMode: 0 for "contain", 1 for "cover"\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale) {\n    align.y = 1.0 - align.y; // Flip y-coordinate\n    if ((outerAspect > innerAspect) != (sizeMode == 1.0)) { // XOR condition for mode\n      float scaleFactor = outerAspect / innerAspect;\n      uv.x = (uv.x - align.x) * scaleFactor + align.x; // Adjust x-coordinate\n    } else {\n      float scaleFactor = innerAspect / outerAspect;\n      uv.y = (uv.y - align.y) * scaleFactor + align.y; // Adjust y-coordinate\n    }\n    uv = (uv - align) / scale + align;\n    return uv;\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, float scale) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(scale));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, vec2(0.5));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect) {\n    return applyUvSize(uv, outerAspect, innerAspect, 1.0);\n  }\n').vertex.top("\n        attribute vec4 aRectUv;\n        attribute vec4 aRand;\n      ").vertex.top("\n        vec2 delta;\n        float scatterRatio;\n\n        vec4 computeDispersion() {\n          if (uDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float duration = lerp(8.0, 1.0, aRand.x * aRand.y * aRand.z);\n          float cycleCount = max(floor(uDispersion.w), 1.0);\n          float time = mod(uDispersionTime + duration * cycleCount * aRand.x, duration * cycleCount) / duration;\n          float cycleVisibility = time <= 1.0 ? 1.0 : easeInOut3(1.0 - inverseLerp(.8 * aRand.w + .1, .8 * aRand.w + .2, uDispersion.x));\n          time = mod(time, 1.0);\n          float size = easeInThenOut(time, 8.0) * lerp(2.0, 1.0, time * time) * cycleVisibility;\n          size = mix(1.0, size, pow(uDispersion.x, 1.0 / 2.0));\n\n          // Apply scale before instanceMatrix (shrinking).\n          vec3 dispersed;\n          dispersed.xy = -delta * lerp(uDispersion.y, uDispersion.z, time);\n          dispersed.z = lerp(1.0, 0.0, time);\n          dispersed *= uDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n\n        float getStartEffect(float time, float duration) {\n          return min(1.0, time / duration);\n        }\n\n        float getEndEffect(float time, float timeMax, float duration) {\n          return max(0.0, time - (timeMax - duration)) / duration;\n        }\n\n        vec4 computeLowDispersion() {\n          if (uLowDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float periodScalarT = inverseLerp(0.1, 0.9, scatterRatio);\n          float period = lerp(2.0, 8.0, aRand.x) * lerp(60.0, 1.0, periodScalarT);\n          float time = mod(uLowDispersionTime + period * aRand.z, period);\n\n          float duration = 1.0;\n          float effectStart = min(1.0, time);\n          float effectEnd = getEndEffect(time, period, duration);\n\n          float size = getStartEffect(time, 0.3) * (1.0 - getEndEffect(time, period, 0.3));\n          size = pow(size, 1.0 / 4.0);\n          size = mix(1.0, size, pow(uLowDispersion.x, 1.0 / 4.0));\n\n          vec3 dispersed;\n\n          dispersed.xy = delta * 0.1;\n          dispersed.z = 0.2;\n          dispersed.xyz *= getEndEffect(time, period, 1.0);\n          dispersed *= uLowDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4(position, 1.0);\n        delta = instanceMatrix[3].xy - uCenter.xy;\n        scatterRatio = clamp(1.1 * length(delta) / (length(uScatteredInfo.xy) / 2.0), 0.0, 1.0);\n\n        vec4 dispersion = computeDispersion();\n        vec4 lowDispersion = computeLowDispersion();\n\n        float scale = clamp01(uMainParams.x * 3.0 - 2.0 * aRand.w);\n        mvPosition.xyz *= dispersion.w * lowDispersion.w * easeInOut3(scale);\n\n        mvPosition = instanceMatrix * mvPosition;\n        mvPosition.xyz += dispersion.xyz + lowDispersion.xyz;\n\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;      \n      ").vertex.replace("uv_vertex","\n        #if defined( USE_UV ) || defined( USE_ANISOTROPY )\n          vUv = vec3( uv, 1 ).xy;\n          vUv = aRectUv.xy + aRectUv.zw * vUv;\n        #endif\n        #ifdef USE_MAP\n          vec2 instanceUv = aRectUv.xy + aRectUv.zw * MAP_UV;\n\n          // vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale\n          float outerAspect = uScatteredInfo.x / uScatteredInfo.y;\n          float innerAspect = uMapInfo.x;\n          float sizeMode = uMapInfo.y;\n          vec2 align = uMapInfo.zw;\n          instanceUv = applyUvSize(instanceUv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n          \n          vMapUv = ( mapTransform * vec3( instanceUv, 1 ) ).xy;\n        #endif\n      ").vertex.mainAfterAll("\n        vRand = aRand;\n      ").fragment.top(S.H,M.I).fragment.replace("color_fragment","\n        vec3 normal = texture2D(uNormalMap, vUv * 4.0).rgb;\n        vec3 light = normalize(vec3(0.5, 2.5, 1.0));\n        float colorAlteration = mix(0.333, 1.0, dot(normal, light));\n        float transition = inverseLerp(0.0, 0.2, uMainParams.y - 0.8 * vRand.w);\n        diffuseColor.rgb = mix(vColor * colorAlteration, diffuseColor.rgb, transition);\n      ")}}class A extends r.B69{static createPlane(e){let{row:t,col:n}=e,i=t*n,a=new r.bdM,s=new r.uWO(new Float32Array(4*i),4);a.setAttribute("aRectUv",s);let o=new r.uWO(new Float32Array(4*i),4);a.setAttribute("aRand",o);for(let e=0;e<i;e++)o.setXYZW(e,u.c.random(),u.c.random(),u.c.random(),u.c.random());let l=new D,c=new r.ZLX(a,l,i);return c.name="plane",c}get count(){return this.internal.count}onTick(e){this.internal.plane.material.update(e.deltaTime)}getDistribution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w(this,e)}drawDistribution(e){let{position:t,size:n,scatterPadding:i}=e.props,{x:r,y:a}=(0,m.wX)(t),{x:s,y:o}=(0,m.wX)(n);this.internal.lineHelper.rectangle([r,a,s,o]).rectangle([r,a,s+2*i,o+2*i])}distribute(e){let{count:t,plane:n}=this.internal,{aRectUv:i}=n.geometry.attributes;for(let r=0;r<t;r++){let{rect:t,uvRect:a}=e.nodes[r];n.setMatrixAt(r,(0,c.w)({position:t.getCenter(),scale:t.getSize()})),i.setXYZW(r,a.x,a.y,a.width,a.height)}n.material.setScatteredSize(e.root.rect.getSize());let r=e.root.rect;n.material.setScatteredSize(r.getSize()),n.material.uniforms.uCenter.value.copy(r.getCenter())}lerpDistribute(e,t,n){let{count:i,plane:a}=this.internal,{aRectUv:s}=a.geometry.attributes,o=new z.M_,l=new z.M_,d=new z.M_,u=new r.Pq0,h=new r.Pq0;for(let r=0;r<i;r++){let i=e.nodes[r],d=t.nodes[r],p=.3*(1-i.r0*(i.scatterCoeff+.2*d.r0)),f=(0,g.inverseLerp)(p,.7+p,n),m=(0,C.YN)(f);o.lerpRectangles(i.rect,d.rect,m),l.lerpRectangles(i.uvRect,d.uvRect,m),a.setMatrixAt(r,(0,c.w)({position:o.getCenter(u),scale:o.getSize(h),rotationY:(d.r0<.5?0:1)*m*Math.PI*2,rotationZ:.3*Math.sin(f*Math.PI)*(-1+2*i.r0)})),s.setXYZW(r,l.x,l.y,l.width,l.height)}let p=(0,C._5)((0,g.inverseLerp)(.3,.7,n));d.lerpRectangles(e.root.rect,t.root.rect,p),a.material.setScatteredSize(d.getSize()),a.material.uniforms.uCenter.value.copy(d.getCenter()),a.instanceMatrix.needsUpdate=!0,s.needsUpdate=!0}constructor(e={}){super(),this.transition=0;let t={...A.defaultProps,...e},{col:n,row:i}=t,r=A.createPlane(t);(0,d.DN)(r,this);let a=new y.R;(0,d.DN)(a,this);let s=new T;(0,d.DN)(s,this),this.internal={count:i*n,plane:r,lineHelper:a,lightSetup:s},this.props=t,this.distribute(this.getDistribution())}}A.displayName="ScatteredPlane",A.defaultProps={row:20,col:30,imageAspect:1,imageResizeMode:"cover"},A.transition_meta="Range(0, 1)";class O extends r.eaF{constructor(){super(new r.WBB(40,1),new r.V9B({color:"#aeb4e9",side:r.hsX})),this.onBeforeRender=(e,t,n)=>{this.position.copy(n.position)}}}let j={darkBlue:"#002c52",orange:"#ff5c35",white:"#ffffff",lightGrey:"#c9cfd3"};function E(){let e=(0,s.hG)();return e.three.pipeline.basicPasses.outline.enabled=!1,(0,p.dB)("ScatteredDemo",async function*(t,n){(0,d.DN)(new O,t),(0,d.DN)(new r.eaF(new o.k,new l.Y),t);let i=await n.loader.load("/assets/textures/DebugTexture.png");i.colorSpace=r.er$;let s=(0,d.DN)(new A,t);s.internal.plane.material.map=i,s.internal.plane.material.mapAspect=i.image.width/i.image.height;let h=s.getDistribution({seed:4789,position:[-2,0],size:[2,3]}),p=s.getDistribution({seed:3249,position:[2,0],size:[2,4]});s.drawDistribution(h),s.drawDistribution(p),t.userData.transition=0,t.userData.transition_meta="Slider(0, 1, step: 0.01)",t.userData.scale=1,t.userData.scale_meta="Slider(-1, 1, pow: 10, step: .1)",t.userData.links=[s.internal.plane.material.userData];let f=Object.values(j);for(let e=0,t=s.count;e<t;e++)s.internal.plane.setColorAt(e,(0,c._)(u.c.pick(f)));yield n.onTick(()=>{s.lerpDistribute(h,p,t.userData.transition),s.scale.setScalar(t.userData.scale)}),(0,a.it)(e,t),e.sceneSelection.add("Select ScatteredDemo",t)},[]),null}function _(){return(0,p.yk)(function*(e){e.useOrbitControls({position:[-2,0,8],target:[-2,0,0]})},[]),null}function I(e){let{children:t}=e,n=(0,p.yk)();return n.loader.setPath(h.$.assetsPath),(0,i.jsx)(s.zz,{three:n,backgroundColor:"#26163c4f",children:t})}function B(){return(0,i.jsxs)("div",{className:"layer thru",children:[(0,i.jsx)(f.Leak,{}),(0,i.jsx)(p.uB,{children:(0,i.jsxs)(I,{children:[(0,i.jsx)("div",{className:"layer thru px-3 py-2 flex flex-col gap-4",children:(0,i.jsx)("h1",{className:"text-4xl",children:"ScatteredPlane"})}),(0,i.jsx)(_,{}),(0,i.jsx)(E,{})]})})]})}},58087:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var i=n(49797),r=n(59411),a=n(39571),s=n(97679),o=n(2573),l=n(14192);class c extends a.o{dispose(){this.gtaoNoiseTexture.dispose(),this.pdNoiseTexture.dispose(),this.normalRenderTarget.dispose(),this.gtaoRenderTarget.dispose(),this.pdRenderTarget.dispose(),this.normalMaterial.dispose(),this.pdMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}get gtaoMap(){return this.pdRenderTarget.texture}setGBuffer(e,t){void 0!==e?(this.depthTexture=e,this.normalTexture=t,this._renderGBuffer=!1):(this.depthTexture=new i.VCu,this.depthTexture.format=i.dcC,this.depthTexture.type=i.V3x,this.normalRenderTarget=new i.nWS(this.width,this.height,{minFilter:i.hxR,magFilter:i.hxR,type:i.ix0,depthTexture:this.depthTexture}),this.normalTexture=this.normalRenderTarget.texture,this._renderGBuffer=!0);let n=+!!this.normalTexture,r=this.depthTexture===this.normalTexture?"w":"x";this.gtaoMaterial.defines.NORMAL_VECTOR_TYPE=n,this.gtaoMaterial.defines.DEPTH_SWIZZLING=r,this.gtaoMaterial.uniforms.tNormal.value=this.normalTexture,this.gtaoMaterial.uniforms.tDepth.value=this.depthTexture,this.pdMaterial.defines.NORMAL_VECTOR_TYPE=n,this.pdMaterial.defines.DEPTH_SWIZZLING=r,this.pdMaterial.uniforms.tNormal.value=this.normalTexture,this.pdMaterial.uniforms.tDepth.value=this.depthTexture,this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture}setSceneClipBox(e){e?(this.gtaoMaterial.needsUpdate=1!==this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=1,this.gtaoMaterial.uniforms.sceneBoxMin.value.copy(e.min),this.gtaoMaterial.uniforms.sceneBoxMax.value.copy(e.max)):(this.gtaoMaterial.needsUpdate=0===this.gtaoMaterial.defines.SCENE_CLIP_BOX,this.gtaoMaterial.defines.SCENE_CLIP_BOX=0)}updateGtaoMaterial(e){void 0!==e.radius&&(this.gtaoMaterial.uniforms.radius.value=e.radius),void 0!==e.distanceExponent&&(this.gtaoMaterial.uniforms.distanceExponent.value=e.distanceExponent),void 0!==e.thickness&&(this.gtaoMaterial.uniforms.thickness.value=e.thickness),void 0!==e.distanceFallOff&&(this.gtaoMaterial.uniforms.distanceFallOff.value=e.distanceFallOff,this.gtaoMaterial.needsUpdate=!0),void 0!==e.scale&&(this.gtaoMaterial.uniforms.scale.value=e.scale),void 0!==e.samples&&e.samples!==this.gtaoMaterial.defines.SAMPLES&&(this.gtaoMaterial.defines.SAMPLES=e.samples,this.gtaoMaterial.needsUpdate=!0),void 0!==e.screenSpaceRadius&&+!!e.screenSpaceRadius!==this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS&&(this.gtaoMaterial.defines.SCREEN_SPACE_RADIUS=+!!e.screenSpaceRadius,this.gtaoMaterial.needsUpdate=!0)}updatePdMaterial(e){let t=!1;void 0!==e.lumaPhi&&(this.pdMaterial.uniforms.lumaPhi.value=e.lumaPhi),void 0!==e.depthPhi&&(this.pdMaterial.uniforms.depthPhi.value=e.depthPhi),void 0!==e.normalPhi&&(this.pdMaterial.uniforms.normalPhi.value=e.normalPhi),void 0!==e.radius&&e.radius!==this.radius&&(this.pdMaterial.uniforms.radius.value=e.radius),void 0!==e.radiusExponent&&e.radiusExponent!==this.pdRadiusExponent&&(this.pdRadiusExponent=e.radiusExponent,t=!0),void 0!==e.rings&&e.rings!==this.pdRings&&(this.pdRings=e.rings,t=!0),void 0!==e.samples&&e.samples!==this.pdSamples&&(this.pdSamples=e.samples,t=!0),t&&(this.pdMaterial.defines.SAMPLES=this.pdSamples,this.pdMaterial.defines.SAMPLE_VECTORS=(0,l.A)(this.pdSamples,this.pdRings,this.pdRadiusExponent),this.pdMaterial.needsUpdate=!0)}render(e,t,n){switch(this._renderGBuffer&&(this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility()),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.gtaoMaterial.uniforms.cameraWorldMatrix.value.copy(this.camera.matrixWorld),this.renderPass(e,this.gtaoMaterial,this.gtaoRenderTarget,0xffffff,1),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.renderPass(e,this.pdMaterial,this.pdRenderTarget,0xffffff,1),this.output){case c.OUTPUT.Off:break;case c.OUTPUT.Diffuse:this.copyMaterial.uniforms.tDiffuse.value=n.texture,this.copyMaterial.blending=i.XIg,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case c.OUTPUT.AO:this.copyMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.copyMaterial.blending=i.XIg,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case c.OUTPUT.Denoise:this.copyMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.copyMaterial.blending=i.XIg,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case c.OUTPUT.Depth:this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case c.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=i.XIg,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case c.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=n.texture,this.copyMaterial.blending=i.XIg,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blendMaterial.uniforms.intensity.value=this.blendIntensity,this.blendMaterial.uniforms.tDiffuse.value=this.pdRenderTarget.texture,this.renderPass(e,this.blendMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.GTAOPass: Unknown output type.")}}renderPass(e,t,n,i,r){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,null!=i&&(e.setClearColor(i),e.setClearAlpha(r||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,t,n,i,r){e.getClearColor(this.originalClearColor);let a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(n),e.autoClear=!1,i=t.clearColor||i,r=t.clearAlpha||r,null!=i&&(e.setClearColor(i),e.setClearAlpha(r||0),e.clear()),this.scene.overrideMaterial=t;let o=this.camera.layers.mask;this.camera.layers.set(0),e.render(this.scene,this.camera),this.camera.layers.mask=o,this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,t){this.width=e,this.height=t,this.gtaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.pdRenderTarget.setSize(e,t),this.gtaoMaterial.uniforms.resolution.value.set(e,t),this.gtaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.gtaoMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse),this.pdMaterial.uniforms.resolution.value.set(e,t),this.pdMaterial.uniforms.cameraProjectionMatrixInverse.value.copy(this.camera.projectionMatrixInverse)}overrideVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)})}restoreVisibility(){let e=this.scene,t=this._visibilityCache;e.traverse(function(e){let n=t.get(e);e.visible=n}),t.clear()}generateNoise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,t=new r.h,n=new Uint8Array(e*e*4);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let a=i,s=r;n[(i*e+r)*4]=(.5*t.noise(a,s)+.5)*255,n[(i*e+r)*4+1]=(.5*t.noise(a+e,s)+.5)*255,n[(i*e+r)*4+2]=(.5*t.noise(a,s+e)+.5)*255,n[(i*e+r)*4+3]=(.5*t.noise(a+e,s+e)+.5)*255}let a=new i.GYF(n,e,e,i.GWd,i.OUM);return a.wrapS=i.GJx,a.wrapT=i.GJx,a.needsUpdate=!0,a}constructor(e,t,n,r,c,d,u){super(),this.width=void 0!==n?n:512,this.height=void 0!==r?r:512,this.clear=!0,this.camera=t,this.scene=e,this.output=0,this._renderGBuffer=!0,this._visibilityCache=new Map,this.blendIntensity=1,this.pdRings=2,this.pdRadiusExponent=2,this.pdSamples=16,this.gtaoNoiseTexture=(0,o.QB)(),this.pdNoiseTexture=this.generateNoise(),this.gtaoRenderTarget=new i.nWS(this.width,this.height,{type:i.ix0}),this.pdRenderTarget=this.gtaoRenderTarget.clone(),this.gtaoMaterial=new i.BKk({defines:Object.assign({},o.dB.defines),uniforms:i.LlO.clone(o.dB.uniforms),vertexShader:o.dB.vertexShader,fragmentShader:o.dB.fragmentShader,blending:i.XIg,depthTest:!1,depthWrite:!1}),this.gtaoMaterial.defines.PERSPECTIVE_CAMERA=+!!this.camera.isPerspectiveCamera,this.gtaoMaterial.uniforms.tNoise.value=this.gtaoNoiseTexture,this.gtaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.gtaoMaterial.uniforms.cameraNear.value=this.camera.near,this.gtaoMaterial.uniforms.cameraFar.value=this.camera.far,this.normalMaterial=new i.qBx,this.normalMaterial.blending=i.XIg,this.pdMaterial=new i.BKk({defines:Object.assign({},l.I.defines),uniforms:i.LlO.clone(l.I.uniforms),vertexShader:l.I.vertexShader,fragmentShader:l.I.fragmentShader,depthTest:!1,depthWrite:!1}),this.pdMaterial.uniforms.tDiffuse.value=this.gtaoRenderTarget.texture,this.pdMaterial.uniforms.tNoise.value=this.pdNoiseTexture,this.pdMaterial.uniforms.resolution.value.set(this.width,this.height),this.pdMaterial.uniforms.lumaPhi.value=10,this.pdMaterial.uniforms.depthPhi.value=2,this.pdMaterial.uniforms.normalPhi.value=3,this.pdMaterial.uniforms.radius.value=8,this.depthRenderMaterial=new i.BKk({defines:Object.assign({},o.EC.defines),uniforms:i.LlO.clone(o.EC.uniforms),vertexShader:o.EC.vertexShader,fragmentShader:o.EC.fragmentShader,blending:i.XIg}),this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new i.BKk({uniforms:i.LlO.clone(s.Z.uniforms),vertexShader:s.Z.vertexShader,fragmentShader:s.Z.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:i.wn6,blendDst:i.ojh,blendEquation:i.gO9,blendSrcAlpha:i.hdd,blendDstAlpha:i.ojh,blendEquationAlpha:i.gO9}),this.blendMaterial=new i.BKk({uniforms:i.LlO.clone(o.eQ.uniforms),vertexShader:o.eQ.vertexShader,fragmentShader:o.eQ.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:i.bCz,blendSrc:i.wn6,blendDst:i.ojh,blendEquation:i.gO9,blendSrcAlpha:i.hdd,blendDstAlpha:i.ojh,blendEquationAlpha:i.gO9}),this.fsQuad=new a.F(null),this.originalClearColor=new i.Q1f,this.setGBuffer(c?c.depthTexture:void 0,c?c.normalTexture:void 0),void 0!==d&&this.updateGtaoMaterial(d),void 0!==u&&this.updatePdMaterial(u)}}c.OUTPUT={Off:-1,Default:0,Diffuse:1,Depth:2,Normal:3,AO:4,Denoise:5}},61567:(e,t,n)=>{"use strict";function i(e){return!!e.isVector3}function r(e){return!!e.isEuler}function a(e){return!!e.isMatrix4}function s(e){return!!e.isObject3D}function o(e){return!!e.isMesh}n.d(t,{MR:()=>a,Th:()=>s,Zz:()=>i,eB:()=>r,uW:()=>o})},66851:(e,t,n)=>{"use strict";n.d(t,{_:()=>l,w:()=>s});var i=n(49797),r=n(22641);let a=new i.kn4;function s(e){return(0,r.vl)(e,a)}let o=new i.Q1f;function l(e){return o.set(e)}},67725:e=>{e.exports={Client:"client_Client__zoy80"}},67840:(e,t,n)=>{"use strict";n.d(t,{w:()=>v});var i=n(49797),r=n(22641),a=n(66851),s=n(79285);function o(){return[...new Set(["",..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",..."\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff",..."0123456789",..." @#.,!?\xbf:;-+*/=%&|()[]{}<>$'\""])].join("")}class l{constructor(){let e=o(),t=new i.I9Y(16,24),n=t.x/t.y,r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.I9Y;return n.x=Math.ceil(Math.sqrt(e/t)),n.y=Math.ceil(e/n.x),n}(e.length,n),a=t.clone().multiplyScalar(3),l=(0,s.ceilPowerOfTwo)(a.x*r.x),c=(0,s.ceilPowerOfTwo)(a.y*r.y),d=l/(a.x*r.x),u=c/(a.y*r.y);if("undefined"==typeof document){this.canvas=null,this.texture=null,this.symbols="",this.charGrid=new i.I9Y;return}let h=document.createElement("canvas");h.width=l,h.height=c;let p=h.getContext("2d");p.font="".concat(.8*a.y,"px monospace"),p.textBaseline="top",p.fillStyle="black",p.fillRect(0,0,l,c),p.fillStyle="white",p.transform(d,0,0,u,0,0);for(let t=0;t<e.length;t++){let n=Math.floor(t/r.x),i=(t-n*r.x+.12)*a.x,s=a.y*(n+.19999999999999996);p.fillText(e[t],i,s)}this.canvas=h,this.texture=new i.GOR(h),this.symbols=e,this.charGrid=r}}l.getDefaultSymbols=o;let c={oriented:0,billboard:1},d={nodeMaterial:!1,textCount:1e3,lineLength:24,lineCount:2,charSize:new i.I9Y(.2,.3),textSize:1,textOffset:0,orientation:"billboard",textDefaults:{color:"#ff00ff",size:1}};class u{get textCount(){return this.metadata.textCount}get lineCount(){return this.metadata.lineCount}get lineLength(){return this.metadata.lineLength}get strideHeaderByteSize(){return this.metadata.strideHeaderByteSize}get strideByteSize(){return this.metadata.strideByteSize}get textureSize(){return new i.I9Y(this.metadata.textureWidth,this.metadata.textureHeight)}encode(){let e=JSON.stringify(this.metadata),t=new TextEncoder().encode(e),n=t.length,i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,n,!0);let r=new Uint8Array(4+n+this.array.length);return r.set(i,0),r.set(t,4),r.set(this.array,4+n),r}static decode(e){let t=new DataView(e.buffer).getUint32(0,!0),n=e.slice(4,4+t),i=JSON.parse(new TextDecoder().decode(n)),r=new u(i.symbols,i.textCount,i.lineCount,i.lineLength),a=e.slice(4+t);return r.array.set(a),r}info(){return"data: ".concat(this.array.length," bytes, ").concat(this.textureSize.x,"x").concat(this.textureSize.y)}getTextAt(e){let{array:t}=this,{symbols:n,lineLength:i,strideByteSize:r,strideHeaderByteSize:a}=this.metadata,s=e*r,o=t[s+0],l=t[s+16],c=e=>e.toString(16).padStart(2,"0"),d="#".concat(c(t[s+4])).concat(c(t[s+4+1])).concat(c(t[s+4+2])),u=t[s+4+3],h="#".concat(c(t[s+8])).concat(c(t[s+8+1])).concat(c(t[s+8+2])),p=t[s+8+3],f=[];for(let e=0;e<o;e++){let r=s+a+e*i,o=[];for(let e=0;e<l;e++){let i=n[t[r+e]];o.push(i)}f.push(o.join(""))}return{text:f.join("\n"),textColor:d,textOpacity:u,backgroundColor:h,backgroundOpacity:p,currentLineCount:o,currentLineLength:l}}setSizeAt(e,t){let{array:n}=this,{strideByteSize:i}=this.metadata;return new DataView(n.buffer).setFloat32(e*i+12,t),this}setColorAt(e,t){let{color:n,opacity:i,textColor:r=n,textOpacity:o=i,backgroundColor:l=r,backgroundOpacity:c=+(null!=i?!!i:!!t.backgroundColor)}=t,{array:d}=this,{strideByteSize:u}=this.metadata;{let t=e*u+4;if(void 0!==r){let{r:e,g:n,b:i}=(0,a._)(r);d[t+0]=255*e,d[t+1]=255*n,d[t+2]=255*i}void 0!==o&&(d[t+3]=(0,s.toff)(o))}{let t=e*u+8;if(void 0!==l){let{r:e,g:n,b:i}=(0,a._)(l);d[t+0]=255*e,d[t+1]=255*n,d[t+2]=255*i}void 0!==c&&(d[t+3]=(0,s.toff)(c))}return this.texture.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{trim:i=!1,size:r=1,...a}=n;this.setColorAt(e,a),this.setSizeAt(e,r);let{array:s}=this,{symbols:o,lineCount:l,lineLength:c,strideByteSize:d,strideHeaderByteSize:u}=this.metadata,h=(i?t.trim():t).split("\n");h.length>l&&(console.warn("TextHelper: Text has more lines than ".concat(l,", truncating.")),h=h.slice(0,l)),h=h.map(e=>(i&&(e=e.trim()),e.length>c)?(console.warn("TextHelper: Line length is greater than ".concat(c," characters, clamping.")),e.slice(0,c)):e),s[e*d+0]=h.length;let p=e*d,f=h.length;for(let e=0;e<l;e++){let t=0;e<f&&(s[p+16+4*e]=h[e].length,t=h[e].length);let n=p+u+e*c;for(let i=0;i<c;i++){let r=n+i;if(e>=f||i>=t)s[r]=0;else{let t=o.indexOf(h[e].charAt(i));s[r]=-1===t?0:t}}}this.texture.needsUpdate=!0}constructor(e,t,n,r,{defaultColor:o="#ffffff",defaultTextOpacity:l=1,defaultBackgroundOpacity:c=0}={}){let d=16+4*n,u=d+4*Math.ceil(n*r/4),h=Math.ceil((d+t*u)/4),p=(0,s.ceilPowerOfTwo)(Math.sqrt(h)),f=Math.ceil(h/p);this.metadata={symbols:e,textCount:t,lineCount:n,lineLength:r,strideHeaderByteSize:d,strideByteSize:u,textureWidth:p,textureHeight:f};let m=new Uint8Array(p*f*4),{r:v,g,b:x}=(0,a._)(o);for(let e=0;e<t;e++){let t=e*u;m[(t+=4)+0]=255*v,m[t+1]=255*g,m[t+2]=255*x,m[t+3]=255*l,m[(t+=4)+0]=255*v,m[t+1]=255*g,m[t+2]=255*x,m[t+3]=255*c}this.array=m,this.texture=new i.GYF(m,p,f,i.GWd,i.OUM),this.texture.needsUpdate=!0}}var h=n(17953),p=n(81074),f=n(60041);let m=0;class v extends i.ZLX{applyTransform(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let a=(0,r.GD)(t),s=new i.kn4,o=this.instanceMatrix.array.length;for(let e=0;e<o;e+=16)s.fromArray(this.instanceMatrix.array,e).multiply(a).toArray(this.instanceMatrix.array,e);return this}addTo(e){return e?e.add(this):this.removeFromParent(),this}onTop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return 0!==e?(this.renderOrder=e,this.material.depthTest=!1,this.material.depthWrite=!1,this.material.transparent=!0):(this.renderOrder=0,this.material.depthTest=!0,this.material.depthWrite=!0,this.material.transparent=!1),this}setData(e){return this.data=e,this}clearAllText(){return this.instanceMatrix.array.fill(0),this.instanceMatrix.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.data.setTextAt(e,t,{...this.options.textDefaults,...n}),this.setMatrixAt(e,(0,a.w)(n)),this.instanceMatrix.needsUpdate=!0,this}setColorAt(e,t){this.data.setColorAt(e,{color:t})}setTextColorAt(e,t){return this.data.setColorAt(e,t),this}getDataStringView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(e,t,n,i,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,o=Array.from({length:t.length/4},(e,n)=>{let i=4*n,r=t[i+0],a=t[i+1];return[r,a,t[i+2],t[i+3]]}).slice(a*n/4,s*n/4),l=[];l.push("\nData texture array (".concat(t.length," bytes):")),l.push("\ndataStride: ".concat(n," (").concat(n/4," x 4 bytes)"));let c=4+i;for(let t=0;t<o.length;t++){let a=t%(n/4);0===a&&(l.push("\npack #".concat(t/(n/4))),l.push("info:")),4===a&&l.push("lines (".concat(i,"):")),a===c&&l.push("chars (".concat(r,"):"));let[s,d,u,h]=o[t],p="".concat(t.toString().padEnd(3)," - ").concat((4*t).toString().padEnd(4),":   ").concat(s.toString().padStart(3),", ").concat(d.toString().padStart(3),", ").concat(u.toString().padStart(3),", ").concat(h.toString().padStart(3));a>=c&&(p+="     ".concat(e.symbols[s]).concat(e.symbols[d]).concat(e.symbols[u]).concat(e.symbols[h])),l.push("  "+p)}return l.join("\n")}(this.atlas,this.data.array,this.data.strideByteSize,this.options.lineCount,this.options.lineLength,e,t)}constructor(e){let t={...d,...e},n=new l,a=new u(n.symbols,t.textCount,t.lineCount,t.lineLength),s=function(e,t,n){let a={...d,...e},s=new i.I9Y(a.textSize*a.lineLength*a.charSize.x,a.textSize*a.lineCount*a.charSize.y);return{uCameraMatrix:{value:new i.kn4},uOrientation:{value:function(e){if("string"==typeof e){if(e in c)return c[e];throw Error("Invalid orientation: ".concat(e))}if(Object.values(c).includes(e))return e;throw Error("Invalid orientation: ".concat(e))}(a.orientation)},uTextOffset:{value:(0,r.wX)(a.textOffset)},uPlaneSize:{value:s},uCharSize:{value:a.charSize},uLineLength:{value:a.lineLength},uLineCount:{value:a.lineCount},uAtlasCharGrid:{value:n.charGrid},uDataStrideHeader:{value:t.strideHeaderByteSize},uDataStride:{value:t.strideByteSize/4},uDataTexture:{value:t.texture},uDataTextureSize:{value:t.textureSize},uBoxBorderWidth:{value:0}}}(t,a,n),o=s.uPlaneSize.value;super(new i.bdM(o.width,o.height),t.nodeMaterial?function(e,t){let n=new p.P8l;n.name="TextHelperMaterial",n.transparent=!0,n.alphaTest=.5,n.side=i.$EB,console.warn("TextHelperMaterial is not supported in WebGPU yet, do not expect it to work.");let r=(0,h.PiW)(e.uDataTextureSize.value).onFrameUpdate(()=>e.uDataTextureSize.value),a=(0,h.PiW)(e.uDataStride.value).onFrameUpdate(()=>e.uDataStride.value);function s(t,n){let i=r.x,s=(0,h.WQq)((0,h.lKK)(t,a),n),o=(0,h.y4m)(s,i),l=(0,h.jbE)(s,(0,h.lKK)(o,i));return(0,h.wHr)(e.uDataTexture.value,(0,h.ZcS)(l,o))}(0,h.PiW)(e.uDataStrideHeader.value).onFrameUpdate(()=>e.uDataStrideHeader.value),(0,h.PiW)(e.uAtlasCharGrid.value).onFrameUpdate(()=>e.uAtlasCharGrid.value);let o=s(h.cGD,0);(0,h.PCg)((0,h.lKK)(o.r,255)),(0,h.PCg)(s(h.cGD,1)),(0,h.PCg)(s(h.cGD,2)),(0,h.fVC)(1);let l=(0,h.PiW)(1).onRenderUpdate(()=>e.uOrientation.value);return n.positionNode=(0,h.Fn)(()=>{let e=(0,h.eR5)().toVar();return(0,h.If)(l.equal(0),()=>{e.assign(h.WVU)}).Else(()=>{e.assign((0,h.w00)(h.FLB).mul(h.WVU))}),e})(),n.colorNode=(0,h.yWT)("yellow"),n}(s,0):function(e,t){let n=new i.V9B({map:t.texture,transparent:!0,alphaTest:.5,side:i.$EB});return n.name="TextHelperMaterial",n.onBeforeCompile=t=>f.b.with(t).uniforms(e).varying({vInstanceId:"float",vTextColor:"vec4",vBackgroundColor:"vec4",vCurrentLineCount:"float"}).top("\n      vec4 getData4(int instanceId, int offset) {\n        int width = int(uDataTextureSize.x);\n        int index = instanceId * int(uDataStride) + offset;\n        int dataY = index / width;\n        int dataX = index - dataY * width;\n        return texelFetch(uDataTexture, ivec2(dataX, dataY), 0);\n      }\n      vec4 getData4(float instanceId, int offset) {\n        return getData4(int(instanceId), offset);\n      }\n        \n      vec2 getCharOffset(float instanceId, float charIndex) {\n        int p = int(uDataStrideHeader + charIndex);\n        int q = p / 4;\n        int r = p - q * 4; // p % 4;\n        vec4 charIndexes = getData4(instanceId, q);\n        float i = charIndexes[r] * 255.0;\n        float x = mod(i, uAtlasCharGrid.x);\n        float y = floor(i / uAtlasCharGrid.x);\n        return vec2(x, uAtlasCharGrid.y - y - 1.0) / uAtlasCharGrid;\n      }\n      vec2 getCharOffset(float instanceId, float line, float char) {\n        // return vec2(line * 82.0 + char, 0.0) / uAtlasCharGrid;\n        return getCharOffset(instanceId, line * uLineLength + char);\n      }\n    ").vertex.replace("project_vertex","\n      vec4 infoTexel = getData4(gl_InstanceID, 0);\n      vCurrentLineCount = infoTexel.r * 255.0;\n\n      vTextColor = getData4(gl_InstanceID, 1);\n      vBackgroundColor = getData4(gl_InstanceID, 2);\n\n      vec4 sizeBytes = getData4(gl_InstanceID, 3) * 255.0;\n      uint encoded =\n        uint(sizeBytes.x) << 24 |\n        uint(sizeBytes.y) << 16 |\n        uint(sizeBytes.z) << 8  |\n        uint(sizeBytes.w);\n      float size = uintBitsToFloat(encoded);\n\n      vec4 mvPosition = vec4(transformed * size, 1.0);\n\n      mat4 textMatrix = uOrientation < 0.5\n        ? modelMatrix * instanceMatrix\n        : mat4(\n          uCameraMatrix[0],\n          uCameraMatrix[1],\n          uCameraMatrix[2],\n          modelMatrix * vec4(instanceMatrix[3].xyz, 1.0));\n\n      mvPosition.xy += uTextOffset;\n\n      mvPosition = viewMatrix * textMatrix * mvPosition;\n\n      gl_Position = projectionMatrix * mvPosition;\n\n      vInstanceId = float(gl_InstanceID);\n    ").fragment.top("\n      float sdBox(in vec2 p, in vec2 b) {\n        vec2 d = abs(p) - b;\n        return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n      }\n\n      vec4 getCharColor() {\n        vec2 uv = vMapUv * vec2(uLineLength, uLineCount);\n\n        uv.y += (uLineCount - vCurrentLineCount) * 0.5;\n        float lineIndex = floor((uLineCount - uv.y));\n\n        if (lineIndex < 0.0 || lineIndex >= vCurrentLineCount)\n          discard;\n\n        float currentLineLength = getData4(vInstanceId, 4 + int(lineIndex)).r * 255.0;\n        // vec2 ddx = dFdx(uv);\n        // vec2 ddy = dFdy(uv);\n        uv.x += (uLineLength - currentLineLength) * -0.5;\n        float charIndex = floor(uv.x);\n\n        if (charIndex < 0.0 || charIndex >= currentLineLength)\n          discard;\n\n        uv = fract(uv);\n        // diffuseColor = vec4(uv, 1.0, 1.0);\n        uv /= uAtlasCharGrid;\n\n        uv += getCharOffset(vInstanceId, lineIndex, charIndex);\n        // float lod = log2(max(length(dFdx(vMapUv)), length(dFdy(vMapUv))));\n        vec4 charColor = textureLod(map, uv, 0.0);\n        // Use textureGrad for better quality, when the square texture will be used\n        // vec4 sampledDiffuseColor = textureGrad(map, uv, ddx, ddy);\n        float char = charColor.r;\n        \n        return vec4(\n          mix(vBackgroundColor.rgb, vTextColor.rgb, charColor.r),\n          mix(vBackgroundColor.a, vTextColor.a, charColor.r));\n      }\n\n      vec4 getCharColorWithBorder() {\n        if (uBoxBorderWidth > 0.0) {\n          vec2 p = (vMapUv - 0.5) * uPlaneSize;\n          float d = sdBox(p, uPlaneSize * 0.5) + uBoxBorderWidth;\n          if (d > 0.0) {\n            return vTextColor;\n          }\n        }\n        return getCharColor();\n      }\n    ").fragment.replace("map_fragment","\n      diffuseColor = getCharColorWithBorder();\n    "),n}(s,n),t.textCount),this.textHelperId=m++,this.onBeforeRender=(e,t,n,i,r,a)=>{s.uCameraMatrix.value.copy(n.matrixWorld)},this.frustumCulled=!1,this.layers,this.options=t,this.atlas=n,this.data=a,this.derived={planeSize:o}}}v.defaultOptions=d,v.Atlas=l,v.Data=u},72598:(e,t,n)=>{"use strict";n.d(t,{m:()=>o,s:()=>T});class i{clone(){let e=Object.create(this);for(let[t,n]of Object.entries(this))e[t]=function e(t){if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);switch(t.constructor){case DOMPoint:return DOMPoint.fromPoint(t);case DOMRect:return DOMRect.fromRect(t);case Object:{let n=Object.create(t);for(let i of Object.keys(t))n[i]=e(t[i]);return n}}throw Error("Unsupported value type: ".concat(t.constructor))}(n);return Object.freeze(e)}}class r{get targetElement(){throw Error("Not implemented")}get button(){throw Error("Not implemented")}getLocalPosition(e){let t=this.targetElement.getBoundingClientRect(),{x:n,y:i}=this.position;return null!=e||(e={}),e.x=n-t.x,e.y=i-t.y,e}get localPosition(){return this.getLocalPosition(new DOMPoint)}getRelativeLocalPosition(e){let{x:t,y:n}=this.localPosition,i=this.targetElement.getBoundingClientRect();return null!=e||(e={}),e.x=(t-i.x)/i.width,e.y=(n-i.y)/i.height,e}get relativeLocalPosition(){return this.getRelativeLocalPosition(new DOMPoint)}constructor(){this.position=new DOMPoint}}class a extends r{get targetElement(){let e=this.event.target;if(e instanceof Element)return e;throw Error("targetElement is not an Element")}get button(){return this.event instanceof MouseEvent||this.event instanceof PointerEvent?this.event.button:0}get localPosition(){let e=this.targetElement.getBoundingClientRect(),{x:t,y:n}=this.position;return new DOMPoint(t-e.x,n-e.y)}constructor(e=!1,t=!1,n=new DOMPoint,i=new DOMPoint,r=null){super(),this.entered=e,this.pressed=t,this.downPosition=n,this.upPosition=i,this.event=r}}let s=["onDown","onUp","onChange","onEnter","onLeave"];var o,l=n(36508);!function(e){e[e.Main=0]="Main",e[e.Aux=1]="Aux",e[e.Second=2]="Second",e[e.Fourth=3]="Fourth",e[e.Fifth=4]="Fifth",e[e.DoubleTouch=5]="DoubleTouch",e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(o||(o={}));class c extends r{get button(){return this._button}get targetElement(){return this.downTargetElement}constructor(...e){super(...e),this.direction="horizontal",this.startPosition=new DOMPoint,this.position=new DOMPoint,this.positionOld=new DOMPoint,this.movement=new DOMPoint,this.delta=new DOMPoint,this.deltaTime=1/60,this.shiftKey=!1,this.metaKey=!1,this.altKey=!1,this.ctrlKey=!1,this.downTargetElement=null,this._button=0}}let d={dragDistanceThreshold:10,dragSnapToInitialPosition:!1,dragPreventDefault:!1,dragButton:1<<o.Main,dragEaseFactor:1,dragTickOrder:void 0},u=["onDragStart","onDragStop","onDrag","onVerticalDragStart","onVerticalDragStop","onVerticalDrag","onHorizontalDragStart","onHorizontalDragStop","onHorizontalDrag"],h={},p=["onFocusEnter","onFocusLeave"];var f=n(6726);let m=["onPressStart","onPressStop","onPressFrame"];class v extends r{get targetElement(){return this.tapTarget}get button(){return this.orignalDownEvent.button}getLocalDownPosition(e){let{x:t,y:n}=this.localPosition;return null!=e||(e={}),e.x=t,e.y=n,e}get localDownPosition(){return this.localPosition}constructor(e,t,n,i,r){super(),this.originalUpEvent=null,this.timestamp=e,this.tapTarget=t,this.downTarget=n,this.downPosition=i,this.orignalDownEvent=r,this.position=i}}let g={maxDistance:10,maxDuration:.3},x=["onTap"];var w=n(79285);class y extends i{constructor(...e){super(...e),this.time=-1,this.rawDeltaTime=-1,this.deltaTime=-1,this.delta=new DOMPoint,this.phase="start",this.event=null}}let b={wheelPreventDefault:!1},P=["onWheel","onWheelStart","onWheelEnd"];class M extends i{constructor(e=0,t=0,n=new DOMPoint,i="start"){super(),this.time=e,this.deltaTime=t,this.delta=n,this.phase=i}}let S={preventDefault:!1,wheelFrameTickOrder:void 0},C=["onWheelFrame","onWheelFrameStart","onWheelFrameEnd"];class z{add(e){if(this.data.length===this.capacity){let e=this.data.shift();this.sum.x-=e.x,this.sum.y-=e.y,this.sum.z-=e.z}this.data.push(e),this.sum.x+=e.x,this.sum.y+=e.y,this.sum.z+=e.z;let t=this.data.length;this.average.x=this.sum.x/t,this.average.y=this.sum.y/t,this.average.z=this.sum.z/t}constructor(e=5){this.data=[],this.sum=new DOMPoint,this.average=new DOMPoint,this.capacity=e}}function T(e,t){let n=[];for(let i of"length"in e?Array.from(e):[e])(function(e){return s.some(t=>t in e)})(t)&&n.push(function(e,t){let n={touchStarted:!1,touchTimestamp:-1};function i(){return n.touchStarted||n.touchTimestamp>Date.now()-1e3}let r=new a,s=(e,n,i)=>{var a;r.pressed=!0,r.downPosition.x=n,r.downPosition.y=i,l(e,n,i),null==(a=t.onDown)||a.call(t,r)},o=(e,n,i)=>{var a;r.pressed=!1,r.upPosition.x=n,r.upPosition.y=i,l(e,n,i),null==(a=t.onUp)||a.call(t,r),r.position.x=-1,r.position.y=-1},l=(e,n,i)=>{if(r.position.x!==n||r.position.y!==i){var a;r.event=e,r.position.x=n,r.position.y=i,null==(a=t.onChange)||a.call(t,r)}},c=e=>{!1===i()&&s(e,e.clientX,e.clientY)},d=e=>{!1===i()&&o(e,e.clientX,e.clientY)},u=e=>{!1===i()&&l(e,e.clientX,e.clientY)},h=()=>{document.body.addEventListener("mouseup",f),m()},p=()=>{v()},f=()=>{r.pressed=!1,v(),document.documentElement.removeEventListener("mouseup",f)},m=()=>{if(!1===r.entered){var e;r.entered=!0,null==(e=t.onEnter)||e.call(t,r)}},v=()=>{if(r.entered&&!1===r.pressed){var e;r.entered=!1,null==(e=t.onLeave)||e.call(t,r)}},g=e=>{1===e.touches.length&&(n.touchStarted=!0,n.touchTimestamp=Date.now(),s(e,e.touches[0].clientX,e.touches[0].clientY))},x=e=>{0===e.touches.length&&(n.touchStarted=!1,n.touchTimestamp=Date.now(),o(e,e.changedTouches[0].clientX,e.changedTouches[0].clientY))},w=e=>{1===e.touches.length&&(n.touchTimestamp=Date.now(),l(e,e.touches[0].clientX,e.touches[0].clientY))};return e.addEventListener("mouseover",h),e.addEventListener("mouseout",p),e.addEventListener("mousedown",c),e.addEventListener("mouseup",d),e.addEventListener("mousemove",u),e.addEventListener("touchstart",g,{passive:!1}),e.addEventListener("touchend",x,{passive:!1}),e.addEventListener("touchmove",w,{passive:!1}),()=>{e.removeEventListener("mouseover",h),e.removeEventListener("mouseout",p),e.removeEventListener("mousedown",c),e.removeEventListener("mouseup",d),e.removeEventListener("mousemove",u),e.removeEventListener("touchstart",g),e.removeEventListener("touchend",x),e.removeEventListener("touchmove",w),document.body.removeEventListener("mouseup",f)}}(i,t)),function(e){return u.some(t=>t in e)}(t)&&n.push(function(e,t){let{dragDistanceThreshold:n,dragSnapToInitialPosition:i,dragPreventDefault:r,dragButton:a,dragEaseFactor:s,dragTickOrder:u,onDragStart:h,onDragStop:p,onDrag:f,onVerticalDragStart:m,onVerticalDragStop:v,onVerticalDrag:g,onHorizontalDragStart:x,onHorizontalDragStop:w,onHorizontalDrag:y}={...d,...t},b=!1,P=!1,M=!1,S=-1,C=new DOMPoint(0,0),z=new c,{startPosition:T,position:D,positionOld:A,movement:O,delta:j}=z,E=()=>{S=void 0===u?window.requestAnimationFrame(U):l.Rv.current().requestAnimationFrame(U,{order:u})},_=()=>{void 0===u?window.cancelAnimationFrame(S):l.Rv.current().cancelAnimationFrame(S)},I=(e,t)=>{E(),b=!0,T.x=e,T.y=t,C.x=e,C.y=t},B=()=>{switch(P=!0,j.x=0,j.y=0,O.x=0,O.y=0,D.x=T.x,D.y=T.y,null==h||h(z),z.direction){case"horizontal":null==x||x(z);break;case"vertical":null==m||m(z)}},R=()=>{switch(P=!1,null==p||p(z),z.direction){case"horizontal":null==w||w(z);break;case"vertical":null==v||v(z)}},L=(e,t)=>{A.x=D.x,A.y=D.y,D.x+=(e-D.x)*s,D.y+=(t-D.y)*s,j.x=D.x-A.x,j.y=D.y-A.y,O.x=D.x-T.x,O.y=D.y-T.y},k=()=>{switch(i&&!1===M?L(T.x,T.y):L(C.x,C.y),null==f||f(z),z.direction){case"horizontal":null==y||y(z);break;case"vertical":null==g||g(z)}},N=0,U=e=>{if(z.deltaTime=(e-N)/1e3,N=e,b){E();let e=T.x-C.x,t=T.y-C.y;M=Math.sqrt(e*e+t*t)>n,!1===P&&M&&(z.direction=Math.abs(e/t)>=1?"horizontal":"vertical",B()),P&&k()}},F=e=>{z._button=e.button,z.downTargetElement=e.target,a&1<<e.button&&(window.addEventListener("mousemove",V,{passive:!1}),window.addEventListener("mouseup",q),I(e.clientX,e.clientY))},V=e=>{C.x=e.clientX,C.y=e.clientY,z.shiftKey=e.shiftKey,z.metaKey=e.metaKey,z.altKey=e.altKey,z.ctrlKey=e.ctrlKey,P&&r&&e.preventDefault()},q=()=>{window.removeEventListener("mousemove",V),window.addEventListener("mouseup",q),P&&R(),b=!1},W=null,Y=e=>{if(a&1<<o.Main){let t=e.changedTouches[0];null===W&&(W=t,window.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("touchend",G),E(),b=!0,z.downTargetElement=e.target,j.x=0,j.y=0,O.x=0,O.y=0,T.x=t.clientX,T.y=t.clientY,D.x=t.clientX,D.y=t.clientY,C.x=t.clientX,C.y=t.clientY)}},X=e=>{let t=e.changedTouches[0];t.identifier===W.identifier&&(C.x=t.clientX,C.y=t.clientY,z.shiftKey=e.shiftKey,z.metaKey=e.metaKey,z.altKey=e.altKey,z.ctrlKey=e.ctrlKey,P&&r&&e.preventDefault())},G=e=>{e.changedTouches[0].identifier===W.identifier&&(window.removeEventListener("touchmove",X),window.removeEventListener("touchend",G),P&&R(),b=!1,W=null)};return e.addEventListener("mousedown",F,{passive:!1}),e.addEventListener("touchstart",Y,{passive:!1}),()=>{e.removeEventListener("mousedown",F),e.removeEventListener("touchstart",Y),window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",q),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",G),_()}}(i,t)),function(e){return p.some(t=>t in e)}(t)&&n.push(function(e,t){let{onFocusEnter:n,onFocusLeave:i}={...h,...t},r=()=>{e.addEventListener("blur",a),null==n||n({})},a=()=>{e.removeEventListener("blur",a),null==i||i({})};return e.addEventListener("focus",r),()=>{e.removeEventListener("focus",r),e.removeEventListener("blur",a)}}(i,t)),function(e){return m.some(t=>t in e)}(t)&&n.push(function(e,t){let{onPressStart:n,onPressStop:i,onPressFrame:r}=t,a=!1,s=-1,o=new DOMPoint(0,0),l=new DOMPoint(0,0),c=new DOMPoint(0,0),d={position:l,delta:c,target:e,targetRectOnDown:new f.M_,get pointerIsInside(){return d.targetRectOnDown.contains(o.x,o.y)}},u=()=>{a&&(s=window.requestAnimationFrame(u),c.x=o.x-l.x,c.y=o.y-l.y,l.x+=c.x,l.y+=c.y,null==r||r(d))},h=t=>{window.addEventListener("mousemove",p),window.addEventListener("mouseup",m),s=window.requestAnimationFrame(u),a=!0,d.targetRectOnDown.copy(e.getBoundingClientRect()),c.x=0,c.y=0,l.x=t.clientX,l.y=t.clientY,o.x=t.clientX,o.y=t.clientY,null==n||n(d)},p=e=>{o.x=e.clientX,o.y=e.clientY},m=()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m),a=!1,null==i||i(d)},v=t=>{t.preventDefault();let i=t.touches[0];i&&(window.addEventListener("touchmove",g),window.addEventListener("touchend",x),s=window.requestAnimationFrame(u),a=!0,d.targetRectOnDown.copy(e.getBoundingClientRect()),c.x=0,c.y=0,l.x=i.clientX,l.y=i.clientY,o.x=i.clientX,o.y=i.clientY,null==n||n(d))},g=e=>{let t=e.touches[0];t&&(o.x=t.clientX,o.y=t.clientY)},x=e=>{window.removeEventListener("touchmove",g),window.removeEventListener("touchend",x),a=!1,null==i||i(d)};return e.addEventListener("mousedown",h,{passive:!1}),e.addEventListener("touchstart",v,{passive:!1}),()=>{e.removeEventListener("mousedown",h),e.removeEventListener("touchstart",v),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",x),window.cancelAnimationFrame(s)}}(i,t)),function(e){return x.some(t=>t in e)}(t)&&n.push(function(e,t){let{maxDistance:n,maxDuration:i,onTap:r}={...g,...t},a=null,s=t=>{a=new v(Date.now(),e,t.target,new DOMPoint(t.clientX,t.clientY),t),window.addEventListener("pointerup",o)},o=e=>{window.removeEventListener("pointerup",o),function(e,t){if(!e)return!1;let n=t;for(;n;){if(n===e)return!0;n=n.parentElement}return!1}(a.downTarget,e.target)&&(Date.now()-a.timestamp)/1e3<=i&&Math.hypot(e.clientX-a.downPosition.x,e.clientY-a.downPosition.y)<=n&&(a.originalUpEvent=e,window.requestAnimationFrame(()=>{null==r||r(a)}))};return e.addEventListener("pointerdown",s),()=>{e.removeEventListener("pointerdown",s),window.removeEventListener("pointerup",o)}}(i,t)),function(e){return P.some(t=>t in e)}(t)&&n.push(function(e,t){let{wheelPreventDefault:n,onWheel:i,onWheelStart:r,onWheelEnd:a}={...b,...t},s={start:!1,timeout:-1,time:-1},o=new y,l=e=>{n&&e.preventDefault();let t=!1===s.start?"start":"continue",l=e.timeStamp/1e3,c="start"===t?1/60:l-s.time;s.time=l,o.event=e,o.phase=t,o.time=l;let d=function(e){switch(e){default:case 0:return 1;case 1:return 16;case 2:return 1e3}}(e.deltaMode);o.delta.x=e.deltaX*d,o.delta.y=e.deltaY*d,o.delta.z=e.deltaZ*d;let u=(0,w.clamp)(c,1/240,1/30);o.rawDeltaTime=c,o.deltaTime=u,"start"===t&&(s.start=!0,null==r||r(o)),null==i||i(o),window.clearTimeout(s.timeout),s.timeout=window.setTimeout(()=>{s.start=!1,o.phase="end",o.deltaTime=.1,o.time=l+.1,o.delta.x=0,o.delta.y=0,o.delta.z=0,null==a||a(o)},100)};return e.addEventListener("wheel",l,{passive:!n}),()=>{e.removeEventListener("wheel",l)}}(i,t)),function(e){return C.some(t=>t in e)}(t)&&n.push(function(e,t){let{preventDefault:n,wheelFrameTickOrder:i,onWheelFrame:r,onWheelFrameStart:a,onWheelFrameEnd:s}={...S,...t},o={msOld:0,frame:0,frameID:0,deltaTime:0,time:0,position:new DOMPoint,positionOld:new DOMPoint,eventCount:0,eventCountOld:0,eventFrame:0,eventMsOld:0,eventPosition:new DOMPoint,eventVelocities:new z(5),eventVelocity:new DOMPoint},c=e=>{n&&e.preventDefault();let t=0===o.eventCount?1/60:(e.timeStamp-o.eventMsOld)/1e3;0===o.eventCount&&d(),o.eventPosition.x+=e.deltaX,o.eventPosition.y+=e.deltaY,o.eventPosition.z+=e.deltaZ;let i=new DOMPoint;i.x=e.deltaX/t,i.y=e.deltaY/t,i.z=e.deltaZ/t,o.eventVelocities.add(i),o.eventCount++,o.eventFrame=o.frame,o.eventMsOld=e.timeStamp},d=()=>{u(),o.frameID=void 0===i?window.requestAnimationFrame(h):l.Rv.current().requestAnimationFrame(h,{order:i})},u=()=>{void 0===i?window.cancelAnimationFrame(o.frameID):l.Rv.current().cancelAnimationFrame(o.frameID)},h=e=>{let t=0===o.eventCountOld?"start":o.frame===o.eventFrame+8?"end":"continue";console.log(t);let n=(e-o.msOld)/1e3,i="start"===t?1/60:(0,w.clamp)(n,1/240,1/30);if(o.deltaTime=i,o.msOld=e,"end"!==t?d():u(),o.time+=i,"end"===t)o.position.x=o.eventPosition.x,o.position.y=o.eventPosition.y,o.position.z=o.eventPosition.z;else{let{x:e,y:t,z:n}=o.eventVelocities.average;o.position.x+=e*i*8,o.position.y+=t*i*8,o.position.z+=n*i*8;let r=10000000000000017e-46**i;o.position.x+=(o.eventPosition.x-o.position.x)*r,o.position.y+=(o.eventPosition.y-o.position.y)*r,o.position.z+=(o.eventPosition.z-o.position.z)*r}let l=new DOMPoint;l.x=o.position.x-o.positionOld.x,l.y=o.position.y-o.positionOld.y,l.z=o.position.z-o.positionOld.z;let c=new M(o.time,i,l,t);"start"===t&&(null==a||a(c)),null==r||r(c),"end"!==t?(o.eventCountOld=o.eventCount,o.frame++,o.positionOld.x=o.position.x,o.positionOld.y=o.position.y,o.positionOld.z=o.position.z):(o.eventCount=0,o.eventCountOld=0,o.frame=0,null==s||s(c))};return e.addEventListener("wheel",c,{passive:!n}),()=>{e.removeEventListener("wheel",c),u()}}(i,t));return()=>{for(let e of n)e()}}},72612:(e,t,n)=>{"use strict";function*i(e){let t=0,n={get i(){return t},get t(){return t/e},get p(){return t/(e-1)},get size(){return e},clone(){return{...this}}};for(t=0;t<e;t++)yield n}function r(e,t){let n=[];for(let r of i(e)){let e=r.clone();n.push(t?t(e):e)}return n}function*a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=0,r=0;2===t.length?(i=t[0],r=t[1]):Array.isArray(t[0])?(i=t[0][0],r=t[0][1]):(i=t[0].x,r=t[0].y);let a=0,s=0,o=0,l={get i(){return a},get x(){return s},get y(){return o},get tx(){return s/i},get ty(){return o/r},get px(){return s/(i-1)},get py(){return o/(r-1)},get sizeX(){return i},get sizeY(){return r},clone(){return{...this}}};for(o=0;o<r;o++)for(s=0;s<i;s++)yield l,a++}function s(){let e;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];let r=0,s=0;"number"==typeof n[0]?(r=n[0],s=n[1],e=n[2]):(Array.isArray(n[0])?(r=n[0][0],s=n[0][1]):(r=n[0].x,s=n[0].y),e=n[1]);let o=[];for(let t of a(r,s)){let n=t.clone();o.push(e?e(n):n)}return o}function*o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=0,r=0,a=0;3===t.length?(i=t[0],r=t[1],a=t[2]):Array.isArray(t[0])?(i=t[0][0],r=t[0][1],a=t[0][2]):(i=t[0].x,r=t[0].y,a=t[0].z);let s=0,o=0,l=0,c=0,d={get i(){return s},get x(){return o},get y(){return l},get z(){return c},get tx(){return o/i},get ty(){return l/r},get tz(){return c/a},get px(){return o/(i-1)},get py(){return l/(r-1)},get pz(){return c/(a-1)},clone(){return{...this}}};for(c=0;c<a;c++)for(l=0;l<r;l++)for(o=0;o<i;o++)yield d,s++}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[];for(let e of o(...t))i.push(e.clone());return i}n.r(t),n.d(t,{loop:()=>i,loop2:()=>a,loop2Array:()=>s,loop3:()=>o,loop3Array:()=>l,loopArray:()=>r})},74978:(e,t,n)=>{"use strict";n.d(t,{Main:()=>u});var i=n(70691),r=n(49797),a=n(97074),s=n(56647),o=n(9723),l=n(87381),c=n(23120);class d extends r.YJl{onTick(e){let{mesh:t}=this.parts;t.rotation.y+=e.deltaTime}constructor(...e){super(...e),this.parts=(()=>{let e=(0,l.mj)(new r.eaF(new r.WBB,new o.Y),{parent:this,userData:{onPointerTap:()=>alert("Hello, world!")}}),t=(0,l.mj)(new s.R,this);t.grid2().draw();let n=new c.hf;return(0,l.mj)(n,this),{mesh:e,line:t}})()}}function u(){return(0,i.jsx)(a.uB,{webgl:!0,vertigoControls:{size:20},children:(0,i.jsxs)("div",{className:"Main layer thru flex flex-col items-start justify-start p-4",children:[(0,i.jsx)("h1",{children:"Chunk Viewer"}),(0,i.jsx)(a.q,{value:d})]})})}},85795:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Observable:()=>o,ObservableNumber:()=>u,ObservableSet:()=>h,ObservableTree:()=>g});let i=new Map,r=0;function a(e){for(let[t,{execTime:n,callback:a}]of(r=e,i.entries()))n<r&&(i.delete(t),a())}if("requestAnimationFrame"in globalThis&&"function"==typeof globalThis.requestAnimationFrame){let e=t=>{globalThis.requestAnimationFrame(e),a(t/1e3)};globalThis.requestAnimationFrame(e)}else{let e=Date.now();globalThis.setInterval(()=>{a((Date.now()-e)/1e3)},1e3/60)}let s=0;class o{static get nextId(){return s}is(e){return this._value===e}_invokeListeners(){let e=this._listeners[Symbol.iterator]();for(;;){let{value:t,done:n}=e.next();if(n)break;t(this._value,this)}}_handleDelay(e,t){if((null==t?void 0:t.delay)!==void 0){let{delay:n,...a}=t;return!function(e,t,n){let a="number"==typeof t?t:t.endsWith("ms")?Number.parseFloat(t.slice(0,-2))/1e3:Number.parseFloat(t.slice(0,-1)),s=r+a;i.set(e,{execTime:s,callback:n})}(this,n,()=>{this.setValue(e,a)}),this._delayed=!0,!0}return this._delayed&&i.delete(this),this._delayed=!1,!1}setValue(e,t){return!this._handleDelay(e,t)&&((this._valueMapper&&(e=this._valueMapper(e,this)),e===this._value)?(this._hasChanged=!1,!1):(this._valueOld=this._value,this._value=e,this._hasChanged=!0,this._invokeListeners(),!0))}initializeSerialization(e,t){return this.valueStringifier=e,this.valueParser=t,this}valueToString(){return this.valueStringifier?this.valueStringifier(this._value):String(this._value)}setValueFromString(e,t){if(this.valueParser){let n=this.valueParser(e);return this.setValue(n,t)}let n=typeof this._value;switch(n){case"string":return this.setValue(e,t);case"number":return this.setValue(Number(e),t);case"boolean":let i=/^true|1$/.test(e);return this.setValue(i,t);case"bigint":return this.setValue(BigInt(e),t);default:return console.warn('Observable#setValueFromString: Unsupported type "'.concat(n,'"')),!1}}setValueMapper(e){return this._valueMapper=e,!!e&&this.setValue(e(this._value,this))}clearListeners(){return this._listeners.clear(),this}onChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r]=2===t.length?t:[{},t[0]],{executeImmediately:a=!1,once:s=!1}=i;if(s){if(a)return r(this._value,this),{destroy:()=>{}};let e=this.onChange({...i,executeImmediately:!1,once:!1},(t,n)=>{e.destroy(),r(t,n)});return e}return this._listeners.add(r),a&&r(this._value,this),{destroy:()=>this._listeners.delete(r)}}onDerivativeChange(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=e(this._value),[{executeImmediately:a=!1},s]=2===n.length?n:[{},n[0]];return a&&s(r,r,this._value,this),this.onChange(t=>{let n=r;(r=e(t))!==n&&s(r,n,t,this)})}onVerify(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=3===t.length?t:[{},...t],s=r(this._value);return i.executeImmediately&&a(s,this._value,this),this.onChange(e=>{let t=r(e);t!==s&&a(s=t,e,this)})}get observableId(){return this._observableId}get value(){return this._value}set value(e){this.setValue(e)}get valueOld(){return this._valueOld}log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{value:i=e=>{var t;return null!=(t=null==e?void 0:e.toString())?t:String(e)},message:r=e=>"Obs#".concat(this._observableId," value has changed: ")}=1!==t.length?{}:"function"==typeof t[0]?{value:t[0]}:t[0];return this.onChange(()=>{console.log("".concat(r(this)," ").concat(i(this._value)))})}constructor(e,t){this._observableId=s++,this._valueMapper=null,this._listeners=new Set,this._hasChanged=!1,this._delayed=!1,this.valueStringifier=null,this.valueParser=null,this.get=()=>this._value,this.set=this.setValue.bind(this),this._value=e,this._valueOld=e;let{valueMapper:n=null,onChange:i,userData:r={}}=null!=t?t:{};this._valueMapper=n,this.userData=r,i&&this.onChange(i)}}var l=n(63126),c=n(53245);function d(e,t,n){return e<t?t:e>n?n:e}class u extends o{get lowerBound(){return this._lowerBound}set lowerBound(e){this.setBounds(e,this._upperBound)}get upperBound(){return this._upperBound}set upperBound(e){this.setBounds(this._lowerBound,e)}get min(){return this.lowerBound}set min(e){this.lowerBound=e}get max(){return this.upperBound}set max(e){this.upperBound=e}get delta(){return this._value-this._valueOld}setValue(e,t){if(e=d(e,this._lowerBound,this._upperBound),e=this._integer?Math.round(e):e,this._handleDelay(e,t))return!1;let n=super.setValue(e,t);return this._memorization&&this._memorization.setValue(this._value,!0),n}setBounds(e,t){let n=d(this._value,e,t);return this._lowerBound=e,this._upperBound=t,this._value!==n&&this.setValue(n)}setMinMax(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setBounds(...t)}initMemorization(e){let{derivativeCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof arguments[1]&&(console.warn("ObservableNumber.initMemorization(memorizationLength, derivativeCount) is deprecated. Use ObservableNumber.initMemorization(memorizationLength, { derivativeCount }) instead."),t=arguments[1]),this._memorization=new c.r(e,this._value,t),this}getMemorization(){return this._memorization}isAbove(e){return this._value>=e}isBelow(e){return this._value<e}passed(e,t){let{value:n,valueOld:i}=this,r=n>=t&&i<t,a=n<t&&i>=t;switch(e){case"through":return r||a;case"above":return r;case"below":return a}throw Error("Impossible! Typescript, where are you?")}getPassMode(e){let{value:t,valueOld:n}=this;return t>=e&&n<e?"above":t<e&&n>=e?"below":null}stepValue(e){return Math.round(this._value/e)*e}onStepChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=function(e){if(3===e.length)return e;if(2===e.length)return[e[0],{},e[1]];throw Error("Invalid arguments: (".concat(e.join(", "),")"))}(t),s=NaN;return this.onChange(r,()=>{let e=this.stepValue(i);s!==e&&a(s=e,this)})}onPass(e,t,n){return this.onChange(()=>{this.passed(e,t)&&n(this.value,this)})}increment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setValue(this._value+e)}lerpTo(e,t){let{clamp:n=!0,epsilon:i=1e-9,modulo:r=-1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this._value;if(r>=0){let s=(e=(e%r+r)%r)-a;Math.abs(s)>r/2&&(e=a+(s>0?s-r:s+r));let o=Math.abs(e-a)<i?e:a+(e-a)*(n?t<0?0:t>1?1:t:t);return this.setValue(o%r)}let s=Math.abs(e-a)<i?e:a+(e-a)*(n?t<0?0:t>1?1:t:t);return this.setValue(s)}lerp(e,t,n){let i=this._value;return(null==n?void 0:n.clamped)===!0&&(i=i<0?0:i>1?1:i),e+(t-e)*i}inverseLerp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerBound,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.upperBound,n=arguments.length>2?arguments[2]:void 0,i=(this._value-e)/(t-e);return(null==n?void 0:n.clamped)===!0&&(i=i<0?0:i>1?1:i),i}exponentialDecay(e,t,n){return this.setValue((0,l.calculateExponentialDecay)(this._value,e,t,n))}exponentialGrow(e,t,n){let i=(e=>{if("number"==typeof e)return 1-e;let[t,n]=e;return(1-t)**(1/n)})(t),r=e-(e-this._value)*i**n;return this.setValue(r)}constructor(e,t){var n,i,r;let a=-1/0,s=1/0;Array.isArray(t)?([a,s]=t,t={}):(a=null!=(n=null==t?void 0:t.lowerBound)?n:a,s=null!=(i=null==t?void 0:t.upperBound)?i:s),super(d(e,a,s),t),this._memorization=null,this._lowerBound=a,this._upperBound=s,this._integer=null!=(r=null==t?void 0:t.integer)&&r}}class h extends o{get _set(){return this._value}get _setOld(){return this._valueOld}get entering(){return new Set(this._entering)}get leaving(){return new Set(this._leaving)}get size(){return this._set.size}swap(){let{_set:e,_setOld:t}=this;this._value=t,this._valueOld=e}get value(){return new Set(this._value)}get valueOld(){return new Set(this._valueOld)}has(e){return this._value.has(e)}get shouldKeep(){return this._shouldKeep}setShouldKeep(e){return this._shouldKeep=e,this}purge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shouldKeep;if(!e)return!1;let t=new Set(this._value),n=!1;for(let i of t)e(i)||(t.delete(i),n=!0);return!!n&&this.setValue(t)}setValue(e,t){if(this._handleDelay(e,t))return!1;this.swap();let{_set:n,_setOld:i,_entering:r,_leaving:a,_shouldKeep:s}=this;for(let t of(r.clear(),a.clear(),n.clear(),e))s&&!1===s(t)||(i.has(t)||r.add(t),n.add(t));for(let e of i)n.has(e)||a.add(e);let o=r.size>0||a.size>0;return o&&this._invokeListeners(),o}add(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value,...t])}remove(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value].filter(e=>!t.includes(e)))}clear(){return this.setValue([])}intersection(e){let t=new Set;for(let n of e)this.has(n)&&t.add(n);return t}otherDifference(e){let t=new Set;for(let n of e)this.has(n)||t.add(n);return t}constructor(){super(new Set),this._entering=new Set,this._leaving=new Set,this._valueOld=new Set}}var p=n(28340),f=n(22115);class m{get totalChangeCount(){return this.aOnlyChanges.length+this.bOnlyChanges.length+this.bothChanges.length}get aChangeCount(){return this.aOnlyChanges.length+this.bothChanges.length}get bChangeCount(){return this.bOnlyChanges.length+this.bothChanges.length}get a(){return this.getAChangeObject()}get b(){return this.getBChangeObject()}*getAChanges(){for(let[e,t]of this.aOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,t]}getAChangeObject(){let e={};for(let[t,n]of this.getAChanges())(0,f.HD)(e,t,n,{createAscendants:!0});return e}*getBChanges(){for(let[e,t]of this.bOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,n]}getBChangeObject(){let e={};for(let[t,n]of this.getBChanges())(0,f.HD)(e,t,n,{createAscendants:!0});return e}info(){return["Total changes: ".concat(this.totalChangeCount),"  Both changes (".concat(this.bothChanges.length,")"),...this.bothChanges.map(e=>{let[t,n,i]=e;return"    ".concat(t.join(".")," = ").concat(n,"  ").concat(i)}),"","  A only changes (".concat(this.aOnlyChanges.length,")"),...this.aOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)}),"","  B only changes (".concat(this.bOnlyChanges.length,")"),...this.bOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)})].join("\n")}constructor(e,t){this.aOnlyChanges=[],this.bOnlyChanges=[],this.bothChanges=[],this.objectA=e,this.objectB=t}}function v(e,t){"string"==typeof e&&(e=e.split("."));let n={},i=n;for(let t of e.slice(0,-1))i[t]={},i=i[t];return i[e[e.length-1]]=t,n}class g extends o{setMutation(e,t){if(!e||"object"!=typeof e)throw Error("Mutation must be an object.");let{value:n}=this,i=Array.isArray(e)?v(e[0],e[1]):e,r=!1;if((0,p.gC)(i,{treatConstructedObjectAsValue:!1,onValue(e,t){let{value:i,exists:a}=(0,p.vz)(n,t);if(!a||e!==i)return r=!0,"break"}}),!r)return!1;let a=(0,p.Go)(n);return(0,p.Eg)(a,i),this.diff=function(e,t){let n=new m(e,t);return(0,f.gC)(e,{treatConstructedObjectAsValue:!1,onValue(e,i){let{value:r,exists:a}=(0,f.vz)(t,i);a&&e===r||(a?n.bothChanges.push([i,e,r]):n.aOnlyChanges.push([i,e]))}}),(0,f.gC)(t,{treatConstructedObjectAsValue:!1,onValue(t,i){let{value:r,exists:a}=(0,f.vz)(e,i);(!a||t!==r)&&(a||n.bOnlyChanges.push([i,t]))}}),n}(n,a),super.setValue(a,t)}enqueueMutation(e){var t;return null!=this._pendingMutations||(this._pendingMutations={}),(0,p.Eg)(this._pendingMutations,Array.isArray(e)?v(e[0],e[1]):e),this}flushMutations(e){if(!this._pendingMutations)return!1;let t=this.setMutation(this._pendingMutations,e);return this._pendingMutations=null,t}setValue(e,t){return this.setMutation(e,t)}onMutation(e,t){let n=Array.isArray(e)?e:e.split("."),i=n.length;return this.onChange((e,r)=>{let{valueOld:a}=r,s=!1,o=null;for(let[e]of this.diff.bothChanges)if((0,p.cD)(e,n,{maxLength:i})){s=!0,o=e.slice(0,i);break}s&&t((0,p.vz)(e,n).value,(0,p.vz)(a,n).value,{observable:this,path:o})})}constructor(...e){super(...e),this.diff=new m({},{}),this._pendingMutations=null,this.mutate=this.setMutation.bind(this)}}},93405:(e,t,n)=>{"use strict";let i;n.d(t,{Main:()=>j});var r=n(70691),a=n(49797),s=n(17953),o=n(81074),l=n(97074),c=n(56647);let d={emissive:.2,shadowColor:"#808080",power:2},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white",t=arguments.length>1?arguments[1]:void 0;return(0,s.Fn)(()=>{let{emissive:n,shadowColor:i,power:r}={...d,...t},a=s.O7c.normalize().dot(s.MI8.sub((0,s.eR5)(1,3,1)).normalize()).add(1).mul(.5).pow(r).oneMinus(),o=(0,s.jhA)(n,1,a);return(0,s.jhA)((0,s.yWT)(i),(0,s.yWT)(e),o.mul(1))})()};(0,s.Fn)(e=>{let[t,n=1]=e,i=t.length().max(n);return t.mul((0,s.fVC)(n).div(i))}),(0,s.Fn)(e=>{let[t,n]=e;return(0,s.fVC)(t).sign().mul((0,s.fVC)(t).abs().pow(n))}),(0,s.Fn)(e=>{let[t,n]=e;return(0,s.fVC)(1).sub((0,s.fVC)(2).mul(t).sub(1).abs().pow(n))}),(0,s.Fn)(e=>{let[t]=e,n=(0,s.eR5)(t),i=n.length(),r=(0,s.lnd)().toVar();return(0,s.If)(i.greaterThan(s.p8E),()=>{r.assign((0,s.lnd)(n.div(i),i))}),r}),(0,s.Fn)(e=>{let[t,n]=e,i=(0,s.ZcS)(t);(0,s.fVC)(n);let r=(0,s.fVC)(n).cos(),a=(0,s.fVC)(n).sin();return(0,s.ZcS)(i.x.mul(r).sub(i.y.mul(a)),i.x.mul(a).add(i.y.mul(r)))}),(0,s.Fn)(e=>{let[t,n,i]=e,r=(0,s.ZcS)(t),a=(0,s.ZcS)(n),o=(0,s.ZcS)(i);return r.sub(o).mul(a).add(o)}),(0,s.Fn)(e=>{let[t,n]=e,i=n.cos(),r=n.sin(),a=i.oneMinus(),o=t.x,l=t.y,c=t.z;return(0,s.w00)(i.add(o.mul(o).mul(a)),o.mul(l).mul(a).sub(c.mul(r)),o.mul(c).mul(a).add(l.mul(r)),o.mul(l).mul(a).add(c.mul(r)),i.add(l.mul(l).mul(a)),l.mul(c).mul(a).sub(o.mul(r)),o.mul(c).mul(a).sub(l.mul(r)),l.mul(c).mul(a).add(o.mul(r)),i.add(c.mul(c).mul(a)))}),(0,s.Fn)(e=>{let[t,n=0,i=437]=e,r=(0,s.tWU)(t.add(n).mul(i)),a=(0,s.tWU)(t.add(n).add(1).mul(i)),o=(0,s.tWU)(t.add(n).add(2).mul(i));return(0,s.eR5)(r,a,o)}),(0,s.Fn)(e=>{let[t,n=0,i=437]=e,r=(0,s.tWU)(t.add(n).mul(i)),a=(0,s.tWU)(t.add(n).add(1).mul(i)),o=(0,s.tWU)(t.add(n).add(2).mul(i)),l=(0,s.tWU)(t.add(n).add(3).mul(i));return(0,s.lnd)(r,a,o,l)}),(0,s.Fn)(e=>{let[t]=e,n=(0,s.tWU)(t.add(17).mul(437)),i=(0,s.tWU)(t.add(23).mul(439)),r=n.mul(2*Math.PI),a=i.mul(2).sub(1),o=a.mul(a).oneMinus().sqrt();return(0,s.eR5)(o.mul(r.cos()),o.mul(r.sin()),a)});var h=n(87381),p=n(72612),f=n(44694),m=n(96555);async function v(){return i||(i=await (0,m.A)()),i}var g=n(22641);let x=new a.Pq0,w=new a.O9p,y=new a.PTz;var b=function(e){return e[e.STATIC=0]="STATIC",e[e.KINEMATIC=1]="KINEMATIC",e[e.DYNAMIC=2]="DYNAMIC",e}({}),P=function(e){return e[e.All=63]="All",e[e.Plane2D=35]="Plane2D",e[e.RotationX=8]="RotationX",e[e.RotationY=16]="RotationY",e[e.RotationZ=32]="RotationZ",e[e.TranslationX=1]="TranslationX",e[e.TranslationY=2]="TranslationY",e[e.TranslationZ=4]="TranslationZ",e}({}),M=function(e){return e[e.STATIC=0]="STATIC",e[e.MOVING=1]="MOVING",e}({});let S=Object.keys(M).length/2;class C{toJoltShape(){throw Error("Not implemented")}toMesh(){throw Error("Not implemented")}}C.Sphere=class extends C{toJoltShape(){return new i.SphereShape(this.radius)}toMesh(){return new a.eaF(new a.WBB(this.radius,8))}constructor(e){super(),this.radius=e}},C.Box=class extends C{toJoltShape(){let e=function(e,t){let{x:n,y:i,z:r}=(0,f.jj)(e,x);return t.SetX(n),t.SetY(i),t.SetZ(r),t}(this.halfExtents,new i.Vec3);return new i.BoxShape(e)}toMesh(){let{x:e,y:t,z:n}=(0,f.jj)(this.halfExtents);return new a.eaF(new a.iNn(2*e,2*t,2*n))}constructor(e){super(),this.halfExtents=e}};class z{}async function T(e){await v();let t=new i.JoltSettings;t.mMaxWorkerThreads=3;let n=new i.ObjectLayerPairFilterTable(S);n.EnableCollision(0,1),n.EnableCollision(1,1);let r=new i.BroadPhaseLayer(0),s=new i.BroadPhaseLayer(1),o=new i.BroadPhaseLayerInterfaceTable(S,2);o.MapObjectToBroadPhaseLayer(0,r),o.MapObjectToBroadPhaseLayer(1,s),t.mObjectLayerPairFilter=n,t.mBroadPhaseLayerInterface=o,t.mObjectVsBroadPhaseLayerFilter=new i.ObjectVsBroadPhaseLayerFilterTable(o,2,n,S);let l=new i.JoltInterface(t);i.destroy(t);let c={moving:[]},d=l.GetPhysicsSystem(),u=d.GetBodyInterface(),h=e=>{for(let{mesh:t,body:n}of(l.Step(e,e>1/55?2:1),c.moving))!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Pq0;t.set(e.GetX(),e.GetY(),e.GetZ())}(n.GetPosition(),t.position),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.PTz;t.set(e.GetX(),e.GetY(),e.GetZ(),e.GetW())}(n.GetRotation(),t.quaternion)};return e.ticker.onTick(e=>{h(e.deltaTime)}),{jolt:l,physicsSystem:d,bodyInterface:u,createBody:function(){let{shape:t=new C.Sphere(.5),type:n=2,allowedDOFs:r=63,mesh:a=null,position:s=[0,0,0],rotation:o=[0,0,0],parent:l=e.scene}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=new i.BodyCreationSettings(t.toJoltShape(),function(e,t){let{x:n,y:i,z:r}=(0,f.jj)(e,x);return t.SetX(n),t.SetY(i),t.SetZ(r),t}(s,new i.RVec3),function(e,t){(0,g.if)(e,w);let{x:n,y:i,z:r,w:a}=y.setFromEuler(w);return t.SetX(n),t.SetY(i),t.SetZ(r),t.SetW(a),t}(o,new i.Quat),n,1);d.mAllowedDOFs=r;let h=u.CreateBody(d);i.destroy(d),u.AddBody(h.GetID(),i.EActivation_Activate),null!=a||(a=t.toMesh()),l.add(a);let p={body:h,mesh:a};return(1===n||2===n)&&c.moving.push(p),p}}}z.MotionType=b,z.AllowedDOF=P,z.Layers=M,z.Shape=C;class D extends a.YJl{onDestroy(){}constructor(...e){super(...e),this.parts=(()=>{let e=(0,h.mj)(new c.R,this).rectangle([1,1]);for(let t of(e.line([.05,.5],[.3,.5]),e.line([.95,.5],[.7,.5]),e.polyline([[.4,.05],[.6,.05]]),e.polyline([[.4,.95],[.6,.95]]),(0,p.loop)(10))){let n=.05+.2*t.p;e.line([n,.05],[n,.25]),e.line([n,.75],[n,.95]),e.line([1-n,.05],[1-n,.25]),e.line([1-n,.75],[1-n,.95])}return e.circle([.5,.5],.2),e.circle([.5,.5],.22),e.capsule2([.67,.67],[.32999999999999996,.32999999999999996],.05),e.capsule2([.67,.32999999999999996],[.32999999999999996,.67],.05),e.cross([.5,.5],.05),e.draw(),{line:e}})()}}class A extends a.YJl{onInitialize(e){T(e).then(e=>{var t=this;let n=e.createBody({parent:this,position:[-.3,0,0]});n.mesh.material=new o.P8l({colorNode:u().mul((0,s.eR5)((0,s.uv)().mul((0,s.ZcS)(15,10)).fract(),1))}),!function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.createBody({parent:t,position:[i+a/2,r+s/2,0],shape:new z.Shape.Box([a/2,s/2,.1]),type:z.MotionType.KINEMATIC}).mesh.material=n.mesh.material}(-2,-2,8,1),e.createBody({parent:this,position:[.1,-2,0],type:z.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({parent:this,position:[-.9,-2,-.1],type:z.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({parent:this,position:[-.5,-2,1],type:z.MotionType.KINEMATIC}).mesh.material=n.mesh.material,e.createBody({shape:new z.Shape.Box([.5,.5,.01]),allowedDOFs:z.AllowedDOF.Plane2D,position:[.15,3,0],parent:this})})}constructor(...e){super(...e),this.parts=(()=>{let e=(0,h.mj)(new c.R,this).grid2({size:4}).opacity(.05).draw();return(0,h.mj)(new D,this),(0,h.mj)(new D,{parent:this,position:[1,0,0]}),{line:e}})()}}function O(){return(0,l.Fw)(function*(e){e.pipeline.basicPasses.fxaa.enabled=!1},[]),null}function j(){return(0,r.jsx)(l.uB,{webgpu:!0,vertigoControls:{size:5},children:(0,r.jsxs)("div",{className:"Main layer thru flex flex-col items-start justify-start p-4",children:[(0,r.jsx)("h1",{children:"Chunk Viewer"}),(0,r.jsx)(l.q,{value:A}),(0,r.jsx)(O,{})]})})}},96016:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,89294,23)),Promise.resolve().then(n.bind(n,3589)),Promise.resolve().then(n.bind(n,346)),Promise.resolve().then(n.bind(n,35908)),Promise.resolve().then(n.bind(n,3905)),Promise.resolve().then(n.bind(n,23200)),Promise.resolve().then(n.bind(n,74978)),Promise.resolve().then(n.bind(n,50411)),Promise.resolve().then(n.bind(n,72491)),Promise.resolve().then(n.bind(n,93405)),Promise.resolve().then(n.bind(n,52753)),Promise.resolve().then(n.bind(n,40515)),Promise.resolve().then(n.bind(n,56969)),Promise.resolve().then(n.bind(n,55672)),Promise.resolve().then(n.t.bind(n,13196,23)),Promise.resolve().then(n.bind(n,28737))},97074:(e,t,n)=>{"use strict";n.d(t,{q:()=>x,uB:()=>b,Fw:()=>v});var i=n(70691),r=n(67203),a=n(30158),s=n(7587),o=n(37821),l=n(48083),c=n(31484),d=n(4266),u=n(14274),h=n(87381),p=n(67235);let f=(0,r.createContext)(null);function m(e,t){let n=(0,r.useContext)(f);return(0,s.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}function v(e,t){let n=m(async function*(t,n){if(t.type===c.s.WebGL&&e){let i=e(t,n);if(i&&"function"==typeof i.next)for(;;){let{value:e,done:t}=await i.next();if(t)break;yield e}}},t);return n.type===c.s.WebGL?n:null}let g={hidden:!1};function x(e){let t={...g,...e};return m(async function*(e){let{value:n,hidden:i}=t;if(!n)return;let r="function"==typeof n?new n:n;for(let n of((0,h.mj)(r,{parent:e.scene,...t.transform}),i&&(r.visible=!1),(0,h.$z)(r,{includeSelf:!0})))if("onInitialize"in n){let t=n.onInitialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{for(let t of(r.removeFromParent(),(0,h.$z)(r,{includeSelf:!0})))if("onDestroy"in t){var e;null==(e=t.onDestroy)||e.call(t)}}},"always"),null}let w={type:void 0,webgl:void 0,webgpu:void 0,className:"",assetsPath:"/",vertigoControls:!1,minActiveDuration:30};function y(e){var t;let n={...w,...e},{children:o,className:c,vertigoControls:h}=n,m=null!=(t=n.type)?t:n.webgpu?"webgpu":"webgl",v=(0,r.useRef)(void 0);v.current&&v.current!==m&&console.warn('ThreeProvider: the prop "type" is not intended to change after the component is mounted.'),v.current=m;let g=(0,r.useMemo)(()=>"webgl"===m?new d.XW:new u.K,[m]);g.ticker.set({minActiveDuration:n.minActiveDuration});let{ref:x}=(0,s.IZ)({debounce:!0},function*(e,t){yield g.initialize(e.firstElementChild,document.body),t.triggerRender(),Object.assign(window,{three:g,THREE:a})},[]);(0,s.C7)(function*(){if(yield p.Q.on("THREE",e=>{e.setPayload(g)}),h){var e,t;let n="object"==typeof h?h:{},i=new l.n(n).initialize(x.current);Object.assign(i.inputConfig,n.inputConfig),i.parsePanInputs(null!=(e=n.panInput)?e:""),i.parseOrbitInputs(null!=(t=n.orbitInput)?t:""),n.fixed||i.start(),yield i.destroy,yield p.Q.on("VERTIGO_CONTROLS",e=>{e.setPayload(i)}),yield g.ticker.onTick({order:-1},e=>{i.update(g.camera,g.aspect,e.deltaTime)})}},[h]);let y={position:"absolute",inset:0};return(0,i.jsx)("div",{ref:x,className:c,style:y,children:(0,i.jsxs)(f.Provider,{value:g,children:[(0,i.jsx)("div",{style:y}),(0,i.jsx)("div",{style:y,className:"thru",children:g.initialized&&o})]})})}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.D)()&&(0,i.jsx)(y,{...t[0]})}n(95736)}},e=>{var t=t=>e(e.s=t);e.O(0,[9510,2193,2878,9459,9687,5611,7190,6564,4272,4189,7223,9635,8921,4957,7775,16,7953,9547,9294,5438,9901,6352,4638,6726,8083,7558,7927,5672,2491,9050,411,1319,6852,7358],()=>t(96016)),_N_E=e.O()}]);