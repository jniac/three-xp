(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9697],{40864:function(e,t,n){Promise.resolve().then(n.t.bind(n,62670,23)),Promise.resolve().then(n.bind(n,93342))},93342:function(e,t,n){"use strict";n.d(t,{Client:function(){return R}});var r=n(78485),a=n(85679),o=n(13025),i=n(40365),s=n(63221),l=n(63549),c=n(49635),u=n(87858),f=n(28142),p=n(96966),d=n(4917),m=n(8834),h=n(81796),v=n(73583),x=n(77405);class g{constructor(e,t,n,r){this.space=e,this.rect=t,this.uvRect=n,this.scatterCoeff=r,this.r0=f.T.random(),this.r1=f.T.random()}}class w{constructor(e,t){this.props={...w.defaultProps,...t};let{position:n,size:r,scatterPadding:a,sizeOptions:o,seed:i}=this.props,{col:s,row:l}=e.props;f.T.seed(i);let c=f.T.createPicker(o),u=Array.from({length:s}).map(c),p=Array.from({length:l}).map(c),{x:d,y:m}=(0,h.iK)(n),{x:y,y:_}=(0,h.iK)(r),b=new v.T(v.Nm.Horizontal).setSize(y,_).setOffset(d-y/2,m-_/2);for(let e of u){let t=new v.T(v.Nm.Vertical).setSize("".concat(e,"fr")).addTo(b);for(let e of p)new v.T(v.Nm.Horizontal).setSize("".concat(e,"fr")).addTo(t)}b.computeLayout();let M=b.rect,S=[...b.allLeaves({includeSelf:!1})],A=(y+_)/2,z=S.map(e=>{let t=e.rect.clone(),n=t.clone().relativeTo(M),{x:r,y:o}=t.getCenter(),i=(0,x.ii)(.5,1,(Math.abs(r-d)+Math.abs(o-m))/A);return t.centerX+=f.T.between(-a,a)*i,t.centerY+=f.T.between(-a,a)*i,new g(e,t,n,i)});this.root=b,this.nodes=z}}w.defaultProps={seed:87654,position:new a.Vector2(0,0),size:new a.Vector2(3,2),scatterPadding:.1,sizeOptions:[[.5,1],[1,10],[2,2],[3,1]]};var y=n(88156),_=n(44645),b=n(47174),M=n(1060),S=n(98828),A=n(22462),z=n(58648);class P extends a.Object3D{constructor(){super();let e=new a.HemisphereLight("#ffffff","#926969",1);this.add(e);let t=new a.DirectionalLight("#ffffff",2);this.add(t),t.position.set(2,4,1)}}class V extends a.MeshBasicMaterial{get mapAspect(){return this.uniforms.uMapInfo.value.x}set mapAspect(e){this.uniforms.uMapInfo.value.x=e}getScatteredSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.Vector2;return e.x=this.uniforms.uScatteredInfo.value.x,e.y=this.uniforms.uScatteredInfo.value.y,e}setScatteredSize(e){this.uniforms.uScatteredInfo.value.x=e.x,this.uniforms.uScatteredInfo.value.y=e.y}get scatteredSize(){return this.getScatteredSize()}set scatteredSize(e){this.setScatteredSize(e)}update(e){e*=.33,this.uniforms.uDispersionTime.value+=e*this.uniforms.uDispersion.value.x,this.uniforms.uLowDispersionTime.value+=e*this.uniforms.uLowDispersion.value.x}constructor(){super({side:a.DoubleSide}),this.uniforms={uDispersionTime:{value:0},uLowDispersionTime:{value:0},uDispersion:{value:new a.Vector4(1,-.6,.4,2)},uLowDispersion:{value:new a.Vector4(0,-.6,.4,0)},uMainParams:{value:new a.Vector4(1,0)},uCenter:{value:new a.Vector3},uMapInfo:{value:new a.Vector4(1,1,.5,.5)},uScatteredInfo:{value:new a.Vector4(1,1,0,0)},uNormalMap:{value:_.R.get("three").loadTexture("textures/rough_concrete_nor_gl_1k.jpg",e=>{e.wrapS=e.wrapT=a.RepeatWrapping})}},this.userData=function(e,t){for(let[n,r,a,o]of t)Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,value:o}),Object.defineProperty(e,n,{enumerable:!0,get:()=>r[a],set(e){r[a]=e}});return e}({},[["chunkScale",this.uniforms.uMainParams.value,"x","\n        Name(chunk.scale)\n        Slider(0, 1, step: any)\n      "],["imageVisibility",this.uniforms.uMainParams.value,"y","\n        Name(image.visibility)\n        Slider(0, 1, step: any)\n      "],["dispX",this.uniforms.uDispersion.value,"x","\n        Name(disp.x)\n        Slider(0, 1, step: any)\n      "],["dispY",this.uniforms.uDispersion.value,"y","\n        Name(disp.y)\n        Slider(-1, 1, step: any)\n      "],["dispZ",this.uniforms.uDispersion.value,"z","\n        Name(disp.z)\n        Slider(-1, 1, step: any)\n      "],["dispW",this.uniforms.uDispersion.value,"w","\n        Name(disp.cycle)\n        Slider(1, 20, step: 1)\n      "],["lowDispX",this.uniforms.uLowDispersion.value,"x","\n        Name(lowDisp.x)\n        Slider(0, 1, step: any)\n      "]]),this.onBeforeCompile=e=>b.b.with(e).defines({USE_UV:""}).uniforms(this.uniforms).varying({vRand:"vec4"}).vertex.top(S.U,M.i,'\n  // sizeMode: 0 for "contain", 1 for "cover"\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale) {\n    align.y = 1.0 - align.y; // Flip y-coordinate\n    if ((outerAspect > innerAspect) != (sizeMode == 1.0)) { // XOR condition for mode\n      float scaleFactor = outerAspect / innerAspect;\n      uv.x = (uv.x - align.x) * scaleFactor + align.x; // Adjust x-coordinate\n    } else {\n      float scaleFactor = innerAspect / outerAspect;\n      uv.y = (uv.y - align.y) * scaleFactor + align.y; // Adjust y-coordinate\n    }\n    uv = (uv - align) / scale + align;\n    return uv;\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, float scale) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(scale));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, vec2(0.5));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect) {\n    return applyUvSize(uv, outerAspect, innerAspect, 1.0);\n  }\n').vertex.top("\n        attribute vec4 aRectUv;\n        attribute vec4 aRand;\n      ").vertex.top("\n        vec2 delta;\n        float scatterRatio;\n\n        vec4 computeDispersion() {\n          if (uDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float duration = lerp(8.0, 1.0, aRand.x * aRand.y * aRand.z);\n          float cycleCount = max(floor(uDispersion.w), 1.0);\n          float time = mod(uDispersionTime + duration * cycleCount * aRand.x, duration * cycleCount) / duration;\n          float cycleVisibility = time <= 1.0 ? 1.0 : easeInOut3(1.0 - inverseLerp(.8 * aRand.w + .1, .8 * aRand.w + .2, uDispersion.x));\n          time = mod(time, 1.0);\n          float size = easeInThenOut(time, 8.0) * lerp(2.0, 1.0, time * time) * cycleVisibility;\n          size = mix(1.0, size, pow(uDispersion.x, 1.0 / 2.0));\n\n          // Apply scale before instanceMatrix (shrinking).\n          vec3 dispersed;\n          dispersed.xy = -delta * lerp(uDispersion.y, uDispersion.z, time);\n          dispersed.z = lerp(1.0, 0.0, time);\n          dispersed *= uDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n\n        float getStartEffect(float time, float duration) {\n          return min(1.0, time / duration);\n        }\n\n        float getEndEffect(float time, float timeMax, float duration) {\n          return max(0.0, time - (timeMax - duration)) / duration;\n        }\n\n        vec4 computeLowDispersion() {\n          if (uLowDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float periodScalarT = inverseLerp(0.1, 0.9, scatterRatio);\n          float period = lerp(2.0, 8.0, aRand.x) * lerp(60.0, 1.0, periodScalarT);\n          float time = mod(uLowDispersionTime + period * aRand.z, period);\n\n          float duration = 1.0;\n          float effectStart = min(1.0, time);\n          float effectEnd = getEndEffect(time, period, duration);\n\n          float size = getStartEffect(time, 0.3) * (1.0 - getEndEffect(time, period, 0.3));\n          size = pow(size, 1.0 / 4.0);\n          size = mix(1.0, size, pow(uLowDispersion.x, 1.0 / 4.0));\n\n          vec3 dispersed;\n\n          dispersed.xy = delta * 0.1;\n          dispersed.z = 0.2;\n          dispersed.xyz *= getEndEffect(time, period, 1.0);\n          dispersed *= uLowDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4(position, 1.0);\n        delta = instanceMatrix[3].xy - uCenter.xy;\n        scatterRatio = clamp(1.1 * length(delta) / (length(uScatteredInfo.xy) / 2.0), 0.0, 1.0);\n\n        vec4 dispersion = computeDispersion();\n        vec4 lowDispersion = computeLowDispersion();\n\n        float scale = clamp01(uMainParams.x * 3.0 - 2.0 * aRand.w);\n        mvPosition.xyz *= dispersion.w * lowDispersion.w * easeInOut3(scale);\n\n        mvPosition = instanceMatrix * mvPosition;\n        mvPosition.xyz += dispersion.xyz + lowDispersion.xyz;\n\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;      \n      ").vertex.replace("uv_vertex","\n        #if defined( USE_UV ) || defined( USE_ANISOTROPY )\n          vUv = vec3( uv, 1 ).xy;\n          vUv = aRectUv.xy + aRectUv.zw * vUv;\n        #endif\n        #ifdef USE_MAP\n          vec2 instanceUv = aRectUv.xy + aRectUv.zw * MAP_UV;\n\n          // vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale\n          float outerAspect = uScatteredInfo.x / uScatteredInfo.y;\n          float innerAspect = uMapInfo.x;\n          float sizeMode = uMapInfo.y;\n          vec2 align = uMapInfo.zw;\n          instanceUv = applyUvSize(instanceUv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n          \n          vMapUv = ( mapTransform * vec3( instanceUv, 1 ) ).xy;\n        #endif\n      ").vertex.mainAfterAll("\n        vRand = aRand;\n      ").fragment.top(S.U,M.i).fragment.replace("color_fragment","\n        vec3 normal = texture2D(uNormalMap, vUv * 4.0).rgb;\n        vec3 light = normalize(vec3(0.5, 2.5, 1.0));\n        float colorAlteration = mix(0.333, 1.0, dot(normal, light));\n        float transition = inverseLerp(0.0, 0.2, uMainParams.y - 0.8 * vRand.w);\n        diffuseColor.rgb = mix(vColor * colorAlteration, diffuseColor.rgb, transition);\n      ")}}class D extends a.Object3D{static createPlane(e){let{row:t,col:n}=e,r=t*n,o=new a.PlaneGeometry,i=new a.InstancedBufferAttribute(new Float32Array(4*r),4);o.setAttribute("aRectUv",i);let s=new a.InstancedBufferAttribute(new Float32Array(4*r),4);o.setAttribute("aRand",s);for(let e=0;e<r;e++)s.setXYZW(e,f.T.random(),f.T.random(),f.T.random(),f.T.random());let l=new V,c=new a.InstancedMesh(o,l,r);return c.name="plane",c}get count(){return this.internal.count}onTick(e){this.internal.plane.material.update(e.deltaTime)}getDistribution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w(this,e)}drawDistribution(e){let{position:t,size:n,scatterPadding:r}=e.props,{x:a,y:o}=(0,h.iK)(t),{x:i,y:s}=(0,h.iK)(n);this.internal.lineHelper.rectangle([a,o,i,s]).rectangle([a,o,i+2*r,s+2*r])}distribute(e){let{count:t,plane:n}=this.internal,{aRectUv:r}=n.geometry.attributes;for(let a=0;a<t;a++){let{rect:t,uvRect:o}=e.nodes[a];n.setMatrixAt(a,(0,c.$)({position:t.getCenter(),scale:t.getSize()})),r.setXYZW(a,o.x,o.y,o.width,o.height)}n.material.setScatteredSize(e.root.rect.getSize());let a=e.root.rect;n.material.setScatteredSize(a.getSize()),n.material.uniforms.uCenter.value.copy(a.getCenter())}lerpDistribute(e,t,n){let{count:r,plane:o}=this.internal,{aRectUv:i}=o.geometry.attributes,s=new z.Ae,l=new z.Ae,u=new z.Ae,f=new a.Vector3,p=new a.Vector3;for(let a=0;a<r;a++){let r=e.nodes[a],u=t.nodes[a],d=.3*(1-r.r0*(r.scatterCoeff+.2*u.r0)),m=(0,x.ii)(d,.7+d,n),h=(0,A.xD)(m);s.lerpRectangles(r.rect,u.rect,h),l.lerpRectangles(r.uvRect,u.uvRect,h),o.setMatrixAt(a,(0,c.$)({position:s.getCenter(f),scale:s.getSize(p),rotationY:(u.r0<.5?0:1)*h*Math.PI*2,rotationZ:.3*Math.sin(m*Math.PI)*(-1+2*r.r0)})),i.setXYZW(a,l.x,l.y,l.width,l.height)}let d=(0,A.uN)((0,x.ii)(.3,.7,n));u.lerpRectangles(e.root.rect,t.root.rect,d),o.material.setScatteredSize(u.getSize()),o.material.uniforms.uCenter.value.copy(u.getCenter()),o.instanceMatrix.needsUpdate=!0,i.needsUpdate=!0}constructor(e={}){super(),this.transition=0;let t={...D.defaultProps,...e},{col:n,row:r}=t,a=D.createPlane(t);(0,u.bB)(a,this);let o=new y.O;(0,u.bB)(o,this);let i=new P;(0,u.bB)(i,this),this.internal={count:r*n,plane:a,lineHelper:o,lightSetup:i},this.props=t,this.distribute(this.getDistribution())}}D.displayName="ScatteredPlane",D.defaultProps={row:20,col:30,imageAspect:1,imageResizeMode:"cover"},D.transition_meta="Range(0, 1)";class O extends a.Mesh{constructor(){super(new a.IcosahedronGeometry(40,1),new a.MeshBasicMaterial({color:"#aeb4e9",side:a.BackSide})),this.onBeforeRender=(e,t,n)=>{this.position.copy(n.position)}}}let C={darkBlue:"#002c52",orange:"#ff5c35",white:"#ffffff",lightGrey:"#c9cfd3"};function T(){let e=(0,i.jE)();return e.three.pipeline.basicPasses.outline.enabled=!1,(0,d._v)("ScatteredDemo",async function*(t,n){(0,u.bB)(new O,t),(0,u.bB)(new a.Mesh(new s.w,new l.P),t);let r=await n.loader.load("/assets/textures/DebugTexture.png");r.colorSpace=a.SRGBColorSpace;let i=(0,u.bB)(new D,t);i.internal.plane.material.map=r,i.internal.plane.material.mapAspect=r.image.width/r.image.height;let p=i.getDistribution({seed:4789,position:[-2,0],size:[2,3]}),d=i.getDistribution({seed:3249,position:[2,0],size:[2,4]});i.drawDistribution(p),i.drawDistribution(d),t.userData.transition=0,t.userData.transition_meta="Slider(0, 1, step: 0.01)",t.userData.scale=1,t.userData.scale_meta="Slider(-1, 1, pow: 10, step: .1)",t.userData.links=[i.internal.plane.material.userData];let m=Object.values(C);for(let e=0,t=i.count;e<t;e++)i.internal.plane.setColorAt(e,(0,c.E)(f.T.pick(m)));yield n.onTick(()=>{i.lerpDistribute(p,d,t.userData.transition),i.scale.setScalar(t.userData.scale)}),(0,o.v)(e,t),e.sceneSelection.add("Select ScatteredDemo",t)},[]),null}function I(){return(0,d.Ky)(function*(e){e.useOrbitControls({position:[-2,0,8],target:[-2,0,0]})},[]),null}function j(e){let{children:t}=e,n=(0,d.Ky)();return n.loader.setPath(p.v.assetsPath),(0,r.jsx)(i.KU,{three:n,backgroundColor:"#26163c4f",children:t})}function R(){return(0,r.jsxs)("div",{className:"layer thru",children:[(0,r.jsx)(m.Leak,{}),(0,r.jsx)(d.H7,{children:(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"layer thru px-3 py-2 flex flex-col gap-4",children:(0,r.jsx)("h1",{className:"text-4xl",children:"ScatteredPlane"})}),(0,r.jsx)(I,{}),(0,r.jsx)(T,{})]})})]})}},96966:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let r="/three-xp/assets/",a={development:!1,assetsPath:r,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(e)}}},4917:function(e,t,n){"use strict";n.d(t,{H7:function(){return m},Ky:function(){return f},_v:function(){return p}});var r=n(78485),a=n(27275),o=n(85679),i=n(48583),s=n(48181),l=n(96966),c=n(11030);let u=(0,a.createContext)(null);function f(e,t){let n=(0,a.useContext)(u);return(0,i.sv)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}function p(e,t,n){let r=(0,a.useMemo)(()=>new o.Group,[]);return r.name=e,f(async function*(e,n){if(e.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},t){let a=t(r,e,n);if(a&&"function"==typeof a.next)do{let{value:e,done:t}=await a.next();if(t)break;yield e}while(n.mounted)}},n),r}function d(e){let{children:t,className:n}=e,c=(0,a.useMemo)(()=>new s.Vu,[]),{ref:f}=(0,i.sv)(function*(e){c.loader.setPath(l.v.assetsPath),yield c.initialize(e),Object.assign(window,{three:c,THREE:o})},[]);return(0,r.jsx)("div",{ref:f,className:"ThreeProvider absolute-through ".concat(null!=n?n:""),children:(0,r.jsx)(u.Provider,{value:c,children:t})})}function m(e){return(0,c.O)()&&(0,r.jsx)(d,{...e})}},11030:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(27275);function a(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},8834:function(e,t,n){"use strict";n.d(t,{Leak:function(){return s},a:function(){return i}});var r=n(40855),a=n(79509),o=n(28142);function i(e){Object.assign(window,{...a,...r,...e,PRNG:o.T})}function s(e){return i(e),null}},63221:function(e,t,n){"use strict";n.d(t,{w:function(){return c}});var r=n(85679),a=n(96799);let o={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white"},i=new r.Color;function s(e){let{axis:t,length:n,radius:s,radialSegments:l,coneRatio:c,radiusScale:u,vertexColor:f,baseCap:p,color:d}={...o,...e},m=s*u,h=n*c,v=new r.ConeGeometry(3*m,h,l),x=new r.CylinderGeometry(m,m,1,l,1,!0),g=n-h,w=n-.5*h;v.rotateZ(-Math.PI/2).translate(w,0,0),x.scale(1,g,1).rotateZ(-Math.PI/2).translate(.5*g,0,0);let y="none"===p?new r.BufferGeometry:"flat"===p?new r.CircleGeometry(m,l).rotateY(-Math.PI/2):new r.SphereGeometry(m,l,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),_=(0,a.n4)([v,x,y]);switch(t){case"y":_.rotateZ(Math.PI/2);break;case"z":_.rotateY(-Math.PI/2)}if(f){let e=_.attributes.position.count,t=new r.BufferAttribute(new Float32Array(3*e),3);_.setAttribute("color",t),i.set(d);for(let n=0;n<e;n++)t.setXYZ(n,i.r,i.g,i.b)}return _}let l={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class c extends r.BufferGeometry{static get defaultOptions(){return{...l}}constructor(e){super();let{xColor:t,yColor:n,zColor:r,...o}={...l,...e},i=s({...o,axis:"x",color:t}),c=s({...o,axis:"y",color:n}),u=s({...o,axis:"z",color:r}),f=(0,a.n4)([i,c,u]);this.copy(f),f.dispose()}}},88156:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(85679),a=n(58648),o=n(81796);let i=new r.Vector2,s=new r.Vector3,l=new r.Matrix4;function c(e,t,n){if(null==n?void 0:n.transform)for(let e of((0,o.Xe)(n.transform,l),t))e.applyMatrix4(l);(null==n?void 0:n.color)&&e.colors.set(e.points.length,new r.Color(n.color)),e.points.push(...t)}class u extends r.LineSegments{showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new r.LineBasicMaterial({color:this.material.color,transparent:!0,depthFunc:r.GreaterDepth,opacity:e}),n=new r.LineSegments(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setFromPoints(this.points),this}draw(){if(this.geometry.setFromPoints(this.points),this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let t=new r.Color(null!==(e=this.colors.get(0))&&void 0!==e?e:"white"),n=this.points.length,a=function(e){let t=e.attributes.color;if(t)return t;{let t=new r.BufferAttribute(new Float32Array(3*e.attributes.position.count),3);return e.setAttribute("color",t),t}}(this.geometry);for(let e=0;e<n;e++){let n=this.colors.get(e);n&&t.copy(n),a.setXYZ(e,t.r,t.g,t.b)}}return this}line(e,t,n){return c(this,[(0,o.Q7)(e),(0,o.Q7)(t)],n),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:a,y:s,radius:l,segments:f,...p}={...u.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,r]=t,{x:a,y:s}=(0,o.iK)(e,i);return{x:a,y:s,radius:n,...r}}return t[0]})()},d=new r.Vector3(1,0,0),m=new r.Vector3(0,1,0),h=[];for(let e=0;e<f;e++){let t=e/f*Math.PI*2,n=(e+1)/f*Math.PI*2,o=Math.cos(t)*l,i=Math.sin(t)*l,c=Math.cos(n)*l,u=Math.sin(n)*l,p=new r.Vector3(a,s,0).addScaledVector(d,o).addScaledVector(m,i),v=new r.Vector3(a,s,0).addScaledVector(d,c).addScaledVector(m,u);h.push(p,v)}return c(this,h,p),this}rectangle(e,t){let{centerX:n,centerY:o,width:i,height:s}=a.Ae.from(e),l=i/2,u=s/2,f=new r.Vector3(n-l,o-u,0),p=new r.Vector3(n+l,o-u,0),d=new r.Vector3(n+l,o+u,0),m=new r.Vector3(n-l,o+u,0);return c(this,[f,p,p,d,d,m,m,f],t),this}box(){let{center:e=[0,0,0],size:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:n,y:a,z:i}=(0,o.Q7)(e,s),{x:l,y:c,z:u}=(0,o.Q7)(t,s),f=l/2,p=c/2,d=u/2,m=new r.Vector3(n-f,a-p,i-d),h=new r.Vector3(n+f,a-p,i-d),v=new r.Vector3(n+f,a+p,i-d),x=new r.Vector3(n-f,a+p,i-d),g=new r.Vector3(n-f,a-p,i+d),w=new r.Vector3(n+f,a-p,i+d),y=new r.Vector3(n+f,a+p,i+d),_=new r.Vector3(n-f,a+p,i+d);return this.points.push(m,h,h,v,v,x,x,m),this.points.push(g,w,w,y,y,_,_,g),this.points.push(m,g,h,w,v,y,x,_),this}plus(e,t,n){let a=t/2,{x:s,y:l}=(0,o.iK)(e,i),u=new r.Vector3(s-a,l,0);return c(this,[u,new r.Vector3(s+a,l,0),new r.Vector3(s,l-a,0),new r.Vector3(s,l+a,0)],n),this}cross(e,t,n){let a=t/2,{x:s,y:l}=(0,o.iK)(e,i),u=new r.Vector3(s-a,l-a,0);return c(this,[u,new r.Vector3(s+a,l+a,0),new r.Vector3(s-a,l+a,0),new r.Vector3(s+a,l-a,0)],n),this}constructor(...e){super(...e),this.points=[],this.colors=new Map}}u.circleDefaultOptions={x:0,y:0,radius:.5,segments:96}},63549:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(85679),a=n(47174);let o={vertexColors:!0,luminosity:.5};class i extends r.MeshBasicMaterial{constructor(e){let{luminosity:t,vertexColors:n,...i}={...o,...e},s={uSunPosition:{value:new r.Vector3(.5,.7,.3)},uLuminosity:{value:t}};super(i),this.onBeforeCompile=e=>a.b.with(e).uniforms(s).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      "),this.sunPosition=s.uSunPosition.value}}},47174:function(e,t,n){"use strict";n.d(t,{b:function(){return g},R:function(){return y}});var r=n(32717),a=n(85679);let o=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var i=n(79509);class s{static from(e,t){if(t instanceof i.Observable){if("number"==typeof t.value)return new s(e,t);throw Error("Observable value must be a number")}let n=typeof t;return"object"===n&&(t.constructor===Object||t instanceof a.Uniform)&&"value"in t?new s(e,t):"string"===n?new s(e,{value:new a.Color(t)}):new s(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,n="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(n="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(n,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(n,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(n,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(n,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(n,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(n,";");if(t.isTexture)return t.isCubeTexture?"uniform samplerCube ".concat(e).concat(n,";"):"uniform sampler2D ".concat(e).concat(n,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function l(){let e=(0,r._)(["","s*",""],["","\\s*",""]);return l=function(){return e},e}let c=null,u=e=>(c=e,g),f="// ShaderForge (injected code) ->",p="// <- ShaderForge",d=e=>"".concat(f,"\n").concat(e.trim(),"\n").concat(p),m=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(String.raw(l(),t(p),t(f)),"g");return e.replaceAll(n,"")};class h{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="#include <".concat(e,">"),r=this.type;if(t&&!1===c[r].includes(n))throw Error('"'.concat(n,'" is not present in the shader template program.'));return{pattern:n,type:r}}replace(e,t){if(e instanceof RegExp){let{type:n}=this;c[n].match(e),c[n]=c[n].replace(e,d(t))}else{let{type:n,pattern:r}=this.getPattern(e),a=d(t);c[n]=c[n].replace(r,a)}return g}inject(e,t,n){let{type:r,pattern:a}=this.getPattern(t),o="after"===e?"".concat(a,"\n").concat(d(n)):"".concat(d(n),"\n").concat(a);return c[r]=c[r].replace(a,o),g}injectTokenComments(){for(let e of o){let{type:t,pattern:n}=this.getPattern(e,{throwError:!1});c[t]=c[t].replace(n,"\n        ".concat(n,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return g}header(e){let t=this.type;return c[t]="".concat(e,"\n").concat(c[t]),g}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return c[this.type]=c[this.type].replace("void main() {","\n      ".concat(d(t.join("\n\n")),"\n      void main() {\n    ")),g}mainBeforeAll(e){return c[this.type]=c[this.type].replace("void main() {","void main() {\n        ".concat(d(e))),g}mainAfterAll(e){return c[this.type]=c[this.type].replace(/}\s*$/,"\n      ".concat(d(e),"\n    }")),g}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[n,r]of Object.entries(e)){let e=s.from(n,r);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,n]of Object.entries(e)){let e=s.from(t,n);if(t in c.uniforms){if(e.value!==c.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else c.uniforms[t]=e}}(e)}return g}clean(){return c[this.type]=m(c[this.type]),g}printFinalCode(){return console.log(c[this.type].replace(/#include <(.*)>/g,(e,t)=>{let n=a.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n})),g}constructor(e){this.type=e}}let v=new h("fragmentShader"),x=new h("vertexShader"),g=Object.assign(function(e){return e&&u(e),g},{shaderName:function(e){return c.shaderName="".concat(e," (ShaderForge)"),g},defines:function(e){return c.defines?Object.assign(c.defines,e):c.defines=e,g},uniforms:function(e){return x.uniforms(e),v.uniforms(e),g},varying:function(e){let t="";if("string"==typeof e)t=e;else{let n=[];for(let[t,r]of Object.entries(e))n.push("varying ".concat(r," ").concat(t,";"));t=n.join("\n")}return x.top(t),v.top(t),g},top:function(e){return x.top(e),v.top(e),g},vertex:x,fragment:v,header:function(e){return v.header(e),x.header(e),g},clean:function(){return v.clean(),x.clean(),g},with:u,wrap:(e,t)=>(e.onBeforeCompile=e=>{c=e},e)}),w=new a.Color;function y(e){let{r:t,g:n,b:r}=w.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(r.toFixed(3),")")}},49635:function(e,t,n){"use strict";n.d(t,{$:function(){return i},E:function(){return l}});var r=n(85679),a=n(81796);let o=new r.Matrix4;function i(e){return(0,a.Xe)(e,o)}let s=new r.Color;function l(e){return s.set(e)}},94588:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(85679),a=n(81796);new r.Vector3(0,0,0),new r.Euler(0,0,0,"XYZ"),new r.Vector3(1,1,1);let o={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,visible:void 0,name:void 0,parent:void 0};function i(e,t){let{x:n,y:i,z:s,position:l=new r.Vector3(n,i,s),rotationX:c,rotationY:u,rotationZ:f,rotationOrder:p,rotationUnit:d,rotation:m,scaleX:h,scaleY:v,scaleZ:x,scaleScalar:g,scale:w=new r.Vector3(h,v,x).multiplyScalar(g),visible:y,name:_,parent:b}={...o,...t};return(0,a.Q7)(l,e.position),(0,a.Gg)(null!=m?m:[c,u,f,p,d],e.rotation),(0,a.Q7)(w,e.scale),void 0!==y&&(e.visible=y),void 0!==_&&(e.name=_),void 0!==b&&b.add(e),e}},87858:function(e,t,n){"use strict";n.d(t,{H$:function(){return s},bB:function(){return i},cY:function(){return o}});var r=n(85679),a=n(94588);function o(e,t,n){return t&&(t instanceof r.Object3D?t.add(e):(0,a.N)(e,t)),null==n||n(e),e}let i=o;function s(e,t){return function(e,t){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}(t,e)}},26917:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r="\n#ifndef GLSL_BASIC\n#define GLSL_BASIC\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\n#endif\n"},1060:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(26917);let a=["linear"];for(let e=1;e<=10;e++)a.push("easeIn".concat(e)),a.push("easeOut".concat(e)),a.push("easeInOut".concat(e)),a.push("easeOutIn".concat(e));let o="\n#ifndef GLSL_EASING\n#define GLSL_EASING\n\n".concat(r.l,"\n\nfloat easePow1(float x) {\n  return x;\n}\n\nfloat easePow2(float x) {\n  return x * x;\n}\n\nfloat easePow3(float x) {\n  return x * x * x;\n}\n\nfloat easePow4(float x) {\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow5(float x) {\n  float x0 = x;\n  x *= x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow6(float x) {\n  x *= x * x;\n  return x *= x;\n}\n\nfloat easePow7(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow8(float x) {\n  x *= x;\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow9(float x) {\n  x *= x * x;\n  return x *= x * x;\n}\n\nfloat easePow10(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x * x;\n  return x0 * x;\n}\n\nfloat linear(float x) {\n  return clamp01(x);\n}\n\n").concat(Array.from({length:10},(e,t)=>{let n=t+1;return"\n\nfloat easeIn".concat(n," (float x) {\n  return easePow").concat(n,"(clamp01(x));\n}\nfloat easeOut").concat(n," (float x) {\n  return 1.0 - easePow").concat(n,"(clamp01(1.0 - x));\n}\nfloat easeInOut").concat(n," (float x) {\n  return x < 0.5 \n    ? 0.5 * easePow").concat(n,"(2.0 * x) \n    : 1.0 - 0.5 * easePow").concat(n,"(2.0 * (1.0 - x));\n}\nfloat easeOutIn").concat(n," (float x) {\n  return x < 0.5\n    ? 0.5 * (1.0 - easePow").concat(n,"(1.0 - x * 2.0))\n    : 1.0 - 0.5 * (1.0 - easePow").concat(n,"(2.0 * x - 1.0));\n}\n\n").trim()}).join("\n\n"),"\n\n\n// https://www.desmos.com/calculator/mqou4lf9zc?lang=fr\nfloat easeInOut(float x, float p, float i) {\n  return  x <= 0.0 ? 0.0 :\n          x >= 1.0 ? 1.0 :\n          x <= i ? 1.0 / pow(i, p - 1.0) * pow(x, p) :\n          1.0 - 1.0 / pow(1.0 - i, p - 1.0) * pow(1.0 - x, p);\n}\n\n// https://www.desmos.com/calculator/nrjlezusdv\nfloat easeInThenOut(float x, float p) {\n  return 1.0 - pow(abs(2.0 * x - 1.0), p);\n}\n\n#endif\n")},70155:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});let r={vecX:["float","vec2","vec3","vec4"]},a=(e,t)=>{let n=[],a=Array.isArray(e)?e:[e].map(e=>e in r?r[e]:e).flat();if("function"==typeof t)for(let e of a)n.push(t(e).replaceAll(/\bT\b/g,e));else for(let e of a)n.push(t.replaceAll(/\bT\b/g,e));return n.join("\n")}},98828:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(26917),a=n(70155);let o="\n  ".concat(r.l,"\n\n  float sin01(float x) {\n    return 0.5 + 0.5 * sin(x * 6.283185307179586);\n  }\n\n  vec2 scaleAround(vec2 p, vec2 c, float s) {\n    return c + (p - c) / s;\n  }\n\n  // Same as mix, but clamped.\n  ").concat((0,a.C)("vecX","\n    T lerp(in T a, in T b, in float x) {\n      return mix(a, b, clamp01(x));\n    }\n  "),"\n\n  float inverseLerpUnclamped(in float a, in float b, float x) {\n    return (x - a) / (b - a);\n  }\n\n  float inverseLerp(in float a, in float b, float x) {\n    return clamp01((x - a) / (b - a));\n  }\n\n  float threshold(in float x, in float thresholdValue) {\n    return x < thresholdValue ? 0. : 1.;\n  }\n\n  float threshold(in float x, in float thresholdValue, in float width) {\n    return width < 1e-9 \n      ? (x < thresholdValue ? 0. : 1.)\n      : clamp01((x - thresholdValue + width * .5) / width);\n  }\n\n  mat3 extractRotation(mat4 matrix) {\n    return mat3(matrix[0].xyz, matrix[1].xyz, matrix[2].xyz);\n  }\n\n  vec2 rotate(vec2 p, float a) {\n    float c = cos(a);\n    float s = sin(a);\n    float x = c * p.x + s * p.y;\n    float y = -s * p.x + c * p.y;\n    return vec2(x, y);\n  }\n\n  vec2 rotateAround(vec2 p, float a, vec2 c) {\n    return c + rotate(p - c, a);\n  }\n\n  vec2 rotateScaleAround(vec2 p, float a, float s, vec2 c) {\n    return c + rotate((p - c) / s, a);\n  }\n  \n  float positiveModulo(float x) {\n    x = mod(x, 1.0);\n    return x < 0.0 ? x + 1.0 : x;\n  }\n\n  float positiveModulo(float x, float modulo) {\n    x = mod(x, modulo);\n    return x < 0.0 ? x + modulo : x;\n  }\n\n  // Limit a value to a maximum that the function tends to reach when x -> âˆž\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float maxValue) {\n    return x <= 0.0 ? x : maxValue * x / (maxValue + x);\n  }\n\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float minValue, float maxValue) {\n    float d = maxValue - minValue;\n    float xd = x - minValue;\n    return x <= minValue ? x : minValue + d * xd / (d + xd);\n  }\n\n  float sqLength(in vec2 p) {\n    return p.x * p.x + p.y * p.y;\n  }\n\n  float sqLength(in vec3 p) {\n    return p.x * p.x + p.y * p.y + p.z * p.z;\n  }\n\n  float pcurve(float x, float a, float b) {\n    float k = pow(a + b, a + b) / (pow(a, a) * pow(b, b));\n    return k * pow(x, a) * pow(1.0 - x, b);\n  }\n\n  float hash(vec3 p) {\n    return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n  }\n\n  ").concat((0,a.C)("vecX","\n    T min3(in T a, in T b, in T c) {\n      return min(min(a, b), c);\n    }\n  "),"\n\n  ").concat((0,a.C)("vecX","\n    T min4(in T a, in T b, in T c, in T d) {\n      return min(min(a, b), min(c, d));\n    }\n  "),"\n")},22462:function(e,t,n){"use strict";n.d(t,{uN:function(){return a.mv},xD:function(){return a.FR},Ui:function(){return o}});var r=n(38126),a=n(75768);let o={transition:a.eR,bump:r.HU}},38126:function(e,t,n){"use strict";n.d(t,{HU:function(){return r}});let r={sin:e=>Math.sin(Math.PI*e),cos:e=>.5+.5*Math.cos(2*Math.PI*(e-.5)),pow:(e,t)=>1-Math.abs(2*e-1)**t,iqPower:(e,t,n)=>Math.pow(t+n,t+n)/(Math.pow(t,t)*Math.pow(n,n))*Math.pow(e,t)*Math.pow(1-e,n),unnormalizedElastic:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.sin(2*t*Math.PI*e)*Math.pow(1-e,n)},elastic:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=2/3+.4*(t-1)/t;return(Math.pow(1-1/(4*t),-n)*r+1-r)*Math.sin(2*t*Math.PI*e)*Math.pow(1-e,n)}}},75768:function(e,t,n){"use strict";n.d(t,{FR:function(){return i},eR:function(){return s},mv:function(){return o}});let r=e=>e<0?0:e>1?1:e,a=e=>r(e),o=e=>e<0?0:e>1?1:e<.5?2*e*e:1-2*(e=1-e)*e,i=e=>e<0?0:e>1?1:e<.5?8*e*e*e*e:1-8*(e=1-e)*e*e*e,s={linear:a,in1:a,in2:e=>(e=r(e))*e,in3:e=>(e=r(e))*e*e,in4:e=>(e=r(e))*e*e*e,in5:e=>(e=r(e))*e*e*e*e,in6:e=>(e=r(e))*e*e*e*e*e,out1:a,out2:e=>1-(e=r(1-e))*e,out3:e=>1-(e=r(1-e))*e*e,out4:e=>1-(e=r(1-e))*e*e*e,out5:e=>1-(e=r(1-e))*e*e*e*e,out6:e=>1-(e=r(1-e))*e*e*e*e*e,inOut:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return e<0?0:e>1?1:e<n?1/Math.pow(n,t-1)*Math.pow(e,t):1-1/Math.pow(1-n,t-1)*Math.pow(1-e,t)},inOut1:a,inOut2:o,inOut3:e=>e<0?0:e>1?1:e<.5?4*e*e*e:1-4*(e=1-e)*e*e,inOut4:i,inOut5:e=>e<0?0:e>1?1:e<.5?16*e*e*e*e*e:1-16*(e=1-e)*e*e*e*e,inOut6:e=>e<0?0:e>1?1:e<.5?32*e*e*e*e*e*e:1-32*(e=1-e)*e*e*e*e*e,inLinearOut:(e,t,n,r)=>{let a=1e-6>Math.abs(t-1)?1/Math.E:(1/t)**(1/(t-1)),o=1e-6>Math.abs(n-1)?1/Math.E:(1/n)**(1/(n-1)),i=(a+o)/(1-r),s=a**t,l=i-a+s-o+o**n;return e<0?0:e>1?1:r>=1?e:e<a/i?(e*i)**t/l:e>1-o/i?1-((1-e)*i)**n/l:(e*i-a+s)/l},asymmetricalInOut:(e,t,n)=>Math.pow(e,t)/(Math.pow(e,t)+Math.pow(1-e,n))}},28142:function(e,t,n){"use strict";n.d(t,{T:function(){return c}});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return(e=(e=(7*e+Math.sqrt(e)+16087*Math.sin(e))%2147483647)<0?e+2147483647:e)>1?2147483647&e:0===e?345678:123456},a=e=>e=2147483647&Math.imul(e,48271),o=e=>(e-1)/2147483646,i=e=>e,s={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function l(){let e=a(a(r(123456)));function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return"string"==typeof t&&(t=t.split("").reduce((e,t)=>7*e+t.charCodeAt(0),0)),e=a(a(r(t))),p}function n(){return o(e=a(e))}function l(e){switch(e.length){default:return[0,1,i];case 1:return[0,e[0],i];case 2:return[e[0],e[1],i];case 3:return[e[0],e[1],e[2]]}}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,o,i]=l(t);return a+(o-a)*i(n())}function u(){for(var e,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let[o,i,{weightsAreNormalized:l,indexOffset:c,forbiddenItems:u}]=function(e){let[t,n=null,r]=e,a={...s,...r};if(Array.isArray(t))return[t,n,a];if("object"==typeof t)return[Object.values(t),n?Object.values(n):null,a];throw Error("pick: unsupported options type")}(r);if(u.length>0){let t=new Set;for(let e of u){let n=o.indexOf(e);n>=0&&t.add(n)}if(o=o.filter((e,n)=>!t.has(n)),i=null!==(e=null==i?void 0:i.filter((e,n)=>!t.has(n)))&&void 0!==e?e:null,0===o.length)throw Error("pick: all items are forbidden")}if(null===i){let e=Math.floor(n()*o.length);return c&&(e+=c,(e%=o.length)<0&&(e+=o.length)),o[e]}if(!l){let e=i.reduce((e,t)=>e+t,0);i=i.map(t=>t/e)}let f=n(),p=0;for(let e=0;e<o.length;e++)if(f<(p+=i[e]))return o[e];throw Error("among: unreachable")}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n(),a=n(),o=Math.sqrt(-2*Math.log(r)),i=2*Math.PI*a;return[e+t*o*Math.cos(i),e+t*o*Math.sin(i)]}let p={seed:t,seedMax:function(){return 2147483647},reset:function(){return t(123456),p},next:function(){return e=a(e),p},random:n,between:c,around:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a=1,o=i]=t,s=2*n();return(s>1?1:-1)*o(s>1?s-1:s)*a},int:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,o,i]=l(t);return a+Math.floor(i(n())*(o-a))},chance:function(e){return n()<e},shuffle:function(e){let{mutate:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t&&Array.isArray(e)?e:[...e],a=r.length;for(let e=0;e<a;e++){let t=Math.floor(a*n()),o=r[e];r[e]=r[t],r[t]=o}return r},pick:u,createPicker:function(e){let t=e.map(e=>{let[t]=e;return t}),n=e.map(e=>{let[t,n]=e;return n}),r=n.reduce((e,t)=>e+t,0);for(let[e,t]of n.entries())n[e]=t/r;return()=>u(t,n,{weightsAreNormalized:!0})},vector:function(e,t){let[n=0,r=1]=Array.isArray(t)?t:[null==t?void 0:t.min,null==t?void 0:t.max];for(let t of Object.keys(e))e[t]=c(n,r);return e},unitVector2:function(e){let t=2*Math.PI*n();return e.x=Math.cos(t),e.y=Math.sin(t),e},unitVector3:function(e){let t=n(),r=n(),a=2*Math.PI*t,o=Math.acos(1-2*r);return e.x=Math.sin(o)*Math.cos(a),e.y=Math.sin(o)*Math.sin(a),e.z=Math.cos(o),e},normalVector:function(e){let t=Object.keys(e),n=t.length,r=Math.sqrt(n);for(let a=0;a<n;a+=2){let[o,i]=f();e[t[a]]=o/r,a+1<n&&(e[t[a+1]]=i/r)}return e},unitVector:function(e){let t=Object.keys(e),n=t.length,r=0;for(let a=0;a<n;a+=2){let[o,i]=f();e[t[a]]=o,r+=o*o,a+1<n&&(e[t[a+1]]=i,r+=i*i)}r=Math.sqrt(r);for(let a=0;a<n;a++)e[t[a]]/=r;return e},boxMuller:f};return p}let c=class{constructor(e){Object.assign(this,l().seed(e))}};Object.assign(c,l())}},function(e){e.O(0,[2520,7512,411,4954,6799,5589,3901,7351,8938,320,2670,4940,9072,8648,4831,8181,3583,1701,2920,7936,1744],function(){return e(e.s=40864)}),_N_E=e.O()}]);