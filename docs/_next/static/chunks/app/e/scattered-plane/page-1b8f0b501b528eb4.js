(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9697],{76906:function(e,t,n){Promise.resolve().then(n.t.bind(n,34709,23)),Promise.resolve().then(n.bind(n,41558))},41558:function(e,t,n){"use strict";n.d(t,{Client:function(){return O}});var r=n(32617),a=n(37186),i=n(92059),o=n(33966),s=n(60236),l=n(12042),u=n(85705),c=n(78780),f=n(6246),d=n(62411),p=n(5693),x=n(92948),m=n(32219),v=n(85284),h=n(47090);class w{constructor(e,t,n,r){this.space=e,this.rect=t,this.uvRect=n,this.scatterCoeff=r,this.r0=f.T.random(),this.r1=f.T.random()}}class y{constructor(e,t){this.props={...y.defaultProps,...t};let{position:n,size:r,scatterPadding:a,sizeOptions:i,seed:o}=this.props,{col:s,row:l}=e.props;f.T.seed(o);let u=f.T.createPicker(i),c=Array.from({length:s}).map(u),d=Array.from({length:l}).map(u),{x:p,y:x}=(0,m.iK)(n),{x:g,y:b}=(0,m.iK)(r),z=new v.T(v.Nm.Horizontal).setSize(g,b).setOffset(p-g/2,x-b/2);for(let e of c){let t=new v.T(v.Nm.Vertical).setSize("".concat(e,"fr")).addTo(z);for(let e of d)new v.T(v.Nm.Horizontal).setSize("".concat(e,"fr")).addTo(t)}z.computeLayout();let S=z.rect,A=[...z.allLeaves({includeSelf:!1})],M=(g+b)/2,P=A.map(e=>{let t=e.rect.clone(),n=t.clone().relativeTo(S),{x:r,y:i}=t.getCenter(),o=(0,h.ii)(.5,1,(Math.abs(r-p)+Math.abs(i-x))/M);return t.centerX+=f.T.between(-a,a)*o,t.centerY+=f.T.between(-a,a)*o,new w(e,t,n,o)});this.root=z,this.nodes=P}}y.defaultProps={seed:87654,position:new a.FM8(0,0),size:new a.FM8(3,2),scatterPadding:.1,sizeOptions:[[.5,1],[1,10],[2,2],[3,1]]};var g=n(97219),b=n(85369),z=n(23247),S=n(99963),A=n(1976),M=n(29334),P=n(23420);class D extends a.Tme{constructor(){super();let e=new a.vmT("#ffffff","#926969",1);this.add(e);let t=new a.Ox3("#ffffff",2);this.add(t),t.position.set(2,4,1)}}class T extends a.vBJ{get mapAspect(){return this.uniforms.uMapInfo.value.x}set mapAspect(e){this.uniforms.uMapInfo.value.x=e}getScatteredSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.FM8;return e.x=this.uniforms.uScatteredInfo.value.x,e.y=this.uniforms.uScatteredInfo.value.y,e}setScatteredSize(e){this.uniforms.uScatteredInfo.value.x=e.x,this.uniforms.uScatteredInfo.value.y=e.y}get scatteredSize(){return this.getScatteredSize()}set scatteredSize(e){this.setScatteredSize(e)}update(e){e*=.33,this.uniforms.uDispersionTime.value+=e*this.uniforms.uDispersion.value.x,this.uniforms.uLowDispersionTime.value+=e*this.uniforms.uLowDispersion.value.x}constructor(){super({side:a.ehD}),this.uniforms={uDispersionTime:{value:0},uLowDispersionTime:{value:0},uDispersion:{value:new a.Ltg(1,-.6,.4,2)},uLowDispersion:{value:new a.Ltg(0,-.6,.4,0)},uMainParams:{value:new a.Ltg(1,0)},uCenter:{value:new a.Pa4},uMapInfo:{value:new a.Ltg(1,1,.5,.5)},uScatteredInfo:{value:new a.Ltg(1,1,0,0)},uNormalMap:{value:b.R.get("three").loadTexture("textures/rough_concrete_nor_gl_1k.jpg",e=>{e.wrapS=e.wrapT=a.rpg})}},this.userData=function(e,t){for(let[n,r,a,i]of t)Object.defineProperty(e,"".concat(n,"_meta"),{enumerable:!0,value:i}),Object.defineProperty(e,n,{enumerable:!0,get:()=>r[a],set(e){r[a]=e}});return e}({},[["chunkScale",this.uniforms.uMainParams.value,"x","\n        Name(chunk.scale)\n        Slider(0, 1, step: any)\n      "],["imageVisibility",this.uniforms.uMainParams.value,"y","\n        Name(image.visibility)\n        Slider(0, 1, step: any)\n      "],["dispX",this.uniforms.uDispersion.value,"x","\n        Name(disp.x)\n        Slider(0, 1, step: any)\n      "],["dispY",this.uniforms.uDispersion.value,"y","\n        Name(disp.y)\n        Slider(-1, 1, step: any)\n      "],["dispZ",this.uniforms.uDispersion.value,"z","\n        Name(disp.z)\n        Slider(-1, 1, step: any)\n      "],["dispW",this.uniforms.uDispersion.value,"w","\n        Name(disp.cycle)\n        Slider(1, 20, step: 1)\n      "],["lowDispX",this.uniforms.uLowDispersion.value,"x","\n        Name(lowDisp.x)\n        Slider(0, 1, step: any)\n      "]]),this.onBeforeCompile=e=>z.b.with(e).defines({USE_UV:""}).uniforms(this.uniforms).varying({vRand:"vec4"}).vertex.top(A.U,S.i,'\n  // sizeMode: 0 for "contain", 1 for "cover"\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale) {\n    align.y = 1.0 - align.y; // Flip y-coordinate\n    if ((outerAspect > innerAspect) != (sizeMode == 1.0)) { // XOR condition for mode\n      float scaleFactor = outerAspect / innerAspect;\n      uv.x = (uv.x - align.x) * scaleFactor + align.x; // Adjust x-coordinate\n    } else {\n      float scaleFactor = innerAspect / outerAspect;\n      uv.y = (uv.y - align.y) * scaleFactor + align.y; // Adjust y-coordinate\n    }\n    uv = (uv - align) / scale + align;\n    return uv;\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, float scale) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(scale));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect, float sizeMode) {\n    return applyUvSize(uv, outerAspect, innerAspect, sizeMode, vec2(0.5));\n  }\n\n  vec2 applyUvSize(vec2 uv, float outerAspect, float innerAspect) {\n    return applyUvSize(uv, outerAspect, innerAspect, 1.0);\n  }\n').vertex.top("\n        attribute vec4 aRectUv;\n        attribute vec4 aRand;\n      ").vertex.top("\n        vec2 delta;\n        float scatterRatio;\n\n        vec4 computeDispersion() {\n          if (uDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float duration = lerp(8.0, 1.0, aRand.x * aRand.y * aRand.z);\n          float cycleCount = max(floor(uDispersion.w), 1.0);\n          float time = mod(uDispersionTime + duration * cycleCount * aRand.x, duration * cycleCount) / duration;\n          float cycleVisibility = time <= 1.0 ? 1.0 : easeInOut3(1.0 - inverseLerp(.8 * aRand.w + .1, .8 * aRand.w + .2, uDispersion.x));\n          time = mod(time, 1.0);\n          float size = easeInThenOut(time, 8.0) * lerp(2.0, 1.0, time * time) * cycleVisibility;\n          size = mix(1.0, size, pow(uDispersion.x, 1.0 / 2.0));\n\n          // Apply scale before instanceMatrix (shrinking).\n          vec3 dispersed;\n          dispersed.xy = -delta * lerp(uDispersion.y, uDispersion.z, time);\n          dispersed.z = lerp(1.0, 0.0, time);\n          dispersed *= uDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n\n        float getStartEffect(float time, float duration) {\n          return min(1.0, time / duration);\n        }\n\n        float getEndEffect(float time, float timeMax, float duration) {\n          return max(0.0, time - (timeMax - duration)) / duration;\n        }\n\n        vec4 computeLowDispersion() {\n          if (uLowDispersion.x == 0.0) {\n            return vec4(0.0, 0.0, 0.0, 1.0);\n          }\n\n          float periodScalarT = inverseLerp(0.1, 0.9, scatterRatio);\n          float period = lerp(2.0, 8.0, aRand.x) * lerp(60.0, 1.0, periodScalarT);\n          float time = mod(uLowDispersionTime + period * aRand.z, period);\n\n          float duration = 1.0;\n          float effectStart = min(1.0, time);\n          float effectEnd = getEndEffect(time, period, duration);\n\n          float size = getStartEffect(time, 0.3) * (1.0 - getEndEffect(time, period, 0.3));\n          size = pow(size, 1.0 / 4.0);\n          size = mix(1.0, size, pow(uLowDispersion.x, 1.0 / 4.0));\n\n          vec3 dispersed;\n\n          dispersed.xy = delta * 0.1;\n          dispersed.z = 0.2;\n          dispersed.xyz *= getEndEffect(time, period, 1.0);\n          dispersed *= uLowDispersion.x;\n\n          return vec4(dispersed, size);\n        }\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4(position, 1.0);\n        delta = instanceMatrix[3].xy - uCenter.xy;\n        scatterRatio = clamp(1.1 * length(delta) / (length(uScatteredInfo.xy) / 2.0), 0.0, 1.0);\n\n        vec4 dispersion = computeDispersion();\n        vec4 lowDispersion = computeLowDispersion();\n\n        float scale = clamp01(uMainParams.x * 3.0 - 2.0 * aRand.w);\n        mvPosition.xyz *= dispersion.w * lowDispersion.w * easeInOut3(scale);\n\n        mvPosition = instanceMatrix * mvPosition;\n        mvPosition.xyz += dispersion.xyz + lowDispersion.xyz;\n\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;      \n      ").vertex.replace("uv_vertex","\n        #if defined( USE_UV ) || defined( USE_ANISOTROPY )\n          vUv = vec3( uv, 1 ).xy;\n          vUv = aRectUv.xy + aRectUv.zw * vUv;\n        #endif\n        #ifdef USE_MAP\n          vec2 instanceUv = aRectUv.xy + aRectUv.zw * MAP_UV;\n\n          // vec2 uv, float outerAspect, float innerAspect, float sizeMode, vec2 align, vec2 scale\n          float outerAspect = uScatteredInfo.x / uScatteredInfo.y;\n          float innerAspect = uMapInfo.x;\n          float sizeMode = uMapInfo.y;\n          vec2 align = uMapInfo.zw;\n          instanceUv = applyUvSize(instanceUv, outerAspect, innerAspect, sizeMode, align, vec2(1.0));\n          \n          vMapUv = ( mapTransform * vec3( instanceUv, 1 ) ).xy;\n        #endif\n      ").vertex.mainAfterAll("\n        vRand = aRand;\n      ").fragment.top(A.U,S.i).fragment.replace("color_fragment","\n        vec3 normal = texture2D(uNormalMap, vUv * 4.0).rgb;\n        vec3 light = normalize(vec3(0.5, 2.5, 1.0));\n        float colorAlteration = mix(0.333, 1.0, dot(normal, light));\n        float transition = inverseLerp(0.0, 0.2, uMainParams.y - 0.8 * vRand.w);\n        diffuseColor.rgb = mix(vColor * colorAlteration, diffuseColor.rgb, transition);\n      ")}}class I extends a.Tme{static createPlane(e){let{row:t,col:n}=e,r=t*n,i=new a._12,o=new a.lb7(new Float32Array(4*r),4);i.setAttribute("aRectUv",o);let s=new a.lb7(new Float32Array(4*r),4);i.setAttribute("aRand",s);for(let e=0;e<r;e++)s.setXYZW(e,f.T.random(),f.T.random(),f.T.random(),f.T.random());let l=new T,u=new a.SPe(i,l,r);return u.name="plane",u}get count(){return this.internal.count}onTick(e){this.internal.plane.material.update(e.deltaTime)}getDistribution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new y(this,e)}drawDistribution(e){let{position:t,size:n,scatterPadding:r}=e.props,{x:a,y:i}=(0,m.iK)(t),{x:o,y:s}=(0,m.iK)(n);this.internal.lineHelper.rectangle([a,i,o,s]).rectangle([a,i,o+2*r,s+2*r])}distribute(e){let{count:t,plane:n}=this.internal,{aRectUv:r}=n.geometry.attributes;for(let a=0;a<t;a++){let{rect:t,uvRect:i}=e.nodes[a];n.setMatrixAt(a,(0,u.$)({position:t.getCenter(),scale:t.getSize()})),r.setXYZW(a,i.x,i.y,i.width,i.height)}n.material.setScatteredSize(e.root.rect.getSize());let a=e.root.rect;n.material.setScatteredSize(a.getSize()),n.material.uniforms.uCenter.value.copy(a.getCenter())}lerpDistribute(e,t,n){let{count:r,plane:i}=this.internal,{aRectUv:o}=i.geometry.attributes,s=new P.Ae,l=new P.Ae,c=new P.Ae,f=new a.Pa4,d=new a.Pa4;for(let a=0;a<r;a++){let r=e.nodes[a],c=t.nodes[a],p=.3*(1-r.r0*(r.scatterCoeff+.2*c.r0)),x=(0,h.ii)(p,.7+p,n),m=(0,M.xD)(x);s.lerpRectangles(r.rect,c.rect,m),l.lerpRectangles(r.uvRect,c.uvRect,m),i.setMatrixAt(a,(0,u.$)({position:s.getCenter(f),scale:s.getSize(d),rotationY:(c.r0<.5?0:1)*m*Math.PI*2,rotationZ:.3*Math.sin(x*Math.PI)*(-1+2*r.r0)})),o.setXYZW(a,l.x,l.y,l.width,l.height)}let p=(0,M.uN)((0,h.ii)(.3,.7,n));c.lerpRectangles(e.root.rect,t.root.rect,p),i.material.setScatteredSize(c.getSize()),i.material.uniforms.uCenter.value.copy(c.getCenter()),i.instanceMatrix.needsUpdate=!0,o.needsUpdate=!0}constructor(e={}){super(),this.transition=0;let t={...I.defaultProps,...e},{col:n,row:r}=t,a=I.createPlane(t);(0,c.bB)(a,this);let i=new g.O;(0,c.bB)(i,this);let o=new D;(0,c.bB)(o,this),this.internal={count:r*n,plane:a,lineHelper:i,lightSetup:o},this.props=t,this.distribute(this.getDistribution())}}I.displayName="ScatteredPlane",I.defaultProps={row:20,col:30,imageAspect:1,imageResizeMode:"cover"},I.transition_meta="Range(0, 1)";class C extends a.Kj0{constructor(){super(new a.cJO(40,1),new a.vBJ({color:"#aeb4e9",side:a._Li})),this.onBeforeRender=(e,t,n)=>{this.position.copy(n.position)}}}let R={darkBlue:"#002c52",orange:"#ff5c35",white:"#ffffff",lightGrey:"#c9cfd3"};function U(){let e=(0,o.jE)();return e.three.pipeline.basicPasses.outline.enabled=!1,(0,p._v)("ScatteredDemo",async function*(t,n){(0,c.bB)(new C,t),(0,c.bB)(new a.Kj0(new s.w,new l.P),t);let r=await n.loader.load("/assets/textures/DebugTexture.png");r.colorSpace=a.KI_;let o=(0,c.bB)(new I,t);o.internal.plane.material.map=r,o.internal.plane.material.mapAspect=r.image.width/r.image.height;let d=o.getDistribution({seed:4789,position:[-2,0],size:[2,3]}),p=o.getDistribution({seed:3249,position:[2,0],size:[2,4]});o.drawDistribution(d),o.drawDistribution(p),t.userData.transition=0,t.userData.transition_meta="Slider(0, 1, step: 0.01)",t.userData.scale=1,t.userData.scale_meta="Slider(-1, 1, pow: 10, step: .1)",t.userData.links=[o.internal.plane.material.userData];let x=Object.values(R);for(let e=0,t=o.count;e<t;e++)o.internal.plane.setColorAt(e,(0,u.E)(f.T.pick(x)));yield n.onTick(()=>{o.lerpDistribute(d,p,t.userData.transition),o.scale.setScalar(t.userData.scale)}),(0,i.v)(e,t),e.sceneSelection.add("Select ScatteredDemo",t)},[]),null}function L(){return(0,p.Ky)(function*(e){e.useOrbitControls({position:[-2,0,8],target:[-2,0,0]})},[]),null}function j(e){let{children:t}=e,n=(0,p.Ky)();return n.loader.setPath(d.v.assetsPath),(0,r.jsx)(o.KU,{three:n,backgroundColor:"#26163c4f",children:t})}function O(){return(0,r.jsxs)("div",{className:"layer thru",children:[(0,r.jsx)(x.Leak,{}),(0,r.jsx)(p.H7,{children:(0,r.jsxs)(j,{children:[(0,r.jsx)("div",{className:"layer thru px-3 py-2 flex flex-col gap-4",children:(0,r.jsx)("h1",{className:"text-4xl",children:"ScatteredPlane"})}),(0,r.jsx)(L,{}),(0,r.jsx)(U,{})]})})]})}},62411:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let r="/three-xp/assets/",a={development:!1,assetsPath:r,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(e)}}},5693:function(e,t,n){"use strict";n.d(t,{H7:function(){return v},Ky:function(){return d},_v:function(){return p}});var r=n(32617),a=n(87200),i=n(37186),o=n(23657),s=n(15721),l=n(9258),u=n(29368),c=n(74707);let f=(0,a.createContext)(null);function d(e,t){let n=(0,a.useContext)(f);return(0,o.sv)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}function p(e,t,n){let r=(0,a.useMemo)(()=>new i.ZAu,[]);return r.name=e,d(async function*(e,n){if(e.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},t){let a=t(r,e,n);if(a&&"function"==typeof a.next)do{let{value:e,done:t}=await a.next();if(t)break;yield e}while(n.mounted)}},n),r}let x={className:"",assetsPath:"/",vertigoControls:!1};function m(e){let{children:t,className:n,assetsPath:i,vertigoControls:c}={...x,...e},d=(0,a.useMemo)(()=>new l.Vu,[]);d.loader.setPath(i);let{ref:p}=(0,o.Nv)({debounce:!0},function*(e,t){yield d.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:d})},[]);(0,o.sv)(function*(){if(c){let e=new s.F("object"==typeof c?c:{}).initialize(p.current).start();yield e.destroy,yield(0,u.RC)("three",t=>{e.update(d.camera,d.aspect,t.deltaTime)})}},[c]);let m={position:"absolute",inset:0};return(0,r.jsx)("div",{ref:p,className:n,style:m,children:(0,r.jsxs)(f.Provider,{value:d,children:[(0,r.jsx)("div",{style:m}),(0,r.jsx)("div",{style:m,className:"thru",children:d.initialized&&t})]})})}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,c.O)()&&(0,r.jsx)(m,{...t[0]})}},74707:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(87200);function a(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},92948:function(e,t,n){"use strict";n.d(t,{Leak:function(){return l},a:function(){return s}});var r=n(30176),a=n(90118),i=n(58100),o=n(6246);function s(e){Object.assign(window,{...r,...i,...a,...e,PRNG:o.T})}function l(e){return s(e),null}},60236:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(88780),a=n(27834);let i={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white"},o=new r.Ilk;function s(e){let{axis:t,length:n,radius:s,radialSegments:l,coneRatio:u,radiusScale:c,vertexColor:f,baseCap:d,color:p}={...i,...e},x=s*c,m=n*u,v=new r.b_z(3*x,m,l),h=new r.fHI(x,x,1,l,1,!0),w=n-m,y=n-.5*m;v.rotateZ(-Math.PI/2).translate(y,0,0),h.scale(1,w,1).rotateZ(-Math.PI/2).translate(.5*w,0,0);let g="none"===d?new r.u9r:"flat"===d?new r.zf8(x,l).rotateY(-Math.PI/2):new r.xo$(x,l,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),b=(0,a.n4)([v,h,g]);switch(t){case"y":b.rotateZ(Math.PI/2);break;case"z":b.rotateY(-Math.PI/2)}if(f){let e=b.attributes.position.count,t=new r.TlE(new Float32Array(3*e),3);b.setAttribute("color",t),o.set(p);for(let n=0;n<e;n++)t.setXYZ(n,o.r,o.g,o.b)}return b}let l={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class u extends r.u9r{static get defaultOptions(){return{...l}}constructor(e){super();let{xColor:t,yColor:n,zColor:r,...i}={...l,...e},o=s({...i,axis:"x",color:t}),u=s({...i,axis:"y",color:n}),c=s({...i,axis:"z",color:r}),f=(0,a.n4)([o,u,c]);this.copy(f),f.dispose()}}},12042:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(88780),a=n(23247);let i={luminosity:.5};class o extends r.vBJ{constructor(e){let{luminosity:t,...n}={...i,...e},o={uSunPosition:{value:new r.Pa4(.5,.7,.3)},uLuminosity:{value:t}};super(n),this.onBeforeCompile=e=>a.b.with(e).uniforms(o).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      "),this.sunPosition=o.uSunPosition.value}}},85705:function(e,t,n){"use strict";n.d(t,{$:function(){return o},E:function(){return l}});var r=n(88780),a=n(32219);let i=new r.yGw;function o(e){return(0,a.Xe)(e,i)}let s=new r.Ilk;function l(e){return s.set(e)}},7876:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r="\n#ifndef GLSL_BASIC\n#define GLSL_BASIC\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\n#endif\n"},99963:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(7876);let a=["linear"];for(let e=1;e<=10;e++)a.push("easeIn".concat(e)),a.push("easeOut".concat(e)),a.push("easeInOut".concat(e)),a.push("easeOutIn".concat(e));let i="\n#ifndef GLSL_EASING\n#define GLSL_EASING\n\n".concat(r.l,"\n\nfloat easePow1(float x) {\n  return x;\n}\n\nfloat easePow2(float x) {\n  return x * x;\n}\n\nfloat easePow3(float x) {\n  return x * x * x;\n}\n\nfloat easePow4(float x) {\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow5(float x) {\n  float x0 = x;\n  x *= x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow6(float x) {\n  x *= x * x;\n  return x *= x;\n}\n\nfloat easePow7(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow8(float x) {\n  x *= x;\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow9(float x) {\n  x *= x * x;\n  return x *= x * x;\n}\n\nfloat easePow10(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x * x;\n  return x0 * x;\n}\n\nfloat linear(float x) {\n  return clamp01(x);\n}\n\n").concat(Array.from({length:10},(e,t)=>{let n=t+1;return"\n\nfloat easeIn".concat(n," (float x) {\n  return easePow").concat(n,"(clamp01(x));\n}\nfloat easeOut").concat(n," (float x) {\n  return 1.0 - easePow").concat(n,"(clamp01(1.0 - x));\n}\nfloat easeInOut").concat(n," (float x) {\n  return x < 0.5 \n    ? 0.5 * easePow").concat(n,"(2.0 * x) \n    : 1.0 - 0.5 * easePow").concat(n,"(2.0 * (1.0 - x));\n}\nfloat easeOutIn").concat(n," (float x) {\n  return x < 0.5\n    ? 0.5 * (1.0 - easePow").concat(n,"(1.0 - x * 2.0))\n    : 1.0 - 0.5 * (1.0 - easePow").concat(n,"(2.0 * x - 1.0));\n}\n\n").trim()}).join("\n\n"),"\n\n\n// https://www.desmos.com/calculator/mqou4lf9zc?lang=fr\nfloat easeInOut(float x, float p, float i) {\n  return  x <= 0.0 ? 0.0 :\n          x >= 1.0 ? 1.0 :\n          x <= i ? 1.0 / pow(i, p - 1.0) * pow(x, p) :\n          1.0 - 1.0 / pow(1.0 - i, p - 1.0) * pow(1.0 - x, p);\n}\n\n// https://www.desmos.com/calculator/nrjlezusdv\nfloat easeInThenOut(float x, float p) {\n  return 1.0 - pow(abs(2.0 * x - 1.0), p);\n}\n\n#endif\n")},18075:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});let r={vecX:["float","vec2","vec3","vec4"]},a=(e,t)=>{let n=[],a=Array.isArray(e)?e:[e].map(e=>e in r?r[e]:e).flat();if("function"==typeof t)for(let e of a)n.push(t(e).replaceAll(/\bT\b/g,e));else for(let e of a)n.push(t.replaceAll(/\bT\b/g,e));return n.join("\n")}},1976:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7876),a=n(18075);let i="\n  ".concat(r.l,"\n\n  float sin01(float x) {\n    return 0.5 + 0.5 * sin(x * 6.283185307179586);\n  }\n\n  vec2 scaleAround(vec2 p, vec2 c, float s) {\n    return c + (p - c) / s;\n  }\n\n  // Same as mix, but clamped.\n  ").concat((0,a.C)("vecX","\n    T lerp(in T a, in T b, in float x) {\n      return mix(a, b, clamp01(x));\n    }\n  "),"\n\n  float inverseLerpUnclamped(in float a, in float b, float x) {\n    return (x - a) / (b - a);\n  }\n\n  float inverseLerp(in float a, in float b, float x) {\n    return clamp01((x - a) / (b - a));\n  }\n\n  float threshold(in float x, in float thresholdValue) {\n    return x < thresholdValue ? 0. : 1.;\n  }\n\n  float threshold(in float x, in float thresholdValue, in float width) {\n    return width < 1e-9 \n      ? (x < thresholdValue ? 0. : 1.)\n      : clamp01((x - thresholdValue + width * .5) / width);\n  }\n\n  mat3 extractRotation(mat4 matrix) {\n    return mat3(matrix[0].xyz, matrix[1].xyz, matrix[2].xyz);\n  }\n\n  vec2 rotate(vec2 p, float a) {\n    float c = cos(a);\n    float s = sin(a);\n    float x = c * p.x + s * p.y;\n    float y = -s * p.x + c * p.y;\n    return vec2(x, y);\n  }\n\n  vec2 rotateAround(vec2 p, float a, vec2 c) {\n    return c + rotate(p - c, a);\n  }\n\n  vec2 rotateScaleAround(vec2 p, float a, float s, vec2 c) {\n    return c + rotate((p - c) / s, a);\n  }\n  \n  float positiveModulo(float x) {\n    x = mod(x, 1.0);\n    return x < 0.0 ? x + 1.0 : x;\n  }\n\n  float positiveModulo(float x, float modulo) {\n    x = mod(x, modulo);\n    return x < 0.0 ? x + modulo : x;\n  }\n\n  // Limit a value to a maximum that the function tends to reach when x -> ∞\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float maxValue) {\n    return x <= 0.0 ? x : maxValue * x / (maxValue + x);\n  }\n\n  // https://www.desmos.com/calculator/0vewkbnscu\n  float limited(float x, float minValue, float maxValue) {\n    float d = maxValue - minValue;\n    float xd = x - minValue;\n    return x <= minValue ? x : minValue + d * xd / (d + xd);\n  }\n\n  float sqLength(in vec2 p) {\n    return p.x * p.x + p.y * p.y;\n  }\n\n  float sqLength(in vec3 p) {\n    return p.x * p.x + p.y * p.y + p.z * p.z;\n  }\n\n  float pcurve(float x, float a, float b) {\n    float k = pow(a + b, a + b) / (pow(a, a) * pow(b, b));\n    return k * pow(x, a) * pow(1.0 - x, b);\n  }\n\n  float hash(vec3 p) {\n    return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n  }\n\n  ").concat((0,a.C)("vecX","\n    T min3(in T a, in T b, in T c) {\n      return min(min(a, b), c);\n    }\n  "),"\n\n  ").concat((0,a.C)("vecX","\n    T min4(in T a, in T b, in T c, in T d) {\n      return min(min(a, b), min(c, d));\n    }\n  "),"\n")},29334:function(e,t,n){"use strict";n.d(t,{uN:function(){return a.mv},xD:function(){return a.FR},Ui:function(){return i}});var r=n(36016),a=n(58064);let i={transition:a.eR,bump:r.HU}},6246:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return(e=(e=(7*e+Math.sqrt(e)+16087*Math.sin(e))%2147483647)<0?e+2147483647:e)>1?2147483647&e:0===e?345678:123456},a=e=>e=2147483647&Math.imul(e,48271),i=e=>(e-1)/2147483646,o=e=>e,s={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function l(){let e=a(a(r(123456)));function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return"string"==typeof t&&(t=t.split("").reduce((e,t)=>7*e+t.charCodeAt(0),0)),e=a(a(r(t))),d}function n(){return i(e=a(e))}function l(e){switch(e.length){default:return[0,1,o];case 1:return[0,e[0],o];case 2:return[e[0],e[1],o];case 3:return[e[0],e[1],e[2]]}}function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,i,o]=l(t);return a+(i-a)*o(n())}function c(){for(var e,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let[i,o,{weightsAreNormalized:l,indexOffset:u,forbiddenItems:c}]=function(e){let[t,n=null,r]=e,a={...s,...r};if(Array.isArray(t))return[t,n,a];if("object"==typeof t)return[Object.values(t),n?Object.values(n):null,a];throw Error("pick: unsupported options type")}(r);if(c.length>0){let t=new Set;for(let e of c){let n=i.indexOf(e);n>=0&&t.add(n)}if(i=i.filter((e,n)=>!t.has(n)),o=null!==(e=null==o?void 0:o.filter((e,n)=>!t.has(n)))&&void 0!==e?e:null,0===i.length)throw Error("pick: all items are forbidden")}if(null===o){let e=Math.floor(n()*i.length);return u&&(e+=u,(e%=i.length)<0&&(e+=i.length)),i[e]}if(!l){let e=o.reduce((e,t)=>e+t,0);o=o.map(t=>t/e)}let f=n(),d=0;for(let e=0;e<i.length;e++)if(f<(d+=o[e]))return i[e];throw Error("among: unreachable")}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n(),a=n(),i=Math.sqrt(-2*Math.log(r)),o=2*Math.PI*a;return[e+t*i*Math.cos(o),e+t*i*Math.sin(o)]}let d={seed:t,seedMax:function(){return 2147483647},reset:function(){return t(123456),d},next:function(){return e=a(e),d},random:n,between:u,around:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a=1,i=o]=t,s=2*n();return(s>1?1:-1)*i(s>1?s-1:s)*a},int:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,i,o]=l(t);return a+Math.floor(o(n())*(i-a))},chance:function(e){return n()<e},shuffle:function(e){let{mutate:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t&&Array.isArray(e)?e:[...e],a=r.length;for(let e=0;e<a;e++){let t=Math.floor(a*n()),i=r[e];r[e]=r[t],r[t]=i}return r},pick:c,createPicker:function(e){let t=e.map(e=>{let[t]=e;return t}),n=e.map(e=>{let[t,n]=e;return n}),r=n.reduce((e,t)=>e+t,0);for(let[e,t]of n.entries())n[e]=t/r;return()=>c(t,n,{weightsAreNormalized:!0})},vector:function(e,t){let[n=0,r=1]=Array.isArray(t)?t:[null==t?void 0:t.min,null==t?void 0:t.max];for(let t of Object.keys(e))e[t]=u(n,r);return e},unitVector2:function(e){let t=2*Math.PI*n();return e.x=Math.cos(t),e.y=Math.sin(t),e},unitVector3:function(e){let t=n(),r=n(),a=2*Math.PI*t,i=Math.acos(1-2*r);return e.x=Math.sin(i)*Math.cos(a),e.y=Math.sin(i)*Math.sin(a),e.z=Math.cos(i),e},normalVector:function(e){let t=Object.keys(e),n=t.length,r=Math.sqrt(n);for(let a=0;a<n;a+=2){let[i,o]=f();e[t[a]]=i/r,a+1<n&&(e[t[a+1]]=o/r)}return e},unitVector:function(e){let t=Object.keys(e),n=t.length,r=0;for(let a=0;a<n;a+=2){let[i,o]=f();e[t[a]]=i,r+=i*i,a+1<n&&(e[t[a+1]]=o,r+=o*o)}r=Math.sqrt(r);for(let a=0;a<n;a++)e[t[a]]/=r;return e},boxMuller:f};return d}let u=class{constructor(e){Object.assign(this,l().seed(e))}};Object.assign(u,l())}},function(e){e.O(0,[7987,411,7512,9829,5406,749,4709,812,3420,1540,167,4157,9258,5721,1174,5284,1618,5694,2840,1744],function(){return e(e.s=76906)}),_N_E=e.O()}]);