(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7908],{1029:(t,n,e)=>{"use strict";e.d(n,{N:()=>a});let r={vecX:["float","vec2","vec3","vec4"]},a=(t,n)=>{let e=[],a=Array.isArray(t)?t:[t].map(t=>t in r?r[t]:t).flat();if("function"==typeof n)for(let t of a)e.push(n(t).replaceAll(/\bT\b/g,t));else for(let t of a)e.push(n.replaceAll(/\bT\b/g,t));return e.join("\n")}},8144:(t,n,e)=>{"use strict";e.d(n,{H:()=>o});var r=e(65927),a=e(1029);let o="\n".concat(r.S,"\n\n#ifndef GLSL_UTILS\n#define GLSL_UTILS\n\nfloat sin01(float x) {\n  return 0.5 + 0.5 * sin(x * 6.283185307179586);\n}\n\nvec2 scaleAround(vec2 p, vec2 c, float s) {\n  return c + (p - c) / s;\n}\n\n// Same as mix, but clamped.\n").concat((0,a.N)("vecX","\n  T lerp(in T a, in T b, in float x) {\n    return mix(a, b, clamp01(x));\n  }\n"),"\n\nfloat inverseLerpUnclamped(in float a, in float b, float x) {\n  return (x - a) / (b - a);\n}\n\nfloat inverseLerp(in float a, in float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nfloat remap(in float x, in float a, in float b, in float c, in float d) {\n  return c + (d - c) * inverseLerp(a, b, x);\n}\n\n// Remap from [-1, 1] to [0, 1]\nfloat remap1101(in float x) {\n  return clamp01(0.5 + 0.5 * x);\n}\n\n").concat((0,a.N)("vecX","\n  T oneMinus(in T x) {\n    return 1.0 - x;\n  }\n"),"\n\n// Returns x^p, but handles negative x values correctly.\nfloat spow(in float x, in float p) {\n  return x >= 0.0 ? pow(x, p) : -pow(-x, p);\n}\n\nfloat threshold(in float x, in float thresholdValue) {\n  return x < thresholdValue ? 0. : 1.;\n}\n\nfloat threshold(in float x, in float thresholdValue, in float width) {\n  return width < 1e-9 \n    ? (x < thresholdValue ? 0. : 1.)\n    : clamp01((x - thresholdValue + width * .5) / width);\n}\n\nmat3 extractRotation(mat4 matrix) {\n  return mat3(matrix[0].xyz, matrix[1].xyz, matrix[2].xyz);\n}\n\nvec2 rotate(vec2 p, float a) {\n  float c = cos(a);\n  float s = sin(a);\n  float x = c * p.x + s * p.y;\n  float y = -s * p.x + c * p.y;\n  return vec2(x, y);\n}\n\nvec2 rotateAround(vec2 p, float a, vec2 c) {\n  return c + rotate(p - c, a);\n}\n\nvec2 rotateScaleAround(vec2 p, float a, float s, vec2 c) {\n  return c + rotate((p - c) / s, a);\n}\n\nfloat positiveModulo(float x) {\n  x = mod(x, 1.0);\n  return x < 0.0 ? x + 1.0 : x;\n}\n\n// Modulo that keeps the result in the range [0, modulo]\nfloat positiveModulo(float x, float modulo) {\n  x = mod(x, modulo);\n  return x < 0.0 ? x + modulo : x;\n}\n\n// Modulo that keeps the result in the range [-m/2, m/2]\nfloat middleModulo(float x, float modulo) {\n  x = mod(x, modulo);\n  return x < -modulo / 2.0 ? x + modulo : x > modulo / 2.0 ? x - modulo : x;\n}\n\n// Limit a value to a maximum that the function tends to reach when x -> âˆž\n// https://www.desmos.com/calculator/0vewkbnscu\nfloat limited(float x, float maxValue) {\n  return x <= 0.0 ? x : maxValue * x / (maxValue + x);\n}\n\n// https://www.desmos.com/calculator/0vewkbnscu\nfloat limited(float x, float minValue, float maxValue) {\n  float d = maxValue - minValue;\n  float xd = x - minValue;\n  return x <= minValue ? x : minValue + d * xd / (d + xd);\n}\n\nfloat sqLength(in vec2 p) {\n  return p.x * p.x + p.y * p.y;\n}\n\nfloat sqLength(in vec3 p) {\n  return p.x * p.x + p.y * p.y + p.z * p.z;\n}\n\nfloat pcurve(float x, float a, float b) {\n  float k = pow(a + b, a + b) / (pow(a, a) * pow(b, b));\n  return k * pow(x, a) * pow(1.0 - x, b);\n}\n\nfloat hash(float p) {\n  return fract(sin(p * 12.9898) * 43758.5453);\n}\n\nfloat hash(vec2 p) {\n  return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat hash(vec3 p) {\n  return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n}\n\nfloat hash(vec4 p) {\n  return fract(sin(dot(p, vec4(12.9898, 78.233, 45.164, 94.673))) * 43758.5453);\n}\n\nvec2 hash2(float p) {\n  return vec2(hash(p), hash(p + 1.0));\n}\n\nvec2 hash2(vec2 p) {\n  return vec2(hash(p.x), hash(p.y));\n}\n\nvec2 hash2(vec3 p) {\n  return vec2(hash(p.xy), hash(p.yz));\n}\n\nvec2 hash2(vec4 p) {\n  return vec2(hash(p.xyz), hash(p.yzw));\n}\n\nvec3 hash3(float p) {\n  return vec3(hash2(p),  hash(p + 2.0));\n}\n\nvec3 hash3(vec2 p) {\n  return vec3(hash2(p), hash(p));\n}\n\nvec3 hash3(vec3 p) {\n  return vec3(hash(p.x), hash(p.y), hash(p.z));\n}\n\nvec3 hash3(vec4 p) {\n  return vec3(hash(p.xy), hash(p.yz), hash(p.zw));\n}\n\nfloat hash_alt(float p) {\n  return fract(sin(p * 127.1) * 311.7);\n}\n\nfloat hash_alt(vec2 p) {\n  return fract(sin(dot(p, vec2(127.1, 311.7))) * 269.5);\n}\n\nfloat hash_alt(vec3 p) {\n  return fract(sin(dot(p, vec3(127.1, 311.7, 74.7))) * 269.5);\n}\n\nfloat hash_alt(vec4 p) {\n  return fract(sin(dot(p, vec4(127.1, 311.7, 74.7, 113.5))) * 269.5);\n}\n\n").concat((0,a.N)("vecX","\n  T min3(in T a, in T b, in T c) {\n    return min(min(a, b), c);\n  }\n"),"\n\n").concat((0,a.N)("vecX","\n  T min4(in T a, in T b, in T c, in T d) {\n    return min(min(a, b), min(c, d));\n  }\n"),"\n\n#endif // GLSL_UTILS\n")},14277:(t,n,e)=>{"use strict";e.d(n,{D:()=>a});var r=e(67203);function a(){let[t,n]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{n(!0)},[]),t}},16465:(t,n,e)=>{"use strict";e.d(n,{Y:()=>i});var r=e(49797),a=e(7147);let o={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class i extends r.V9B{constructor(t){let{rampPower:n,shadowColor:e,luminosity:i,onBeforeCompile:l,...c}={...o,...t},s={uSunPosition:{value:new r.Pq0(.5,.7,.3)},uShadowColor:{value:new r.Q1f(e)},uRampPower:{value:n},uLuminosity:{value:i}};super(c),this.onBeforeCompile=t=>{a.bI.with(t).uniforms(s).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vWorldNormal = mat3(instanceMatrix) * vWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==l||l(t)},this.sunPosition=s.uSunPosition.value}}},17099:(t,n,e)=>{"use strict";e.d(n,{c:()=>l});var r=e(79105);let a=t=>t,o={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function i(){let t=(0,r.K2)((0,r.K2)((0,r.Ts)(r.KP)));function n(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.KP;return"string"==typeof n&&(n=n.split("").reduce((t,n)=>7*t+n.charCodeAt(0),0)),t=(0,r.K2)((0,r.K2)((0,r.Ts)(n))),u}function e(){return t=(0,r.K2)(t),(0,r.Tj)(t)}function i(t){switch(t.length){default:return[0,1,a];case 1:return[0,t[0],a];case 2:return[t[0],t[1],a];case 3:return[t[0],t[1],t[2]]}}function l(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let[a,o,l]=i(n);return a+(o-a)*l(e())}function c(){for(var t,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];let[i,l,{weightsAreNormalized:c,indexOffset:s,forbiddenItems:u}]=function(t){let[n,e=null,r]=t,a={...o,...r};if(Array.isArray(n))return[n,e,a];if("object"==typeof n)return[Object.values(n),e?Object.values(e):null,a];throw Error("pick: unsupported options type")}(r);if(u.length>0){let n=new Set;for(let t of u){let e=i.indexOf(t);e>=0&&n.add(e)}if(i=i.filter((t,e)=>!n.has(e)),l=null!=(t=null==l?void 0:l.filter((t,e)=>!n.has(e)))?t:null,0===i.length)throw Error("pick: all items are forbidden")}if(null===l){let t=Math.floor(e()*i.length);return s&&(t+=s,(t%=i.length)<0&&(t+=i.length)),i[t]}if(!c){let t=l.reduce((t,n)=>t+n,0);l=l.map(n=>n/t)}let f=e(),d=0;for(let t=0;t<i.length;t++)if(f<(d+=l[t]))return i[t];throw Error("among: unreachable")}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e(),a=e(),o=Math.sqrt(-2*Math.log(r)),i=2*Math.PI*a;return[t+n*o*Math.cos(i),t+n*o*Math.sin(i)]}let u={seed:n,seedMax:function(){return r.Zu},reset:function(){return n(r.KP),u},next:function(){return t=(0,r.K2)(t),u},getState:function(){return t},setState:function(n){return t=n&r.Zu,u},random:e,between:l,around:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let[o=1,i=a]=n,l=2*e();return(l>1?1:-1)*i(l>1?l-1:l)*o},int:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let[a,o,l]=i(n);return a+Math.floor(l(e())*(o-a))},chance:function(t){return e()<t},shuffle:function(t){let{mutate:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n&&Array.isArray(t)?t:[...t],a=r.length;for(let t=0;t<a;t++){let n=Math.floor(a*e()),o=r[t];r[t]=r[n],r[n]=o}return r},pick:c,createPicker:function(t){let n=t.map(t=>{let[n]=t;return n}),e=t.map(t=>{let[n,e]=t;return e}),r=e.reduce((t,n)=>t+n,0);for(let[t,n]of e.entries())e[t]=n/r;return()=>c(n,e,{weightsAreNormalized:!0})},vector:function(t,n){let[e=0,r=1]=Array.isArray(n)?n:[null==n?void 0:n.min,null==n?void 0:n.max];for(let n of Object.keys(t))t[n]=l(e,r);return t},unitVector2:function(t){let n=2*Math.PI*e();return t.x=Math.cos(n),t.y=Math.sin(n),t},unitVector3:function(t){let n=e(),r=e(),a=2*Math.PI*n,o=Math.acos(1-2*r);return t.x=Math.sin(o)*Math.cos(a),t.y=Math.sin(o)*Math.sin(a),t.z=Math.cos(o),t},normalVector:function(t){let n=Object.keys(t),e=n.length,r=Math.sqrt(e);for(let a=0;a<e;a+=2){let[o,i]=s();t[n[a]]=o/r,a+1<e&&(t[n[a+1]]=i/r)}return t},unitVector:function(t){let n=Object.keys(t),e=n.length,r=0;for(let a=0;a<e;a+=2){let[o,i]=s();t[n[a]]=o,r+=o*o,a+1<e&&(t[n[a+1]]=i,r+=i*i)}r=Math.sqrt(r);for(let a=0;a<e;a++)t[n[a]]/=r;return t},boxMuller:s,quaternion:function(t){let n=e(),r=e(),a=e(),o=Math.sqrt(1-n),i=Math.sqrt(n);return t.x=o*Math.sin(2*Math.PI*r),t.y=o*Math.cos(2*Math.PI*r),t.z=i*Math.sin(2*Math.PI*a),t.w=i*Math.cos(2*Math.PI*a),t},insideCircle:function(t,n){let r=2*e()*Math.PI,a=Math.sqrt(e())*t;return n.x=a*Math.cos(r),n.y=a*Math.sin(r),n}};return u}let l=class{constructor(t){Object.assign(this,i().seed(t))}};Object.assign(l,i())},22899:(t,n,e)=>{"use strict";e.d(n,{I:()=>o});var r=e(65927);let a=["linear"];for(let t=1;t<=10;t++)a.push("easeIn".concat(t)),a.push("easeOut".concat(t)),a.push("easeInOut".concat(t)),a.push("easeOutIn".concat(t));let o="\n#ifndef GLSL_EASING\n#define GLSL_EASING\n\n".concat(r.S,"\n\nfloat easePow1(float x) {\n  return x;\n}\n\nfloat easePow2(float x) {\n  return x * x;\n}\n\nfloat easePow3(float x) {\n  return x * x * x;\n}\n\nfloat easePow4(float x) {\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow5(float x) {\n  float x0 = x;\n  x *= x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow6(float x) {\n  x *= x * x;\n  return x *= x;\n}\n\nfloat easePow7(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow8(float x) {\n  x *= x;\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow9(float x) {\n  x *= x * x;\n  return x *= x * x;\n}\n\nfloat easePow10(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x * x;\n  return x0 * x;\n}\n\nfloat linear(float x) {\n  return clamp01(x);\n}\n\n").concat(Array.from({length:10},(t,n)=>{let e=n+1;return"\n\n  float easeIn".concat(e," (float x) {\n    return easePow").concat(e,"(clamp01(x));\n  }\n  float easeOut").concat(e," (float x) {\n    return 1.0 - easePow").concat(e,"(clamp01(1.0 - x));\n  }\n  float easeInOut").concat(e," (float x) {\n    return x < 0.5 \n      ? 0.5 * easePow").concat(e,"(2.0 * x) \n      : 1.0 - 0.5 * easePow").concat(e,"(2.0 * (1.0 - x));\n  }\n  float easeOutIn").concat(e," (float x) {\n    return x < 0.5\n      ? 0.5 * (1.0 - easePow").concat(e,"(1.0 - x * 2.0))\n      : 1.0 - 0.5 * (1.0 - easePow").concat(e,"(2.0 * x - 1.0));\n  }\n\n").trim()}).join("\n\n"),"\n\n\n// https://www.desmos.com/calculator/mqou4lf9zc?lang=fr\nfloat easeInOut(float x, float p, float i) {\n  return  x <= 0.0 ? 0.0 :\n          x >= 1.0 ? 1.0 :\n          x <= i ? 1.0 / pow(i, p - 1.0) * pow(x, p) :\n          1.0 - 1.0 / pow(1.0 - i, p - 1.0) * pow(1.0 - x, p);\n}\n\n// https://www.desmos.com/calculator/nrjlezusdv\nfloat easeInThenOut(float x, float p) {\n  return 1.0 - pow(abs(2.0 * x - 1.0), p);\n}\n\n#endif\n")},22936:(t,n,e)=>{"use strict";var r=e(28363);function a(){}function o(){}o.resetWarningCache=a,t.exports=function(){function t(t,n,e,a,o,i){if(i!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function n(){return t}t.isRequired=t;var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:o,resetWarningCache:a};return e.PropTypes=e,e}},28363:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},32595:(t,n,e)=>{"use strict";e.d(n,{Client:()=>B});var r=e(70691),a=e(33855),o=e(888);e(86146);var i=e(62517),l=e(49797),c=e(24223),s=e(18479),u=e(17099),f=e(36508);let d=function(t,n){let{h:e=.3,w:r=1,p:a=3,q:o=1,a:i=.3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=n**o;t.x=(n+i*Math.sin(l*Math.PI*2))*r,t.y=e*Math.pow(Math.sin(l*Math.PI),a)},x="\nvec2 looping(float t, float h, float w, float p, float q, float a) {\n  float t2 = pow(t, q);\n  return vec2(\n    (t + a * sin(t2 * PI * 2.0)) * w,\n    h * pow(sin(t2 * PI), p)\n  );\n}\n\nvec2 looping(float t) {\n  return looping(t, 0.3, 1.0, 3.0, 1.0, 0.3);\n}\n";function p(){let t=(0,o._)(["x(t) = w cdot left( t + a cdot sin(2 pi cdot t^q) \right)"],["x(t) = w \\cdot \\left( t + a \\cdot \\sin(2 \\pi \\cdot t^q) \\right)"]);return p=function(){return t},t}function h(){let t=(0,o._)(["y(t) = h cdot left( sin(pi cdot t^q) \right)^p"],["y(t) = h \\cdot \\left( \\sin(\\pi \\cdot t^q) \\right)^p"]);return h=function(){return t},t}let v=(()=>{let t=new l.I9Y;return function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Array.from({length:e+1},(r,a)=>(n(t,a/e),"".concat(t.x.toFixed(5),",").concat(t.y.toFixed(5)))).join(" ")}})();function m(){let{samples:t=300,curve:n=(t,n)=>{t.x=n,t.y=n},color:e="#fff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=v(n,t),{ref:o}=(0,s.C7)(function*(t){let e=new l.I9Y;console.log("foo"),yield f.Rv.get("three").onTick(r=>{n(e,.5*r.time%1),t.setAttribute("cx",e.x.toFixed(5)),t.setAttribute("cy",e.y.toFixed(5))})},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("polyline",{stroke:e,points:a,opacity:.25}),(0,r.jsx)("circle",{ref:o,cx:0,cy:0,r:.005,fill:e,stroke:"none"})]})}function y(){return(0,r.jsxs)("div",{className:"absolute inset-0 text-sm p-4 pt-12",children:[(0,r.jsx)(i.BlockMath,{math:String.raw(p())}),(0,r.jsx)(i.BlockMath,{math:String.raw(h())})]})}function w(){(0,s.C7)(function*(){yield(0,c.O)(f.Rv.current().requestActivation)},[]);let t=new l.I9Y(.5,.5),n=new l.I9Y(1,1),e="".concat(t.x-n.x/2-.05," ").concat(t.y-n.y/2-.05," ").concat(n.x+.1," ").concat(n.y+.1);return u.c.reset(),(0,r.jsxs)("div",{className:"relative self-start",children:[(0,r.jsx)(y,{}),(0,r.jsx)("svg",{viewBox:e,width:400,style:{border:"1px solid #fff3",borderRadius:".25em"},children:(0,r.jsxs)("g",{transform:"scale(1, -1) translate(0, -1)",children:[(0,r.jsxs)("g",{stroke:"#fff2",strokeWidth:.002,children:[(0,r.jsx)("line",{x1:-10,x2:10}),(0,r.jsx)("line",{y1:-10,y2:10}),(0,r.jsx)("line",{x1:1,x2:1,y1:-10,y2:10}),(0,r.jsx)("line",{x1:-10,x2:10,y1:1,y2:1})]}),(0,r.jsxs)("g",{id:"curves",stroke:"#fff",fill:"none",strokeWidth:.002,children:[Array.from({length:10},(t,n)=>{let e=u.c.between(3,5),a=u.c.between(1/3,1.5),o=u.c.between(.1,.5),i=u.c.between(.2,.3),l="hsl(".concat(u.c.between(180,360),", 100%, 70%)");return(0,r.jsx)(m,{curve:(t,n)=>d(t,n,{a:i,p:e,h:o,q:a}),color:l},n)}),(0,r.jsx)(m,{curve:d})]})]})})]})}var g=e(34011),b=e(16465),M=e(7147),P=e(79911),S=e(22899);class z extends l.eaF{constructor(){super(new g.k({xColor:"#ff338b",yColor:"#33cc9c",zColor:"#4e33ff"}),new b.Y)}}class T extends l.B69{constructor(){super(),this.axes1=(0,P.DN)(new z,this),this.axes2=(0,P.DN)(new z,this),this.onTick=t=>{let{deltaTime:n}=t,{axes1:e,axes2:r}=this;e.rotation.y+=.5*n,r.rotation.x+=.5*n};let{axes1:t,axes2:n}=this;t.position.set(-1,0,0),t.rotation.x=-Math.PI/2,n.position.set(1,0,0),n.rotation.x=-Math.PI/2;let e=new l.bdM(1,1,1e3,1).translate(.5,.5,0),r=new l.uSd({side:l.$EB,flatShading:!0,emissiveIntensity:.25,emissive:"#ffffff"});(0,P.DN)(new l.eaF(e,r),this);let a={uTime:f.Rv.get("three").uTime,uWidth:{value:.6},uStartMatrix:{value:t.matrix},uEndMatrix:{value:n.matrix}};r.onBeforeCompile=t=>M.bI.with(t).uniforms(a).vertex.top(S.I,x).vertex.top("\n        vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          vec3 ab = mix(a, b, t);\n          vec3 bc = mix(b, c, t);\n          vec3 cd = mix(c, d, t);  \n          vec3 ab_bc = mix(ab, bc, t);\n          vec3 bc_cd = mix(bc, cd, t);\n          return mix(ab_bc, bc_cd, t);\n        }\n\n        vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n          return 3.0 * ( \n            (1.0 - t) * (1.0 - t) * (b - a) + \n            2.0 * (1.0 - t) * t * (c - b) + \n            t * t * (d - c));\n        }\n      ").vertex.replace("begin_vertex","\n        vec3 start = uStartMatrix[3].xyz;\n        vec3 end = uEndMatrix[3].xyz;\n\n        vec3 p0 = start;\n        vec3 p1 = mix(start, end, 0.0) + uStartMatrix[2].xyz;\n        vec3 p2 = mix(start, end, 1.0) + uEndMatrix[2].xyz;\n        vec3 p3 = end;\n\n        vec3 up = mix(uStartMatrix[1].xyz, uEndMatrix[1].xyz, position.x);\n        vec3 tangent = bezier3_tangent(p0, p1, p2, p3, position.x);\n        vec3 normal = cross(tangent, up);\n\n        float width = (position.y - 0.5)\n          // * easeInThenOut(position.x, 3.0)\n          * uWidth;\n\n        vec2 loop = looping(position.x);\n\n        vec3 transformed = \n          bezier3(p0, p1, p2, p3, position.x)\n          + tangent * (loop.x - position.x) * 2.0 + normal * loop.y * 2.0\n          + up * width;\n      ").vertex.replace("project_vertex","\n        vec4 mvPosition = vec4( transformed, 1.0 );\n        #ifdef USE_BATCHING\n          mvPosition = batchingMatrix * mvPosition;\n        #endif\n        #ifdef USE_INSTANCING\n          mvPosition = instanceMatrix * mvPosition;\n        #endif\n        mvPosition = modelViewMatrix * mvPosition;\n        gl_Position = projectionMatrix * mvPosition;\n      ")}}var _=e(38921);function I(t,n){var e;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=Array.isArray(n)?n.map(t=>new l.Q1f(t)):[new l.Q1f(n)],i=t.attributes.position.count,c=null!=(e=t.attributes.color)?e:function(n){let e=new l.THS(new Float32Array(3*n),3);return t.setAttribute("color",e),e}(i),s=a<0?i:a;if(1===o.length){let{r:t,g:n,b:e}=o[0];for(let a=r;a<s;a++)c.setXYZ(a,t,n,e)}else for(let t=r;t<s;t++){let{r:n,g:e,b:r}=o[t%o.length];c.setXYZ(t,n,e,r)}return c.needsUpdate=!0,t}let j=(()=>{let t=new l.Pq0(0,1,0),n=new l.Pq0(0,0,-1),e=new l.Pq0,r=new l.Pq0,a=new l.Pq0;return function(o,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;r.crossVectors(l,i),1e-6>r.lengthSq()&&r.crossVectors(n,i),r.normalize(),a.crossVectors(i,r).normalize(),o.set(r.x,a.x,i.x,c.x,r.y,a.y,i.y,c.y,r.z,a.z,i.z,c.z,0,0,0,1)}})();var A=e(8144);class O extends l.ZLX{static getGeometry(){if(O._geometry)return O._geometry;let t=new l.qU7(.05,1,1,6).rotateZ(Math.PI/2).translate(.5,0,0);I(t,"#c60613");let n=t.clone().rotateZ(Math.PI/2);I(n,"#01b35a");let e=t.clone().rotateY(-Math.PI/2);return I(e,"#321bc7"),O._geometry=(0,_.pP)([t,n,e]),O._geometry}static getMaterial(){return O._material||(O._material=new l.V9B({vertexColors:!0}),O._material.onBeforeCompile=t=>M.bI.with(t).uniforms(O.uniforms).vertex.replace("begin_vertex","\n        vec3 transformed = vec3(position);\n        transformed *= uSize;\n        #ifdef USE_ALPHAHASH\n          vPosition = vec3(position);\n        #endif\n      ")),O._material}addTo(t){return t.add(this),this}constructor(t,n=.1){super(O.getGeometry(),O.getMaterial(),t.count),this.instanceMatrix=t,this.size=n,this.onBeforeRender=()=>{O.uniforms.uSize.value=this.size}}}O.uniforms={uSize:{value:.1}};class k extends l.YJl{constructor(){var t,n;super(),u.c.reset();let e=new l.dth("#ffffff","#926969",1);this.add(e);let r=new l.ZyN("#ffffff",2);this.add(r),r.position.set(2,4,1);let a=new l.WBB(1,8),o=a.clone(),i=new l.ONl(a,new l.BH$({size:.05}));this.add(i);let c=new l.ONl(o,new l.BH$({size:.05}));this.add(c),c.scale.setScalar(.33),c.position.set(0,0,-8),c.rotation.set(0,0,.66*Math.PI),this.onTick=t=>{let{deltaTime:n,time:e}=t;c.position.y=.5*Math.sin(.33*e)};let s=a.attributes.position.count,d=new l.ZLX(new l.bdM(1,1,100,1).translate(.5,.5,0),new l.uSd({side:l.$EB,flatShading:!0}),s);this.add(d),d.frustumCulled=!1;let p=new l.uWO(new Float32Array(16*s),16),h=new l.uWO(new Float32Array(16*s),16);d.geometry.setAttribute("aStartMat",p),d.geometry.setAttribute("aEndMat",h);let v=new l.kn4,m=new l.Pq0(0,1,0),y=new l.Pq0,w=new l.Pq0,g=new l.Q1f;for(let t=0;t<s;t++)y.fromBufferAttribute(a.attributes.position,t),w.copy(y),j(v,w,m,y),v.toArray(p.array,16*t),y.fromBufferAttribute(o.attributes.position,t),j(v,w,m,y),v.toArray(h.array,16*t),g.set("hsl(".concat(u.c.between(180,360),", 100%, 70%)")),d.setColorAt(t,g);let b={uTime:f.Rv.get("three").uTime,uLength:{value:.1},uRand:{value:u.c.vector(new l.IUQ,{min:0,max:1})},uWorldStartMatrix:{value:i.matrix},uWorldEndMatrix:{value:c.matrix},uWidth:{value:.1}};d.material.onBeforeCompile=t=>M.bI.with(t).shaderName("with-loop").uniforms(b).vertex.top(A.H,S.I,x).vertex.top("\n      attribute mat4 aStartMat;\n      attribute mat4 aEndMat;\n\n      float rand(vec3 p) {\n        return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n      }\n\n      // float rand(vec3 p) {\n      //   p = fract(p * vec3(443.8975, 441.4236, 437.1954));\n      //   p += dot(p, p.yzx + 19.19);\n      //   return fract((p.x + p.y) * p.z);\n      // }\n\n      float rand(vec3 p, float rangeMin, float rangeMax) {\n        return mix(rangeMin, rangeMax, rand(p));\n      }\n\n      float rand11(vec3 p) {\n        float r = rand(p) * 2.0 - 1.0;\n        float s = sign(r);\n        r = fract(r);\n        r *= r * r * r;\n        return r * s;\n      }\n\n      float rand11(vec3 p, float rangeMin, float rangeMax) {\n        return (rand11(p) * 0.5 + 0.5) * (rangeMax - rangeMin) + rangeMin;\n      }\n\n      vec3 bezier3(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        vec3 ab = mix(a, b, t);\n        vec3 bc = mix(b, c, t);\n        vec3 cd = mix(c, d, t);  \n        vec3 ab_bc = mix(ab, bc, t);\n        vec3 bc_cd = mix(bc, cd, t);\n        return mix(ab_bc, bc_cd, t);\n      }\n\n      vec3 bezier3_tangent(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        t = clamp(t, 0.0, 1.0);\n        return 3.0 * ( \n          (1.0 - t) * (1.0 - t) * (b - a) + \n          2.0 * (1.0 - t) * t * (c - b) + \n          t * t * (d - c));\n      }\n    ").vertex.replace("begin_vertex","\n      mat4 startMat = uWorldStartMatrix * aStartMat;\n      mat4 endMat = uWorldEndMatrix * aEndMat;\n\n      vec3 start = startMat[3].xyz;\n      vec3 end = endMat[3].xyz;\n\n      start += vec3(rand11(start.xyz), rand11(start.yzx), rand11(start.zxy)) * 0.66;\n      end += vec3(rand11(start.zyx), rand11(start.xzy), rand11(start.yxz)) * 0.33;\n      \n      float dt = mix(-uLength, 1.0, fract(uTime * 0.33 + rand11(start) * 0.4));\n      float t = position.x * uLength + dt;\n      t = clamp(t, 0.0, 1.0);\n      float d = distance(start, end);\n\n      vec3 p0 = start;\n      vec3 p1 = mix(start, end, 0.2) + d * 0.2 * startMat[2].xyz;\n      vec3 p2 = mix(start, end, 0.8) + d * 0.2 * endMat[2].xyz;\n      vec3 p3 = end;\n      \n      // p1 = mix(start, end, 0.33);\n      // p2 = mix(start, end, 0.66);\n\n      vec3 normal = normalize(mix(startMat[2].xyz, endMat[2].xyz, t));\n      vec3 up = normalize(mix(startMat[1].xyz, endMat[1].xyz, t));\n      vec3 tangent = normalize(bezier3_tangent(p0, p1, p2, p3, t));\n      \n      float shortT = (t - dt) / uLength;\n      float width = (position.y - 0.5)\n        * easeInThenOut(t, 6.0)\n        * easeInThenOut(shortT, 3.0)\n        * mix(0.33, 1.0, pcurve(t, 1.0, 2.0)) // Narrower at the end.\n        * uWidth;\n      \n      float randomness = 0.2;\n      float startLoopT = rand(start) * randomness;\n      float loopT = startLoopT + inverseLerp(0.0, 1.0 - randomness, t);\n\n      vec2 loop = looping(loopT, 0.3, 1.0, 3.0, rand11(start, 0.6, 1.2), 0.3);\n      // loop = vec2(t, 0.0);\n      \n      // Loop Random Scalar:\n      vec2 lrs = vec2(\n        rand11(start, 0.4, 1.0),\n        rand11(start.zyx, 0.9, 1.1));\n      vec3 transformed = \n        bezier3(p0, p1, p2, p3, t)\n        + tangent * (loop.x - loopT) * d * lrs.x + normal * loop.y * d * lrs.y\n        + up * width;\n      \n      #ifdef USE_ALPHAHASH\n        vPosition = transformed;\n      #endif\n    ").vertex.replace("beginnormal_vertex","\n      vec3 objectNormal = vec3(normal);\n\n      #ifdef USE_TANGENT\n        vec3 objectTangent = vec3(tangent.xyz);\n      #endif\n    "),a.computeBoundingBox(),a.computeBoundingSphere(),o.computeBoundingBox(),o.computeBoundingSphere(),d.computeBoundingBox(),null==(t=d.boundingBox)||t.copy(a.boundingBox.clone()).union(o.boundingBox).expandByScalar(1),d.computeBoundingSphere(),null==(n=d.boundingSphere)||n.copy(a.boundingSphere.clone()).union(o.boundingSphere).expandByPoint(new l.Pq0().setScalar(1)),d.geometry.computeBoundingBox=()=>{},d.geometry.computeBoundingSphere=()=>{},i.visible=!1,c.visible=!1}}function N(){return(0,a.dB)("ThreeDemo",async function*(t,n){n.useOrbitControls({position:[2,4.5,8],target:[-1.2,1.2,-.2]}),t.add(new l.fTw(10,10,"#5c4f7d","#352945"));let e=new T;e.position.set(-5,0,0),yield n.onTick(e.onTick),t.add(e);let r=new k;r.position.set(0,0,0),yield n.onTick(r.onTick),t.add(r)},[]),null}function B(){return(0,r.jsxs)("div",{className:"absolute-through p-4 flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"absolute-through",children:(0,r.jsx)(a.uB,{children:(0,r.jsx)(N,{})})}),(0,r.jsx)("h1",{className:"text-4xl",children:"Path with loop"}),(0,r.jsx)(w,{})]})}},33855:(t,n,e)=>{"use strict";e.d(n,{dB:()=>x,q:()=>p,uB:()=>m,yk:()=>d});var r=e(70691),a=e(67203),o=e(49797),i=e(18479),l=e(31763),c=e(88575),s=e(36508),u=e(14277);let f=(0,a.createContext)(null);function d(t,n){let e=(0,a.useContext)(f);return(0,i.C7)(async function*(n,r){if(t){let n=t(e,r);if(n&&"function"==typeof n.next)do{let{value:t,done:e}=await n.next();if(e)break;yield t}while(r.mounted)}},null!=n?n:"always"),e}function x(t,n,e){let r=(0,a.useMemo)(()=>new o.YJl,[]);return r.name=t,d(async function*(t,e){if(t.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},n){let a=n(r,t,e);if(a&&"function"==typeof a.next)do{let{value:t,done:n}=await a.next();if(n)break;yield t}while(e.mounted)}},e),r}function p(t){let{value:n}=t,e=(0,a.useMemo)(()=>"function"==typeof n?new n:n,[n]);return d(async function*(t){if(t.scene.add(e),"initialize"in e){let n=e.initialize(t);if(n&&"function"==typeof n.next)for(;;){let{value:t,done:e}=await n.next();if(e)break;yield t}}yield()=>{if(e.removeFromParent(),"destroy"in e){var t;null==(t=e.destroy)||t.call(e)}}},[e]),null}let h={className:"",assetsPath:"/",vertigoControls:!1};function v(t){let{children:n,className:e,assetsPath:o,vertigoControls:u}={...h,...t},d=(0,a.useMemo)(()=>new c.XW,[]);d.loader.setPath(o);let{ref:x}=(0,i.IZ)({debounce:!0},function*(t,n){yield d.initialize(t.firstElementChild),n.triggerRender(),Object.assign(window,{three:d})},[]);(0,i.C7)(function*(){if(u){let t=new l.n("object"==typeof u?u:{}).initialize(x.current).start();yield t.destroy,yield(0,s.xy)("three",n=>{t.update(d.camera,d.aspect,n.deltaTime)})}},[u]);let p={position:"absolute",inset:0};return(0,r.jsx)("div",{ref:x,className:e,style:p,children:(0,r.jsxs)(f.Provider,{value:d,children:[(0,r.jsx)("div",{style:p}),(0,r.jsx)("div",{style:p,className:"thru",children:d.initialized&&n})]})})}function m(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return(0,u.D)()&&(0,r.jsx)(v,{...n[0]})}},34011:(t,n,e)=>{"use strict";e.d(n,{k:()=>s});var r=e(49797),a=e(38921);let o={axis:"x",length:1,radialSegments:12,radius:.01,coneRatio:.1,radiusScale:1,vertexColor:!0,baseCap:"flat",color:"white",align:0},i=new r.Q1f;function l(t){let{axis:n,length:e,radius:l,radialSegments:c,coneRatio:s,radiusScale:u,vertexColor:f,baseCap:d,color:x,align:p}={...o,...t},h=l*u,v=e*s,m=new r.qFE(3*h,v,c),y=new r.Ho_(h,h,1,c,1,!0),w=e-v,g=e-.5*v;m.rotateZ(-Math.PI/2).translate(g,0,0),y.scale(1,w,1).rotateZ(-Math.PI/2).translate(.5*w,0,0);let b="none"===d?new r.LoY:"flat"===d?new r.tcD(h,c).rotateY(-Math.PI/2):new r.Gu$(h,c,3,0,2*Math.PI,0,.5*Math.PI).rotateZ(Math.PI/2).rotateX(Math.PI/2),M=(0,a.pP)([m,y,b]);switch(0!==p&&M.translate(-e*p,0,0),n){case"y":M.rotateZ(Math.PI/2);break;case"z":M.rotateY(-Math.PI/2)}if(f){let t=M.attributes.position.count,n=new r.THS(new Float32Array(3*t),3);M.setAttribute("color",n),i.set(x);for(let e=0;e<t;e++)n.setXYZ(e,i.r,i.g,i.b)}return M}r.LoY;let c={xColor:"#ff3333",yColor:"#33cc66",zColor:"#3366ff"};class s extends r.LoY{static get defaultOptions(){return{...c}}constructor(t){super();let{xColor:n,yColor:e,zColor:r,...o}={...c,...t},i=l({...o,axis:"x",color:n}),s=l({...o,axis:"y",color:e}),u=l({...o,axis:"z",color:r}),f=(0,a.pP)([i,s,u]);this.copy(f),f.dispose()}}},62517:function(t,n,e){var r,a,o;o=function(t,n,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={BlockMath:()=>d,InlineMath:()=>x};for(var o in a)Object.defineProperty(t,o,{enumerable:!0,get:a[o]});function i(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,e=new WeakMap;return(l=function(t){return t?e:n})(t)}n=function(t,n){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l(n);if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var i=a?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}(n),e=i(e),r=i(r);let c=(t,{displayMode:a})=>{let o=({children:e,errorColor:o,math:i,renderError:l})=>{let c=null!=i?i:e,{html:s,error:u}=(0,n.useMemo)(()=>{try{return{html:r.default.renderToString(c,{displayMode:a,errorColor:o,throwOnError:!!l}),error:void 0}}catch(t){if(t instanceof r.default.ParseError||t instanceof TypeError)return{error:t};throw t}},[c,o,l]);return u?l?l(u):n.default.createElement(t,{html:`${u.message}`}):n.default.createElement(t,{html:s})};return o.propTypes={children:e.default.string,errorColor:e.default.string,math:e.default.string,renderError:e.default.func},o},s={html:e.default.string.isRequired},u=({html:t})=>n.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:t}});u.propTypes=s;let f=({html:t})=>n.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:t}});f.propTypes=s;let d=c(u,{displayMode:!0}),x=c(f,{displayMode:!1})},"object"==typeof t.exports?o(n,e(67203),e(79228),e(62416)):(r=[n,e(67203),e(79228),e(62416)],void 0===(a=o.apply(n,r))||(t.exports=a))},65927:(t,n,e)=>{"use strict";e.d(n,{S:()=>r});let r="\n#ifndef GLSL_BASIC\n#define GLSL_BASIC\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nvec2 clamp01(vec2 x) {\n  return vec2(clamp01(x.x), clamp01(x.y));\n}\n\nvec3 clamp01(vec3 x) {\n  return vec3(clamp01(x.x), clamp01(x.y), clamp01(x.z));\n}\n\nvec4 clamp01(vec4 x) {\n  return vec4(clamp01(x.x), clamp01(x.y), clamp01(x.z), clamp01(x.w));\n}\n\n#endif\n"},66620:(t,n,e)=>{"use strict";e.d(n,{_:()=>o});var r=e(89868),a=e(44138);function o(t,n){var e=(0,a._)(t,n,"update");return(0,r._)(t,e)}},79105:(t,n,e)=>{"use strict";e.d(n,{K2:()=>i,KP:()=>a,Tj:()=>l,Ts:()=>o,Zu:()=>r});let r=0x7fffffff,a=123456,o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;if(Number.isNaN(t))throw Error("NaN is not a valid seed.");let n=t;if(10>Math.abs(n)&&(n*=1e6),n%=r,(n=n<0?n+r:n)>1)return n&r;if(0===n)return a;throw Error("Impossible. ".concat(n))},i=t=>t=Math.imul(t,48271)&r,l=t=>(t-1)/(r-1)},79228:(t,n,e)=>{t.exports=e(22936)()},86146:()=>{},88575:(t,n,e)=>{"use strict";e.d(n,{O0:()=>r.O0,XW:()=>r.XW});var r=e(9215)},92845:(t,n,e)=>{Promise.resolve().then(e.bind(e,32595))}},t=>{var n=n=>t(t.s=n);t.O(0,[9459,5611,7190,6564,4189,7962,9635,8921,7953,4512,7775,7436,146,6726,3445,9332,3414,9717,1763,9215,1319,6852,7358],()=>n(92845)),_N_E=t.O()}]);