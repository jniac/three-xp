(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4349],{1029:(n,t,e)=>{"use strict";e.d(t,{N:()=>r});let a={vecX:["float","vec2","vec3","vec4"]},r=(n,t)=>{let e=[],r=Array.isArray(n)?n:[n].map(n=>n in a?a[n]:n).flat();if("function"==typeof t)for(let n of r)e.push(t(n).replaceAll(/\bT\b/g,n));else for(let n of r)e.push(t.replaceAll(/\bT\b/g,n));return e.join("\n")}},3293:(n,t,e)=>{"use strict";e.d(t,{_:()=>s,w:()=>o});var a=e(49797),r=e(93432);let l=new a.kn4;function o(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return null===n?(t.elements.fill(0),t):(0,r.vl)(n,t)}let i=new a.Q1f;function s(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return"random"===n?(t.setHex(Math.floor(0x1000000*Math.random())),t):("string"==typeof n&&n.startsWith("#")&&(9===n.length&&(n=n.slice(0,7)),5===n.length&&(n=n.slice(0,4))),t.set(n))}},8144:(n,t,e)=>{"use strict";e.d(t,{H:()=>l});var a=e(65927),r=e(1029);let l="\n".concat(a.S,"\n\n#ifndef GLSL_UTILS\n#define GLSL_UTILS\n\nfloat sin01(float x) {\n  return 0.5 + 0.5 * sin(x * 6.283185307179586);\n}\n\nvec2 scaleAround(vec2 p, vec2 c, float s) {\n  return c + (p - c) / s;\n}\n\n// Same as mix, but clamped.\n").concat((0,r.N)("vecX","\n  T lerp(in T a, in T b, in float x) {\n    return mix(a, b, clamp01(x));\n  }\n"),"\n\nfloat inverseLerpUnclamped(in float a, in float b, float x) {\n  return (x - a) / (b - a);\n}\n\nfloat inverseLerp(in float a, in float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nfloat remap(in float x, in float a, in float b, in float c, in float d) {\n  return c + (d - c) * inverseLerp(a, b, x);\n}\n\n// Remap from [-1, 1] to [0, 1]\nfloat remap1101(in float x) {\n  return clamp01(0.5 + 0.5 * x);\n}\n\n").concat((0,r.N)("vecX","\n  T oneMinus(in T x) {\n    return 1.0 - x;\n  }\n"),"\n\n// Returns x^p, but handles negative x values correctly.\nfloat spow(in float x, in float p) {\n  return x >= 0.0 ? pow(x, p) : -pow(-x, p);\n}\n\nfloat threshold(in float x, in float thresholdValue) {\n  return x < thresholdValue ? 0. : 1.;\n}\n\nfloat threshold(in float x, in float thresholdValue, in float width) {\n  return width < 1e-9 \n    ? (x < thresholdValue ? 0. : 1.)\n    : clamp01((x - thresholdValue + width * .5) / width);\n}\n\nmat3 extractRotation(mat4 matrix) {\n  return mat3(matrix[0].xyz, matrix[1].xyz, matrix[2].xyz);\n}\n\nvec2 rotate(vec2 p, float a) {\n  float c = cos(a);\n  float s = sin(a);\n  float x = c * p.x + s * p.y;\n  float y = -s * p.x + c * p.y;\n  return vec2(x, y);\n}\n\nvec2 rotateAround(vec2 p, float a, vec2 c) {\n  return c + rotate(p - c, a);\n}\n\nvec2 rotateScaleAround(vec2 p, float a, float s, vec2 c) {\n  return c + rotate((p - c) / s, a);\n}\n\nfloat positiveModulo(float x) {\n  x = mod(x, 1.0);\n  return x < 0.0 ? x + 1.0 : x;\n}\n\n// Modulo that keeps the result in the range [0, modulo]\nfloat positiveModulo(float x, float modulo) {\n  x = mod(x, modulo);\n  return x < 0.0 ? x + modulo : x;\n}\n\n// Modulo that keeps the result in the range [-m/2, m/2]\nfloat middleModulo(float x, float modulo) {\n  x = mod(x, modulo);\n  return x < -modulo / 2.0 ? x + modulo : x > modulo / 2.0 ? x - modulo : x;\n}\n\n// Limit a value to a maximum that the function tends to reach when x -> ∞\n// https://www.desmos.com/calculator/0vewkbnscu\nfloat limited(float x, float maxValue) {\n  return x <= 0.0 ? x : maxValue * x / (maxValue + x);\n}\n\n// Symmetric version of limited\n// \n// Limit a value to a maximum that the function tends to reach when x -> ∞\n// and a minimum (-maximum) that the function tends to reach when x -> -∞\n// https://www.desmos.com/calculator/0vewkbnscu\nfloat slimited(float x, float maxValue) {\n  return x <= 0.0\n    ? -limited(-x, maxValue)\n    : limited(x, maxValue);\n}\n\n// https://www.desmos.com/calculator/0vewkbnscu\nfloat limited(float x, float minValue, float maxValue) {\n  float d = maxValue - minValue;\n  float xd = x - minValue;\n  return x <= minValue ? x : minValue + d * xd / (d + xd);\n}\n\n// Symmetric version of limited\nfloat slimited(float x, float minValue, float maxValue) {\n  return x <= 0.0\n    ? -limited(-x, maxValue, minValue)\n    : limited(x, minValue, maxValue);\n}\n\nfloat sqLength(in vec2 p) {\n  return p.x * p.x + p.y * p.y;\n}\n\nfloat sqLength(in vec3 p) {\n  return p.x * p.x + p.y * p.y + p.z * p.z;\n}\n\nfloat pcurve(float x, float a, float b) {\n  float k = pow(a + b, a + b) / (pow(a, a) * pow(b, b));\n  return k * pow(x, a) * pow(1.0 - x, b);\n}\n\nfloat hash(float p) {\n  return fract(sin(p * 12.9898) * 43758.5453);\n}\n\nfloat hash(vec2 p) {\n  return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat hash(vec3 p) {\n  return fract(sin(dot(p, vec3(12.9898, 78.233, 45.164))) * 43758.5453);\n}\n\nfloat hash(vec4 p) {\n  return fract(sin(dot(p, vec4(12.9898, 78.233, 45.164, 94.673))) * 43758.5453);\n}\n\nvec2 hash2(float p) {\n  return vec2(hash(p), hash(p + 1.0));\n}\n\nvec2 hash2(vec2 p) {\n  return vec2(hash(p.x), hash(p.y));\n}\n\nvec2 hash2(vec3 p) {\n  return vec2(hash(p.xy), hash(p.yz));\n}\n\nvec2 hash2(vec4 p) {\n  return vec2(hash(p.xyz), hash(p.yzw));\n}\n\nvec3 hash3(float p) {\n  return vec3(hash2(p),  hash(p + 2.0));\n}\n\nvec3 hash3(vec2 p) {\n  return vec3(hash2(p), hash(p));\n}\n\nvec3 hash3(vec3 p) {\n  return vec3(hash(p.x), hash(p.y), hash(p.z));\n}\n\nvec3 hash3(vec4 p) {\n  return vec3(hash(p.xy), hash(p.yz), hash(p.zw));\n}\n\nfloat hash_alt(float p) {\n  return fract(sin(p * 127.1) * 311.7);\n}\n\nfloat hash_alt(vec2 p) {\n  return fract(sin(dot(p, vec2(127.1, 311.7))) * 269.5);\n}\n\nfloat hash_alt(vec3 p) {\n  return fract(sin(dot(p, vec3(127.1, 311.7, 74.7))) * 269.5);\n}\n\nfloat hash_alt(vec4 p) {\n  return fract(sin(dot(p, vec4(127.1, 311.7, 74.7, 113.5))) * 269.5);\n}\n\n").concat((0,r.N)("vecX","\n  T min3(in T a, in T b, in T c) {\n    return min(min(a, b), c);\n  }\n"),"\n\n").concat((0,r.N)("vecX","\n  T min4(in T a, in T b, in T c, in T d) {\n    return min(min(a, b), min(c, d));\n  }\n"),"\n\n#endif // GLSL_UTILS\n")},72612:(n,t,e)=>{"use strict";function*a(n){let t=0,e={get i(){return t},get t(){return t/n},get p(){return t/(n-1)},get size(){return n},clone(){return{...this}}};for(t=0;t<n;t++)yield e}function r(n,t){let e=[];for(let r of a(n)){let n=r.clone();e.push(t?t(n):n)}return e}function*l(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];let a=0,r=0;2===t.length?(a=t[0],r=t[1]):Array.isArray(t[0])?(a=t[0][0],r=t[0][1]):(a=t[0].x,r=t[0].y);let l=0,o=0,i=0,s={get i(){return l},get x(){return o},get y(){return i},get tx(){return o/a},get ty(){return i/r},get px(){return o/(a-1)},get py(){return i/(r-1)},get sizeX(){return a},get sizeY(){return r},clone(){return{...this}}};for(i=0;i<r;i++)for(o=0;o<a;o++)yield s,l++}function o(){let n;for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];let r=0,o=0;"number"==typeof e[0]?(r=e[0],o=e[1],n=e[2]):(Array.isArray(e[0])?(r=e[0][0],o=e[0][1]):(r=e[0].x,o=e[0].y),n=e[1]);let i=[];for(let t of l(r,o)){let e=t.clone();i.push(n?n(e):e)}return i}function*i(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];let a=0,r=0,l=0;3===t.length?(a=t[0],r=t[1],l=t[2]):Array.isArray(t[0])?(a=t[0][0],r=t[0][1],l=t[0][2]):(a=t[0].x,r=t[0].y,l=t[0].z);let o=0,i=0,s=0,f=0,c={get i(){return o},get x(){return i},get y(){return s},get z(){return f},get tx(){return i/a},get ty(){return s/r},get tz(){return f/l},get px(){return i/(a-1)},get py(){return s/(r-1)},get pz(){return f/(l-1)},clone(){return{...this}}};for(f=0;f<l;f++)for(s=0;s<r;s++)for(i=0;i<a;i++)yield c,o++}function s(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];let a=[];for(let n of i(...t))a.push(n.clone());return a}e.r(t),e.d(t,{loop:()=>a,loop2:()=>l,loop2Array:()=>o,loop3:()=>i,loop3Array:()=>s,loopArray:()=>r})},77186:(n,t,e)=>{Promise.resolve().then(e.bind(e,84059))},84059:(n,t,e)=>{"use strict";e.d(t,{Main:()=>_});var a=e(70691),r=e(84306),l=e(49797),o=e(99332),i=e(93432);let s=new l.mrM({color:"white",transparent:!0,depthTest:!1}),f={circle:(()=>{let n=new l.LoY,t=Array.from({length:81},(n,t)=>{let e=t/80*Math.PI*2;return new l.Pq0(Math.cos(e),Math.sin(e),0)});return n.setFromPoints(t),n})(),box2:(()=>{let n=new l.LoY,t=[new l.Pq0(-.5,-.5,0),new l.Pq0(.5,-.5,0),new l.Pq0(.5,.5,0),new l.Pq0(-.5,.5,0),new l.Pq0(-.5,-.5,0)];return n.setFromPoints(t),n})()};class c extends l.YJl{setupUniforms(n,t){let{value:e}=n,{value:a}=t;e.copy(this.matrixWorld),e.invert()}init(n){this.props=n,this.renderOrder=1}setup(){}set(n){Object.assign(this.props,n),this.setup()}}let u={radius:2,falloff:1};class p extends c{get radius(){return this.props.radius}set radius(n){this.props.radius=n,this.setup()}get falloff(){return this.props.falloff}set falloff(n){this.props.falloff=n,this.setup()}setupUniforms(n,t){super.setupUniforms(n,t);let{radius:e,falloff:a}=this.props;t.value.set(e,a,0,0)}setup(){let{circle0:n,circle1:t}=this.parts,{radius:e,falloff:a}=this.props;n.scale.setScalar(e),t.scale.setScalar(e+a)}constructor(n){super(),this.parts={circle0:new l.N1A(f.circle,s),circle1:new l.N1A(f.circle,s)},this.init({...u,...n}),this.add(this.parts.circle0),this.add(this.parts.circle1),this.setup()}}p.glsl="\n    struct CircleFalloff {\n      mat4 matrix;\n      float radius;\n      float falloff;\n    };\n    float falloff(CircleFalloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float d = length(p);\n      return 1.0 - (d - falloff.radius) / falloff.falloff;\n    }\n  ";let h={width:1,height:1,falloff:1};class x extends c{setupUniforms(n,t){super.setupUniforms(n,t);let{width:e,height:a,falloff:r}=this.props;t.value.set(e,a,r,0)}setup(){let{box0:n,box1:t}=this.parts,{width:e,height:a,falloff:r}=this.props;n.scale.set(e,a,1),t.scale.set(e+2*r,a+2*r,1)}constructor(n){super(),this.parts={box0:new l.N1A(f.box2,s),box1:new l.N1A(f.box2,s)},this.init({...h,...n}),this.add(this.parts.box0),this.add(this.parts.box1),this.setup()}}x.glsl="\n    struct ManhattanBox2Falloff {\n      mat4 matrix;\n      float width;\n      float height;\n      float falloff;\n    };\n    float falloff(ManhattanBox2Falloff falloff, vec3 p) {\n      p = (falloff.matrix * vec4(p, 1.0)).xyz;\n      float x = abs(p.x) - falloff.width * 0.5;\n      float y = abs(p.y) - falloff.height * 0.5;\n      return 1.0 - max(x, y) / falloff.falloff;\n    }\n  ";var d=e(7147),m=e(3293),v=e(79911),y=e(71895),w=e(22899),g=e(8144),b=e(72612),A=e(79285);function V(n){let{r:t,g:e,b:a}=new l.Q1f(n);return"vec3(".concat(t.toFixed(3),", ").concat(e.toFixed(3),", ").concat(a.toFixed(3),")")}let M={grid:[16,16]},T=new l.bdM(1,1,1,1),z=new l.V9B({side:l.$EB,transparent:!0}),P={uRadiusScalar:new l.nc$(.9),uCircleMat:new l.nc$(new l.kn4().identity()),uCircleProps:new l.nc$(new l.IUQ(1,2,0,0)),uBox0Mat:new l.nc$(new l.kn4().identity()),uBox0Props:new l.nc$(new l.IUQ(1,1,0,0))};z.onBeforeCompile=n=>d.bI.with(n).defines({USE_UV:""}).uniforms(P).varying({vCenter:"vec3",vWorldPosition2:"vec3"}).vertex.mainAfterAll("\n    vWorldPosition2 = (modelMatrix * instanceMatrix * vec4(transformed, 1.0)).xyz;\n    vCenter = (modelMatrix * instanceMatrix[3]).xyz;\n  ").fragment.top(g.H,y.D,w.I).fragment.top(p.glsl,x.glsl).fragment.after("color_fragment","\n    CircleFalloff circle = CircleFalloff(uCircleMat, uCircleProps.x, uCircleProps.y);\n    ManhattanBox2Falloff box = ManhattanBox2Falloff(uBox0Mat, uBox0Props.x, uBox0Props.y, uBox0Props.z);\n    float d = 0.0;\n    d += clamp01(falloff(box, vWorldPosition2));\n    d += clamp01(falloff(circle, vWorldPosition2));\n    diffuseColor.rgb = mix(".concat(V("#c2e1ff"),", ").concat(V("#d80773"),", easeInOut3(clamp01(d)));\n  ")).fragment.after("alphamap_fragment","\n    float scalar = 1.0 / uRadiusScalar / mix(1.0, 0.25, easeInOut3(clamp01(d)));\n    float alpha = smoothstep(1.0, 0.99, length(vUv - 0.5) * scalar / 0.5);\n\n    if (alpha < 0.01) discard;\n\n    diffuseColor.a *= alpha;\n  ");class C extends l.ZLX{onTick(n){for(let n of Object.values(this.falloffs))n.visible=this.falloffsAreVisible;let{box0:t,circle:e}=this.falloffs;e.falloff=(0,A.lerp)(.1,4,n.sin01Time({frequency:.15})),e.radius=(0,A.lerp)(1,5,n.sin01Time({frequency:.1,phase:.5})),e.setupUniforms(P.uCircleMat,P.uCircleProps),t.rotation.z+=.1*n.deltaTime,t.set({width:8,falloff:(0,A.lerp)(.5,6,n.sin01Time({frequency:.15}))}),t.setupUniforms(P.uBox0Mat,P.uBox0Props)}constructor(n){var t;let{x:e,y:a}=(0,i.wX)(null!=(t=null==n?void 0:n.grid)?t:M.grid);for(let t of(super(T,z,e*a),this.internal={grid:new l.I9Y},this.falloffsAreVisible=!0,this.falloffs={circle:(0,v.mj)(new p,{parent:this,position:[-3,-2,0]}),box0:(0,v.mj)(new x({}),{parent:this,position:[3,2,0]})},this.props={...M,...n},(0,b.loop2)(e,a)))this.setMatrixAt(t.i,(0,m.w)({x:t.x-e/2,y:t.y-a/2}))}}function*L(n){n.scene.background=new l.Q1f("#1c54e0"),n.ticker.set({activeDuration:30}),n.useOrbitControls();let t=new C;n.scene.add(t),yield()=>t.removeFromParent(),yield(0,o.s)(document.body,{onTap(){t.falloffsAreVisible=!t.falloffsAreVisible}})}function k(){return(0,r.yk)(L),null}function _(){return(0,a.jsx)("div",{className:"absolute-through",children:(0,a.jsx)(r.uB,{children:(0,a.jsx)(k,{})})})}}},n=>{var t=t=>n(n.s=t);n.O(0,[2193,5611,7190,7962,9635,8921,4512,7775,7436,7706,146,6726,3445,9332,3414,2143,7558,3042,1319,6852,7358],()=>t(77186)),_N_E=n.O()}]);