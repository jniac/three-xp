(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3097,6647,7112,7289,7840],{1029:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});let i={vecX:["float","vec2","vec3","vec4"]},r=(e,t)=>{let n=[],r=Array.isArray(e)?e:[e].map(e=>e in i?i[e]:e).flat();if("function"==typeof t)for(let e of r)n.push(t(e).replaceAll(/\bT\b/g,e));else for(let e of r)n.push(t.replaceAll(/\bT\b/g,e));return n.join("\n")}},2765:(e,t,n)=>{"use strict";n.d(t,{Client:()=>M});var i=n(70691),r=n(1253),o=n(67203),s=n(49797),a=n(30158),l=n(55551),c=n(57165),d=n(72598),u=n(49617),h=n(7587),p=n(31107),x=n(48083),f=n(56647);class v extends f.R{constructor(e,{color:t="#ffff00"}={}){super(void 0,new s.mrM({color:t})),this.position.copy(e.focus),this.rotation.copy(e.rotation);let{x:n,y:i}=e.size;1!==e.zoom&&this.rectangle([-n/2,-i/2,n,i]),n/=e.zoom,i/=e.zoom,this.rectangle([-n/2,-i/2,n,i]).plus([0,0],.5).draw();let r=new s.eaF(new s.bdM(1,.25),new s.V9B({color:t,alphaMap:function(){let e;return null!=e?e:e=(()=>{let e=document.createElement("canvas"),t=e.getContext("2d");e.width=1024,e.height=256,t.fillStyle="white",t.font="200px Fira Code",t.textBaseline="top",t.fillText("Vertigo",20,20);let n=new s.gPd(e);return n.needsUpdate=!0,n})()}(),transparent:!0,side:s.$EB}));r.position.set(-n/2+.5+.1,i/2-.125-.1,0),this.add(r)}}var m=n(9723),y=n(87381),g=n(29717),w=n(17099),b=n(80425),C=n(36508),P=n(25809),j=n(82091),z=n(16008);class S extends s.YJl{onTick(e){this.parts.rings.rotation.y+=.123*e.deltaTime,this.parts.rings.rotation.x+=.435*e.deltaTime}constructor(...e){super(...e),this.internal={ringGeometry:new s.O3Y(3,.01,16,128)},this.parts=(()=>{let e=(0,y.mj)(new s.YJl,{parent:this}),t=(0,y.mj)(new s.eaF(this.internal.ringGeometry,new m.Y({color:"#eb1640",luminosity:.8})),{parent:e,name:"ring-x",rotationY:"90deg"}),n=(0,y.mj)(new s.eaF(this.internal.ringGeometry,new m.Y({color:"#00ff9d",luminosity:.8})),{parent:e,name:"ring-y",rotationX:"90deg"}),i=(0,y.mj)(new s.eaF(this.internal.ringGeometry,new m.Y({color:"#3b80e7",luminosity:.8})),{parent:e,name:"ring-z"});return{rings:e,ringX:t,ringY:n,ringZ:i,torusKnot:(0,y.mj)(new s.eaF(new s.UPV(3,.1,512,64),new m.Y({luminosity:.8})),{parent:this,name:"torus-knot"})}})()}}class A extends s.Z58{constructor(...e){super(...e),this.parts={sky:(0,y.mj)(new j.N({color:"#027bff"}),{parent:this}),thing:(0,y.mj)(new S,{parent:this}),gridZ:(0,y.mj)(new P.P({step:.5}),{parent:this}),widget:(0,y.mj)(new z.XI,{parent:this})}}}class T extends s.BKk{constructor(){super({uniforms:{uResolution:{value:new s.IUQ},uRect:{value:new s.IUQ},map:{value:null}},vertexShader:"\n        uniform vec4 uResolution;\n        uniform vec4 uRect;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position.xy = ((position.xy * 2.0 + 1.0) * uRect.zw + uRect.xy * 2.0) / uResolution.xy - 1.0; \n          gl_Position.z = 0.0;\n          gl_Position.w = 1.0;\n          // gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform sampler2D map;\n        varying vec2 vUv;\n        void main() {\n          gl_FragColor = texture2D(map, vUv);\n        }\n      ",transparent:!0,depthWrite:!1,depthTest:!1})}}class I extends s.eaF{*initialize(e,t){let{rt:n,scene:i,camera:r,vertigo:o,widget:a}=this.internal,l=this.material.uniforms.uResolution.value,c=this.material.uniforms.uRect.value,u=new s.I9Y,h=new s.I9Y(-1,-1),p=!1;yield(0,d.s)(e.domElement,{onDown:()=>{p=!0},onUp:()=>{p=!1},onChange:e=>{h.x=(e.localPosition.x-c.x)/c.z*2-1,h.y=-(e.localPosition.y/c.w*2-1)},onTap:()=>{switch(a.getPressed()){case z.KJ.BOX:t.actions.togglePerspective();break;case z.KJ.POSITIVE_X:t.actions.positiveXAlign();break;case z.KJ.NEGATIVE_X:t.actions.negativeXAlign();break;case z.KJ.POSITIVE_Y:t.actions.positiveYAlign();break;case z.KJ.NEGATIVE_Y:t.actions.negativeYAlign();break;case z.KJ.POSITIVE_Z:t.actions.positiveZAlign();break;case z.KJ.NEGATIVE_Z:t.actions.negativeZAlign()}}}),yield(0,C.xy)("three",{order:1},()=>{e.getSize(u),l.set(u.x,u.y,e.getPixelRatio(),0),c.x=u.x-c.z,c.y=u.y-c.w,o.rotation.copy(t.vertigo.rotation),o.perspective=t.vertigo.perspective,o.apply(r,1),a.widgetUpdate(h,p,r),h.x>=-1&&h.x<=1&&h.y>=-1&&h.y<=1&&(null!==a.getHovered()?document.body.style.cursor="pointer":document.body.style.removeProperty("cursor")),e.setRenderTarget(n),e.setClearColor("white",0),e.render(i,r),e.setRenderTarget(null)})}constructor({planeSize:e=120}={}){let t=new T;super(new s.bdM(1,1),t),this.vertigoControls=null;let n=2*e,i=new s.nWS(n,n,{format:s.GWd,colorSpace:"srgb"}),r=new s.Z58,o=new s.ubm,a=new p.B({perspective:1,size:[2.8,2.8]}),l=new z.XI;r.add(l),this.internal={rt:i,scene:r,camera:o,vertigo:a,widget:l},this.renderOrder=1,this.frustumCulled=!1,t.uniforms.map.value=this.internal.rt.texture,t.uniforms.uRect.value.set(10,10,e,e),this.position.x=2}}var k=n(56652),_=n.n(k);function B(e){let{vertigo:t}=e,{ref:n}=(0,h.C7)(function*(e){yield(0,C.xy)("three",{timeInterval:1/6},()=>{e.querySelector("pre").textContent=r.Ay.dump(t.toDeclaration(),{flowLevel:1}).replace(/-?\d+\.\d+/g,e=>(0,b.ZV)(Number.parseFloat(e),{maxDigits:6}))})},[]);return(0,i.jsx)("div",{ref:n,className:"self-start p-4 border border-white rounded text-xs ".concat(_().BgBlur),style:{minWidth:"24rem"},children:(0,i.jsx)("pre",{})})}class O extends s.YJl{onTick(e){for(let t of this.parts.cubes){let{angularVelocity:n}=t.userData;t.rotation.x+=n.x*e.deltaTime,t.rotation.y+=n.y*e.deltaTime,t.rotation.z+=n.z*e.deltaTime}}constructor(...e){super(...e),this.parts={knot:(0,y.mj)(new s.eaF(new s.UPV(1,.5,256,32),new m.Y),{parent:this}),knot2:(0,y.mj)(new s.eaF(new s.UPV(1.37,.05,256,32),new m.Y({color:z.Bn.xColor})),{parent:this}),cubes:Array.from({length:20},(e,t)=>{let n=w.c.between(-3,3),i=w.c.between(-1.5,1.5),r=w.c.between(-3,3),o=["".concat(w.c.between(0,360),"deg"),"".concat(w.c.between(0,360),"deg"),"".concat(w.c.between(0,360),"deg")],a=w.c.between(.5,1),c=(0,y.mj)(new s.eaF(new l.j(1),new m.Y({color:w.c.pick(Object.values(z.Bn))})),{parent:this,x:n,y:i,z:r,rotation:o,scaleScalar:a});return c.userData={angularVelocity:new s.O9p(w.c.between(-1,1),w.c.between(-1,1),w.c.between(-1,1))},c})}}}function M(){let e=(0,o.useMemo)(()=>{let e=new p.B({size:[4.2,4.2]}),t=new p.B({perspective:0,focus:[-10,3,0],size:[8,4],rotation:[0,"45deg",0]}),n=t.clone().set({perspective:1,size:t.size.clone().multiplyScalar(1.2)}),i=t.clone().set({perspective:1,size:t.size.clone().multiplyScalar(1.5),rotation:[0,"-15deg","-25deg"]}),r=new p.B({perspective:1,focus:[-4.5,1.8,10],size:[12,9],rotation:["-3deg","1deg","12deg"]}),o=new p.B({perspective:1,focus:[-4.5,1.8,14],size:r.size.clone().multiplyScalar(1.5),rotation:["-3deg","1deg","0deg"]}),s={main:e,a0:t,a1:n,a2:i,back:r,back2:o,zoom:new p.B({focus:[6,-4,0],size:[4,4],zoom:.25}),revert:new p.B({rotation:["12.6deg","145.3deg","0deg"],focus:[-5,-.5,3.6],size:[12,12],fov:"60deg"})},a=new x.n(s.main);return{vertigos:s,vertigoControls:a}},[]),{ref:t}=(0,h.C7)(function*(t){let{vertigoControls:n}=e,i=new a.WebGLRenderer({antialias:!0});i.outputColorSpace="srgb",t.prepend(i.domElement);let r=1;yield(0,u.G)(t,{onSize:()=>{i.setPixelRatio(window.devicePixelRatio),i.setSize(t.clientWidth,t.clientHeight),r=t.clientWidth/t.clientHeight}});let o=new s.ubm(75,1,.1,1e3);o.position.z=5,yield n.start(i.domElement);let l=new A,h=C.Rv.get("three");(0,c.O)(h.requestActivation);let p=new I;l.add(p),yield*p.initialize(i,n);let x=new s.I9Y,f=!1;for(let t of(yield h.onTick(e=>{e.propagate(l),l.parts.widget.widgetUpdate(x,f,o),null!==l.parts.widget.getHovered()?document.body.style.cursor="pointer":document.body.style.removeProperty("cursor"),n.update(o,r),i.render(l,o)}),yield(0,d.s)(i.domElement,{onChange:e=>{let{x:t,y:n}=e.relativeLocalPosition;x.set(2*t-1,-((2*n-1)*1))},onDown:()=>{f=!0},onUp:()=>{f=!1},onTap:()=>{let e=l.parts.widget.getPressed();switch(null!==e&&n.actions.focus([0,0,0]),e){case z.KJ.BOX:n.actions.togglePerspective();break;case z.KJ.POSITIVE_X:n.actions.positiveXAlign();break;case z.KJ.NEGATIVE_X:n.actions.negativeXAlign();break;case z.KJ.POSITIVE_Y:n.actions.positiveYAlign();break;case z.KJ.NEGATIVE_Y:n.actions.negativeYAlign();break;case z.KJ.POSITIVE_Z:n.actions.positiveZAlign();break;case z.KJ.NEGATIVE_Z:n.actions.negativeZAlign()}}}),Object.values(e.vertigos)))(0,y.mj)(new v(t),l);let m=new O;l.add(m),m.position.copy(e.vertigos.a0.focus),m.rotation.copy(e.vertigos.a0.rotation),yield()=>{i.dispose(),t.removeChild(i.domElement)}},[]),{vertigoControls:n}=e;return(0,i.jsx)("div",{ref:t,className:"".concat(_().VertigoWidgetClient," layer thru"),children:(0,i.jsxs)("div",{className:"layer thru p-4 flex flex-col gap-4 items-start",children:[(0,i.jsx)("h1",{className:"text-2xl self-start",children:"Vertigo-widget"}),(0,i.jsxs)("div",{className:"".concat(_().BgBlur," thru flex flex-col gap-1 items-start p-1 border border-white rounded"),style:{width:"min(200px, 30%)"},children:[(0,i.jsx)("h2",{children:"Actions:"}),(0,i.jsxs)("div",{className:"thru flex flex-row flex-wrap items-start gap-1",children:[(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{g.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:0}})},children:"ortho"}),(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{g.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:1}})},children:"pers:1"}),(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{g.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:1.5}})},children:"pers:1.5"}),(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{g.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{zoom:1}})},children:"zoom:1"}),(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{g.X5.tween({target:n.vertigo,duration:.75,ease:"inOut2",to:{focus:new s.Pq0}})},children:"focus:(0,0,0)"})]})]}),(0,i.jsxs)("div",{className:"".concat(_().BgBlur," thru flex flex-col gap-1 items-start p-1 border border-white rounded"),style:{width:"min(200px, 30%)"},children:[(0,i.jsx)("h2",{children:"Presets:"}),(0,i.jsx)("div",{className:"flex flex-row gap-1 flex-wrap",children:Object.entries(e.vertigos).map(t=>{let[n,r]=t;return(0,i.jsx)("button",{className:"".concat(_().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{let t=e.vertigoControls.vertigo.clone();g.X5.during(1).onUpdate(n=>{let{progress:i}=n,o=g.X5.ease("inOut3")(i);e.vertigoControls.vertigo.lerpVertigos(t,r,o)})},children:n},n)})})]}),(0,i.jsx)("div",{className:"Space flex-1 pointer-events-none"}),(0,i.jsx)(B,{vertigo:n.vertigo})]})})}},4941:(e,t,n)=>{"use strict";n.d(t,{_5:()=>r.ol,YN:()=>r.o8,cz:()=>o,kY:()=>r.kY});var i=n(37197),r=n(40074);let o={transition:r.kY,bump:i.$p}},6688:(e,t,n)=>{"use strict";n.d(t,{Client:()=>l});var i=n(70691),r=n(7587),o=n(42206),s=n(54167),a=n.n(s);function l(){let{ref:e}=(0,r.C7)(function*(e){let t=new o.$x;t.parse(e.dataset.layout),t.sizeX.set(e.clientWidth,o.LN.Absolute),t.sizeY.set(e.clientHeight,o.LN.Absolute),t.alignChildrenX=0,t.alignChildrenY=0;let n=[{element:e,space:t}];for(;n.length>0;){let e=n.shift(),t=[...e.element.children].filter(e=>!!e.dataset.layout);for(let i=0;i<t.length;i++){let r=t[i],s=new o.$x;s.parse(r.dataset.layout),s.userData.element=r,e.space.add(s),n.push({element:r,space:s})}}for(let e of(t.computeLayout(),t.allDescendants({includeSelf:!1}))){let t=e.userData.element,n=e.rect;t.style.position="absolute",t.style.left="".concat(n.x,"px"),t.style.top="".concat(n.y,"px"),t.style.width="".concat(n.width,"px"),t.style.height="".concat(n.height,"px")}Object.assign(window,{root:t})},[]);return(0,i.jsxs)("div",{ref:e,className:"".concat(a().FlexibleLayout," layer"),"data-layout":"vertical",children:[(0,i.jsxs)("div",{"data-layout":"horizontal size(1sh)",children:[(0,i.jsx)("div",{"data-layout":"size(200,100%)",children:(0,i.jsx)("div",{className:a().Container,children:(0,i.jsx)("h1",{children:"Panel - 0"})})}),(0,i.jsx)("div",{"data-layout":"size(1sh)"}),(0,i.jsx)("div",{"data-layout":"size(320, 100%)",children:(0,i.jsx)("div",{className:a().Container,children:(0,i.jsx)("h1",{children:"Panel - 1"})})})]}),(0,i.jsx)("div",{"data-layout":"size(1sh, 200)",children:(0,i.jsxs)("div",{className:a().Container,children:[(0,i.jsx)("h1",{children:"Timeline or asset panel"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"Todo:"}),(0,i.jsx)("li",{children:"Create a draggable UI!"})]})]})})]})}},11281:e=>{e.exports={Client:"client_Client__Q3vhD"}},13982:(e,t,n)=>{"use strict";n.d(t,{Client:()=>A});var i=n(70691),r=n(84303),o=n(25432),s=n(95736),a=n(48083),l=n(6697),c=n(87381),d=n(36508),u=n(33855),h=n(28737),p=n(49797),x=n(7717),f=n(25809),v=n(56647),m=n(9723),y=n(82091),g=n(72612),w=n(17099);function b(e,t,n,i,r){let o=i-e,s=r-t,a=Math.sqrt(o*o+s*s);return[e+o/a*n,t+s/a*n]}class C extends p.YJl{constructor(...e){super(...e),this.parts=(()=>{(0,c.mj)(new p.eaF(new p.UPV(10,.4,512,64),new m.Y),this),(0,c.mj)(new f.P,{parent:this,rotationX:"90deg"});let e=(0,c.mj)(new y.N,this),t=new p.Pq0,n=new p.Pq0;{let e=new x.AA(16);for(let{x:i,y:r,z:o}of(0,g.loop3)(16,16,16)){t.set(i,r,o);let[s,a]=b(8,8,16/3,i,o);n.set(s,16/6,a);let l=t.distanceTo(n)<16/6;e.getVoxelState(i,r,o).setUint8(0,+!!l)}(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new x.AA(16);for(let{x:i,y:r,z:o}of(0,g.loop3)(16,16,16)){t.set(i,r,o);let[s,a]=b(8,8,8,i,o);n.set(s,4,a);let l=4>t.distanceTo(n);e.getVoxelState(i,r,o).setUint8(0,+!!l)}(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new x.AA(16);for(let{x:n,y:i,z:r}of(0,g.loop3)(16,16,16)){let o=15>t.set(n,i,r).length();e.getVoxelState(n,i,r).setUint8(0,+!!o)}(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#55ff96"})),{parent:this,x:-32})}{let e=new x.AA(new p.Pq0(12,24,4),1);for(let{x:t,y:n,z:i}of(0,g.loop3)(e.size)){let r=.5>Math.random();e.getVoxelState(t,n,i).setUint8(0,+!!r)}(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}{let e=new x.AA(16);for(let{x:t,y:n,z:i}of(0,g.loop3)(16,16,16)){let r=(0===t||0===n||0===i||15===t||15===n||15===i)&&w.c.chance(.66);e.getVoxelState(t,n,i).setUint8(0,+!!r)}console.log(e.computeBounds()),(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#9900ff"})),{parent:this,x:-16,z:-32})}{let e=new x.AA(16),t=new p.Pq0;for(let{x:n,y:i,z:r}of(0,g.loop3)(16,16,16)){t.set(n-8,i-8,r-8);let o=t.lengthSq()-16;w.c.chance(1-.05*o)&&e.getVoxelState(n,i,r).setUint8(0,1)}let n=(0,c.mj)(new p.eaF((0,x.Cx)(e.voxelFaces()),new m.Y({color:"#00ddff"})),{parent:this,x:-16,z:0});(0,c.mj)(new v.R,{parent:n}).box({box3:e.computeBounds(),asIntBox3:!0}).draw()}return{sky:e}})()}}var P=n(42824),j=n.n(P);function z(){return(0,u.yk)(function*(e){(0,h.O)({three:e});let t=new a.n({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),d.Rv.get("three").set({minActiveDuration:60}),yield(0,d.xy)("three",n=>{let{aspect:i,camera:r}=e;t.update(r,i,n.deltaTime)}),yield(0,s.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new o.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:l.O0.PostProcessing})},[]),null}function S(){return(0,u.dB)("main",function*(e){(0,c.mj)(new C,e)},[]),null}function A(){return(0,i.jsx)("div",{children:(0,i.jsxs)(u.uB,{children:[(0,i.jsx)(z,{}),(0,i.jsx)(S,{}),(0,i.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,i.jsx)(r.oz,{className:j().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},14137:(e,t,n)=>{"use strict";n.d(t,{Client:()=>m});var i=n(70691),r=n(67203),o=n(49797),s=n(48083),a=n(97540),l=n(9723),c=n(87381),d=n(72612),u=n(36508),h=n(33855),p=n(28737),x=n(11281),f=n.n(x);function v(){let e=(0,r.useRef)(null);return(0,h.dB)("setup",function*(t,n){(0,c.mj)(new o.eaF(new o.WBB(20,10),new l.Y({wireframe:!0})),t);let i=(0,c.mj)(new o.eaF(new o.bdM,new l.Y({side:o.$EB})),t),r=(0,c.mj)(new o.YJl,{parent:t,rotation:["-70deg",0,0]}),h=Array.from({length:16},()=>(0,c.mj)(new o.eaF(new o.bdM(.5,.5),new l.Y({side:o.$EB})),{parent:r})),x=new s.n().initialize(n.renderer.domElement).start();Object.assign(window,{controls:x});let{camera:f}=n,v=u.Rv.get("three");if((0,p.O)({camera:f,controls:x,ticker:v}),e.current){let t=e.current,r=e.current.firstElementChild,o=[...e.current.querySelectorAll(".SmallPlane ")];i.updateWorldMatrix(!0,!1),f.updateMatrixWorld(!0),r.style.position="absolute",r.style.left="50%",r.style.top="50%",yield(0,u.xy)("three",e=>{x.update(n.camera,n.aspect,e.deltaTime),i.updateWorldMatrix(!0,!1),f.updateMatrixWorld(!0),t.style.perspective=(0,a.s5)(f,n.renderer.domElement),r.style.transform=(0,a.wZ)(f,i,n.renderer.domElement,100,0,0,!1),r.style.zIndex=(0,a.AF)(f,i);let s=(0,a.hD)(f,i);for(let t of(r.querySelector("span + span").textContent="(".concat(s?"front":"back",")"),r.style.color=s?"black":"#00f",(0,d.loop)(16))){let i=o[t.i],r=h[t.i];r.updateWorldMatrix(!0,!1),i.style.position="absolute",i.style.left="50%",i.style.top="50%",i.style.transform=(0,a.wZ)(f,r,n.renderer.domElement,100,0,0,!1),i.style.zIndex=(0,a.AF)(f,r);let s=2*Math.PI*t.t,l=2*Math.cos(s),c=2*Math.sin(s);r.position.set(l,c,0);let d=e.time+t.t*Math.PI;r.rotation.set(2*d,d,0)}i.rotation.y+=.5*e.deltaTime,i.rotation.x+=.1*e.deltaTime})}},[]),(0,i.jsxs)("div",{ref:e,className:"layer thru",children:[(0,i.jsxs)("div",{className:"w-[100px] h-[100px] border-solid border-[8px] bg-white border-[#fc3] text-black font-black flex flex-col justify-center items-center hover:border-[#00f]",style:{lineHeight:".5em"},children:[(0,i.jsx)("span",{className:"text-3xl",children:"CSS!"}),(0,i.jsx)("span",{children:"(front)"})]}),Array.from({length:16},(e,t)=>(0,i.jsx)("div",{className:"SmallPlane w-[50px] h-[50px] border-solid border-[2px] bg-white border-[#fc3] text-black font-black flex flex-col justify-center items-center hover:border-[#00f]",style:{lineHeight:".5em"},children:t},t))]})}function m(){return(0,i.jsx)("div",{className:"layer thru ".concat(f().Client),children:(0,i.jsx)(h.uB,{children:(0,i.jsx)(v,{})})})}},14203:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var i=n(1029);let r="\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20201014 (stegu)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; \n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat permute(float x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nfloat taylorInvSqrt(float r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\n\n\n\n\n// 2D:\n\nfloat snoise(vec2 v) {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n		+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n// 3D: \n\nfloat snoise(vec3 v)\n{ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  // Permutations\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 105.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\n\n// 4D:\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n						\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v) {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n  // First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n  // Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n  // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.57 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.57 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 60.1 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n\n\n\n// addons:\n// Fractal noise, based on Stefan Gustavson's Simplex noise\n".concat((0,i.N)(["vec2","vec3","vec4"],"\n  float fnoise(T p, int octaves, float persistence) {\n    float total = 0.0;           // Final noise value\n    float amplitude = 1.0;       // Initial amplitude\n    float frequency = 1.0;       // Initial frequency\n    float maxValue = 0.0;        // Used for normalization\n\n    for (int i = 0; i < octaves; i++) {\n      total += snoise(p * frequency) * amplitude;\n\n      maxValue += amplitude;   // Keep track of max amplitude\n      amplitude *= persistence; // Reduce amplitude for next octave\n      frequency *= 2.0;        // Increase frequency for next octave\n    }\n\n    // Normalize the result to stay within the range [0, 1]\n    return total / maxValue;\n  }\n"),"\n\nfloat snoiseFast4D(vec4 p) {\n  const float SCALAR = 0.01;\n  float a = SCALAR * dot(p.xy * 0.3, vec2(-127.1, 311.7));\n  float b = SCALAR * dot(p.zw * 0.8, vec2(269.5, -183.3));\n  float c = SCALAR * dot(p.wx * 6.0, vec2(23.14069, 2.665157));\n  float d = SCALAR * dot(p.zy * 1.3, vec2(-12.9898, 78.233));\n  return (snoise(vec2(a, b)) + snoise(vec2(d, c))) * 0.5;\n}\n\nfloat fnoiseFast4D(vec4 p, int octaves, float persistence) {\n  float total = 0.0;           // Final noise value\n  float amplitude = 1.0;       // Initial amplitude\n  float frequency = 1.0;       // Initial frequency\n  float maxValue = 0.0;        // Used for normalization\n\n  for (int i = 0; i < octaves; i++) {\n    total += snoiseFast4D(p * frequency) * amplitude;\n\n    maxValue += amplitude;   // Keep track of max amplitude\n    amplitude *= persistence; // Reduce amplitude for next octave\n    frequency *= 2.0;        // Increase frequency for next octave\n  }\n\n  // Normalize the result to stay within the range [0, 1]\n  return total / maxValue;\n}\n")},14274:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var i=n(17953),r=n(81074),o=n(49797),s=n(57165),a=n(37027);class l extends a.${setSize(e){let{width:t,height:n,pixelRatio:i}={...this,...e};if(t===this.width&&n===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=i;let{renderer:r,perspectiveCamera:o,orthographicCamera:s}=this;r.setSize(t,n),r.setPixelRatio(i);let a=t/n;return o.aspect=a,o.updateProjectionMatrix(),s.left=-a,s.right=a,s.top=1,s.bottom=-1,s.updateProjectionMatrix(),this}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let n=this.scenePass.getTextureNode("output");this.postProcessing.outputNode=n,new ResizeObserver(()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})}).observe(e);let{domElement:i}=this.renderer;return i.style.display="block",i.style.width="100%",i.style.height="100%",e.appendChild(i),this.setSize({width:i.clientWidth,height:i.clientHeight,pixelRatio:window.devicePixelRatio}),this.internal.cancelTick=this.ticker.onTick(()=>{this.renderFrame()}).destroy,this.internal.cancelRequestActivation=(0,s.O)(document.body,this.ticker.requestActivation).destroy,this.internal.cancelPointer=this.pointer.initialize(this.renderer.domElement,t,this.camera,this.ticker),this.domContainer=e,this.domElement=i,this}renderFrame(){let{scene:e,postProcessing:t,pointer:n}=this;n.updateStart(e),e.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&t.renderAsync(),n.updateEnd()}constructor(){super(a.s.WebGPU),this.renderer=new r.uV1({antialias:!0}),this.perspectiveCamera=new o.ubm,this.orthographicCamera=new o.qUd,this.camera=this.perspectiveCamera,this.postProcessing=new r.io7(this.renderer),this.scenePass=(0,i.IXH)(this.scene,this.perspectiveCamera),this.internal={observer:null,cancelRequestActivation:null,cancelTick:null,cancelPointer:null},this.initialized=!1,this.destroyed=!1,this.destroy=()=>{var e,t,n,i,r,o,s;if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.renderer.dispose(),null==(e=this.internal.observer)||e.disconnect(),null==(t=(n=this.internal).cancelTick)||t.call(n),null==(i=(r=this.internal).cancelRequestActivation)||i.call(r),null==(o=(s=this.internal).cancelPointer)||o.call(s)},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),this.pointer.updatePosition(this.camera,{x:0,y:0},this.renderer.domElement.getBoundingClientRect())}}},17112:(e,t,n)=>{"use strict";n.d(t,{O0:()=>i,XW:()=>C});var i,r=n(49797),o=n(99613),s=n(50373),a=n(64416),l=n(27491),c=n(27146),d=n(71591),u=n(28334);function h(e){return e.isRenderPass}!function(e){e[e.Render=0]="Render",e[e.PostProcessing=1e3]="PostProcessing",e[e.GizmoRender=2e3]="GizmoRender",e[e.Outline=3e3]="Outline",e[e.Output=4e3]="Output",e[e.Antialiasing=5e3]="Antialiasing"}(i||(i={}));class p{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let n=e[1],i=t[1];return n.type!==i.type?n.type-i.type:n.insertOrder-i.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,n]of this.passMap)n.type===e&&(yield[t,n])}addPass(e){let{type:t=i.Render,insertOrder:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n){var r,o,s;n=(null!=(s=null==(o=[...this.getPassesByType(t)].at(-1))||null==(r=o[1])?void 0:r.insertOrder)?s:-1)+1}return this.passMap.set(e,{type:t,insertOrder:n}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,n){this.composer.setSize(e,t),this.composer.setPixelRatio(n),this.basicPasses.fxaa.uniforms.resolution.value.set(1/n/e,1/n/t),this.basicPasses.smaa.setSize(e*n,t*n)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let n of this.composer.passes)h(n)&&n.scene===t&&(n.scene=e)}render(e){for(let t of this.composer.passes)h(t)&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:n}=this;for(let[r,o]of t.passes.entries()){let t=n.get(o);t?e.push("- ".concat(r,": ").concat(i[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(o.constructor.name)):e.push("- ".concat(r,": NO METADATA for ").concat(o.constructor.name))}return e.join("\n")}constructor(e,t,n,h){let p=new o.s(e),x=new Map,f=new l.A(t,h);f.clearAlpha=0,x.set(f,{type:i.Render,insertOrder:0}),p.addPass(f);let v=new l.A(n,h);x.set(v,{type:i.GizmoRender,insertOrder:0}),v.clear=!1,v.clearDepth=!1,p.addPass(v);let m=new s.G(new r.I9Y,t,h);x.set(m,{type:i.GizmoRender,insertOrder:0}),p.addPass(m);let y=new a.X;x.set(y,{type:i.Output,insertOrder:0}),p.addPass(y);let g=new c.p(u.o);x.set(g,{type:i.Antialiasing,insertOrder:0}),p.addPass(g);let w=new d.I;w.enabled=!1,x.set(w,{type:i.Antialiasing,insertOrder:0}),p.addPass(w),this.composer=p,this.basicPasses={mainRender:f,gizmoRender:v,outline:m,output:y,fxaa:g,smaa:w},this.passMap=x}}var x=n(30158),f=n(17223),v=n(57165),m=n(39787),y=n(96273),g=n(17475),w=n(87381),b=n(37027);class C extends b.${static current(){return this.instances[this.instances.length-1]}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:n=null,target:i=null,element:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof r&&(r=document.querySelector(r)),null!=(e=this.internal).orbitControls||(e.orbitControls=new f.N(this.camera,r)),r&&r!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new f.N(this.camera,r)),n&&(0,y.jj)(n,this.internal.orbitControls.object.position),i&&(0,y.jj)(i,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebGLContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:n}=this,{domElement:i}=this.renderer;e.appendChild(i);let r=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},o=new ResizeObserver(r);return o.observe(e),n(()=>{o.disconnect()}),r(),n(this.pointer.initialize(i,t,this.camera,this.ticker)),n((0,v.O)(this.ticker.requestActivation),this.ticker.onTick(this.renderFrame)),n(()=>{var e;null==(e=this.internal.orbitControls)||e.dispose()}),this.domContainer=e,this.domElement=i,this}setSize(e){let{width:t,height:n,pixelRatio:i}={...this,...e};if(t===this.width&&n===this.height&&i===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=i;let{renderer:r,perspectiveCamera:o,pipeline:s}=this;return r.setSize(t,n),r.setPixelRatio(i),s.setSize(t,n,i),o.aspect=t/n,o.updateProjectionMatrix(),this}*findAll(e,t){let n="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e;yield*(0,w.wV)(this.scene,n,t)}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){super(b.s.WebGL),this.renderer=new x.WebGLRenderer,this.perspectiveCamera=new r.ubm,this.orthographicCamera=new r.qUd,this.camera=this.perspectiveCamera,this.gizmoScene=new r.Z58,this.pipeline=new p(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.internal={size:new r.I9Y,fullSize:new r.I9Y,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=g.o.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed)return void console.warn("ThreeWebGLContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,m.z)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.renderFrame=e=>{var t;let{scene:n,pipeline:i,pointer:r}=this;null==(t=this.internal.orbitControls)||t.update(e.deltaTime),r.updateStart(n),n.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&i.render(e),r.updateEnd()},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),C.instances.push(this)}}C.instances=[]},17475:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var i=n(49797),r=n(9954),o=n(17775),s=n(5832);function a(e){let t,n,i=new Promise((i,r)=>{t=()=>{i(e)},n=e=>{r(e)}});return Object.assign(e,{then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),resolve:t,reject:n}),e}let l=["gltf","glb"],c=["png","jpg","jpeg","hdr","exr"];class d{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class u{static current(){var e;return null!=(e=this.instances[this.instances.length-1])?e:new u}static get(e){var t;return null!=(t=this.instances.find(t=>t.name===e))?t:new u({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,n)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)})}async loadRgbe(e){let t=a(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=a(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let n=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(n)){let e=this.textureCache.get(n);return null==t||t(e),e}let i=a(this.loaders.texture.load(n,e=>{this.textureCache.set(n,i),null==t||t(e),i.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(n))}));return i}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(c.includes(t))return new Promise((t,n)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=u.nextId++,this.loaders={gltf:new o.B,texture:new i.Tap,rgbeLoader:new s.Y,exrLoader:new r.H},this.path="",this._onAfterLoad=new d,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),u.instances.push(this)}}u.nextId=0,u.instances=[]},18140:(e,t,n)=>{"use strict";n.d(t,{Client:()=>z});var i=n(70691),r=n(30158),o=n(49797),s=n(48083),a=n(64857),l=n(9723),c=n(87381),d=n(72612),u=n(79285),h=n(4941),p=n(17099),x=n(36508);(0,n(28737).O)({...r,THREE:r,textCloud:v,textRing:m,textGrid:function(e){let t=(0,c.mj)(new a.w({textCount:100,textSize:1,lineLength:12}),e);for(let e of(0,d.loop2)(10,10)){let n="".concat(e.i,"\n(").concat(e.x,", ").concat(e.y,")");t.setTextAt(e.i,n,{x:(e.px-.5)*20,y:(e.py-.5)*20})}return t},TextHelper:a.w});let f=[new o.Q1f("#ff4080"),new o.Q1f("#ffdd66"),new o.Q1f("#99ccff")];function v(e){let t=(0,c.mj)(new a.w({textSize:5,lineLength:50,lineCount:2,textCount:3e5}),e),n=new o.Pq0,i=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"];for(let e=0;e<3e5;e++){let r=h.cz.transition.inOut(p.c.random(),1/4,.9),o=(0,u.lerp)(70,190,r)+20*p.c.boxMuller()[0],{x:s,y:a,z:l}=p.c.unitVector(n).multiplyScalar(o);t.setTextAt(e,"".concat(p.c.pick(i)).concat(p.c.pick(i)).concat(p.c.pick(i),"\n").concat(e),{x:s,y:a,z:l,color:p.c.pick(f)})}return t}function m(e){let t=(0,c.mj)(new a.w({textCount:3,lineLength:32,lineCount:4}),e);return t.setTextAt(0," Hello \n World \n !!! ",{y:0,size:1.5,textColor:f[0],textOpacity:0,backgroundColor:f[0],backgroundOpacity:1}),t.setTextAt(1,"\xc0 l’\xe2ge m\xfbr,\no\xf9 l’\xe9t\xe9 s’ach\xe8ve,\nil \xe9tait d\xe9j\xe0 pr\xeat.\nNo\xebl, s\xec! Se\xf1or",{y:-1.2,size:.6,textColor:f[1]}),t}async function*y(e){yield()=>e.scene.clear(),p.c.reset();let t=new o.Q1f("#09121b"),n=new o.cRK(t,.05);e.scene.fog=n,e.scene.background=t;let i=new s.n({size:7}).initialize(e.renderer.domElement).start();yield(0,x.xy)("three",t=>{i.update(e.camera,e.aspect,t.deltaTime),n.density=(0,u.remap)(i.vertigo.zoom,1,0,.05,0)});let r=0,d=m(e.scene);r+=d.count,document.body.append(d.atlas.canvas),d.atlas.canvas.style.position="fixed",d.atlas.canvas.style.bottom="10px",d.atlas.canvas.style.right="10px",d.atlas.canvas.style.width="".concat(Math.round(.2*document.body.clientWidth),"px"),d.atlas.canvas.onclick=()=>d.atlas.canvas.remove(),yield()=>d.atlas.canvas.remove(),r+=v(e.scene).count,r+=function(e){let{array:t,count:n}=(0,c.mj)(new o.eaF(new o.WBB(200,8),new o.V9B({wireframe:!0})),e).geometry.attributes.position,i=n/3,r=(0,c.mj)(new a.w({textCount:i,textSize:14}),e),s=new o.Pq0,l=new o.Pq0;for(let e=0;e<i;e++){let{x:n,y:i,z:o}=s.fromArray(t,9*e).add(l.fromArray(t,9*e+3)).add(l.fromArray(t,9*e+6)).divideScalar(3);r.setTextAt(e,"".concat(e),{x:n,y:i,z:o,color:"#fff",backgroundOpacity:1,textOpacity:0})}return r}(e.scene).count,d.setTextAt(2,"text count: ".concat(r),{y:1,size:.6,color:"#4080ff"}),(0,c.mj)(new o.eaF(new o.O3Y(3,.1,12,128),new l.Y({color:f[2]})),e.scene)}var g=n(88493),w=n(89294),b=n.n(w),C=n(90048),P=n.n(C);function j(){return(0,g.yk)(y,[]),null}function z(){return(0,i.jsx)("div",{className:"layer thru ".concat(P().Client),children:(0,i.jsxs)(g.uB,{children:[(0,i.jsx)(j,{}),(0,i.jsxs)("div",{className:"layer thru flex flex-col p-4 gap-4",children:[(0,i.jsx)("h1",{className:"text-2xl",children:"Text Helper"}),(0,i.jsx)("p",{className:"w-[400px]",children:"TextHelper is a utility for rendering text in 3D space. A lot of text, up to millions of characters, can be rendered with a single draw call. It is useful for visualizing large amounts of text data."}),(0,i.jsx)(b(),{href:"text-helper/hunger",children:"\uD83D\uDC49 Knut Hamsun — Hunger — Demo"})]})]})})}},18653:(e,t,n)=>{"use strict";n.d(t,{Client:()=>A});var i=n(70691),r=n(84303),o=n(25432),s=n(95736),a=n(48083),l=n(6697),c=n(87381),d=n(36508),u=n(33855),h=n(28737),p=n(49797),x=n(7717),f=n(25809),v=n(9723),m=n(82091),y=n(72612),g=n(17099),w=n(56647);let b=new p.tBo;class C extends p.YJl{createAllChunkMeshes(e){for(let{superChunkIndex:t,chunkIndex:n,chunk:i}of e.enumerateChunks()){let r=g.c.pick(["#ffdd55","#55ddff","#dd55ff","#55ffdd","#ff55dd","#ddff55","#ff5555"]),o=(0,x.Cx)(i.voxelFaces()),s=new v.Y({color:r}),{x:a,y:l,z:d}=e.metrics.fromIndexes(t,n,0);(0,c.mj)(new p.eaF(o,s),{parent:this,x:a,y:l,z:d})}let t=e.computeVoxelBounds();(0,c.mj)(new w.R,this).box({box3:t,asIntBox3:!0}).box({box3:e.computeChunkBounds(),asIntBox3:!0,color:"#ff0000"}).draw();{let t=e.computeVoxelBounds(),n=(0,x.Cx)(e.chunkVoxelFaces(t)),i=new v.Y({color:"#ffffff"});(0,c.mj)(new p.eaF(n,i),{parent:this,x:0,y:0,z:-32})}}createOneUniqueMesh(e){}constructor(...e){super(...e),this.parts=(()=>{g.c.reset();let e=(0,c.mj)(new p.eaF(new p.UPV(10,3,32,6),new v.Y({wireframe:!0,side:p.$EB})),this);e.visible=!1,(0,c.mj)(new f.P({size:24}),{parent:this,rotationX:"90deg"});let t=(0,c.mj)(new m.N,this),n=new x.HK;(0,h.O)({world:n});let i=new DataView(new ArrayBuffer(n.voxelStateByteSize));i.setUint8(0,1);let r=new p.Pq0;for(let{x:t,y:o,z:s}of(0,y.loop3)(24,24,24))t-=12,o-=12,s-=12,r.set(t+.5,o+.5,s+.5),b.set(r,new p.Pq0(1,0,0)),b.intersectObject(e,!0).length%2==1&&n.setVoxelState(t,o,s,i);return this.createAllChunkMeshes(n),{sky:t}})()}}var P=n(42824),j=n.n(P);function z(){return(0,u.yk)(function*(e){(0,h.O)({three:e});let t=new a.n({size:50,perspective:1,rotation:["-20deg","-45deg",0]});yield t.start(e.renderer.domElement),d.Rv.get("three").set({minActiveDuration:60}),yield(0,d.xy)("three",n=>{let{aspect:i,camera:r}=e;t.update(r,i,n.deltaTime)}),yield(0,s.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new o.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:l.O0.PostProcessing})},[]),null}function S(){return(0,u.dB)("main",function*(e){(0,c.mj)(new C,e)},[]),null}function A(){return(0,i.jsx)("div",{children:(0,i.jsxs)(u.uB,{children:[(0,i.jsx)(z,{}),(0,i.jsx)(S,{}),(0,i.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,i.jsx)(r.oz,{className:j().Markdown,children:"# World\n\nWorld handles chunks under the hood.\n"})})]})})}},20657:(e,t,n)=>{"use strict";n.d(t,{Client:()=>g});var i=n(70691),r=n(49797),o=n(48083),s=n(9723),a=n(87381),l=n(36508),c=n(67203),d=n(7587),u=n(6697);n(90927);let h=(0,c.createContext)(null),p={className:"",assetsPath:"/"};function x(e){let{children:t,className:n,assetsPath:r}={...p,...e},o=(0,c.useMemo)(()=>new u.XW,[]);o.loader.setPath(r);let{ref:s}=(0,d.IZ)({debounce:!0},function*(e,t){yield o.initialize(e),t.triggerRender(),Object.assign(window,{three:o})},[]);return(0,i.jsx)("div",{ref:s,className:n,style:{position:"absolute",inset:0},children:(0,i.jsx)(h.Provider,{value:o,children:o.initialized&&t})})}function f(e){return function(){let[e,t]=(0,c.useState)(!1);return(0,c.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,i.jsx)(x,{...e})}var v=n(78592),m=n.n(v);function y(){return function(e,t){let n=(0,c.useContext)(h);(0,d.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always")}(function*(e){let t=(0,a.mj)(new r.eaF(new r.WBB,new s.Y),e.scene);yield()=>t.removeFromParent();let n=new o.n;n.initialize(e.renderer.domElement).start(),yield(0,l.xy)("three",t=>{n.update(e.camera,e.aspect,t.deltaTime)})},[]),null}function g(){return(0,i.jsx)("div",{className:"layer thru ".concat(m().Client),children:(0,i.jsx)(f,{children:(0,i.jsx)(y,{})})})}},22899:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var i=n(65927);let r=["linear"];for(let e=1;e<=10;e++)r.push("easeIn".concat(e)),r.push("easeOut".concat(e)),r.push("easeInOut".concat(e)),r.push("easeOutIn".concat(e));let o="\n#ifndef GLSL_EASING\n#define GLSL_EASING\n\n".concat(i.S,"\n\nfloat easePow1(float x) {\n  return x;\n}\n\nfloat easePow2(float x) {\n  return x * x;\n}\n\nfloat easePow3(float x) {\n  return x * x * x;\n}\n\nfloat easePow4(float x) {\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow5(float x) {\n  float x0 = x;\n  x *= x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow6(float x) {\n  x *= x * x;\n  return x *= x;\n}\n\nfloat easePow7(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x;\n  return x0 * x;\n}\n\nfloat easePow8(float x) {\n  x *= x;\n  x *= x;\n  return x *= x;\n}\n\nfloat easePow9(float x) {\n  x *= x * x;\n  return x *= x * x;\n}\n\nfloat easePow10(float x) {\n  float x0 = x;\n  x *= x * x;\n  x *= x * x;\n  return x0 * x;\n}\n\nfloat linear(float x) {\n  return clamp01(x);\n}\n\n").concat(Array.from({length:10},(e,t)=>{let n=t+1;return"\n\nfloat easeIn".concat(n," (float x) {\n  return easePow").concat(n,"(clamp01(x));\n}\nfloat easeOut").concat(n," (float x) {\n  return 1.0 - easePow").concat(n,"(clamp01(1.0 - x));\n}\nfloat easeInOut").concat(n," (float x) {\n  return x < 0.5 \n    ? 0.5 * easePow").concat(n,"(2.0 * x) \n    : 1.0 - 0.5 * easePow").concat(n,"(2.0 * (1.0 - x));\n}\nfloat easeOutIn").concat(n," (float x) {\n  return x < 0.5\n    ? 0.5 * (1.0 - easePow").concat(n,"(1.0 - x * 2.0))\n    : 1.0 - 0.5 * (1.0 - easePow").concat(n,"(2.0 * x - 1.0));\n}\n\n").trim()}).join("\n\n"),"\n\n\n// https://www.desmos.com/calculator/mqou4lf9zc?lang=fr\nfloat easeInOut(float x, float p, float i) {\n  return  x <= 0.0 ? 0.0 :\n          x >= 1.0 ? 1.0 :\n          x <= i ? 1.0 / pow(i, p - 1.0) * pow(x, p) :\n          1.0 - 1.0 / pow(1.0 - i, p - 1.0) * pow(1.0 - x, p);\n}\n\n// https://www.desmos.com/calculator/nrjlezusdv\nfloat easeInThenOut(float x, float p) {\n  return 1.0 - pow(abs(2.0 * x - 1.0), p);\n}\n\n#endif\n")},25809:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var i=n(49797),r=n(96273);let o={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class s extends i.DXC{set(e){let{color:t,opacity:n,size:s,step:a,frame:l,plane:c}={...o,...e},d=(0,r.wX)(s),u=(0,r.wX)(null!=a?a:d),h=[],p=(e,t)=>h.push(new i.Pq0(e,t,0));l&&(p(-d.x/2,d.y/2),p(d.x/2,d.y/2),p(d.x/2,d.y/2),p(d.x/2,-d.y/2),p(d.x/2,-d.y/2),p(-d.x/2,-d.y/2),p(-d.x/2,-d.y/2),p(-d.x/2,d.y/2));let x=Math.ceil(-d.x/2/u.x)*u.x;x===-d.x/2&&(x+=u.x);do p(x,-d.y/2),p(x,d.y/2),x+=u.x;while(x<d.x/2);let f=Math.ceil(-d.y/2/u.y)*u.y;f===-d.y/2&&(f+=u.y);do p(-d.x/2,f),p(d.x/2,f),f+=u.y;while(f<d.y/2);switch(this.geometry.setFromPoints(h),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:o)}}},28737:(e,t,n)=>{"use strict";n.d(t,{Leak:()=>c,O:()=>l});var i={};n.r(i),n.d(i,{distribute:()=>o.mn,every:()=>o.Si,findMaxBy:()=>o.vj,pairwise:()=>o.Ju,recordBy:()=>o.VY,some:()=>o.zN,split:()=>o.mn,uniqueBy:()=>o.pD});var r=n(30158),o=n(43107),s=n(85795),a=n(17099);function l(e){Object.assign(window,{...r,...s,...i,...e,PRNG:a.c})}function c(e){return l(e),null}},35484:(e,t,n)=>{"use strict";n.d(t,{Client:()=>P});var i=n(70691),r=n(49797),o=n(53097),s=n(66066),a=n(15940),l=n(72598),c=n(50926),d=n(87381),u=n(22899),h=n(14203),p=new WeakSet,x=new WeakSet,f=new WeakSet,v=new WeakSet;class m extends r.YJl{*onInitialize(){yield(0,l.s)(document.body,{onDown:e=>{this.pointerState.down=!0,this.pointerState.shift=e.event.shiftKey},onUp:()=>{this.pointerState.down=!1}})}onTick(e){let{down:t,shift:n}=this.pointerState;this.uTime.value+=e.deltaTime*(t?n?.1:10:1),this.uTime2.value+=!t*e.deltaTime}constructor(){super(),(0,a._)(this,p),(0,a._)(this,x),(0,a._)(this,f),(0,a._)(this,v),this.debugHelper=(0,d.mj)(new c.u,this),this.uTime={value:0},this.uTime2={value:0},this.pointerState={down:!1,shift:!1},(0,s._)(this,x,g).call(this),(0,s._)(this,f,w).call(this),(0,s._)(this,v,b).call(this),(0,d.mj)(this,{position:[0,4,0]})}}function y(e,t){this.debugHelper.text(e,t,{size:.25,textColor:"white",backgroundColor:"black"})}function g(){let e=new r.BKk({uniforms:{uTime:this.uTime,uTime2:this.uTime2},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        ".concat(h.O,"\n        varying vec2 vUv;\n        uniform float uTime, uTime2;\n        void main() {\n          vec3 p = vec3(vUv * 10.0, uTime * 0.1) * 0.5;\n          vec3 warp = vec3(\n            fnoise(p * 0.1, 2, 0.5), \n            fnoise(p * 0.1 + 100.0, 2, 0.5), \n            fnoise(p * 0.1 - 230.1, 2, 0.5));\n          p += warp * 5.2;\n          p *= 0.5;\n          float noise = fnoise(p, 4, 0.5);\n          vec3 color = \n            mod(uTime2 * 0.5, 2.0) < 1.0\n              ? vec3(0.5 + 0.5 * noise)\n              : vec3(mod((0.5 + 0.5 * noise) * 5.0, 1.0));\n          gl_FragColor = vec4(color, 1.0);\n        }\n      ")});(0,d.mj)(new r.eaF(new r.bdM(2,2),e),{parent:this,position:[0,0,0]}),(0,s._)(this,p,y).call(this,[0,0,.666],"warp in noise3D")}function w(){let e=new r.BKk({uniforms:{uTime:this.uTime,uTime2:this.uTime2},vertexShader:"\n        varying vec2 vUv;\n        varying vec3 vWorldPosition;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n        }\n      ",fragmentShader:"\n        ".concat(h.O,"\n        ").concat(u.I,"\n\n        varying vec2 vUv;\n        varying vec3 vWorldPosition;\n        uniform float uTime, uTime2;\n\n        float remap1101(in float x) {\n          return (x + 1.0) * 0.5;\n        }\n\n        float noiseA() {\n          vec4 p = vec4(vWorldPosition * 0.5, uTime * 0.1);\n          return easeInOut(remap1101(fnoise(p, 8, 0.5)), 4.0, 0.666);\n        }\n\n        float noiseB() {\n          vec4 p = vec4(vWorldPosition * 0.5 + 100.0, uTime * 0.01);\n          return mod(remap1101(fnoise(p, 8, 0.5)) * 10.0, 1.0);\n        }\n\n        void main() {\n          float noise = mod(uTime2 * 0.5, 2.0) < 1.0\n            ? noiseA()\n            : noiseB();\n          vec3 color = vec3(noise);\n          gl_FragColor = vec4(color, 1.0);\n        }\n      ")});(0,d.mj)(new r.eaF(new r.UPV(.5,.3,256,64),e),{parent:this,position:[0,2,0]}),(0,s._)(this,p,y).call(this,[0,2,.666],"noise4D")}function b(){let e=new r.BKk({uniforms:{uTime:this.uTime,uTime2:this.uTime2},vertexShader:"\n        varying vec2 vUv;\n        varying vec3 vWorldPosition;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n        }\n      ",fragmentShader:"\n        ".concat(h.O,"\n        ").concat(u.I,"\n\n        varying vec2 vUv;\n        varying vec3 vWorldPosition;\n        uniform float uTime, uTime2;\n\n        float remap1101(in float x) {\n          return (x + 1.0) * 0.5;\n        }\n\n        float noiseA() {\n          vec4 p = vec4(vWorldPosition * 0.5, uTime * 0.1);\n          return easeInOut(remap1101(fnoiseFast4D(p, 8, 0.5)), 4.0, 0.666);\n        }\n\n        float noiseB() {\n          vec4 p = vec4(vWorldPosition * 0.5 + 100.0, uTime * 0.01);\n          return mod(remap1101(fnoiseFast4D(p, 8, 0.5)) * 10.0, 1.0);\n        }\n\n        void main() {\n          float noise = mod(uTime2 * 0.5, 2.0) < 1.0\n            ? noiseA()\n            : noiseB();\n          vec3 color = vec3(noise);\n          gl_FragColor = vec4(color, 1.0);\n        }\n      ")});(0,d.mj)(new r.eaF(new r.UPV(.5,.3,256,64),e),{parent:this,position:[2,0,0]}),(0,s._)(this,p,y).call(this,[2,0,.666],"snoiseFast4D\n(hash. 4D into noise2D)")}class C extends r.YJl{*onInitialize(e){e.scene.background=new r.Q1f("#555")}}function P(){return(0,i.jsx)("div",{className:"layer thru",children:(0,i.jsxs)(o.uB,{vertigoControls:{size:7,focus:[0,0,0]},children:[(0,i.jsx)(o.q,{value:C}),(0,i.jsx)(o.q,{value:m})]})})}},37821:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var i=n(67203);function r(){let[e,t]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{t(!0)},[]),e}},42537:(e,t,n)=>{"use strict";n.d(t,{Client:()=>A});var i,r=n(70691),o=n(67203),s=n(95509),a=n(37722),l=n(30158),c=n(72598),d=n(7587),u=n(33999),h=n(6726),p=n(14277),x=["title","titleId"];function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(null,arguments)}let v=function(e){var t=e.title,n=e.titleId,r=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,x);return o.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16","aria-labelledby":n},r),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25 4.25v-2.5h-9.5v9.5h2.5m.5-6.5v9.5h9.5v-9.5z"})))};var m=n(70261),y=n.n(m);function g(e){let{className:t,children:n=(0,r.jsx)(v,{})}=e;return(0,r.jsx)("button",{className:"".concat(y().IconButton," ").concat(t),...e,children:n})}var w=n(69965),b=n.n(w);function C(e){let t=(0,o.useRef)(null);return(0,r.jsxs)("div",{ref:t,className:b().Copyable,children:[(0,r.jsx)("div",{children:e.children}),(0,r.jsx)("div",{className:"".concat(b().Overlay," layer thru p-2"),children:(0,r.jsx)(g,{onClick:()=>{let e=t.current.firstChild.textContent;navigator.clipboard.writeText(e)},children:(0,r.jsx)(v,{})})})]})}var P=n(54956),j=n.n(P);let z=["vertexShader","fragmentShader"];function S(){let e=function(){let[e,t,n]=window.location.hash.slice(1).split(",");return void 0!==e&&e in l.ShaderLib||(e="basic"),void 0!==t&&z.includes(t)||(t=z[0]),void 0!==n&&(!n||n in l.ShaderChunk)||(n=null),{libName:e,shaderProgram:t,chunkName:n}}(),[t,n]=(0,o.useState)(e.libName),[i,p]=(0,o.useState)(e.shaderProgram),[[x,f],m]=(0,o.useState)([e.chunkName,new h.M_]),[y,w]=(0,o.useState)(!1);window.location.hash=[t,i,x].filter(e=>!!e).join(",");let{ref:b}=(0,d.C7)(function*(e){for(let{spans:t,chunkName:n}of[...e.querySelectorAll("span")].filter(e=>"include"===e.textContent).map(e=>{let t=e.nextElementSibling,n=t.nextElementSibling,i=n.textContent.slice(1,-1);return{spans:[e.previousElementSibling,e,t,n],chunkName:i}})){let e=e=>{for(let n of(e.stopPropagation(),t))n.classList.add(j().Hover)},i=e=>{for(let n of(e.stopPropagation(),t))n.classList.remove(j().Hover)},r=e=>{e.stopPropagation();let i=h.M_.from(t[0].getBoundingClientRect()).union(h.M_.from(t[t.length-1].getBoundingClientRect()));window.requestAnimationFrame(()=>{m([n,i])})};for(let n of t)n.classList.add(j().Include),n.addEventListener("pointerenter",e),n.addEventListener("pointerleave",i),n.addEventListener("click",r)}yield(0,c.s)(e,{onTap:t=>{let n=e.querySelector(".".concat(j().OverlayContentWrapper));n&&!1===n.contains(t.orignalDownEvent.target)&&m([null,new h.M_])}})},[t,i]),P=l.ShaderLib[t][i];y&&(P=P.replace(/#include <(.*)>/g,(e,t)=>{let n=l.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n})),console.log({chunkName:x});let S=0===f.area?f:f.clone().applyPadding([2,6],"grow");return(0,r.jsxs)("div",{ref:b,className:(0,u.S)(j().ShaderXplr,"absolute-through p-4 flex flex-col gap-4"),children:[(0,r.jsx)("h1",{children:"ShaderXplr"}),(0,r.jsxs)("div",{className:(0,u.S)(j().Base,null!==x&&j().Dim),style:{background:a.A.hljs.background},children:[(0,r.jsxs)("div",{className:j().Selectors,children:[(0,r.jsx)("select",{name:"shaderlib",id:"shaderlib",onChange:e=>n(e.target.value),children:Object.keys(l.ShaderLib).map(e=>(0,r.jsx)("option",{children:e},e))}),(0,r.jsx)("select",{name:"shaderprogram",id:"shaderprogram",onChange:e=>p(e.target.value),children:z.map(e=>(0,r.jsx)("option",{children:e},e))}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-3 px-2 bg-[#fff1] rounded-[.25em]",children:[(0,r.jsx)("label",{htmlFor:"showFinalProgram",children:"Show final program"}),(0,r.jsx)("input",{type:"checkbox",id:"showFinalProgram",checked:y,onChange:e=>w(e.target.checked)})]})]}),(0,r.jsx)("div",{className:j().BaseContentWrapper,children:(0,r.jsx)(s.A,{language:"cpp",style:a.A,children:P})})]}),(0,r.jsxs)("div",{className:"absolute-through",children:[(0,r.jsx)("div",{className:j().IncludeHighlight,style:{top:"".concat(S.top,"px"),left:"".concat(S.left,"px"),width:"".concat(S.width,"px"),height:"".concat(S.height,"px")}}),x&&(0,r.jsxs)("div",{className:j().Overlay,children:[(0,r.jsx)("div",{style:{height:"".concat(Math.max(f.top,110),"px"),pointerEvents:"none"}}),(0,r.jsxs)("div",{className:j().OverlayContentWrapper,style:{background:a.A.hljs.background},children:[(0,r.jsxs)("div",{className:j().TitleBar,children:[(0,r.jsx)("h1",{children:x}),(0,r.jsx)(g,{onClick:()=>{navigator.clipboard.writeText(x)},children:(0,r.jsx)(v,{})})]}),(0,r.jsx)(C,{children:(0,r.jsx)(s.A,{language:"cpp",style:a.A,children:l.ShaderChunk[x]})})]})]})]})]})}function A(){return(0,p.D)()&&(0,r.jsx)(S,{})}},42824:e=>{e.exports={Markdown:"md_Markdown__RP0EZ"}},53097:(e,t,n)=>{"use strict";n.d(t,{q:()=>w,uB:()=>P,dB:()=>u,yk:()=>c,Fw:()=>d});var i=n(67203),r=n(49797),o=n(7587),s=n(37027),a=n(87381);let l=(0,i.createContext)(null);function c(e,t){let n=(0,i.useContext)(l);return(0,o.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}function d(e,t){let n=c(async function*(t,n){if(t.type===s.s.WebGL&&e){let i=e(t,n);if(i&&"function"==typeof i.next)for(;;){let{value:e,done:t}=await i.next();if(t)break;yield e}}},t);return n.type===s.s.WebGL?n:null}function u(e,t,n){let o=(0,i.useMemo)(()=>new r.YJl,[]);return o.name=e,c(async function*(e,n){if(e.scene.add(o),yield()=>{o.clear(),o.removeFromParent()},t){let i=t(o,e,n);if(i&&"function"==typeof i.next)do{let{value:e,done:t}=await i.next();if(t)break;yield e}while(n.mounted)}},n),o}var h=n(70691),p=n(30158),x=n(57165),f=n(37821),v=n(48083),m=n(17112),y=n(14274),g=n(67235);function w(e){return Array.isArray(null==e?void 0:e.value)?(0,h.jsx)(h.Fragment,{children:e.value.map((t,n)=>(0,h.jsx)(w,{...e,value:t},n))}):(c(async function*(t){let{value:n,hidden:i}=e;if(!n)return;let r="function"==typeof n?new n:n;for(let n of((0,a.mj)(r,{parent:t.scene,...e.transform}),i&&(r.visible=!1),(0,a.$z)(r,{includeSelf:!0})))if("onInitialize"in n){let e=n.onInitialize(t);if(e&&"function"==typeof e.next)for(;;){let{value:t,done:n}=await e.next();if(n)break;yield t}}yield()=>{for(let t of(r.removeFromParent(),(0,a.$z)(r,{includeSelf:!0})))if("onDestroy"in t){var e;null==(e=t.onDestroy)||e.call(t)}}},"always"),null)}let b={type:void 0,webgl:void 0,webgpu:void 0,className:"",assetsPath:"/",vertigoControls:!1,minActiveDuration:30};function C(e){var t;let n={...b,...e},{children:r,className:s,vertigoControls:a}=n,c=null!=(t=n.type)?t:n.webgpu?"webgpu":"webgl",d=(0,i.useRef)(void 0);d.current&&d.current!==c&&console.warn('ThreeProvider: the prop "type" is not intended to change after the component is mounted.'),d.current=c;let u=(0,i.useMemo)(()=>"webgl"===c?new m.XW:new y.K,[c]);u.ticker.set({minActiveDuration:n.minActiveDuration});let{ref:f}=(0,o.IZ)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild,document.body),t.triggerRender(),Object.assign(window,{three:u,THREE:p})},[]);(0,o.C7)(function*(){if(yield g.Q.on("THREE",e=>{e.setPayload(u)}),yield(0,x.O)(u.ticker.requestActivation),a){var e,t;let n="object"==typeof a?a:{},i=new v.n(n).initialize(f.current);Object.assign(i.inputConfig,n.inputConfig),i.parsePanInputs(null!=(e=n.panInput)?e:""),i.parseOrbitInputs(null!=(t=n.orbitInput)?t:""),n.fixed||i.start(),yield i.destroy,yield g.Q.on("VERTIGO_CONTROLS",e=>{e.setPayload(i)}),yield u.ticker.onTick({order:-1},e=>{i.update(u.camera,u.aspect,e.deltaTime)})}},[a]);let w={position:"absolute",inset:0};return(0,h.jsx)("div",{ref:f,className:s,style:w,children:(0,h.jsxs)(l.Provider,{value:u,children:[(0,h.jsx)("div",{style:w}),(0,h.jsx)("div",{style:w,className:"thru",children:u.initialized&&r})]})})}function P(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,f.D)()&&(0,h.jsx)(C,{...t[0]})}var j=n(95736);let z={hotkey:"g",show:void 0,hide:void 0,isHelper:e=>!0===e.userData.helper};class S{*initialize(){let{hotkey:e}=this.safeParams;yield(0,j.a)([[{key:e,keyCaseInsensitive:!0},()=>this.toggle()]])}toggle(){return this.currentShowHelpers=!this.currentShowHelpers,this.updateHelpers(),this.currentShowHelpers}updateHelpers(){let{isHelper:e}=this.safeParams;for(let t of(0,a.$z)(this.root))e(t)&&(t.visible=this.currentShowHelpers)}set showHelpers(e){this.currentShowHelpers=null!=e?e:this.currentShowHelpers,this.updateHelpers()}constructor(e,t){var n;S.instances.set(e,this),this.safeParams={...z,...t},this.root=e.scene,this.currentShowHelpers=null!=(n=null==t?void 0:t.show)?n:(null==t?void 0:t.hide)!==!1,this.updateHelpers()}}S.instances=new Map},54167:e=>{e.exports={FlexibleLayout:"flexible-layout_FlexibleLayout__yX36z",Container:"flexible-layout_Container__m1z5G"}},54956:e=>{e.exports={ShaderXplr:"style_ShaderXplr__ui5Wo",Selectors:"style_Selectors__q_Gtx",Include:"style_Include__P24wx",Hover:"style_Hover__KfJWT",Base:"style_Base___m7UK",Dim:"style_Dim__SFNyL",BaseContentWrapper:"style_BaseContentWrapper__nBKWd",OverlayContentWrapper:"style_OverlayContentWrapper___G7Tu",IncludeHighlight:"style_IncludeHighlight__2NZpu",Overlay:"style_Overlay__33OtX",TitleBar:"style_TitleBar__vfcXx"}},56647:(e,t,n)=>{"use strict";n.d(t,{R:()=>h});var i=n(49797),r=n(6726),o=n(72612),s=n(96273);let a=new i.I9Y,l=new i.Pq0,c=new i.kn4;function*d(e){let t=new WeakSet;for(let n of e)t.has(n)||(t.add(n),yield n)}function u(e,t,n,i,r){if(null==n?void 0:n.transform)for(let e of((0,s.vl)(n.transform,c),d(t)))e.applyMatrix4(c);if((null==n?void 0:n.color)!==void 0&&e.color(n.color),i){for(let n=0;n<t.length-1;n++)e.points.push(t[n],t[n+1]);r&&e.points.push(t[t.length-1],t[0])}else e.points.push(...t)}class h extends i.DXC{addTo(e){return e?e.add(this):this.removeFromParent(),this}*uniquePoints(){yield*d(this.points)}opacity(e){return this.material.opacity=e,this.material.transparent=this.state.forceTransparent||e<1,this.material.depthWrite=e>=1,this.material.needsUpdate=!0,this}color(e){return this.colors.set(this.points.length,new i.Q1f(e)),this}forceTransparent(){return this.state.forceTransparent=!0,this.material.transparent=!0,this}translate(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,o]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x+=i,e.y+=r,e.z+=o;return this}rescale(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,o]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x*=i,e.y*=r,e.z*=o;return this}showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new i.mrM({color:this.material.color,transparent:!0,depthFunc:i.K52,opacity:e}),n=new i.DXC(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setDrawRange(0,0),this}draw(){if(!1===this.state.hasAlreadyBeenRendered&&-1===this.state.reservePoints)this.geometry.setFromPoints(this.points),this.geometry.setDrawRange(0,this.points.length),this.state.reservePoints=this.points.length;else{let{position:e}=this.geometry.attributes;e||(e=new i.THS(new Float32Array(3*this.state.reservePoints),3),this.geometry.setAttribute("position",e));let t=this.points.length;t>e.count&&(console.warn("LineHelper: The number of points (".concat(t,") is greater than the reserved points (").concat(e.count,").")),t=e.count),this.geometry.setDrawRange(0,t);for(let n=0;n<t;n++){let{x:t,y:i,z:r}=this.points[n];e.setXYZ(n,t,i,r)}e.needsUpdate=!0}if(this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let{color:t}=this.geometry.attributes;t||(t=new i.THS(new Float32Array(3*this.geometry.attributes.position.count),3),this.geometry.setAttribute("color",t));let n=new i.Q1f(null!=(e=this.colors.get(0))?e:"white"),r=this.points.length;for(let e=0;e<r;e++){let i=this.colors.get(e);i&&n.copy(i),t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}return this}line(e,t,n){return u(this,[(0,s.jj)(e),(0,s.jj)(t)],n),this}capsule2(e,t,n,r){let a=(0,s.jj)(e),l=(0,s.jj)(t),c=new i.Pq0().subVectors(l,a),d=c.length(),h=c.clone().divideScalar(d),p=new i.Pq0(-h.y,h.x);return u(this,[...(0,o.loopArray)(24,e=>{let t=e.p*Math.PI;return a.clone().addScaledVector(p,n*Math.cos(t)).addScaledVector(h,-n*Math.sin(t))}),...(0,o.loopArray)(24,e=>{let t=e.p*Math.PI;return l.clone().addScaledVector(p,-n*Math.cos(t)).addScaledVector(h,n*Math.sin(t))})],r,!0,!0),this}polygon(e,t){let n=e.map(e=>(0,s.jj)(e)),i=[];for(let e=0;e<n.length;e++)i.push(n[e],n[(e+1)%n.length]);return u(this,i,t),this}polyline(e,t){let n=e.map(e=>(0,s.jj)(e)),i=[];for(let e=0;e<n.length-1;e++)i.push(n[e],n[e+1]);return u(this,i,t),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:r,y:o,z:l,radius:c,segments:d,plane:p,...x}={...h.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,i]=t,{x:r,y:o}=(0,s.wX)(e,a);return{x:r,y:o,radius:n,...i}}return t[0]})()},f=new i.Pq0(1,0,0),v=new i.Pq0(0,1,0),m=[];for(let e=0;e<d;e++){let t=e/d*Math.PI*2,n=(e+1)/d*Math.PI*2,s=Math.cos(t)*c,a=Math.sin(t)*c,u=Math.cos(n)*c,h=Math.sin(n)*c,p=new i.Pq0(r,o,l).addScaledVector(f,s).addScaledVector(v,a),x=new i.Pq0(r,o,l).addScaledVector(f,u).addScaledVector(v,h);m.push(p,x)}if("XZ"===p)for(let e of m)e.set(e.x,0,e.y);if("YZ"===p)for(let e of m)e.set(0,e.x,e.y);return u(this,m,x),this}sphere(e){return this.circle({...e,plane:"XY"}).circle({...e,plane:"XZ"}).circle({...e,plane:"YZ"})}rectangle(e,t){let{centerX:n,centerY:o,width:s,height:a}=r.M_.from(e),l=s/2,c=a/2,d=new i.Pq0(n-l,o-c,0),h=new i.Pq0(n+l,o-c,0),p=new i.Pq0(n+l,o+c,0),x=new i.Pq0(n-l,o+c,0);return u(this,[d,h,h,p,p,x,x,d],t),this}placeholder(e,t){let n=r.M_.from(e);return this.rectangle(n,t).line(n.fromRelativePoint(0,0),n.fromRelativePoint(1,1),t).line(n.fromRelativePoint(1,0),n.fromRelativePoint(0,1),t)}grid2(e){let{plane:t,x:n,y:r,z:o,size:l,subdivisions:c,width:d,height:p,widthSubdivisions:x,heightSubdivisions:f,...v}={...h.grid2DefaultOptions,...e},{x:m,y:y}=(0,s.wX)(l,a),{x:g,y:w}=(0,s.wX)(null!=c?c:l);d&&(m=d),p&&(y=p),x&&(g=x),f&&(w=f);let b=m/2,C=y/2,P=[];for(let e=0;e<=g;e++){let t=e/g*m-b;P.push(new i.Pq0(t,-C,0),new i.Pq0(t,C,0))}for(let e=0;e<=w;e++){let t=e/w*y-C;P.push(new i.Pq0(-b,t,0),new i.Pq0(b,t,0))}let j=new i.Pq0(n,r,o);for(let e of P)e.add(j);if("XZ"===t)for(let e of P)e.set(e.x,0,e.y);if("YZ"===t)for(let e of P)e.set(0,e.x,e.y);return u(this,P,v),this}box(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=0,r=0,o=1,a=1,c=1,{center:d,size:u,box3:h}=e;if(void 0!==d&&({x:t,y:n,z:r}=(0,s.jj)(d,l)),void 0!==u&&({x:o,y:a,z:c}=(0,s.jj)(u,l)),void 0!==h){let{min:i,max:s}=h,{x:l,y:d,z:u}=i,{x:p,y:x,z:f}=s;e.asIntBox3&&(p+=1,x+=1,f+=1),t=(l+p)/2,n=(d+x)/2,r=(u+f)/2,o=p-l,a=x-d,c=f-u}let p=o/2,x=a/2,f=c/2,v=new i.Pq0(t-p,n-x,r-f),m=new i.Pq0(t+p,n-x,r-f),y=new i.Pq0(t+p,n+x,r-f),g=new i.Pq0(t-p,n+x,r-f),w=new i.Pq0(t-p,n-x,r+f),b=new i.Pq0(t+p,n-x,r+f),C=new i.Pq0(t+p,n+x,r+f),P=new i.Pq0(t-p,n+x,r+f);return this.points.push(v,m,m,y,y,g,g,v),this.points.push(w,b,b,C,C,P,P,w),this.points.push(v,w,m,b,y,C,g,P),this}plus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=t/2,{x:o,y:l}=(0,s.wX)(e,a),c=new i.Pq0(o-r,l,0),d=new i.Pq0(o+r,l,0);return u(this,[c,d,new i.Pq0(o,l-r,0),new i.Pq0(o,l+r,0)],n),this}cross(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=t/2,{x:o,y:l}=(0,s.wX)(e,a),c=new i.Pq0(o-r,l-r,0),d=new i.Pq0(o+r,l+r,0);return u(this,[c,d,new i.Pq0(o-r,l+r,0),new i.Pq0(o+r,l-r,0)],n),this}constructor(e=-1,t=new i.mrM({vertexColors:!0})){super(new i.LoY,t),this.points=[],this.colors=new Map,this.state={forceTransparent:!1,hasAlreadyBeenRendered:!1,reservePoints:-1},this.state.reservePoints=e,this.onBeforeRender=()=>{this.state.hasAlreadyBeenRendered=!0}}}h.circleDefaultOptions={plane:"XY",x:0,y:0,z:0,radius:.5,segments:96},h.grid2DefaultOptions={plane:"XY",x:0,y:0,z:0,size:8,width:void 0,height:void 0,subdivisions:void 0,widthSubdivisions:void 0,heightSubdivisions:void 0}},56652:e=>{e.exports={VertigoWidgetClient:"vertigo_VertigoWidgetClient__UIsqY",BgBlur:"vertigo_BgBlur__om6v3"}},64857:(e,t,n)=>{"use strict";n.d(t,{w:()=>i.w});var i=n(67840)},65897:(e,t,n)=>{"use strict";n.d(t,{Client:()=>d});var i=n(70691),r=n(49797),o=n(84306),s=n(9723),a=n(87381),l=n(16008);function c(){return(0,o.yk)(function*(e){(0,a.mj)(new r.eaF(new r.WBB(1,0),new s.Y),{parent:e.scene,x:-4}),(0,a.mj)(new l.XI,{parent:e.scene})},[]),null}function d(){return(0,i.jsx)(o.uB,{children:(0,i.jsxs)(o.zz,{children:[(0,i.jsx)("div",{className:"layer thru p-4",children:(0,i.jsx)("h1",{children:"Vertigo Widget"})}),(0,i.jsx)(c,{})]})})}},65927:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});let i="\n#ifndef GLSL_BASIC\n#define GLSL_BASIC\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\n#endif\n"},66851:(e,t,n)=>{"use strict";n.d(t,{_:()=>l,w:()=>s});var i=n(49797),r=n(96273);let o=new i.kn4;function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return(0,r.vl)(e,t)}let a=new i.Q1f;function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return t.set(e)}},67235:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var i=n(54530);class r{_getId(){return r._idHash.init().update(++this._count).getValue()}_registerObject(e){let t=this._getId();return this._weakMap.set(e,t),t}_registerPrimitive(e){let t=this._getId();return this._map.set(e,t),t}_requirePrimitiveId(e){var t;return null!=(t=this._map.get(e))?t:this._registerPrimitive(e)}_requireObjectId(e){var t;return null!=(t=this._weakMap.get(e))?t:this._registerObject(e)}_requireArrayId(e){let{_arrayHash:t}=r;for(let n of(t.init(),e.flat(16)))t.update(this.requireId(n));return t.getValue()}requireId(e){return!function(e){if(null==e)return!0;switch(typeof e){case"function":case"object":return!1;default:return!0}}(e)?Array.isArray(e)?this._requireArrayId(e):this._requireObjectId(e):this._requirePrimitiveId(e)}constructor(){this._count=1,this._map=new Map,this._weakMap=new WeakMap}}r._idHash=new i.V,r._arrayHash=new i.V;class o{constructor(e,t){this.filter=e,this.callback=t,this.match="*"===e?()=>!0:"string"==typeof e?t=>t===e:e instanceof RegExp?t=>e.test(t):()=>!1}}let s=new r,a=new Map;class l{setPayload(e){return this.payload=e,this}assignPayload(e){let{overwrite:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.payload=t?{...this.payload,...e}:{...e,...this.payload},this}payloadAssign(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.assignPayload(...t)}assertPayload(){if(void 0!==this.payload)return this.payload;throw Error('Message.payloadAssert: assertion failed for message with target "'.concat(this.target,'"'))}constructor(e,t,n){var i;this.id=l.nextId++,this.debug={currentListenerIndex:-1,listenerCount:0},this.targetId=s.requireId(e),this.target=e,this.type=null!=t?t:"message",this.payload=n;let r=(null!=(i=a.get(this.targetId))?i:[]).filter(e=>e.match(this.type));for(let e of(this.debug.listenerCount=r.length,r))this.debug.currentListenerIndex++,e.callback(this)}}function c(e){if(2===e.length){let[t,n]=e;return[t,"*",n]}return e}function d(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];let[r,l,d]=c(n),u=s.requireId(r),h=new o(l,d);return(null!=(e=a.get(u))?e:(()=>{let e=[];return a.set(u,e),e})()).push(h),{destroy:()=>{!function(e,t){let n=a.get(e);if(n){let i=n.indexOf(t);if(-1!==i)n.splice(i,1),0===n.length&&a.delete(e)}}(u,h)}}}l.send=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,o]=function(e){let[t,...n]=e;if(2===n.length){let[e,{payload:i}]=n;return[t,e,i]}if(1===n.length){let[e]=n;return"string"==typeof e?[t,e]:[t,void 0,e.payload]}return[t]}(t);return new l(i,r,o)},l.on=d,l.wait=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(e=>{let n=t=>{e(t)},[i,r]=c([...t,n]);d(i,r,n)})},l.debug={listenerMap:a,idRegister:s},l.nextId=0},67840:(e,t,n)=>{"use strict";n.d(t,{w:()=>v});var i=n(49797),r=n(96273),o=n(66851),s=n(79285);function a(){return[...new Set(["�",..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",..."\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff",..."0123456789",..." @#.,!?\xbf:;-+*/=%&|()[]{}<>$'’\""])].join("")}class l{constructor(){let e=a(),t=new i.I9Y(16,24),n=t.x/t.y,r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.I9Y;return n.x=Math.ceil(Math.sqrt(e/t)),n.y=Math.ceil(e/n.x),n}(e.length,n),o=t.clone().multiplyScalar(3),l=(0,s.ceilPowerOfTwo)(o.x*r.x),c=(0,s.ceilPowerOfTwo)(o.y*r.y),d=l/(o.x*r.x),u=c/(o.y*r.y);if("undefined"==typeof document){this.canvas=null,this.texture=null,this.symbols="",this.charGrid=new i.I9Y;return}let h=document.createElement("canvas");h.width=l,h.height=c;let p=h.getContext("2d");p.font="".concat(.8*o.y,"px monospace"),p.textBaseline="top",p.fillStyle="black",p.fillRect(0,0,l,c),p.fillStyle="white",p.transform(d,0,0,u,0,0);for(let t=0;t<e.length;t++){let n=Math.floor(t/r.x),i=(t-n*r.x+.12)*o.x,s=o.y*(n+.19999999999999996);p.fillText(e[t],i,s)}this.canvas=h,this.texture=new i.GOR(h),this.symbols=e,this.charGrid=r}}l.getDefaultSymbols=a;let c={oriented:0,billboard:1},d={nodeMaterial:!1,textCount:1e3,lineLength:24,lineCount:2,charSize:new i.I9Y(.2,.3),textSize:1,textOffset:0,orientation:"billboard",textDefaults:{color:"#ff00ff",size:1}};class u{get textCount(){return this.metadata.textCount}get lineCount(){return this.metadata.lineCount}get lineLength(){return this.metadata.lineLength}get strideHeaderByteSize(){return this.metadata.strideHeaderByteSize}get strideByteSize(){return this.metadata.strideByteSize}get textureSize(){return new i.I9Y(this.metadata.textureWidth,this.metadata.textureHeight)}encode(){let e=JSON.stringify(this.metadata),t=new TextEncoder().encode(e),n=t.length,i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,n,!0);let r=new Uint8Array(4+n+this.array.length);return r.set(i,0),r.set(t,4),r.set(this.array,4+n),r}static decode(e){let t=new DataView(e.buffer).getUint32(0,!0),n=e.slice(4,4+t),i=JSON.parse(new TextDecoder().decode(n)),r=new u(i.symbols,i.textCount,i.lineCount,i.lineLength),o=e.slice(4+t);return r.array.set(o),r}info(){return"data: ".concat(this.array.length," bytes, ").concat(this.textureSize.x,"x").concat(this.textureSize.y)}getTextAt(e){let{array:t}=this,{symbols:n,lineLength:i,strideByteSize:r,strideHeaderByteSize:o}=this.metadata,s=e*r,a=t[s+0],l=t[s+16],c=e=>e.toString(16).padStart(2,"0"),d="#".concat(c(t[s+4])).concat(c(t[s+4+1])).concat(c(t[s+4+2])),u=t[s+4+3],h="#".concat(c(t[s+8])).concat(c(t[s+8+1])).concat(c(t[s+8+2])),p=t[s+8+3],x=[];for(let e=0;e<a;e++){let r=s+o+e*i,a=[];for(let e=0;e<l;e++){let i=n[t[r+e]];a.push(i)}x.push(a.join(""))}return{text:x.join("\n"),textColor:d,textOpacity:u,backgroundColor:h,backgroundOpacity:p,currentLineCount:a,currentLineLength:l}}setSizeAt(e,t){let{array:n}=this,{strideByteSize:i}=this.metadata;return new DataView(n.buffer).setFloat32(e*i+12,t),this}setColorAt(e,t){let{color:n,opacity:i,textColor:r=n,textOpacity:a=i,backgroundColor:l=r,backgroundOpacity:c=+(null!=i?!!i:!!t.backgroundColor)}=t,{array:d}=this,{strideByteSize:u}=this.metadata;{let t=e*u+4;if(void 0!==r){let{r:e,g:n,b:i}=(0,o._)(r);d[t+0]=255*e,d[t+1]=255*n,d[t+2]=255*i}void 0!==a&&(d[t+3]=(0,s.toff)(a))}{let t=e*u+8;if(void 0!==l){let{r:e,g:n,b:i}=(0,o._)(l);d[t+0]=255*e,d[t+1]=255*n,d[t+2]=255*i}void 0!==c&&(d[t+3]=(0,s.toff)(c))}return this.texture.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{trim:i=!1,size:r=1,...o}=n;this.setColorAt(e,o),this.setSizeAt(e,r);let{array:s}=this,{symbols:a,lineCount:l,lineLength:c,strideByteSize:d,strideHeaderByteSize:u}=this.metadata,h=(i?t.trim():t).split("\n");h.length>l&&(console.warn("TextHelper: Text has more lines than ".concat(l,", truncating.")),h=h.slice(0,l)),h=h.map(e=>(i&&(e=e.trim()),e.length>c)?(console.warn("TextHelper: Line length is greater than ".concat(c," characters, clamping.")),e.slice(0,c)):e),s[e*d+0]=h.length;let p=e*d,x=h.length;for(let e=0;e<l;e++){let t=0;e<x&&(s[p+16+4*e]=h[e].length,t=h[e].length);let n=p+u+e*c;for(let i=0;i<c;i++){let r=n+i;if(e>=x||i>=t)s[r]=0;else{let t=a.indexOf(h[e].charAt(i));s[r]=-1===t?0:t}}}this.texture.needsUpdate=!0}constructor(e,t,n,r,{defaultColor:a="#ffffff",defaultTextOpacity:l=1,defaultBackgroundOpacity:c=0}={}){let d=16+4*n,u=d+4*Math.ceil(n*r/4),h=Math.ceil((d+t*u)/4),p=(0,s.ceilPowerOfTwo)(Math.sqrt(h)),x=Math.ceil(h/p);this.metadata={symbols:e,textCount:t,lineCount:n,lineLength:r,strideHeaderByteSize:d,strideByteSize:u,textureWidth:p,textureHeight:x};let f=new Uint8Array(p*x*4),{r:v,g:m,b:y}=(0,o._)(a);for(let e=0;e<t;e++){let t=e*u;f[(t+=4)+0]=255*v,f[t+1]=255*m,f[t+2]=255*y,f[t+3]=255*l,f[(t+=4)+0]=255*v,f[t+1]=255*m,f[t+2]=255*y,f[t+3]=255*c}this.array=f,this.texture=new i.GYF(f,p,x,i.GWd,i.OUM),this.texture.needsUpdate=!0}}var h=n(17953),p=n(81074),x=n(60041);let f=0;class v extends i.ZLX{applyTransform(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let o=(0,r.GD)(t),s=new i.kn4,a=this.instanceMatrix.array.length;for(let e=0;e<a;e+=16)s.fromArray(this.instanceMatrix.array,e).multiply(o).toArray(this.instanceMatrix.array,e);return this}addTo(e){return e?e.add(this):this.removeFromParent(),this}onTop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return 0!==e?(this.renderOrder=e,this.material.depthTest=!1,this.material.depthWrite=!1,this.material.transparent=!0):(this.renderOrder=0,this.material.depthTest=!0,this.material.depthWrite=!0,this.material.transparent=!1),this}setData(e){return this.data=e,this}clearAllText(){return this.instanceMatrix.array.fill(0),this.instanceMatrix.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.data.setTextAt(e,t,{...this.options.textDefaults,...n}),this.setMatrixAt(e,(0,o.w)(n)),this.instanceMatrix.needsUpdate=!0,this}setColorAt(e,t){this.data.setColorAt(e,{color:t})}setTextColorAt(e,t){return this.data.setColorAt(e,t),this}getDataStringView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,a=Array.from({length:t.length/4},(e,n)=>{let i=4*n,r=t[i+0],o=t[i+1];return[r,o,t[i+2],t[i+3]]}).slice(o*n/4,s*n/4),l=[];l.push("\nData texture array (".concat(t.length," bytes):")),l.push("\ndataStride: ".concat(n," (").concat(n/4," x 4 bytes)"));let c=4+i;for(let t=0;t<a.length;t++){let o=t%(n/4);0===o&&(l.push("\npack #".concat(t/(n/4))),l.push("info:")),4===o&&l.push("lines (".concat(i,"):")),o===c&&l.push("chars (".concat(r,"):"));let[s,d,u,h]=a[t],p="".concat(t.toString().padEnd(3)," - ").concat((4*t).toString().padEnd(4),":   ").concat(s.toString().padStart(3),", ").concat(d.toString().padStart(3),", ").concat(u.toString().padStart(3),", ").concat(h.toString().padStart(3));o>=c&&(p+="     ".concat(e.symbols[s]).concat(e.symbols[d]).concat(e.symbols[u]).concat(e.symbols[h])),l.push("  "+p)}return l.join("\n")}(this.atlas,this.data.array,this.data.strideByteSize,this.options.lineCount,this.options.lineLength,e,t)}constructor(e){let t={...d,...e},n=new l,o=new u(n.symbols,t.textCount,t.lineCount,t.lineLength),s=function(e,t,n){let o={...d,...e},s=new i.I9Y(o.textSize*o.lineLength*o.charSize.x,o.textSize*o.lineCount*o.charSize.y);return{uCameraMatrix:{value:new i.kn4},uOrientation:{value:function(e){if("string"==typeof e){if(e in c)return c[e];throw Error("Invalid orientation: ".concat(e))}if(Object.values(c).includes(e))return e;throw Error("Invalid orientation: ".concat(e))}(o.orientation)},uTextOffset:{value:(0,r.wX)(o.textOffset)},uPlaneSize:{value:s},uCharSize:{value:o.charSize},uLineLength:{value:o.lineLength},uLineCount:{value:o.lineCount},uAtlasCharGrid:{value:n.charGrid},uDataStrideHeader:{value:t.strideHeaderByteSize},uDataStride:{value:t.strideByteSize/4},uDataTexture:{value:t.texture},uDataTextureSize:{value:t.textureSize},uBoxBorderWidth:{value:0}}}(t,o,n),a=s.uPlaneSize.value;super(new i.bdM(a.width,a.height),t.nodeMaterial?function(e,t){let n=new p.P8l;n.name="TextHelperMaterial",n.transparent=!0,n.alphaTest=.5,n.side=i.$EB,console.warn("TextHelperMaterial is not supported in WebGPU yet, do not expect it to work.");let r=(0,h.PiW)(e.uDataTextureSize.value).onFrameUpdate(()=>e.uDataTextureSize.value),o=(0,h.PiW)(e.uDataStride.value).onFrameUpdate(()=>e.uDataStride.value);function s(t,n){let i=r.x,s=(0,h.WQq)((0,h.lKK)(t,o),n),a=(0,h.y4m)(s,i),l=(0,h.jbE)(s,(0,h.lKK)(a,i));return(0,h.wHr)(e.uDataTexture.value,(0,h.ZcS)(l,a))}(0,h.PiW)(e.uDataStrideHeader.value).onFrameUpdate(()=>e.uDataStrideHeader.value),(0,h.PiW)(e.uAtlasCharGrid.value).onFrameUpdate(()=>e.uAtlasCharGrid.value);let a=s(h.cGD,0);(0,h.PCg)((0,h.lKK)(a.r,255)),(0,h.PCg)(s(h.cGD,1)),(0,h.PCg)(s(h.cGD,2)),(0,h.fVC)(1);let l=(0,h.PiW)(1).onRenderUpdate(()=>e.uOrientation.value);return n.positionNode=(0,h.Fn)(()=>{let e=(0,h.eR5)().toVar();return(0,h.If)(l.equal(0),()=>{e.assign(h.WVU)}).Else(()=>{e.assign((0,h.w00)(h.FLB).mul(h.WVU))}),e})(),n.colorNode=(0,h.yWT)("yellow"),n}(s,0):function(e,t){let n=new i.V9B({map:t.texture,transparent:!0,alphaTest:.5,side:i.$EB});return n.name="TextHelperMaterial",n.onBeforeCompile=t=>x.b.with(t).uniforms(e).varying({vInstanceId:"float",vTextColor:"vec4",vBackgroundColor:"vec4",vCurrentLineCount:"float"}).top("\n      vec4 getData4(int instanceId, int offset) {\n        int width = int(uDataTextureSize.x);\n        int index = instanceId * int(uDataStride) + offset;\n        int dataY = index / width;\n        int dataX = index - dataY * width;\n        return texelFetch(uDataTexture, ivec2(dataX, dataY), 0);\n      }\n      vec4 getData4(float instanceId, int offset) {\n        return getData4(int(instanceId), offset);\n      }\n        \n      vec2 getCharOffset(float instanceId, float charIndex) {\n        int p = int(uDataStrideHeader + charIndex);\n        int q = p / 4;\n        int r = p - q * 4; // p % 4;\n        vec4 charIndexes = getData4(instanceId, q);\n        float i = charIndexes[r] * 255.0;\n        float x = mod(i, uAtlasCharGrid.x);\n        float y = floor(i / uAtlasCharGrid.x);\n        return vec2(x, uAtlasCharGrid.y - y - 1.0) / uAtlasCharGrid;\n      }\n      vec2 getCharOffset(float instanceId, float line, float char) {\n        // return vec2(line * 82.0 + char, 0.0) / uAtlasCharGrid;\n        return getCharOffset(instanceId, line * uLineLength + char);\n      }\n    ").vertex.replace("project_vertex","\n      vec4 infoTexel = getData4(gl_InstanceID, 0);\n      vCurrentLineCount = infoTexel.r * 255.0;\n\n      vTextColor = getData4(gl_InstanceID, 1);\n      vBackgroundColor = getData4(gl_InstanceID, 2);\n\n      vec4 sizeBytes = getData4(gl_InstanceID, 3) * 255.0;\n      uint encoded =\n        uint(sizeBytes.x) << 24 |\n        uint(sizeBytes.y) << 16 |\n        uint(sizeBytes.z) << 8  |\n        uint(sizeBytes.w);\n      float size = uintBitsToFloat(encoded);\n\n      vec4 mvPosition = vec4(transformed * size, 1.0);\n\n      mat4 textMatrix = uOrientation < 0.5\n        ? modelMatrix * instanceMatrix\n        : mat4(\n          uCameraMatrix[0],\n          uCameraMatrix[1],\n          uCameraMatrix[2],\n          modelMatrix * vec4(instanceMatrix[3].xyz, 1.0));\n\n      mvPosition.xy += uTextOffset;\n\n      mvPosition = viewMatrix * textMatrix * mvPosition;\n\n      gl_Position = projectionMatrix * mvPosition;\n\n      vInstanceId = float(gl_InstanceID);\n    ").fragment.top("\n      float sdBox(in vec2 p, in vec2 b) {\n        vec2 d = abs(p) - b;\n        return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n      }\n\n      vec4 getCharColor() {\n        vec2 uv = vMapUv * vec2(uLineLength, uLineCount);\n\n        uv.y += (uLineCount - vCurrentLineCount) * 0.5;\n        float lineIndex = floor((uLineCount - uv.y));\n\n        if (lineIndex < 0.0 || lineIndex >= vCurrentLineCount)\n          discard;\n\n        float currentLineLength = getData4(vInstanceId, 4 + int(lineIndex)).r * 255.0;\n        // vec2 ddx = dFdx(uv);\n        // vec2 ddy = dFdy(uv);\n        uv.x += (uLineLength - currentLineLength) * -0.5;\n        float charIndex = floor(uv.x);\n\n        if (charIndex < 0.0 || charIndex >= currentLineLength)\n          discard;\n\n        uv = fract(uv);\n        // diffuseColor = vec4(uv, 1.0, 1.0);\n        uv /= uAtlasCharGrid;\n\n        uv += getCharOffset(vInstanceId, lineIndex, charIndex);\n        // float lod = log2(max(length(dFdx(vMapUv)), length(dFdy(vMapUv))));\n        vec4 charColor = textureLod(map, uv, 0.0);\n        // Use textureGrad for better quality, when the square texture will be used\n        // vec4 sampledDiffuseColor = textureGrad(map, uv, ddx, ddy);\n        float char = charColor.r;\n        \n        return vec4(\n          mix(vBackgroundColor.rgb, vTextColor.rgb, charColor.r),\n          mix(vBackgroundColor.a, vTextColor.a, charColor.r));\n      }\n\n      vec4 getCharColorWithBorder() {\n        if (uBoxBorderWidth > 0.0) {\n          vec2 p = (vMapUv - 0.5) * uPlaneSize;\n          float d = sdBox(p, uPlaneSize * 0.5) + uBoxBorderWidth;\n          if (d > 0.0) {\n            return vTextColor;\n          }\n        }\n        return getCharColor();\n      }\n    ").fragment.replace("map_fragment","\n      diffuseColor = getCharColorWithBorder();\n    "),n}(s,n),t.textCount),this.textHelperId=f++,this.onBeforeRender=(e,t,n,i,r,o)=>{s.uCameraMatrix.value.copy(n.matrixWorld)},this.frustumCulled=!1,this.layers,this.options=t,this.atlas=n,this.data=o,this.derived={planeSize:a}}}v.defaultOptions=d,v.Atlas=l,v.Data=u},68857:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,89294,23)),Promise.resolve().then(n.bind(n,14137)),Promise.resolve().then(n.bind(n,6688)),Promise.resolve().then(n.bind(n,28301)),Promise.resolve().then(n.bind(n,35484)),Promise.resolve().then(n.bind(n,42537)),Promise.resolve().then(n.bind(n,20657)),Promise.resolve().then(n.bind(n,18140)),Promise.resolve().then(n.bind(n,2765)),Promise.resolve().then(n.bind(n,15774)),Promise.resolve().then(n.bind(n,65897)),Promise.resolve().then(n.bind(n,13982)),Promise.resolve().then(n.bind(n,18653))},69965:e=>{e.exports={Copyable:"Copyable_Copyable__KjEYk",Overlay:"Copyable_Overlay__CzDNx"}},70261:e=>{e.exports={IconButton:"IconButton_IconButton__QPZgi"}},72612:(e,t,n)=>{"use strict";function*i(e){let t=0,n={get i(){return t},get t(){return t/e},get p(){return t/(e-1)},get size(){return e},clone(){return{...this}}};for(t=0;t<e;t++)yield n}function r(e,t){let n=[];for(let r of i(e)){let e=r.clone();n.push(t?t(e):e)}return n}function*o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=0,r=0;2===t.length?(i=t[0],r=t[1]):Array.isArray(t[0])?(i=t[0][0],r=t[0][1]):(i=t[0].x,r=t[0].y);let o=0,s=0,a=0,l={get i(){return o},get x(){return s},get y(){return a},get tx(){return s/i},get ty(){return a/r},get px(){return s/(i-1)},get py(){return a/(r-1)},get sizeX(){return i},get sizeY(){return r},clone(){return{...this}}};for(a=0;a<r;a++)for(s=0;s<i;s++)yield l,o++}function s(){let e;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];let r=0,s=0;"number"==typeof n[0]?(r=n[0],s=n[1],e=n[2]):(Array.isArray(n[0])?(r=n[0][0],s=n[0][1]):(r=n[0].x,s=n[0].y),e=n[1]);let a=[];for(let t of o(r,s)){let n=t.clone();a.push(e?e(n):n)}return a}function*a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=0,r=0,o=0;3===t.length?(i=t[0],r=t[1],o=t[2]):Array.isArray(t[0])?(i=t[0][0],r=t[0][1],o=t[0][2]):(i=t[0].x,r=t[0].y,o=t[0].z);let s=0,a=0,l=0,c=0,d={get i(){return s},get x(){return a},get y(){return l},get z(){return c},get tx(){return a/i},get ty(){return l/r},get tz(){return c/o},get px(){return a/(i-1)},get py(){return l/(r-1)},get pz(){return c/(o-1)},clone(){return{...this}}};for(c=0;c<o;c++)for(l=0;l<r;l++)for(a=0;a<i;a++)yield d,s++}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[];for(let e of a(...t))i.push(e.clone());return i}n.r(t),n.d(t,{loop:()=>i,loop2:()=>o,loop2Array:()=>s,loop3:()=>a,loop3Array:()=>l,loopArray:()=>r})},78592:e=>{e.exports={Client:"client_Client__eDdMm"}},82091:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var i=n(49797);let r=new i.WBB(1,4);class o extends i.eaF{constructor(e){super(r,new i.V9B({color:"#0c529d",...e,side:i.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(e,t,n)=>{let i=(n.near+n.far)/2;this.position.copy(n.position),this.scale.setScalar(i),this.updateMatrix(),this.updateMatrixWorld()}}}},87381:(e,t,n)=>{"use strict";n.d(t,{$z:()=>c,DN:()=>s,mj:()=>o,rd:()=>a,wV:()=>d});var i=n(61567),r=n(90927);function o(e,t,n){if(!1===(0,i.Th)(e))throw Error("Child must be an instance of Object3D");return t&&((0,i.Th)(t)?t.add(e):(0,r.N)(e,t)),null==n||n(e),e}let s=o;function a(e,t){let n=t;for(;n.parent;){if(n.parent===e)return!0;n=n.parent}return!1}let l={includeSelf:!1};function*c(e,t){let{includeSelf:n}={...l,...t};for(let t of(n&&(yield e),e.children))yield*c(t,{includeSelf:!0})}function*d(e,t,n){for(let i of c(e,n))t(i)&&(yield i)}},88493:(e,t,n)=>{"use strict";n.d(t,{uB:()=>u,yk:()=>l});var i=n(70691),r=n(67203),o=n(7587),s=n(6697);n(90927);let a=(0,r.createContext)(null);function l(e,t){let n=(0,r.useContext)(a);return(0,o.C7)(async function*(t,i){if(e){let t=e(n,i);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(i.mounted)}},null!=t?t:"always"),n}let c={className:"",assetsPath:"/"};function d(e){let{children:t,className:n,assetsPath:l}={...c,...e},d=(0,r.useMemo)(()=>new s.XW,[]);d.loader.setPath(l);let{ref:u}=(0,o.IZ)({debounce:!0},function*(e,t){yield d.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:d})},[]);return(0,i.jsx)("div",{ref:u,className:n,style:{position:"absolute",inset:0},children:(0,i.jsxs)(a.Provider,{value:d,children:[(0,i.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,i.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:d.initialized&&t})]})})}function u(e){return function(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,i.jsx)(d,{...e})}},90048:e=>{e.exports={Client:"client_Client__koMgZ"}},90927:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var i=n(49797),r=n(96273);new i.Pq0(0,0,0),new i.O9p(0,0,0,"XYZ"),new i.Pq0(1,1,1);let o={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,pivot:void 0,visible:void 0,name:void 0,parent:void 0,userData:void 0},s=new i.dwI,a=new i.Pq0;function l(e,t){let{x:n,y:l,z:c,position:d=new i.Pq0(n,l,c),rotationX:u,rotationY:h,rotationZ:p,rotationOrder:x,rotationUnit:f,rotation:v,scaleX:m,scaleY:y,scaleZ:g,scaleScalar:w,scale:b=new i.Pq0(m,y,g).multiplyScalar(w),pivot:C,visible:P,name:j,parent:z,userData:S}={...o,...t};return(0,r.jj)(d,e.position),(0,r.if)(null!=v?v:[u,h,p,x,f],e.rotation),(0,r.jj)(b,e.scale),void 0!==C&&(e.updateMatrix(),s.setFromMatrix4(e.matrix),(0,r.jj)(C,a).applyMatrix3(s),e.position.sub(a)),void 0!==P&&(e.visible=P),void 0!==j&&(e.name=j),void 0!==z&&z!==e.parent&&(null===z?e.removeFromParent():z.add(e)),void 0!==S&&Object.assign(e.userData,S),e}},97540:(e,t,n)=>{"use strict";n.d(t,{AF:()=>p,EF:()=>f,hD:()=>h,s5:()=>s,wZ:()=>x});var i=n(49797),r=n(79285),o=n(61567);function s(e,t){if(0!==e.projectionMatrix.elements[15])return"none";{let n=e.projectionMatrix.elements[5],i=t.clientHeight*n/2;return"".concat(i,"px")}}let a=new i.kn4,l=new i.kn4,c=new i.Pq0,d=new i.Pq0;function u(e,t){if((0,o.Th)(e))return t.setFromMatrixPosition(e.matrixWorld);if((0,o.MR)(e))return t.setFromMatrixPosition(e);if((0,o.Zz)(e))return t.copy(e);throw Error("Invalid object type.")}function h(e,t){return c.set(e.matrixWorld.elements[8],e.matrixWorld.elements[9],e.matrixWorld.elements[10]),u(t,d),c.dot(d)>0}function p(e,t){return c.set(e.matrixWorld.elements[12],e.matrixWorld.elements[13],e.matrixWorld.elements[14]),u(t,d),Math.round(1e4/(1+c.distanceTo(d))).toString()}function x(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=e.projectionMatrix.elements[5],p=n.clientHeight*h/2,x=p/i,f=function(e,t){if((0,o.Th)(e))return e.matrixWorld;if((0,o.MR)(e))return e;if((0,o.Zz)(e))return t.makeTranslation(e.x,e.y,e.z);throw Error("Invalid object type.")}(t,l);a.multiplyMatrices(e.matrixWorldInverse,f);let v=a.elements;v[4]*=-1,v[5]*=-1,v[6]*=-1,v[8]*=-1,v[9]*=-1,v[10]*=-1;let m=v[14];return v[14]+=u?-1:1,v[0]*=x,v[1]*=x,v[2]*=x,v[4]*=x,v[5]*=x,v[6]*=x,v[8]*=x,v[9]*=x,v[10]*=x,v[12]*=p,v[13]*=p,v[14]*=p,v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,u&&(v[2]*=-1,v[6]*=-1,v[10]*=-1,v[14]*=-1),s>0&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.elements;c.set(n[0],n[1],n[2]);let i=c.length();n[0]=(0,r.lerp)(n[0],i,t),n[1]=(0,r.lerp)(n[1],0,t),n[2]=(0,r.lerp)(n[2],0,t),c.set(n[4],n[5],n[6]);let o=c.length();n[4]=(0,r.lerp)(n[4],0,t),n[5]=(0,r.lerp)(n[5],o,t),n[6]=(0,r.lerp)(n[6],0,t),c.set(n[8],n[9],n[10]);let s=c.length();n[8]=(0,r.lerp)(n[8],0,t),n[9]=(0,r.lerp)(n[9],0,t),n[10]=(0,r.lerp)(n[10],s,t)}(a,s),d>0&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.elements;c.set(i[0],i[1],i[2]);let o=(0,r.lerp)(1,t/c.length(),n);i[0]*=o,i[1]*=o,i[2]*=o,c.set(i[4],i[5],i[6]);let s=(0,r.lerp)(1,t/c.length(),n);i[4]*=s,i[5]*=s,i[6]*=s,c.set(i[8],i[9],i[10]);let a=(0,r.lerp)(1,t/c.length(),n);i[8]*=a,i[9]*=a,i[10]*=a}(a,u?m:-m,d),"translate(-50%, -50%) matrix3d(".concat(a.elements.join(","),")")}function f(e,t,n,i){let{pixelPerUnit:r=100,resetRotation:o=0,resetScale:a=0,leftHanded:l=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.style.perspective=s(n,e),t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform=x(n,i,e,r,o,a,l),t.style.zIndex=p(n,i)}}},e=>{var t=t=>e(e.s=t);e.O(0,[5012,2193,3947,5611,7190,6564,7223,9635,8921,4957,7775,6814,7953,9547,9294,5438,5130,8907,950,4638,6726,2598,1213,9673,8083,41,7558,5117,5774,8301,1319,6852,7358],()=>t(68857)),_N_E=e.O()}]);