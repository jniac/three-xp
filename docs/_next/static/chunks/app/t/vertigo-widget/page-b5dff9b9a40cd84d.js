(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7029],{2862:(t,e,n)=>{Promise.resolve().then(n.bind(n,20695))},9723:(t,e,n)=>{"use strict";n.d(e,{Y:()=>o});var i=n(49797),r=n(60041);let a={luminosity:.5};class o extends i.V9B{constructor(t){let{luminosity:e,...n}={...a,...t},o={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uLuminosity:{value:e}};super(n),this.onBeforeCompile=t=>{r.b.with(t).uniforms(o).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      ")},this.sunPosition=o.uSunPosition.value}}},20695:(t,e,n)=>{"use strict";n.d(e,{Client:()=>c});var i=n(70691),r=n(49797),a=n(84306),o=n(9723),l=n(87381),s=n(25851);function u(){return(0,a.yk)(function*(t){(0,l.mj)(new r.eaF(new r.WBB(1,0),new o.Y),{parent:t.scene,x:-4}),(0,l.mj)(new s.XI,{parent:t.scene})},[]),null}function c(){return(0,i.jsx)(a.uB,{children:(0,i.jsxs)(a.zz,{children:[(0,i.jsx)("div",{className:"layer thru p-4",children:(0,i.jsx)("h1",{children:"Vertigo Widget"})}),(0,i.jsx)(u,{})]})})}},25851:(t,e,n)=>{"use strict";n.d(e,{Bn:()=>h,KJ:()=>l,XI:()=>f});var i=n(63126),r=n(49797),a=n(55551),o=n(38921),l=function(t){return t[t.BOX=0]="BOX",t[t.POSITIVE_X=1]="POSITIVE_X",t[t.NEGATIVE_X=2]="NEGATIVE_X",t[t.POSITIVE_Y=3]="POSITIVE_Y",t[t.NEGATIVE_Y=4]="NEGATIVE_Y",t[t.POSITIVE_Z=5]="POSITIVE_Z",t[t.NEGATIVE_Z=6]="NEGATIVE_Z",t}(l||{});function s(t,e){let n=new r.THS(new Int8Array(t.attributes.position.count).fill(e),1);t.setAttribute("aPartId",n)}function u(t,e,n){let i=new r.qFE(.2,.6000000000000001,t,n,!0).rotateZ(Math.PI).translate(0,.53,0),a=Array.from({length:e},(t,n)=>{let i=n/(e-1);return new r.I9Y(.2*i,-.05*(1-i**2))}),l=new r.nzx(a,t).rotateZ(Math.PI).translate(0,.2*3/2+.53,0);return(0,o.pP)([i,l],!1)}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low",e="high"===t?(0,o.ec)(new a.j(.3,.3,.3,4,.05)):new r.iNn(.3,.3,.3);s(e,0);let n="high"===t?u(32,8,5):u(6,2,1);s(n,3);let i=n.clone().rotateX(Math.PI);s(i,4);let l=n.clone().rotateZ(-Math.PI/2);s(l,1);let c=n.clone().rotateZ(Math.PI/2);s(c,2);let h=n.clone().rotateX(Math.PI/2);s(h,5);let v=n.clone().rotateX(-Math.PI/2);return s(v,6),[e,l,c,n,i,h,v]}let h={defaultColor:"white",xColor:"#eb1640",yColor:"#00ffb7",zColor:"#3b80e7",hoverColor:"#fffc47"};function v(t){let{defaultColor:e,xColor:n,yColor:i,zColor:a,hoverColor:o}={...h,...t},l=new r.Q1f(e),s=new r.Q1f(n),u=new r.Q1f(i),c=new r.Q1f(a),v=new r.Q1f(o),d={uSunPosition:{value:new r.Pq0(.5,.7,.3)},uLuminosity:{value:.66},uColors:{value:[l,s,l,u,l,c,l]},uHoverColor:{value:v},uOpacity:{value:[1,1,1,1,1,1,1]},uHoverOpacity:{value:[0,0,0,0,0,0,0]}};return new r.BKk({uniforms:d,vertexShader:"\nuniform vec3 uColors[7];\nuniform float uOpacity[7];\nuniform vec3 uHoverColor;\nuniform float uHoverOpacity[7];\n\nattribute float aPartId;\n\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vColor = uColors[int(aPartId)];\n  vOpacity = uOpacity[int(aPartId)];\n  vHoverOpacity = uHoverOpacity[int(aPartId)];\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nuniform vec3 uSunPosition;\nuniform float uLuminosity;\nuniform vec3 uHoverColor;\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nfloat inverseLerp(float a, float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  \n  float minLuminosity = max(pow(vHoverOpacity, 1.0 / 3.0) * 0.85, uLuminosity);\n  light = mix(minLuminosity, 1.0, light);\n\n  vec3 color = vColor;\n  color = mix(color, uHoverColor, vHoverOpacity);\n  gl_FragColor = vec4(color * light, vOpacity);\n}\n",transparent:!0})}let d=new r.tBo;class f extends r.YJl{getHovered(){return this.internal.hovered}getPressed(){return this.internal.pressed}widgetUpdate(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/60,{lowMesh:o,material:l}=this.parts,s=new r.Pq0;n.getWorldDirection(s);let u=this.matrixWorld.elements,c=new r.Pq0(u[0],u[1],u[2]),h=new r.Pq0(u[4],u[5],u[6]),v=new r.Pq0(u[8],u[9],u[10]);{let t=l.uniforms.uOpacity.value,e=Math.abs(s.dot(c)),n=Math.abs(s.dot(h)),r=Math.abs(s.dot(v));t[1]=t[2]=(0,i.calculateExponentialDecay)(t[1],e<.98?1.05:-.05,1e-4,a),t[3]=t[4]=(0,i.calculateExponentialDecay)(t[3],n<.98?1.05:-.05,1e-4,a),t[5]=t[6]=(0,i.calculateExponentialDecay)(t[5],r<.98?1.05:-.05,1e-4,a)}{let t=l.uniforms.uHoverOpacity.value,e=+(0===this.internal.hovered),n=+(1===this.internal.hovered),r=+(2===this.internal.hovered),o=+(3===this.internal.hovered),s=+(4===this.internal.hovered),u=+(5===this.internal.hovered),c=+(6===this.internal.hovered);t[0]=(0,i.calculateExponentialDecay)(t[0],e,1e-4,a),t[1]=(0,i.calculateExponentialDecay)(t[1],n,1e-4,a),t[2]=(0,i.calculateExponentialDecay)(t[2],r,1e-4,a),t[3]=(0,i.calculateExponentialDecay)(t[3],o,1e-4,a),t[4]=(0,i.calculateExponentialDecay)(t[4],s,1e-4,a),t[5]=(0,i.calculateExponentialDecay)(t[5],u,1e-4,a),t[6]=(0,i.calculateExponentialDecay)(t[6],c,1e-4,a)}d.setFromCamera(t,n);let[f]=d.intersectObject(o,!0).map(t=>{let e=3*t.faceIndex;return o.geometry.groups.findIndex(t=>t.start<=e&&e<t.start+t.count)}).filter(t=>l.uniforms.uOpacity.value[t]>.5);e&&!1===this.internal.pointerDown&&(this.internal.pointerDown=!0,this.internal.pointerDownPosition.copy(t),this.internal.pressed=null!=f?f:null),e&&!1===this.internal.dragging&&this.internal.pointerDownPosition.distanceTo(t)>.01&&(this.internal.dragging=!0),!1===e&&this.internal.pointerDown&&(this.internal.pointerDown=!1,this.internal.dragging=!1,this.internal.pressed=null);let y=this.internal.dragging?null:null!=f?f:null;this.internal.hovered,this.internal.hovered=y}constructor(t){super(),this.internal={pointerPosition:new r.I9Y,pointerDownPosition:new r.I9Y,pointerDown:!1,dragging:!1,hovered:null,pressed:null};let e=v(null==t?void 0:t.material),n=c("high").map((t,n)=>{let i=new r.eaF(t,e);return i.name="vertigo-widget-mesh-".concat(n),this.add(i),i}),i=new r.eaF(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let i=c(...e);return(0,o.pP)(i,!0)}("low"),v(null==t?void 0:t.material));i.material.transparent=!1,i.name="vertigo-widget-low-mesh",i.visible=!1,this.add(i),this.parts={material:e,meshes:n,lowMesh:i}}}},39787:(t,e,n)=>{"use strict";function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e.flat(2))"destroy"in t?t.destroy():t()}n.d(e,{e:()=>r,z:()=>i});class r{collect(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e)if(t)if(Symbol.iterator in t)for(let e of t)e&&this.destroyables.push(e);else this.destroyables.push(t)}constructor(){this.destroyables=[],this.destroy=()=>{i(this.destroyables),this.destroyables=[]}}}},55551:(t,e,n)=>{"use strict";n.d(e,{j:()=>o});var i=n(49797);let r=new i.Pq0;function a(t,e,n,i,a,o){let l=2*Math.PI*a/4,s=Math.max(o-2*a,0),u=Math.PI/4;r.copy(e),r[i]=0,r.normalize();let c=.5*l/(l+s),h=1-r.angleTo(t)/u;return 1===Math.sign(r[n])?h*c:s/(l+s)+c+c*(1-h)}class o extends i.iNn{constructor(t=1,e=1,n=1,r=2,o=.1){if(r=2*r+1,o=Math.min(t/2,e/2,n/2,o),super(1,1,1,r,r,r),1===r)return;let l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;let s=new i.Pq0,u=new i.Pq0,c=new i.Pq0(t,e,n).divideScalar(2).subScalar(o),h=this.attributes.position.array,v=this.attributes.normal.array,d=this.attributes.uv.array,f=h.length/6,y=new i.Pq0,p=.5/r;for(let i=0,r=0;i<h.length;i+=3,r+=2)switch(s.fromArray(h,i),u.copy(s),u.x-=Math.sign(u.x)*p,u.y-=Math.sign(u.y)*p,u.z-=Math.sign(u.z)*p,u.normalize(),h[i+0]=c.x*Math.sign(s.x)+u.x*o,h[i+1]=c.y*Math.sign(s.y)+u.y*o,h[i+2]=c.z*Math.sign(s.z)+u.z*o,v[i+0]=u.x,v[i+1]=u.y,v[i+2]=u.z,Math.floor(i/f)){case 0:y.set(1,0,0),d[r+0]=a(y,u,"z","y",o,n),d[r+1]=1-a(y,u,"y","z",o,e);break;case 1:y.set(-1,0,0),d[r+0]=1-a(y,u,"z","y",o,n),d[r+1]=1-a(y,u,"y","z",o,e);break;case 2:y.set(0,1,0),d[r+0]=1-a(y,u,"x","z",o,t),d[r+1]=a(y,u,"z","x",o,n);break;case 3:y.set(0,-1,0),d[r+0]=1-a(y,u,"x","z",o,t),d[r+1]=1-a(y,u,"z","x",o,n);break;case 4:y.set(0,0,1),d[r+0]=1-a(y,u,"x","y",o,t),d[r+1]=1-a(y,u,"y","x",o,e);break;case 5:y.set(0,0,-1),d[r+0]=a(y,u,"x","y",o,t),d[r+1]=1-a(y,u,"y","x",o,e)}}}},87381:(t,e,n)=>{"use strict";n.d(e,{$z:()=>function* t(e,n){let{includeSelf:i}={...s,...n};for(let n of(i&&(yield e),e.children))yield*t(n,{includeSelf:!0})},DN:()=>o,mj:()=>a,rd:()=>l});var i=n(61567),r=n(90927);function a(t,e,n){return e&&((0,i.Th)(e)?e.add(t):(0,r.N)(t,e)),null==n||n(t),t}let o=a;function l(t,e){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}let s={includeSelf:!1}}},t=>{var e=e=>t(t.s=e);t.O(0,[2193,5611,7190,7223,9635,8921,4957,7775,16,9547,4638,6726,2598,7373,4266,4135,7558,1319,6852,7358],()=>e(2862)),_N_E=t.O()}]);