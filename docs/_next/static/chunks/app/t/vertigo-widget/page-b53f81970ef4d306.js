(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6532],{75038:function(t,n,e){Promise.resolve().then(e.bind(e,25957))},25957:function(t,n,e){"use strict";e.d(n,{Client:function(){return c}});var r=e(78485),o=e(52471),i=e(45030),a=e(63549),l=e(87858),s=e(4499);function u(){return(0,i.Ky)(function*(t){(0,l.cY)(new o.Mesh(new o.IcosahedronGeometry(1,0),new a.P),{parent:t.scene,x:-4}),(0,l.cY)(new s.l,{parent:t.scene})},[]),null}function c(){return(0,r.jsx)(i.H7,{children:(0,r.jsxs)(i.KU,{children:[(0,r.jsx)("div",{className:"layer thru p-4",children:(0,r.jsx)("h1",{children:"Vertigo Widget"})}),(0,r.jsx)(u,{})]})})}},4499:function(t,n,e){"use strict";e.d(n,{X:function(){return o},l:function(){return m}});var r,o,i=e(77552),a=e(52471),l=e(30035),s=e(66666);function u(t,n){let e=new a.BufferAttribute(new Int8Array(t.attributes.position.count).fill(n),1);t.setAttribute("aPartId",e)}function c(t,n){let e=new a.ConeGeometry(.2,.6000000000000001,t,1,!0).rotateZ(Math.PI).translate(0,.53,0),r=Array.from({length:n},(t,e)=>{let r=e/(n-1);return new a.Vector2(.2*r,-.05*(1-r**2))}),o=new a.LatheGeometry(r,t).rotateZ(Math.PI).translate(0,.2*3/2+.53,0);return(0,s.n4)([e,o],!1)}function v(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low",n="high"===t?(0,s.$1)(new l.k(.3,.3,.3,4,.05)):new a.BoxGeometry(.3,.3,.3);u(n,0);let e="high"===t?c(32,8):c(6,2);u(e,3);let r=e.clone().rotateX(Math.PI);u(r,4);let o=e.clone().rotateZ(-Math.PI/2);u(o,1);let i=e.clone().rotateZ(Math.PI/2);u(i,2);let v=e.clone().rotateX(Math.PI/2);u(v,5);let h=e.clone().rotateX(-Math.PI/2);return u(h,6),[n,o,i,e,r,v,h]}(r=o||(o={}))[r.BOX=0]="BOX",r[r.POSITIVE_X=1]="POSITIVE_X",r[r.NEGATIVE_X=2]="NEGATIVE_X",r[r.POSITIVE_Y=3]="POSITIVE_Y",r[r.NEGATIVE_Y=4]="NEGATIVE_Y",r[r.POSITIVE_Z=5]="POSITIVE_Z",r[r.NEGATIVE_Z=6]="NEGATIVE_Z";let h={defaultColor:"white",xColor:"#eb1640",yColor:"#00ffb7",zColor:"#3b80e7",hoverColor:"#fffc47"},d=new a.Raycaster;class m extends a.Group{getHovered(){return this.internal.hovered}getPressed(){return this.internal.pressed}widgetUpdate(t,n,e){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/60,{lowMesh:o,material:l}=this.parts,s=new a.Vector3;e.getWorldDirection(s);let u=this.matrixWorld.elements,c=new a.Vector3(u[0],u[1],u[2]),v=new a.Vector3(u[4],u[5],u[6]),h=new a.Vector3(u[8],u[9],u[10]);{let t=l.uniforms.uOpacity.value,n=Math.abs(s.dot(c)),e=Math.abs(s.dot(v)),o=Math.abs(s.dot(h));t[1]=t[2]=(0,i.L)(t[1],n<.98?1.05:-.05,1e-4,r),t[3]=t[4]=(0,i.L)(t[3],e<.98?1.05:-.05,1e-4,r),t[5]=t[6]=(0,i.L)(t[5],o<.98?1.05:-.05,1e-4,r)}{let t=l.uniforms.uHoverOpacity.value,n=0===this.internal.hovered?1:0,e=1===this.internal.hovered?1:0,o=2===this.internal.hovered?1:0,a=3===this.internal.hovered?1:0,s=4===this.internal.hovered?1:0,u=5===this.internal.hovered?1:0,c=6===this.internal.hovered?1:0;t[0]=(0,i.L)(t[0],n,1e-4,r),t[1]=(0,i.L)(t[1],e,1e-4,r),t[2]=(0,i.L)(t[2],o,1e-4,r),t[3]=(0,i.L)(t[3],a,1e-4,r),t[4]=(0,i.L)(t[4],s,1e-4,r),t[5]=(0,i.L)(t[5],u,1e-4,r),t[6]=(0,i.L)(t[6],c,1e-4,r)}d.setFromCamera(t,e);let[m]=d.intersectObject(o,!0).map(t=>{let n=3*t.faceIndex;return o.geometry.groups.findIndex(t=>t.start<=n&&n<t.start+t.count)}).filter(t=>l.uniforms.uOpacity.value[t]>.5);n&&!1===this.internal.pointerDown&&(this.internal.pointerDown=!0,this.internal.pointerDownPosition.copy(t),this.internal.pressed=null!=m?m:null),n&&!1===this.internal.dragging&&this.internal.pointerDownPosition.distanceTo(t)>.01&&(this.internal.dragging=!0),!1===n&&this.internal.pointerDown&&(this.internal.pointerDown=!1,this.internal.dragging=!1,this.internal.pressed=null);let g=this.internal.dragging?null:null!=m?m:null;this.internal.hovered,this.internal.hovered=g}constructor(t){super(),this.internal={pointerPosition:new a.Vector2,pointerDownPosition:new a.Vector2,pointerDown:!1,dragging:!1,hovered:null,pressed:null};let n=function(t){let{defaultColor:n,xColor:e,yColor:r,zColor:o,hoverColor:i}={...h,...t},l=new a.Color(n),s=new a.Color(e),u=new a.Color(r),c=new a.Color(o),v=new a.Color(i),d={uSunPosition:{value:new a.Vector3(.5,.7,.3)},uLuminosity:{value:.66},uColors:{value:[l,s,l,u,l,c,l]},uHoverColor:{value:v},uOpacity:{value:[1,1,1,1,1,1,1]},uHoverOpacity:{value:[0,0,0,0,0,0,0]}};return new a.ShaderMaterial({uniforms:d,vertexShader:"\nuniform vec3 uColors[7];\nuniform float uOpacity[7];\nuniform vec3 uHoverColor;\nuniform float uHoverOpacity[7];\n\nattribute float aPartId;\n\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vColor = uColors[int(aPartId)];\n  vOpacity = uOpacity[int(aPartId)];\n  vHoverOpacity = uHoverOpacity[int(aPartId)];\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nuniform vec3 uSunPosition;\nuniform float uLuminosity;\nuniform vec3 uHoverColor;\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nfloat inverseLerp(float a, float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  \n  float minLuminosity = max(pow(vHoverOpacity, 1.0 / 3.0) * 0.85, uLuminosity);\n  light = mix(minLuminosity, 1.0, light);\n\n  vec3 color = vColor;\n  color = mix(color, uHoverColor, vHoverOpacity);\n  gl_FragColor = vec4(color * light, vOpacity);\n}\n",transparent:!0,depthWrite:!1})}(null==t?void 0:t.material),e=v("high").map((t,e)=>{let r=new a.Mesh(t,n);return r.name="vertigo-widget-mesh-".concat(e),this.add(r),r}),r=new a.Mesh(function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];let r=v(...n);return(0,s.n4)(r,!0)}("low"),n);r.name="vertigo-widget-low-mesh",r.visible=!1,this.add(r),this.parts={material:n,meshes:e,lowMesh:r}}}},63549:function(t,n,e){"use strict";e.d(n,{P:function(){return i}});var r=e(52471);let o={vertexColors:!0,color:"white",luminosity:.5};class i extends r.ShaderMaterial{constructor(t){let{color:n,luminosity:e,vertexColors:i,...a}={...o,...t};super({...a,uniforms:{uColor:{value:new r.Color(n)},uSunPosition:{value:new r.Vector3(.5,.7,.3)},uLuminosity:{value:e}},vertexColors:i,vertexShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vColor;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vColor = color;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vColor;\n\nuniform vec3 uSunPosition;\nuniform vec3 uColor;\nuniform float uLuminosity;\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  light = mix(uLuminosity, 1.0, light);\n  gl_FragColor = vec4(vColor * uColor * light, 1.0);\n}\n"}),this.sunPosition=this.uniforms.uSunPosition.value}}},30035:function(t,n,e){"use strict";e.d(n,{k:function(){return a}});var r=e(52471);let o=new r.Vector3;function i(t,n,e,r,i,a){let l=2*Math.PI*i/4,s=Math.max(a-2*i,0);o.copy(n),o[r]=0,o.normalize();let u=.5*l/(l+s),c=1-o.angleTo(t)/(Math.PI/4);return 1===Math.sign(o[e])?c*u:s/(l+s)+u+u*(1-c)}class a extends r.BoxGeometry{constructor(t=1,n=1,e=1,o=2,a=.1){if(o=2*o+1,a=Math.min(t/2,n/2,e/2,a),super(1,1,1,o,o,o),1===o)return;let l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;let s=new r.Vector3,u=new r.Vector3,c=new r.Vector3(t,n,e).divideScalar(2).subScalar(a),v=this.attributes.position.array,h=this.attributes.normal.array,d=this.attributes.uv.array,m=v.length/6,g=new r.Vector3,f=.5/o;for(let r=0,o=0;r<v.length;r+=3,o+=2)switch(s.fromArray(v,r),u.copy(s),u.x-=Math.sign(u.x)*f,u.y-=Math.sign(u.y)*f,u.z-=Math.sign(u.z)*f,u.normalize(),v[r+0]=c.x*Math.sign(s.x)+u.x*a,v[r+1]=c.y*Math.sign(s.y)+u.y*a,v[r+2]=c.z*Math.sign(s.z)+u.z*a,h[r+0]=u.x,h[r+1]=u.y,h[r+2]=u.z,Math.floor(r/m)){case 0:g.set(1,0,0),d[o+0]=i(g,u,"z","y",a,e),d[o+1]=1-i(g,u,"y","z",a,n);break;case 1:g.set(-1,0,0),d[o+0]=1-i(g,u,"z","y",a,e),d[o+1]=1-i(g,u,"y","z",a,n);break;case 2:g.set(0,1,0),d[o+0]=1-i(g,u,"x","z",a,t),d[o+1]=i(g,u,"z","x",a,e);break;case 3:g.set(0,-1,0),d[o+0]=1-i(g,u,"x","z",a,t),d[o+1]=1-i(g,u,"z","x",a,e);break;case 4:g.set(0,0,1),d[o+0]=1-i(g,u,"x","y",a,t),d[o+1]=1-i(g,u,"y","x",a,n);break;case 5:g.set(0,0,-1),d[o+0]=i(g,u,"x","y",a,t),d[o+1]=1-i(g,u,"y","x",a,n)}}}}},function(t){t.O(0,[5692,5244,6712,6666,5792,2452,7741,2722,9205,4940,4831,8181,9509,3144,2920,7936,1744],function(){return t(t.s=75038)}),_N_E=t.O()}]);