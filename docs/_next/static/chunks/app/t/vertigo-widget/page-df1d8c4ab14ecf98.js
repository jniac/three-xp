(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7029],{2862:(t,e,n)=>{Promise.resolve().then(n.bind(n,20695))},20695:(t,e,n)=>{"use strict";n.d(e,{Client:()=>u});var r=n(70691),a=n(49797),i=n(84306),o=n(9723),l=n(87381),s=n(25851);function c(){return(0,i.yk)(function*(t){(0,l.mj)(new a.eaF(new a.WBB(1,0),new o.Y),{parent:t.scene,x:-4}),(0,l.mj)(new s.XI,{parent:t.scene})},[]),null}function u(){return(0,r.jsx)(i.uB,{children:(0,r.jsxs)(i.zz,{children:[(0,r.jsx)("div",{className:"layer thru p-4",children:(0,r.jsx)("h1",{children:"Vertigo Widget"})}),(0,r.jsx)(c,{})]})})}},25851:(t,e,n)=>{"use strict";n.d(e,{Bn:()=>h,KJ:()=>l,XI:()=>y});var r=n(63126),a=n(49797),i=n(55551),o=n(38921),l=function(t){return t[t.BOX=0]="BOX",t[t.POSITIVE_X=1]="POSITIVE_X",t[t.NEGATIVE_X=2]="NEGATIVE_X",t[t.POSITIVE_Y=3]="POSITIVE_Y",t[t.NEGATIVE_Y=4]="NEGATIVE_Y",t[t.POSITIVE_Z=5]="POSITIVE_Z",t[t.NEGATIVE_Z=6]="NEGATIVE_Z",t}(l||{});function s(t,e){let n=new a.THS(new Int8Array(t.attributes.position.count).fill(e),1);t.setAttribute("aPartId",n)}function c(t,e,n){let r=new a.qFE(.2,.6000000000000001,t,n,!0).rotateZ(Math.PI).translate(0,.53,0),i=Array.from({length:e},(t,n)=>{let r=n/(e-1);return new a.I9Y(.2*r,-.05*(1-r**2))}),l=new a.nzx(i,t).rotateZ(Math.PI).translate(0,.2*3/2+.53,0);return(0,o.pP)([r,l],!1)}function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low",e="high"===t?(0,o.ec)(new i.j(.3,.3,.3,4,.05)):new a.iNn(.3,.3,.3);s(e,0);let n="high"===t?c(32,8,5):c(6,2,1);s(n,3);let r=n.clone().rotateX(Math.PI);s(r,4);let l=n.clone().rotateZ(-Math.PI/2);s(l,1);let u=n.clone().rotateZ(Math.PI/2);s(u,2);let h=n.clone().rotateX(Math.PI/2);s(h,5);let v=n.clone().rotateX(-Math.PI/2);return s(v,6),[e,l,u,n,r,h,v]}let h={defaultColor:"white",xColor:"#eb1640",yColor:"#00ffb7",zColor:"#3b80e7",hoverColor:"#fffc47"};function v(t){let{defaultColor:e,xColor:n,yColor:r,zColor:i,hoverColor:o}={...h,...t},l=new a.Q1f(e),s=new a.Q1f(n),c=new a.Q1f(r),u=new a.Q1f(i),v=new a.Q1f(o),d={uSunPosition:{value:new a.Pq0(.5,.7,.3)},uLuminosity:{value:.66},uColors:{value:[l,s,l,c,l,u,l]},uHoverColor:{value:v},uOpacity:{value:[1,1,1,1,1,1,1]},uHoverOpacity:{value:[0,0,0,0,0,0,0]}};return new a.BKk({uniforms:d,vertexShader:"\nuniform vec3 uColors[7];\nuniform float uOpacity[7];\nuniform vec3 uHoverColor;\nuniform float uHoverOpacity[7];\n\nattribute float aPartId;\n\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vColor = uColors[int(aPartId)];\n  vOpacity = uOpacity[int(aPartId)];\n  vHoverOpacity = uHoverOpacity[int(aPartId)];\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nuniform vec3 uSunPosition;\nuniform float uLuminosity;\nuniform vec3 uHoverColor;\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nfloat inverseLerp(float a, float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  \n  float minLuminosity = max(pow(vHoverOpacity, 1.0 / 3.0) * 0.85, uLuminosity);\n  light = mix(minLuminosity, 1.0, light);\n\n  vec3 color = vColor;\n  color = mix(color, uHoverColor, vHoverOpacity);\n  gl_FragColor = vec4(color * light, vOpacity);\n}\n",transparent:!0})}let d=new a.tBo;class y extends a.YJl{getHovered(){return this.internal.hovered}getPressed(){return this.internal.pressed}widgetUpdate(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/60,{lowMesh:o,material:l}=this.parts,s=new a.Pq0;n.getWorldDirection(s);let c=this.matrixWorld.elements,u=new a.Pq0(c[0],c[1],c[2]),h=new a.Pq0(c[4],c[5],c[6]),v=new a.Pq0(c[8],c[9],c[10]);{let t=l.uniforms.uOpacity.value,e=Math.abs(s.dot(u)),n=Math.abs(s.dot(h)),a=Math.abs(s.dot(v));t[1]=t[2]=(0,r.calculateExponentialDecay)(t[1],e<.98?1.05:-.05,1e-4,i),t[3]=t[4]=(0,r.calculateExponentialDecay)(t[3],n<.98?1.05:-.05,1e-4,i),t[5]=t[6]=(0,r.calculateExponentialDecay)(t[5],a<.98?1.05:-.05,1e-4,i)}{let t=l.uniforms.uHoverOpacity.value,e=+(0===this.internal.hovered),n=+(1===this.internal.hovered),a=+(2===this.internal.hovered),o=+(3===this.internal.hovered),s=+(4===this.internal.hovered),c=+(5===this.internal.hovered),u=+(6===this.internal.hovered);t[0]=(0,r.calculateExponentialDecay)(t[0],e,1e-4,i),t[1]=(0,r.calculateExponentialDecay)(t[1],n,1e-4,i),t[2]=(0,r.calculateExponentialDecay)(t[2],a,1e-4,i),t[3]=(0,r.calculateExponentialDecay)(t[3],o,1e-4,i),t[4]=(0,r.calculateExponentialDecay)(t[4],s,1e-4,i),t[5]=(0,r.calculateExponentialDecay)(t[5],c,1e-4,i),t[6]=(0,r.calculateExponentialDecay)(t[6],u,1e-4,i)}d.setFromCamera(t,n);let[y]=d.intersectObject(o,!0).map(t=>{let e=3*t.faceIndex;return o.geometry.groups.findIndex(t=>t.start<=e&&e<t.start+t.count)}).filter(t=>l.uniforms.uOpacity.value[t]>.5);e&&!1===this.internal.pointerDown&&(this.internal.pointerDown=!0,this.internal.pointerDownPosition.copy(t),this.internal.pressed=null!=y?y:null),e&&!1===this.internal.dragging&&this.internal.pointerDownPosition.distanceTo(t)>.01&&(this.internal.dragging=!0),!1===e&&this.internal.pointerDown&&(this.internal.pointerDown=!1,this.internal.dragging=!1,this.internal.pressed=null);let p=this.internal.dragging?null:null!=y?y:null;this.internal.hovered,this.internal.hovered=p}constructor(t){super(),this.internal={pointerPosition:new a.I9Y,pointerDownPosition:new a.I9Y,pointerDown:!1,dragging:!1,hovered:null,pressed:null};let e=v(null==t?void 0:t.material),n=u("high").map((t,n)=>{let r=new a.eaF(t,e);return r.name="vertigo-widget-mesh-".concat(n),this.add(r),r}),r=new a.eaF(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=u(...e);return(0,o.pP)(r,!0)}("low"),v(null==t?void 0:t.material));r.material.transparent=!1,r.name="vertigo-widget-low-mesh",r.visible=!1,this.add(r),this.parts={material:e,meshes:n,lowMesh:r}}}},39787:(t,e,n)=>{"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e.flat(2))"destroy"in t?t.destroy():t()}n.d(e,{e:()=>a,z:()=>r});class a{collect(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t of e)if(t)if(Symbol.iterator in t)for(let e of t)e&&this.destroyables.push(e);else this.destroyables.push(t)}constructor(){this.destroyables=[],this.destroy=()=>{r(this.destroyables),this.destroyables=[]}}}},55551:(t,e,n)=>{"use strict";n.d(e,{j:()=>o});var r=n(49797);let a=new r.Pq0;function i(t,e,n,r,i,o){let l=2*Math.PI*i/4,s=Math.max(o-2*i,0),c=Math.PI/4;a.copy(e),a[r]=0,a.normalize();let u=.5*l/(l+s),h=1-a.angleTo(t)/c;return 1===Math.sign(a[n])?h*u:s/(l+s)+u+u*(1-h)}class o extends r.iNn{constructor(t=1,e=1,n=1,a=2,o=.1){if(a=2*a+1,o=Math.min(t/2,e/2,n/2,o),super(1,1,1,a,a,a),1===a)return;let l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;let s=new r.Pq0,c=new r.Pq0,u=new r.Pq0(t,e,n).divideScalar(2).subScalar(o),h=this.attributes.position.array,v=this.attributes.normal.array,d=this.attributes.uv.array,y=h.length/6,p=new r.Pq0,f=.5/a;for(let r=0,a=0;r<h.length;r+=3,a+=2)switch(s.fromArray(h,r),c.copy(s),c.x-=Math.sign(c.x)*f,c.y-=Math.sign(c.y)*f,c.z-=Math.sign(c.z)*f,c.normalize(),h[r+0]=u.x*Math.sign(s.x)+c.x*o,h[r+1]=u.y*Math.sign(s.y)+c.y*o,h[r+2]=u.z*Math.sign(s.z)+c.z*o,v[r+0]=c.x,v[r+1]=c.y,v[r+2]=c.z,Math.floor(r/y)){case 0:p.set(1,0,0),d[a+0]=i(p,c,"z","y",o,n),d[a+1]=1-i(p,c,"y","z",o,e);break;case 1:p.set(-1,0,0),d[a+0]=1-i(p,c,"z","y",o,n),d[a+1]=1-i(p,c,"y","z",o,e);break;case 2:p.set(0,1,0),d[a+0]=1-i(p,c,"x","z",o,t),d[a+1]=i(p,c,"z","x",o,n);break;case 3:p.set(0,-1,0),d[a+0]=1-i(p,c,"x","z",o,t),d[a+1]=1-i(p,c,"z","x",o,n);break;case 4:p.set(0,0,1),d[a+0]=1-i(p,c,"x","y",o,t),d[a+1]=1-i(p,c,"y","x",o,e);break;case 5:p.set(0,0,-1),d[a+0]=i(p,c,"x","y",o,t),d[a+1]=1-i(p,c,"y","x",o,e)}}}}},t=>{var e=e=>t(t.s=e);t.O(0,[2193,5611,7190,7223,9635,8921,4957,7775,16,9547,4638,6726,2598,7373,5795,4266,1023,7558,1319,6852,7358],()=>e(2862)),_N_E=t.O()}]);