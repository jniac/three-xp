(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2507],{14178:(e,t,n)=>{Promise.resolve().then(n.bind(n,65897))},16008:(e,t,n)=>{"use strict";n.d(t,{Bn:()=>v,KJ:()=>l,XI:()=>y});var i=n(63126),r=n(49797),o=n(55551),a=n(38921),l=function(e){return e[e.BOX=0]="BOX",e[e.POSITIVE_X=1]="POSITIVE_X",e[e.NEGATIVE_X=2]="NEGATIVE_X",e[e.POSITIVE_Y=3]="POSITIVE_Y",e[e.NEGATIVE_Y=4]="NEGATIVE_Y",e[e.POSITIVE_Z=5]="POSITIVE_Z",e[e.NEGATIVE_Z=6]="NEGATIVE_Z",e}(l||{});function s(e,t){let n=new r.THS(new Int8Array(e.attributes.position.count).fill(t),1);e.setAttribute("aPartId",n)}function u(e,t,n){let i=new r.qFE(.2,.6000000000000001,e,n,!0).rotateZ(Math.PI).translate(0,.53,0),o=Array.from({length:t},(e,n)=>{let i=n/(t-1);return new r.I9Y(.2*i,-.05*(1-i**2))}),l=new r.nzx(o,e).rotateZ(Math.PI).translate(0,.2*3/2+.53,0);return(0,a.pP)([i,l],!1)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low",t="high"===e?(0,a.ec)(new o.j(.3,.3,.3,4,.05)):new r.iNn(.3,.3,.3);s(t,0);let n="high"===e?u(32,8,5):u(6,2,1);s(n,3);let i=n.clone().rotateX(Math.PI);s(i,4);let l=n.clone().rotateZ(-Math.PI/2);s(l,1);let c=n.clone().rotateZ(Math.PI/2);s(c,2);let v=n.clone().rotateX(Math.PI/2);s(v,5);let h=n.clone().rotateX(-Math.PI/2);return s(h,6),[t,l,c,n,i,v,h]}let v={defaultColor:"white",xColor:"#eb1640",yColor:"#00ffb7",zColor:"#3b80e7",hoverColor:"#fffc47"};function h(e){let{defaultColor:t,xColor:n,yColor:i,zColor:o,hoverColor:a}={...v,...e},l=new r.Q1f(t),s=new r.Q1f(n),u=new r.Q1f(i),c=new r.Q1f(o),h=new r.Q1f(a),d={uSunPosition:{value:new r.Pq0(.5,.7,.3)},uLuminosity:{value:.66},uColors:{value:[l,s,l,u,l,c,l]},uHoverColor:{value:h},uOpacity:{value:[1,1,1,1,1,1,1]},uHoverOpacity:{value:[0,0,0,0,0,0,0]}};return new r.BKk({uniforms:d,vertexShader:"\nuniform vec3 uColors[7];\nuniform float uOpacity[7];\nuniform vec3 uHoverColor;\nuniform float uHoverOpacity[7];\n\nattribute float aPartId;\n\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vColor = uColors[int(aPartId)];\n  vOpacity = uOpacity[int(aPartId)];\n  vHoverOpacity = uHoverOpacity[int(aPartId)];\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nuniform vec3 uSunPosition;\nuniform float uLuminosity;\nuniform vec3 uHoverColor;\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nfloat inverseLerp(float a, float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  \n  float minLuminosity = max(pow(vHoverOpacity, 1.0 / 3.0) * 0.85, uLuminosity);\n  light = mix(minLuminosity, 1.0, light);\n\n  vec3 color = vColor;\n  color = mix(color, uHoverColor, vHoverOpacity);\n  gl_FragColor = vec4(color * light, vOpacity);\n}\n",transparent:!0})}let d=new r.tBo;class y extends r.YJl{getHovered(){return this.internal.hovered}getPressed(){return this.internal.pressed}widgetUpdate(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/60,{lowMesh:a,material:l}=this.parts,s=new r.Pq0;n.getWorldDirection(s);let u=this.matrixWorld.elements,c=new r.Pq0(u[0],u[1],u[2]),v=new r.Pq0(u[4],u[5],u[6]),h=new r.Pq0(u[8],u[9],u[10]);{let e=l.uniforms.uOpacity.value,t=Math.abs(s.dot(c)),n=Math.abs(s.dot(v)),r=Math.abs(s.dot(h));e[1]=e[2]=(0,i.calculateExponentialDecay)(e[1],t<.98?1.05:-.05,1e-4,o),e[3]=e[4]=(0,i.calculateExponentialDecay)(e[3],n<.98?1.05:-.05,1e-4,o),e[5]=e[6]=(0,i.calculateExponentialDecay)(e[5],r<.98?1.05:-.05,1e-4,o)}{let e=l.uniforms.uHoverOpacity.value,t=+(0===this.internal.hovered),n=+(1===this.internal.hovered),r=+(2===this.internal.hovered),a=+(3===this.internal.hovered),s=+(4===this.internal.hovered),u=+(5===this.internal.hovered),c=+(6===this.internal.hovered);e[0]=(0,i.calculateExponentialDecay)(e[0],t,1e-4,o),e[1]=(0,i.calculateExponentialDecay)(e[1],n,1e-4,o),e[2]=(0,i.calculateExponentialDecay)(e[2],r,1e-4,o),e[3]=(0,i.calculateExponentialDecay)(e[3],a,1e-4,o),e[4]=(0,i.calculateExponentialDecay)(e[4],s,1e-4,o),e[5]=(0,i.calculateExponentialDecay)(e[5],u,1e-4,o),e[6]=(0,i.calculateExponentialDecay)(e[6],c,1e-4,o)}d.setFromCamera(e,n);let[y]=d.intersectObject(a,!0).map(e=>{let t=3*e.faceIndex;return a.geometry.groups.findIndex(e=>e.start<=t&&t<e.start+e.count)}).filter(e=>l.uniforms.uOpacity.value[e]>.5);t&&!1===this.internal.pointerDown&&(this.internal.pointerDown=!0,this.internal.pointerDownPosition.copy(e),this.internal.pressed=null!=y?y:null),t&&!1===this.internal.dragging&&this.internal.pointerDownPosition.distanceTo(e)>.01&&(this.internal.dragging=!0),!1===t&&this.internal.pointerDown&&(this.internal.pointerDown=!1,this.internal.dragging=!1,this.internal.pressed=null);let f=this.internal.dragging?null:null!=y?y:null;this.internal.hovered,this.internal.hovered=f}constructor(e){super(),this.internal={pointerPosition:new r.I9Y,pointerDownPosition:new r.I9Y,pointerDown:!1,dragging:!1,hovered:null,pressed:null};let t=h(null==e?void 0:e.material),n=c("high").map((e,n)=>{let i=new r.eaF(e,t);return i.name="vertigo-widget-mesh-".concat(n),this.add(i),i}),i=new r.eaF(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=c(...t);return(0,a.pP)(i,!0)}("low"),h(null==e?void 0:e.material));i.material.transparent=!1,i.name="vertigo-widget-low-mesh",i.visible=!1,this.add(i),this.parts={material:t,meshes:n,lowMesh:i}}}},16465:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var i=n(49797),r=n(7147);let o={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class a extends i.V9B{constructor(e){let{rampPower:t,shadowColor:n,luminosity:a,onBeforeCompile:l,...s}={...o,...e},u={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uShadowColor:{value:new i.Q1f(n)},uRampPower:{value:t},uLuminosity:{value:a}};super(s),this.onBeforeCompile=e=>{r.bI.with(e).uniforms(u).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vWorldNormal = mat3(instanceMatrix) * vWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==l||l(e)},this.sunPosition=u.uSunPosition.value}}},55551:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var i=n(49797);let r=new i.Pq0;function o(e,t,n,i,o,a){let l=2*Math.PI*o/4,s=Math.max(a-2*o,0),u=Math.PI/4;r.copy(t),r[i]=0,r.normalize();let c=.5*l/(l+s),v=1-r.angleTo(e)/u;return 1===Math.sign(r[n])?v*c:s/(l+s)+c+c*(1-v)}class a extends i.iNn{constructor(e=1,t=1,n=1,r=2,a=.1){if(r=2*r+1,a=Math.min(e/2,t/2,n/2,a),super(1,1,1,r,r,r),1===r)return;let l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;let s=new i.Pq0,u=new i.Pq0,c=new i.Pq0(e,t,n).divideScalar(2).subScalar(a),v=this.attributes.position.array,h=this.attributes.normal.array,d=this.attributes.uv.array,y=v.length/6,f=new i.Pq0,p=.5/r;for(let i=0,r=0;i<v.length;i+=3,r+=2)switch(s.fromArray(v,i),u.copy(s),u.x-=Math.sign(u.x)*p,u.y-=Math.sign(u.y)*p,u.z-=Math.sign(u.z)*p,u.normalize(),v[i+0]=c.x*Math.sign(s.x)+u.x*a,v[i+1]=c.y*Math.sign(s.y)+u.y*a,v[i+2]=c.z*Math.sign(s.z)+u.z*a,h[i+0]=u.x,h[i+1]=u.y,h[i+2]=u.z,Math.floor(i/y)){case 0:f.set(1,0,0),d[r+0]=o(f,u,"z","y",a,n),d[r+1]=1-o(f,u,"y","z",a,t);break;case 1:f.set(-1,0,0),d[r+0]=1-o(f,u,"z","y",a,n),d[r+1]=1-o(f,u,"y","z",a,t);break;case 2:f.set(0,1,0),d[r+0]=1-o(f,u,"x","z",a,e),d[r+1]=o(f,u,"z","x",a,n);break;case 3:f.set(0,-1,0),d[r+0]=1-o(f,u,"x","z",a,e),d[r+1]=1-o(f,u,"z","x",a,n);break;case 4:f.set(0,0,1),d[r+0]=1-o(f,u,"x","y",a,e),d[r+1]=1-o(f,u,"y","x",a,t);break;case 5:f.set(0,0,-1),d[r+0]=o(f,u,"x","y",a,e),d[r+1]=1-o(f,u,"y","x",a,t)}}}},63106:(e,t,n)=>{"use strict";function i(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{a:()=>l});let r={preventDefault:!1,strictTarget:void 0},o={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:"",phase:"down"},a=0;function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let l=a++,[s,u,c]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:v}={...r,...u},h=null,d=e=>{var t;if((null!=(t=u.strictTarget)?!!t:s===document.body)&&e.target!==s)return;"keydown"===e.type&&(h=e);let{ctrlKey:n=!1,altKey:r=!1,shiftKey:a=!1,metaKey:d=!1}=null!=h?h:{},y={id:l,event:e,downEvent:h,modifiers:{ctrl:n,alt:r,shift:a,meta:d}};for(let t=0,l=c.length;t<l;t++){let[l,s]=c[t],{key:u,keyCaseInsensitive:f,code:p,noModifiers:m,modifiers:g,phase:w="down"}=function(e){let t="string"==typeof e?{...o,key:e}:{...o,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(l);switch(e.type){case"keydown":if("down"!==w)continue;break;case"keyup":if("up"!==w)continue}Object.values({key:i(f?e.key.toLowerCase():e.key,u),code:i(e.code,p),noModifiers:!m||!1===n&&!1===r&&!1===a&&!1===d,modifiers:function(e,t){let{ctrlKey:n,altKey:i,shiftKey:r,metaKey:o}=e;if("function"==typeof t)return t({ctrl:n,alt:i,shift:r,meta:o});let{ctrl:a=!1,alt:l=!1,shift:s=!1,meta:u=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return a===n&&l===i&&s===r&&u===o}(h,g)}).every(Boolean)&&(v&&e.preventDefault(),s(y))}};return s.addEventListener("keydown",d,{passive:!1}),s.addEventListener("keyup",d,{passive:!1}),{destroy:()=>{s.removeEventListener("keydown",d),s.removeEventListener("keyup",d)}}}},65897:(e,t,n)=>{"use strict";n.d(t,{Client:()=>c});var i=n(70691),r=n(49797),o=n(84306),a=n(16465),l=n(79911),s=n(16008);function u(){return(0,o.yk)(function*(e){(0,l.mj)(new r.eaF(new r.WBB(1,0),new a.Y),{parent:e.scene,x:-4}),(0,l.mj)(new s.XI,{parent:e.scene})},[]),null}function c(){return(0,i.jsx)(o.uB,{children:(0,i.jsxs)(o.zz,{children:[(0,i.jsx)("div",{className:"layer thru p-4",children:(0,i.jsx)("h1",{children:"Vertigo Widget"})}),(0,i.jsx)(u,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2193,5611,7190,7962,9635,8921,4512,7775,7436,7706,146,6726,3445,9332,3414,2143,7558,1319,6852,7358],()=>t(14178)),_N_E=e.O()}]);