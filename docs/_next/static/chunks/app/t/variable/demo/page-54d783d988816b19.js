(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{1e3:(e,t,i)=>{"use strict";function r(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}i.d(t,{_:()=>r})},15940:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(29443);function s(e,t){(0,r._)(e,t),t.add(e)}},21984:(e,t,i)=>{"use strict";i.d(t,{T:()=>u,b:()=>o});var r=i(70691),s=i(67203),n=i(79285),a=i(49797),o=function(e){return e[e.Line=1]="Line",e[e.GaussianLine=2]="GaussianLine",e[e.Fill=4]="Fill",e[e.GaussianFill=8]="GaussianFill",e}({});let l={width:600,height:200,yRange:"auto",strokeWidth:2,curveMode:1,colors:["#56aaff","#ff56b6","#fffc56"]};function h(e){var t;let{variable:i,yRange:s,width:o,height:h,strokeWidth:u,curveMode:d,colors:p}={...l,...e},c=Array.isArray(i)?i[0]:i,f="auto"===s?(()=>{let e=c.historyInfo();return[e.min,e.max]})():s,m=10&d?c.gaussianSmoothSamples(100):null,g=null!=(t=null==m?void 0:m.map((e,t,i)=>{let r=(0,n.remap)(t,0,i.length-1,o,0),s=(0,n.remap)(e,f[0],f[1],h,0);return"".concat(r,",").concat(s)}))?t:null,y=Array.isArray(p)?p[0]:p;return(0,r.jsxs)(r.Fragment,{children:[8&d&&(0,r.jsx)("polygon",{fill:"#".concat(new a.Q1f(y).getHexString()),points:[...g,"".concat(0,",").concat(h),"".concat(o,",").concat(h)].join(" ")}),2&d&&(0,r.jsx)("polyline",{fill:"none",stroke:"#".concat(new a.Q1f(y).getHexString()),strokeWidth:u,points:g.join(" ")}),1&d&&(0,r.jsx)("path",{d:c.toSvgPathData({width:o,height:h,yRange:f}),fill:"none",stroke:"#".concat(new a.Q1f(y).getHexString()),strokeWidth:u})]})}function u(e){let{children:t,...i}=e,{variable:n,yRange:a,width:o,height:u,strokeWidth:d}={...l,...i},[p,c]=(0,s.useState)(a),f=Array.isArray(n)?n:[n];return(0,r.jsx)("div",{onClick:()=>{"auto"!==a&&c(e=>"auto"===e?a:"auto")},children:(0,r.jsxs)("svg",{width:o,height:u,style:{backgroundColor:"#111"},children:[f.map((e,t)=>{var s;return(0,r.jsxs)("g",{children:[(0,r.jsx)(h,{...i,yRange:p}),e.derivative&&(0,r.jsx)("path",{d:e.derivative.toSvgPathData({width:o,height:u,yRange:p}),fill:"none",stroke:"#ff56b6",strokeWidth:d}),(null==(s=e.derivative)?void 0:s.derivative)&&(0,r.jsx)("path",{d:e.derivative.derivative.toSvgPathData({width:o,height:u,yRange:p}),fill:"none",stroke:"#fffc56",strokeWidth:d,opacity:.1})]},t)}),t,(0,r.jsx)("text",{x:10,y:24,fill:"white",fontSize:16,children:f.map(e=>e.props.name).join(", ")}),(0,r.jsxs)("text",{x:10,y:41,fill:"white",fontSize:11,opacity:.2,children:[f[0].count,":",f[0].props.historySize," (",f.map(e=>e.get().toFixed(1)).join(", "),")"]}),"auto"!==a&&(0,r.jsxs)("text",{x:10,y:56,fill:"white",fontSize:11,opacity:.2,children:["(click to ","auto"===p?"fix":"auto-adjust"," Y range)"]})]})})}},23127:(e,t,i)=>{"use strict";i.d(t,{_:()=>a});var r=i(89868),s=i(47878),n=i(1e3);function a(e,t,i){return(0,s._)(e,t),(0,n._)(i,"update"),(0,r._)(e,i)}},24223:(e,t,i)=>{"use strict";function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,s]=1===t.length?[window,t[0]]:t,n=()=>{s()};return r.addEventListener("mousemove",n,{passive:!0}),r.addEventListener("mousedown",n,{passive:!0}),r.addEventListener("mouseup",n,{passive:!0}),r.addEventListener("touchstart",n,{passive:!0}),r.addEventListener("touchmove",n,{passive:!0}),r.addEventListener("wheel",n,{passive:!0}),r.addEventListener("keydown",n,{passive:!0}),r.addEventListener("keyup",n,{passive:!0}),window.addEventListener("resize",n,{passive:!0}),{destroy:()=>{r.removeEventListener("mousemove",n),r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",n),r.removeEventListener("touchstart",n),r.removeEventListener("touchmove",n),r.removeEventListener("wheel",n),r.removeEventListener("keydown",n),r.removeEventListener("keyup",n),window.removeEventListener("resize",n)}}}i.d(t,{O:()=>r})},28535:(e,t,i)=>{"use strict";i.d(t,{_:()=>n});var r=i(75687),s=i(44138);function n(e,t){var i=(0,s._)(e,t,"get");return(0,r._)(e,i)}},29443:(e,t,i)=>{"use strict";function r(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{_:()=>r})},31623:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var r=i(67203);let s=0,n=()=>{let[,e]=(0,r.useState)(s);return(0,r.useCallback)(()=>e(++s),[])}},44138:(e,t,i)=>{"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{_:()=>r})},46725:(e,t,i)=>{Promise.resolve().then(i.bind(i,53281))},47878:(e,t,i)=>{"use strict";function r(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}i.d(t,{_:()=>r})},53281:(e,t,i)=>{"use strict";i.d(t,{PageClient:()=>p});var r=i(70691),s=i(67203),n=i(24223),a=i(99332),o=i(18479),l=i(31623),h=i(71936),u=i(36508),d=i(21984);function p(){let e=(0,s.useMemo)(()=>(function(){let{historySize:e=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new h.k({name:"X",historySize:e,derivativeCount:2});for(let i=0;i<2*e;i++){let r=2*Math.PI/(e-1),s=i*r;t.push(Math.sin(s),r)}let i=new h.k({name:"power-2",historySize:e,derivativeCount:2});for(let t=0;t<2*e;t++){let r=1/(2*e),s=(t*r-.5)*4;i.push(Math.pow(s,2),4*r)}let r=new h.k({name:"wheel",historySize:e,derivativeCount:2}),s=new h.k({name:"pointerY",historySize:e,derivativeCount:0});return{sinVar:t,powVar:i,wheelVar:r,pointerXVar:new h.k({name:"pointerX",historySize:e,derivativeCount:0}),pointerYVar:s}})({historySize:200}),[]),t=(0,l.A)(),{ref:i}=(0,o.useEffects)(function*(i){let r=0,s=0,o={x:0,y:0};yield(0,a.s)(i,{onChange:e=>{o.x=e.position.x,o.y=e.position.y},onWheel:e=>{r+=e.delta.y}}),yield(0,n.O)(u.Rv.current().requestActivation),yield(0,u.xy)(i=>{s+=r,r=0,e.wheelVar.push(s,i.deltaTime),e.pointerXVar.push(o.x,i.deltaTime),e.pointerYVar.push(o.y,i.deltaTime),t()})},[]);return(0,r.jsxs)("div",{ref:i,className:"p-16 flex flex-col gap-8 overflow-y-auto h-screen",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Variable Demo Page"}),(0,r.jsx)("p",{className:"max-w-prose",children:"Float32Variable is a time-series variable that keeps a history of pushed values, and can compute derivatives. Click on the graphs to toggle Y range auto-adjustment."}),(0,r.jsxs)("div",{className:"flex flex-row flex-wrap gap-2",children:[(0,r.jsx)(d.T,{variable:e.sinVar,yRange:[-1.5,1.5]}),(0,r.jsx)(d.T,{variable:e.powVar,yRange:[0,4],height:400}),(0,r.jsx)(d.T,{variable:e.wheelVar,height:400,yRange:[-8e3,8e3]}),(0,r.jsx)(d.T,{variable:[e.pointerXVar,e.pointerYVar],height:400,yRange:[0,Math.max(window.innerWidth,window.innerHeight)]})]})]})}},57368:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(44138);function s(e,t,i){var s=(0,r._)(e,t,"set");if(s.set)s.set.call(e,i);else{if(!s.writable)throw TypeError("attempted to set read only private field");s.value=i}return i}},66066:(e,t,i)=>{"use strict";function r(e,t,i){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return i}i.d(t,{_:()=>r})},71936:(e,t,i)=>{"use strict";i.d(t,{k:()=>s});let r={name:"unnamed",initialValue:0,historySize:100,derivativeCount:0};class s{get name(){return this.props.name}get count(){return this.state.count}get actualCount(){return Math.min(this.state.count,this.props.historySize)}reset(e){var t;return this.state.index=0,this.state.count=1,this.historyNumber.fill(e),null==(t=this.derivative)||t.reset(0),this}push(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(i<=0)return console.warn("deltaTime must be positive. Ignoring push."),this;let{historySize:r}=this.props,{index:s}=this.state;return this.historyNumber[s]=e,this.state.index=(s+1)%r,this.state.count++,null==(t=this.derivative)||t.push((e-this.get(1))/i,i),this}createHistory(e){let{historySize:t}=this.props;this.reset(e(-1/(t-1)));for(let i=0;i<t;i++){let r=i/(t-1);this.push(e(r),1/(t-1))}return this}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{historySize:t}=this.props;e<0&&(e=0),e>=t&&(e=t-1);let i=this.state.index-1-e;return i<0&&(i+=t),this.historyNumber[i]}linearSample(e){let t=e-Math.floor(e),i=Math.floor(e);return this.get(i)*(1-t)+this.get(i+1)*t}linearSamples(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=Array(e);for(let i=0;i<e;i++){let r=i/(e-1);t[i]=this.linearSample(r*(this.props.historySize-1))}return t}gaussianSmoothSample(e){let{stdDev:t=1,sampleCount:i=10,sampleHistoryWidth:r=.1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r*this.props.historySize*.5,n=0,a=0;for(let r=0;r<i;r++){let o=s*(r/(i-1)*2-1),l=e-o,h=this.linearSample(l),u=Math.exp(-(o*o*.5)/(t*t));n+=h*u,a+=u}return n/a}gaussianSmoothSamples(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,i=Array(e);for(let r=0;r<e;r++){let s=r/(e-1);i[r]=this.gaussianSmoothSample(s*(this.props.historySize-1),t)}return i}*history(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.historySize,{wrapMode:t="end"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{historySize:i}=this.props,{count:r}=this.state;e=Math.min(e,i);for(let i=0;i<e&&(!(i>=r)||"end"!==t);i++)yield this.get(i)}historyInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.historySize,{wrapMode:t="end"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=1/0,r=-1/0,s=0,n=0;for(let a of this.history(e,{wrapMode:t}))n++,s+=a,a<i&&(i=a),a>r&&(r=a);return{actualCount:n,min:i,max:r,sum:s,average:s/n}}toSvgPathData(){let{offsetX:e=0,offsetY:t=0,width:i=100,height:r=100,yRange:s="auto"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,a]=(()=>{if("auto"===s){let e=this.historyInfo();return[e.min,e.max]}return s})();if(0==a-n)return"";let{historySize:o}=this.props,{count:l}=this.state,h=Math.min(o,l);if(h<2)return"";let u=e=>e.toFixed(2).replace(/\.?0+$/,""),d=[];for(let s=0;s<h;s++){let o=s/(h-1),l=(this.get(h-1-s)-n)/(a-n),p=e+o*i,c=t+(1-l)*r,f=0===s?"M":"L";isNaN(c)||isFinite(c),d.push("".concat(f).concat(u(p),",").concat(u(c)))}return d.join(" ")}constructor(e,t){var i,n;this.state={index:0,count:1},this.derivative=null,this.antiderivative=null;let a=null!=(n=null!=(i=null==e?void 0:e.name)?i:(null==t?void 0:t.props.name)&&"".concat(t.props.name,"'"))?n:"unnamed";if(this.props={...r,...e,name:a},this.props.historySize<1)throw Error("historySize must be at least 1");this.historyNumber=new Float32Array(this.props.historySize),this.reset(this.props.initialValue),this.props.derivativeCount>0&&(this.derivative=new s({historySize:this.props.historySize,derivativeCount:this.props.derivativeCount-1},this))}}},75687:(e,t,i)=>{"use strict";function r(e,t){return t.get?t.get.call(e):t.value}i.d(t,{_:()=>r})},76999:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var r=i(29443);function s(e,t,i){(0,r._)(e,t),t.set(e,i)}},77674:(e,t,i)=>{"use strict";i.d(t,{_:()=>a});var r=i(75687),s=i(47878),n=i(1e3);function a(e,t,i){return(0,s._)(e,t),(0,n._)(i,"get"),(0,r._)(e,i)}},89868:(e,t,i)=>{"use strict";function r(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}i.d(t,{_:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[5611,146,487,9332,1319,6852,7358],()=>t(46725)),_N_E=e.O()}]);