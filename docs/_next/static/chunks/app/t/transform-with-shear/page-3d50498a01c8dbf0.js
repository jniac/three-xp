(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9561],{16465:(t,e,r)=>{"use strict";r.d(e,{Y:()=>s});var n=r(49797),o=r(7147);let i={shadowColor:"#808080",luminosity:1,rampPower:1,onBeforeCompile:void 0};class s extends n.V9B{constructor(t){let{rampPower:e,shadowColor:r,luminosity:s,onBeforeCompile:a,...l}={...i,...t},h={uSunPosition:{value:new n.Pq0(.5,.7,.3)},uShadowColor:{value:new n.Q1f(r)},uRampPower:{value:e},uLuminosity:{value:s}};super(l),this.onBeforeCompile=t=>{o.bI.with(t).uniforms(h).varying({vAutoLitWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vAutoLitWorldNormal = mat3(modelMatrix) * normal;\n          #ifdef USE_INSTANCING\n            vAutoLitWorldNormal = mat3(instanceMatrix) * vAutoLitWorldNormal;\n          #endif\n        ").fragment.after("map_fragment","\n          vec3 normal = normalize(vAutoLitWorldNormal);\n          vec3 lightDirection = normalize(uSunPosition);\n          float light = dot(normal, lightDirection) * 0.5 + 0.5;\n          light = pow(light, uRampPower);\n          diffuseColor.rgb *= mix(uShadowColor * uLuminosity, vec3(1.0), light);\n        "),null==a||a(t)},this.sunPosition=h.uSunPosition.value}}},42220:(t,e,r)=>{"use strict";r.d(e,{Client:()=>P});var n=r(70691),o=r(49797),i=r(33540),s=r(77794),a=r(79911),l=r(2210),h=r(34011),u=r(13160),f=r(16465),c=r(79285),m=r(4941),d=r(38062),x=r(80446);r(18479);var b=r(31763),w=r(67235);r(36508);class g extends o.YJl{constructor(t="white"){super();let{torusKnotGeometry:e,axesGeometry:r,autoLitVertexColorsMaterial:n,cubeGeometry:i}=g.shared;(0,a.mj)(new o.eaF(e,new f.Y({color:t})),this),(0,a.mj)(new o.eaF(r,n),this),(0,a.mj)(new o.DXC(i,new o.mrM({color:t})),this)}}function p(t){let{children:e}=t;return(0,n.jsx)("div",{className:"ui layer thru p-8 flex flex-col gap-4 items-start",children:(0,n.jsx)("div",{className:"max-w-md flex flex-col gap-2 items-start p-4 backdrop-blur rounded-xl border border-white/10 bg-white/2",children:e})})}function j(t){let{label:e="Button",onClick:r=()=>{}}=t;return(0,n.jsx)("button",{className:"btn border rounded px-2 py-1 hover:bg-white/10 active:bg-white/20",onClick:r,children:e})}function v(){return(0,n.jsxs)(p,{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Matrix with Shear"}),(0,n.jsx)("p",{children:"Transform interpolation (lerp) between two random transforms using TransformWithShear (some-utils-three/experimental/transform-with-shear)."}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"text-[#ff99ff]",children:"Pink color"})," indicates that the two transforms are not both direct or both indirect (reflection)."]}),(0,n.jsx)("p",{children:"Based on research here:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"underline hover:text-[cyan]",href:"/l/transform-with-shear/0-intro",children:"0-intro"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"underline hover:text-[cyan]",href:"/l/transform-with-shear/1-shear",children:"1-shear"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"underline hover:text-[cyan]",href:"/l/transform-with-shear/2-decompose",children:"2-decompose"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"underline hover:text-[cyan]",href:"/l/transform-with-shear/3-transform-with-shear",children:"3-transform-with-shear"})})]}),(0,n.jsx)("div",{className:"basis-2"}),(0,n.jsx)(j,{label:"Orthographic (reset)",onClick:()=>{w.Q.send(b.n).assertPayload().vertigo.set({perspective:0,zoom:.98,focus:0,rotation:0})}}),(0,n.jsx)(j,{label:"Perspective",onClick:()=>{w.Q.send(b.n).assertPayload().vertigo.set({perspective:1})}})]})}g.shared={torusKnotGeometry:new o.UPV(.15,.07,256,64),axesGeometry:new h.k,cubeGeometry:u.Q.setAsBounds(new o.LoY,0,1),autoLitVertexColorsMaterial:new f.Y({vertexColors:!0})},o.YJl;class y extends o.YJl{setColor(t){return this.box.material.color.set(t),this.axes.material.color.set(t),this.knot.material.color.set(t),this}setTransform(t){return this.matrixAutoUpdate=!1,this.transform.setTransform(t).toMatrix(this.matrix),this}constructor(t){super(),this.box=(0,a.mj)(new o.DXC(u.Q.setAsBounds(null,-1,1),new o.mrM),this),this.axes=(0,a.mj)(new o.eaF(y.shared.axesGeometry,new f.Y({vertexColors:!0})),this),this.knot=(0,a.mj)(new o.eaF(y.shared.knotGeometry,new f.Y),this),this.transform=new l.d,t&&this.setColor(t)}}y.shared={axesGeometry:new h.k({radius:.04,coneRatio:.2,length:1}),knotGeometry:new o.UPV(.3,.1,512,64)};class M extends o.YJl{onTick(t){let e=m.kY.inOut3((0,c.inverseLerp)(.05,.95,d.o.triangle(t.time,{f:.2})));this.objC.matrixAutoUpdate=!1,this.useMatrixInterpolation?l.d.lerpMatrixes(this.objA.matrix,this.objB.matrix,e,this.objC.matrix):this.objC.transform.lerpTransforms(this.objA.transform,this.objB.transform,e).toMatrix(this.objC.matrix),this.objC.setColor(this.objA.transform.isDirect()===this.objB.transform.isDirect()?"white":"#ff99ff")}constructor(){super(),this.useMatrixInterpolation=!0,this.objA=(0,a.mj)(new y("yellow"),this),this.objB=(0,a.mj)(new y("cyan"),this),this.objC=(0,a.mj)(new y,this),this.objA.setTransform({position:[-2,0,0]}),this.objB.setTransform({position:[2,0,0]})}}function C(){return(0,i.dB)("demo-1",function*(t){(0,a.mj)(new s.u,t).regularGrid({size:8,subdivisions:[2,4],opacity:[1,.1]}).text(0,"matrix-to-matrix",{color:"white"});let e=(0,a.mj)(new M,t);e.objA.setTransform({rotation:["9deg","0deg","20deg"],shear:[1,0,0]}),e.objB.setTransform({scale:[1,-2,.5],rotation:["-10deg","70deg",0],shear:[0,1,0]}),x.n.setRandom("parkmiller",1234);for(let e=0;e<3;e++)for(let r of[-1,1]){let n=(0,a.mj)(new M,t);n.position.y=4*(e+1)*r,n.objA.setTransform({position:[x.n.number(-3,-1),x.n.number(-1,1),x.n.number(-1,1)],scale:[x.n.number(-1,1),x.n.number(-1,1),x.n.number(-1,1)],rotation:x.n.quaternion(),shear:[x.n.number(-1,1),x.n.number(-1,1),x.n.number(-1,1)]}),n.objB.setTransform({position:[x.n.number(1,3),x.n.number(-1,1),x.n.number(-1,1)],scale:[x.n.number(-1,1),x.n.number(-1,1),x.n.number(-1,1)],rotation:x.n.quaternion(),shear:[x.n.number(-1,1),x.n.number(-1,1),x.n.number(-1,1)]})}},[]),null}function N(){return(0,i.dB)("demo-2",function*(t){(0,a.mj)(t,{x:12}),(0,a.mj)(new s.u,t).regularGrid({size:8,subdivisions:[2,4],opacity:[1,.1]}).text(0,"scaleFactor",{color:"white"});let e=(0,a.mj)(new M,t);e.objA.setTransform({rotation:[0,"-90deg",0]}),e.objB.setTransform({rotation:[0,"90deg",0],shear:[1,1,0],scaleFactor:1.5})},[]),null}function A(){return(0,i.Fw)(function*(t){t.pipeline.basicPasses.fxaa.enabled=!1}),(0,i.dB)("my-scene",function*(t,e){},[]),null}function P(){return(0,n.jsxs)(i.uB,{vertigoControls:{eventTarget:"canvas",size:8,zoom:.75,rotation:["-5deg","10deg",0],focus:[0,0,1.5]},children:[(0,n.jsx)(v,{}),(0,n.jsx)(A,{}),(0,n.jsx)(C,{}),(0,n.jsx)(N,{})]})}},66489:(t,e,r)=>{Promise.resolve().then(r.bind(r,42220))},66620:(t,e,r)=>{"use strict";r.d(e,{_:()=>i});var n=r(89868),o=r(44138);function i(t,e){var r=(0,o._)(t,e,"update");return(0,n._)(t,r)}},79105:(t,e,r)=>{"use strict";r.d(e,{K2:()=>s,KP:()=>o,Tj:()=>a,Ts:()=>i,Zu:()=>n});let n=0x7fffffff,o=123456,i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(Number.isNaN(t))throw Error("NaN is not a valid seed.");let e=t;if(10>Math.abs(e)&&(e*=1e6),e%=n,(e=e<0?e+n:e)>1)return e&n;if(0===e)return o;throw Error("Impossible. ".concat(e))},s=t=>t=Math.imul(t,48271)&n,a=t=>(t-1)/(n-1)},80446:(t,e,r)=>{"use strict";r.d(e,{n:()=>o});var n=r(79105);let o=function t(){let e=Math.random,r=()=>{};function o(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r)|0;return e}function i(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)return e();if(1===r.length)return e()*r[0];if(2===r.length)return e()*(r[1]-r[0])+r[0];throw Error("Invalid arguments")}function s(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(1===r.length)return Math.floor(e()*r[0]);if(2===r.length)return Math.floor(e()*(r[1]-r[0]))+r[0];throw Error("Invalid arguments")}function a(t){let{weightsAreNormalized:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===t.length)throw Error("Weights array is empty");if(!1===r){let r=t.reduce((t,e)=>t+e,0),n=e()*r,o=0;for(let e=0;e<t.length;e++)if(n<(o+=t[e]))return e;return t.length-1}{let r=e(),n=0;for(let e=0;e<t.length;e++)if(r<(n+=t[e]))return e;return t.length-1}}let l={new:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t().setRandom(...r)},setRandom:function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];let[a,h=0]=i,u="string"==typeof h?o(h):h;if("parkmiller"===a){let t=n.Ts(u);e=()=>(t=n.K2(t),n.Tj(t)),r=e=>{t=n.Ts(e)}}else{if(void 0!==a&&"function"!=typeof a)throw Error("Invalid random function");e=null!=a?a:Math.random,r=()=>{}}return r(u),l},seed:function(t){return r("string"==typeof t?o(t):null!=t?t:0),l},get random(){return e},chance:function(t){return e()<t},number:i,float:i,f:i,sign:function(){return .5>e()?-1:1},int:s,i:s,hexColor:function(){let t=Math.floor(0xffffff*e());return"#".concat(t.toString(16).padStart(6,"0"))},pickIndex:a,pick:function(t,r){if(0===t.length)throw Error("Array is empty");if(r)return t[a(r)];let n=Math.floor(e()*t.length);return t[n]},createPicker:function(t){let e=t.map(t=>t[0]),r=t.map(t=>t[1]),n=e.reduce((t,e)=>t+e,0);for(let t=0;t<e.length;t++)e[t]/=n;return()=>r[a(e,{weightsAreNormalized:!0})]},direction2:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=e()*Math.PI*2;return t.x=Math.cos(r),t.y=Math.sin(r),t},direction3:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},r=e(),n=e(),o=2*Math.PI*r,i=Math.acos(1-2*n);return t.x=Math.sin(i)*Math.cos(o),t.y=Math.sin(i)*Math.sin(o),t.z=Math.cos(i),t},quaternion:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0,w:1},r=e(),n=e(),o=e(),i=Math.sqrt(1-r),s=Math.sqrt(r);return t.x=i*Math.sin(2*Math.PI*n),t.y=i*Math.cos(2*Math.PI*n),t.z=s*Math.sin(2*Math.PI*o),t.w=s*Math.cos(2*Math.PI*o),t},shuffleIndexes:function*(t){if(t<=0)throw Error("N must be greater than 0");let r=0,n=Math.floor((2+2*e())*t);for(;1!==function(t,e){for(;0!==e;)[t,e]=[e,t%e];return t}(t,n);){if(++r>1e3)throw Error("Failed to find a suitable a value after 1000 attempts");n=t+Math.floor(e()*t)}let o=Math.floor(e()*t);for(let e=0;e<t;e++)yield(o+e*n)%t},shuffleArray:function(t){let{inPlace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r?t:t.slice(),o=n.length;for(let t=o-1;t>0;t--){let r=Math.floor(e()*(t+1));[n[t],n[r]]=[n[r],n[t]]}return n}};return l}()}},t=>{var e=e=>t(t.s=e);t.O(0,[5611,7190,6564,7962,9635,8921,7953,4512,7775,7436,146,487,3445,9332,3414,9717,1763,2143,3540,4354,1319,6852,7358],()=>e(66489)),_N_E=t.O()}]);