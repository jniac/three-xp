(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1023,4266,5795,6647,7289,7840],{4266:(e,t,n)=>{"use strict";n.d(t,{O0:()=>r,XW:()=>C});var r,i=n(49797),a=n(99613),s=n(50373),o=n(64416),l=n(27491),c=n(27146),u=n(71591),h=n(28334);function d(e){return e.isRenderPass}!function(e){e[e.Render=0]="Render",e[e.PostProcessing=1e3]="PostProcessing",e[e.GizmoRender=2e3]="GizmoRender",e[e.Outline=3e3]="Outline",e[e.Output=4e3]="Output",e[e.Antialiasing=5e3]="Antialiasing"}(r||(r={}));class p{get passes(){return this.composer.passes}sortPasses(){let e=[...this.passMap];for(let[t]of e)this.composer.removePass(t);for(let[t]of(e.sort((e,t)=>{let n=e[1],r=t[1];return n.type!==r.type?n.type-r.type:n.insertOrder-r.insertOrder}),e))this.composer.addPass(t);return this}*getPassesByType(e){for(let[t,n]of this.passMap)n.type===e&&(yield[t,n])}addPass(e){let{type:t=r.Render,insertOrder:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===n){var i,a,s;n=(null!=(s=null==(a=[...this.getPassesByType(t)].at(-1))||null==(i=a[1])?void 0:i.insertOrder)?s:-1)+1}return this.passMap.set(e,{type:t,insertOrder:n}),this.sortPasses(),{destroy:()=>this.removePass(e)}}removePass(e){return this.passMap.has(e)?(this.passMap.delete(e),this.composer.removePass(e),!0):(console.warn("The pass is not in the pipeline."),!1)}setSize(e,t,n){this.composer.setSize(e,t),this.composer.setPixelRatio(n),this.basicPasses.fxaa.uniforms.resolution.value.set(1/n/e,1/n/t),this.basicPasses.smaa.setSize(e*n,t*n)}setScene(e){let t=this.basicPasses.mainRender.scene;for(let n of this.composer.passes)d(n)&&n.scene===t&&(n.scene=e)}render(e){for(let t of this.composer.passes)d(t)&&t.scene.traverseVisible(t=>{"onTick"in t&&t.onTick(e)});this.composer.render(e.deltaTime)}getPassesInfo(){let e=["".concat(this.constructor.name," passes info:")],{composer:t,passMap:n}=this;for(let[i,a]of t.passes.entries()){let t=n.get(a);t?e.push("- ".concat(i,": ").concat(r[t.type]," (insertOrder: ").concat(t.insertOrder,") ").concat(a.constructor.name)):e.push("- ".concat(i,": NO METADATA for ").concat(a.constructor.name))}return e.join("\n")}constructor(e,t,n,d){let p=new a.s(e),f=new Map,g=new l.A(t,d);g.clearAlpha=0,f.set(g,{type:r.Render,insertOrder:0}),p.addPass(g);let m=new l.A(n,d);f.set(m,{type:r.GizmoRender,insertOrder:0}),m.clear=!1,m.clearDepth=!1,p.addPass(m);let v=new s.G(new i.I9Y,t,d);f.set(v,{type:r.GizmoRender,insertOrder:0}),p.addPass(v);let x=new o.X;f.set(x,{type:r.Output,insertOrder:0}),p.addPass(x);let y=new c.p(h.o);f.set(y,{type:r.Antialiasing,insertOrder:0}),p.addPass(y);let w=new u.I;w.enabled=!1,f.set(w,{type:r.Antialiasing,insertOrder:0}),p.addPass(w),this.composer=p,this.basicPasses={mainRender:g,gizmoRender:m,outline:v,output:x,fxaa:y,smaa:w},this.passMap=f}}var f=n(30158),g=n(17223),m=n(57165),v=n(39787),x=n(36508),y=n(22641),w=n(17475),b=n(43340),_=n(31484);class C{static current(){return this.instances[this.instances.length-1]}get aspect(){return this.width/this.height}get size(){return this.internal.size.set(this.width,this.height)}get fullSize(){return this.internal.fullSize.set(this.width*this.pixelRatio,this.height*this.pixelRatio)}setScene(e){this.scene=e}useOrbitControls(){var e,t;let{position:n=null,target:r=null,element:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof i&&(i=document.querySelector(i)),null!=(e=this.internal).orbitControls||(e.orbitControls=new g.N(this.camera,i)),i&&i!==this.internal.orbitControls.domElement&&(this.internal.orbitControls.dispose(),this.internal.orbitControls=new g.N(this.camera,i)),n&&(0,y.jj)(n,this.internal.orbitControls.object.position),r&&(0,y.jj)(r,this.internal.orbitControls.target),this.internal.orbitControls.update(),this.internal.orbitControls}initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.initialized)return console.warn("ThreeWebglContext is already initialized."),this;Object.defineProperty(this,"initialized",{value:!0,writable:!1,configurable:!1,enumerable:!1});let{onDestroy:n}=this,{domElement:r}=this.renderer;e.appendChild(r);let i=()=>{this.setSize({width:e.clientWidth,height:e.clientHeight,pixelRatio:window.devicePixelRatio})},a=new ResizeObserver(i);return a.observe(e),n(()=>{a.disconnect()}),i(),n(this.pointer.initialize(r,t,this.camera,this.ticker)),n((0,m.O)(this.ticker.requestActivation),this.ticker.onTick(this.renderFrame)),n(()=>{var e;null==(e=this.internal.orbitControls)||e.dispose()}),this.domContainer=e,this.domElement=r,this}setSize(e){let{width:t,height:n,pixelRatio:r}={...this,...e};if(t===this.width&&n===this.height&&r===this.pixelRatio)return this;this.width=t,this.height=n,this.pixelRatio=r;let{renderer:i,perspectiveCamera:a,pipeline:s}=this;return i.setSize(t,n),i.setPixelRatio(r),s.setSize(t,n,r),a.aspect=t/n,a.updateProjectionMatrix(),this}*findAll(e){let t="string"==typeof e?t=>t.name===e:e instanceof RegExp?t=>e.test(t.name):e,n=[this.scene];for(;n.length>0;){let e=n.shift();t(e)&&(yield e),n.push(...e.children)}}find(e){for(let t of this.findAll(e))return t;return null}isPartOfScene(e){let t=e;for(;t;){if(t===this.scene)return!0;t=t.parent}return!1}constructor(){this.type=_.s.WebGL,this.width=300,this.height=150,this.pixelRatio=1,this.renderer=new f.WebGLRenderer,this.perspectiveCamera=new i.ubm,this.orhtographicCamera=new i.ubm,this.scene=new i.Z58,this.gizmoScene=new i.Z58,this.pointer=new b.g,this.skipRender=!1,this.ticker=x.Rv.get("three").set({minActiveDuration:8}),this.pipeline=new p(this.renderer,this.scene,this.gizmoScene,this.perspectiveCamera),this.camera=this.perspectiveCamera,this.internal={size:new i.I9Y,fullSize:new i.I9Y,destroyables:[],orbitControls:null},this.onTick=this.ticker.onTick.bind(this.ticker),this.onDestroy=this.internal.destroyables.push.bind(this.internal.destroyables),this.loader=w.o.get("three"),this.initialized=!1,this.destroyed=!1,this.destroy=()=>{if(this.destroyed)return void console.warn("ThreeWebglContext is already destroyed.");Object.defineProperty(this,"destroyed",{value:!0,writable:!1,configurable:!1,enumerable:!1}),(0,v.z)(this.internal.destroyables),this.internal.destroyables=[],this.renderer.dispose()},this.renderFrame=e=>{var t;let{scene:n,pipeline:r,pointer:i}=this;null==(t=this.internal.orbitControls)||t.update(e.deltaTime),i.update(n),n.traverse(e=>{"onTick"in e&&e.onTick(this.ticker,this)}),!1===this.skipRender&&r.render(e),i.updateEnd()},this.camera.position.set(0,1,10),this.camera.lookAt(0,0,0),C.instances.push(this)}}C.instances=[]},4941:(e,t,n)=>{"use strict";n.d(t,{_5:()=>i.ol,YN:()=>i.o8,cz:()=>a,kY:()=>i.kY});var r=n(37197),i=n(40074);let a={transition:i.kY,bump:r.$p}},6688:(e,t,n)=>{"use strict";n.d(t,{Client:()=>l});var r=n(70691),i=n(7587),a=n(42206),s=n(54167),o=n.n(s);function l(){let{ref:e}=(0,i.C7)(function*(e){let t=new a.$x;t.parse(e.dataset.layout),t.sizeX.set(e.clientWidth,a.LN.Absolute),t.sizeY.set(e.clientHeight,a.LN.Absolute),t.alignChildrenX=0,t.alignChildrenY=0;let n=[{element:e,space:t}];for(;n.length>0;){let e=n.shift(),t=[...e.element.children].filter(e=>!!e.dataset.layout);for(let r=0;r<t.length;r++){let i=t[r],s=new a.$x;s.parse(i.dataset.layout),s.userData.element=i,e.space.add(s),n.push({element:i,space:s})}}for(let e of(t.computeLayout(),t.allDescendants({includeSelf:!1}))){let t=e.userData.element,n=e.rect;t.style.position="absolute",t.style.left="".concat(n.x,"px"),t.style.top="".concat(n.y,"px"),t.style.width="".concat(n.width,"px"),t.style.height="".concat(n.height,"px")}Object.assign(window,{root:t})},[]);return(0,r.jsxs)("div",{ref:e,className:"".concat(o().FlexibleLayout," layer"),"data-layout":"vertical",children:[(0,r.jsxs)("div",{"data-layout":"horizontal size(1sh)",children:[(0,r.jsx)("div",{"data-layout":"size(200,100%)",children:(0,r.jsx)("div",{className:o().Container,children:(0,r.jsx)("h1",{children:"Panel - 0"})})}),(0,r.jsx)("div",{"data-layout":"size(1sh)"}),(0,r.jsx)("div",{"data-layout":"size(320, 100%)",children:(0,r.jsx)("div",{className:o().Container,children:(0,r.jsx)("h1",{children:"Panel - 1"})})})]}),(0,r.jsx)("div",{"data-layout":"size(1sh, 200)",children:(0,r.jsxs)("div",{className:o().Container,children:[(0,r.jsx)("h1",{children:"Timeline or asset panel"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Todo:"}),(0,r.jsx)("li",{children:"Create a draggable UI!"})]})]})})]})}},9723:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(49797),i=n(60041);let a={luminosity:.5};class s extends r.V9B{constructor(e){let{luminosity:t,...n}={...a,...e},s={uSunPosition:{value:new r.Pq0(.5,.7,.3)},uLuminosity:{value:t}};super(n),this.onBeforeCompile=e=>{i.b.with(e).uniforms(s).varying({vWorldNormal:"vec3"}).vertex.mainAfterAll("\n          vWorldNormal = mat3(modelMatrix) * normal;\n      ").fragment.after("map_fragment","\n        vec3 lightDirection = normalize(uSunPosition);\n        float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n        light = pow(light, 2.0);\n        light = mix(uLuminosity, 1.0, light);\n        diffuseColor *= light;\n      ")},this.sunPosition=s.uSunPosition.value}}},11281:e=>{e.exports={Client:"client_Client__Q3vhD"}},13982:(e,t,n)=>{"use strict";n.d(t,{Client:()=>z});var r=n(70691),i=n(84303),a=n(25432),s=n(95736),o=n(48083),l=n(6697),c=n(87381),u=n(36508),h=n(33855),d=n(28737),p=n(49797),f=n(7717),g=n(25809),m=n(56647),v=n(9723),x=n(82091),y=n(72612),w=n(17099);function b(e,t,n,r,i){let a=r-e,s=i-t,o=Math.sqrt(a*a+s*s);return[e+a/o*n,t+s/o*n]}class _ extends p.YJl{constructor(...e){super(...e),this.parts=(()=>{(0,c.mj)(new p.eaF(new p.UPV(10,.4,512,64),new v.Y),this),(0,c.mj)(new g.P,{parent:this,rotationX:"90deg"});let e=(0,c.mj)(new x.N,this),t=new p.Pq0,n=new p.Pq0;{let e=new f.AA(16);for(let{x:r,y:i,z:a}of(0,y.loop3)(16,16,16)){t.set(r,i,a);let[s,o]=b(8,8,16/3,r,a);n.set(s,16/6,o);let l=t.distanceTo(n)<16/6;e.getVoxelState(r,i,a).setUint8(0,+!!l)}(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new f.AA(16);for(let{x:r,y:i,z:a}of(0,y.loop3)(16,16,16)){t.set(r,i,a);let[s,o]=b(8,8,8,r,a);n.set(s,4,o);let l=4>t.distanceTo(n);e.getVoxelState(r,i,a).setUint8(0,+!!l)}(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new f.AA(16);for(let{x:n,y:r,z:i}of(0,y.loop3)(16,16,16)){let a=15>t.set(n,r,i).length();e.getVoxelState(n,r,i).setUint8(0,+!!a)}(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#55ff96"})),{parent:this,x:-32})}{let e=new f.AA(new p.Pq0(12,24,4),1);for(let{x:t,y:n,z:r}of(0,y.loop3)(e.size)){let i=.5>Math.random();e.getVoxelState(t,n,r).setUint8(0,+!!i)}(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}{let e=new f.AA(16);for(let{x:t,y:n,z:r}of(0,y.loop3)(16,16,16)){let i=(0===t||0===n||0===r||15===t||15===n||15===r)&&w.c.chance(.66);e.getVoxelState(t,n,r).setUint8(0,+!!i)}console.log(e.computeBounds()),(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#9900ff"})),{parent:this,x:-16,z:-32})}{let e=new f.AA(16),t=new p.Pq0;for(let{x:n,y:r,z:i}of(0,y.loop3)(16,16,16)){t.set(n-8,r-8,i-8);let a=t.lengthSq()-16;w.c.chance(1-.05*a)&&e.getVoxelState(n,r,i).setUint8(0,1)}let n=(0,c.mj)(new p.eaF((0,f.Cx)(e.voxelFaces()),new v.Y({color:"#00ddff"})),{parent:this,x:-16,z:0});(0,c.mj)(new m.R,{parent:n}).box({box3:e.computeBounds(),asIntBox3:!0}).draw()}return{sky:e}})()}}var C=n(42824),P=n.n(C);function j(){return(0,h.yk)(function*(e){(0,d.O)({three:e});let t=new o.n({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),u.Rv.get("three").set({minActiveDuration:60}),yield(0,u.xy)("three",n=>{let{aspect:r,camera:i}=e;t.update(i,r,n.deltaTime)}),yield(0,s.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new a.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:l.O0.PostProcessing})},[]),null}function S(){return(0,h.dB)("main",function*(e){(0,c.mj)(new _,e)},[]),null}function z(){return(0,r.jsx)("div",{children:(0,r.jsxs)(h.uB,{children:[(0,r.jsx)(j,{}),(0,r.jsx)(S,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(i.oz,{className:P().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},14137:(e,t,n)=>{"use strict";n.d(t,{Client:()=>v});var r=n(70691),i=n(67203),a=n(49797),s=n(48083),o=n(97540),l=n(9723),c=n(87381),u=n(72612),h=n(36508),d=n(33855),p=n(28737),f=n(11281),g=n.n(f);function m(){let e=(0,i.useRef)(null);return(0,d.dB)("setup",function*(t,n){(0,c.mj)(new a.eaF(new a.WBB(20,10),new l.Y({wireframe:!0})),t);let r=(0,c.mj)(new a.eaF(new a.bdM,new l.Y({side:a.$EB})),t),i=(0,c.mj)(new a.YJl,{parent:t,rotation:["-70deg",0,0]}),d=Array.from({length:16},()=>(0,c.mj)(new a.eaF(new a.bdM(.5,.5),new l.Y({side:a.$EB})),{parent:i})),f=new s.n().initialize(n.renderer.domElement).start();Object.assign(window,{controls:f});let{camera:g}=n,m=h.Rv.get("three");if((0,p.O)({camera:g,controls:f,ticker:m}),e.current){let t=e.current,i=e.current.firstElementChild,a=[...e.current.querySelectorAll(".SmallPlane ")];r.updateWorldMatrix(!0,!1),g.updateMatrixWorld(!0),i.style.position="absolute",i.style.left="50%",i.style.top="50%",yield(0,h.xy)("three",e=>{f.update(n.camera,n.aspect,e.deltaTime),r.updateWorldMatrix(!0,!1),g.updateMatrixWorld(!0),t.style.perspective=(0,o.s5)(g,n.renderer.domElement),i.style.transform=(0,o.wZ)(g,r,n.renderer.domElement,100,0,0,!1),i.style.zIndex=(0,o.AF)(g,r);let s=(0,o.hD)(g,r);for(let t of(i.querySelector("span + span").textContent="(".concat(s?"front":"back",")"),i.style.color=s?"black":"#00f",(0,u.loop)(16))){let r=a[t.i],i=d[t.i];i.updateWorldMatrix(!0,!1),r.style.position="absolute",r.style.left="50%",r.style.top="50%",r.style.transform=(0,o.wZ)(g,i,n.renderer.domElement,100,0,0,!1),r.style.zIndex=(0,o.AF)(g,i);let s=2*Math.PI*t.t,l=2*Math.cos(s),c=2*Math.sin(s);i.position.set(l,c,0);let u=e.time+t.t*Math.PI;i.rotation.set(2*u,u,0)}r.rotation.y+=.5*e.deltaTime,r.rotation.x+=.1*e.deltaTime})}},[]),(0,r.jsxs)("div",{ref:e,className:"layer thru",children:[(0,r.jsxs)("div",{className:"w-[100px] h-[100px] border-solid border-[8px] bg-white border-[#fc3] text-black font-black flex flex-col justify-center items-center hover:border-[#00f]",style:{lineHeight:".5em"},children:[(0,r.jsx)("span",{className:"text-3xl",children:"CSS!"}),(0,r.jsx)("span",{children:"(front)"})]}),Array.from({length:16},(e,t)=>(0,r.jsx)("div",{className:"SmallPlane w-[50px] h-[50px] border-solid border-[2px] bg-white border-[#fc3] text-black font-black flex flex-col justify-center items-center hover:border-[#00f]",style:{lineHeight:".5em"},children:t},t))]})}function v(){return(0,r.jsx)("div",{className:"layer thru ".concat(g().Client),children:(0,r.jsx)(d.uB,{children:(0,r.jsx)(m,{})})})}},17475:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var r=n(49797),i=n(9954),a=n(17775),s=n(5832);function o(e){let t,n,r=new Promise((r,i)=>{t=()=>{r(e)},n=e=>{i(e)}});return Object.assign(e,{then:r.then.bind(r),catch:r.catch.bind(r),finally:r.finally.bind(r),resolve:t,reject:n}),e}let l=["gltf","glb"],c=["png","jpg","jpeg","hdr","exr"];class u{add(e){return this.listeners.add(e),{destroy:()=>this.listeners.delete(e)}}call(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of this.listeners)e.apply(null,t)}constructor(){this.listeners=new Set}}class h{static current(){var e;return null!=(e=this.instances[this.instances.length-1])?e:new h}static get(e){var t;return null!=(t=this.instances.find(t=>t.name===e))?t:new h({name:e})}setPath(e){this.path=e}onAfterLoad(e){return this._onAfterLoad.add(e)}async loadGltf(e){return new Promise((t,n)=>{this.loaders.gltf.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)})}async loadRgbe(e){let t=o(this.loaders.rgbeLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load RGBE: ".concat(e))}));return t}async loadExr(e){let t=o(this.loaders.exrLoader.load(e,e=>{t.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load EXR: ".concat(e))}));return t}loadTexture(e,t){let n=new URL(this.path+e,window.location.href).href;if(this.textureCache.has(n)){let e=this.textureCache.get(n);return null==t||t(e),e}let r=o(this.loaders.texture.load(n,e=>{this.textureCache.set(n,r),null==t||t(e),r.resolve(),this._onAfterLoad.call()},void 0,()=>{console.log("Failed to load texture: ".concat(n))}));return r}async load(e){let t=e.split(".").pop();if(l.includes(t))return this.loadGltf(e);if(c.includes(t))return new Promise((t,n)=>{this.loaders.texture.load(e,e=>{t(e),this._onAfterLoad.call()},void 0,n)});throw Error("Unsupported extension: ".concat(t))}constructor({name:e}={}){this.id=h.nextId++,this.loaders={gltf:new a.B,texture:new r.Tap,rgbeLoader:new s.Y,exrLoader:new i.H},this.path="",this._onAfterLoad=new u,this.textureCache=new Map,this.name=null!=e?e:"UnifiedLoader-".concat(this.id),h.instances.push(this)}}h.nextId=0,h.instances=[]},18140:(e,t,n)=>{"use strict";n.d(t,{Client:()=>j});var r=n(70691),i=n(30158),a=n(49797),s=n(48083),o=n(64857),l=n(9723),c=n(87381),u=n(72612),h=n(79285),d=n(4941),p=n(17099),f=n(36508);(0,n(28737).O)({...i,THREE:i,textCloud:m,textRing:v,textGrid:function(e){let t=(0,c.mj)(new o.w({textCount:100,textSize:1,lineLength:12}),e);for(let e of(0,u.loop2)(10,10)){let n="".concat(e.i,"\n(").concat(e.x,", ").concat(e.y,")");t.setTextAt(e.i,n,{x:(e.px-.5)*20,y:(e.py-.5)*20})}return t},TextHelper:o.w});let g=[new a.Q1f("#ff4080"),new a.Q1f("#ffdd66"),new a.Q1f("#99ccff")];function m(e){let t=(0,c.mj)(new o.w({textSize:5,lineLength:50,lineCount:2,textCount:3e5}),e),n=new a.Pq0,r=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"];for(let e=0;e<3e5;e++){let i=d.cz.transition.inOut(p.c.random(),1/4,.9),a=(0,h.lerp)(70,190,i)+20*p.c.boxMuller()[0],{x:s,y:o,z:l}=p.c.unitVector(n).multiplyScalar(a);t.setTextAt(e,"".concat(p.c.pick(r)).concat(p.c.pick(r)).concat(p.c.pick(r),"\n").concat(e),{x:s,y:o,z:l,color:p.c.pick(g)})}return t}function v(e){let t=(0,c.mj)(new o.w({textCount:3,lineLength:32,lineCount:4}),e);return t.setTextAt(0," Hello \n World \n !!! ",{y:0,size:1.5,textColor:g[0],textOpacity:0,backgroundColor:g[0],backgroundOpacity:1}),t.setTextAt(1,"\xc0 l’\xe2ge m\xfbr,\no\xf9 l’\xe9t\xe9 s’ach\xe8ve,\nil \xe9tait d\xe9j\xe0 pr\xeat.\nNo\xebl, s\xec! Se\xf1or",{y:-1.2,size:.6,textColor:g[1]}),t}async function*x(e){yield()=>e.scene.clear(),p.c.reset();let t=new a.Q1f("#09121b"),n=new a.cRK(t,.05);e.scene.fog=n,e.scene.background=t;let r=new s.n({size:7}).initialize(e.renderer.domElement).start();yield(0,f.xy)("three",t=>{r.update(e.camera,e.aspect,t.deltaTime),n.density=(0,h.remap)(r.vertigo.zoom,1,0,.05,0)});let i=0,u=v(e.scene);i+=u.count,document.body.append(u.atlas.canvas),u.atlas.canvas.style.position="fixed",u.atlas.canvas.style.bottom="10px",u.atlas.canvas.style.right="10px",u.atlas.canvas.style.width="".concat(Math.round(.2*document.body.clientWidth),"px"),u.atlas.canvas.onclick=()=>u.atlas.canvas.remove(),yield()=>u.atlas.canvas.remove(),i+=m(e.scene).count,i+=function(e){let{array:t,count:n}=(0,c.mj)(new a.eaF(new a.WBB(200,8),new a.V9B({wireframe:!0})),e).geometry.attributes.position,r=n/3,i=(0,c.mj)(new o.w({textCount:r,textSize:14}),e),s=new a.Pq0,l=new a.Pq0;for(let e=0;e<r;e++){let{x:n,y:r,z:a}=s.fromArray(t,9*e).add(l.fromArray(t,9*e+3)).add(l.fromArray(t,9*e+6)).divideScalar(3);i.setTextAt(e,"".concat(e),{x:n,y:r,z:a,color:"#fff",backgroundOpacity:1,textOpacity:0})}return i}(e.scene).count,u.setTextAt(2,"text count: ".concat(i),{y:1,size:.6,color:"#4080ff"}),(0,c.mj)(new a.eaF(new a.O3Y(3,.1,12,128),new l.Y({color:g[2]})),e.scene)}var y=n(88493),w=n(89294),b=n.n(w),_=n(90048),C=n.n(_);function P(){return(0,y.yk)(x,[]),null}function j(){return(0,r.jsx)("div",{className:"layer thru ".concat(C().Client),children:(0,r.jsxs)(y.uB,{children:[(0,r.jsx)(P,{}),(0,r.jsxs)("div",{className:"layer thru flex flex-col p-4 gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl",children:"Text Helper"}),(0,r.jsx)("p",{className:"w-[400px]",children:"TextHelper is a utility for rendering text in 3D space. A lot of text, up to millions of characters, can be rendered with a single draw call. It is useful for visualizing large amounts of text data."}),(0,r.jsx)(b(),{href:"text-helper/hunger",children:"\uD83D\uDC49 Knut Hamsun — Hunger — Demo"})]})]})})}},18653:(e,t,n)=>{"use strict";n.d(t,{Client:()=>z});var r=n(70691),i=n(84303),a=n(25432),s=n(95736),o=n(48083),l=n(6697),c=n(87381),u=n(36508),h=n(33855),d=n(28737),p=n(49797),f=n(7717),g=n(25809),m=n(9723),v=n(82091),x=n(72612),y=n(17099),w=n(56647);let b=new p.tBo;class _ extends p.YJl{createAllChunkMeshes(e){for(let{superChunkIndex:t,chunkIndex:n,chunk:r}of e.enumerateChunks()){let i=y.c.pick(["#ffdd55","#55ddff","#dd55ff","#55ffdd","#ff55dd","#ddff55","#ff5555"]),a=(0,f.Cx)(r.voxelFaces()),s=new m.Y({color:i}),{x:o,y:l,z:u}=e.metrics.fromIndexes(t,n,0);(0,c.mj)(new p.eaF(a,s),{parent:this,x:o,y:l,z:u})}let t=e.computeVoxelBounds();(0,c.mj)(new w.R,this).box({box3:t,asIntBox3:!0}).box({box3:e.computeChunkBounds(),asIntBox3:!0,color:"#ff0000"}).draw();{let t=e.computeVoxelBounds(),n=(0,f.Cx)(e.chunkVoxelFaces(t)),r=new m.Y({color:"#ffffff"});(0,c.mj)(new p.eaF(n,r),{parent:this,x:0,y:0,z:-32})}}createOneUniqueMesh(e){}constructor(...e){super(...e),this.parts=(()=>{y.c.reset();let e=(0,c.mj)(new p.eaF(new p.UPV(10,3,32,6),new m.Y({wireframe:!0,side:p.$EB})),this);e.visible=!1,(0,c.mj)(new g.P({size:24}),{parent:this,rotationX:"90deg"});let t=(0,c.mj)(new v.N,this),n=new f.HK;(0,d.O)({world:n});let r=new DataView(new ArrayBuffer(n.voxelStateByteSize));r.setUint8(0,1);let i=new p.Pq0;for(let{x:t,y:a,z:s}of(0,x.loop3)(24,24,24))t-=12,a-=12,s-=12,i.set(t+.5,a+.5,s+.5),b.set(i,new p.Pq0(1,0,0)),b.intersectObject(e,!0).length%2==1&&n.setVoxelState(t,a,s,r);return this.createAllChunkMeshes(n),{sky:t}})()}}var C=n(42824),P=n.n(C);function j(){return(0,h.yk)(function*(e){(0,d.O)({three:e});let t=new o.n({size:50,perspective:1,rotation:["-20deg","-45deg",0]});yield t.start(e.renderer.domElement),u.Rv.get("three").set({minActiveDuration:60}),yield(0,u.xy)("three",n=>{let{aspect:r,camera:i}=e;t.update(i,r,n.deltaTime)}),yield(0,s.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new a.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:l.O0.PostProcessing})},[]),null}function S(){return(0,h.dB)("main",function*(e){(0,c.mj)(new _,e)},[]),null}function z(){return(0,r.jsx)("div",{children:(0,r.jsxs)(h.uB,{children:[(0,r.jsx)(j,{}),(0,r.jsx)(S,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(i.oz,{className:P().Markdown,children:"# World\n\nWorld handles chunks under the hood.\n"})})]})})}},20657:(e,t,n)=>{"use strict";n.d(t,{Client:()=>y});var r=n(70691),i=n(49797),a=n(48083),s=n(9723),o=n(87381),l=n(36508),c=n(67203),u=n(7587),h=n(6697);n(90927);let d=(0,c.createContext)(null),p={className:"",assetsPath:"/"};function f(e){let{children:t,className:n,assetsPath:i}={...p,...e},a=(0,c.useMemo)(()=>new h.XW,[]);a.loader.setPath(i);let{ref:s}=(0,u.IZ)({debounce:!0},function*(e,t){yield a.initialize(e),t.triggerRender(),Object.assign(window,{three:a})},[]);return(0,r.jsx)("div",{ref:s,className:n,style:{position:"absolute",inset:0},children:(0,r.jsx)(d.Provider,{value:a,children:a.initialized&&t})})}function g(e){return function(){let[e,t]=(0,c.useState)(!1);return(0,c.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,r.jsx)(f,{...e})}var m=n(78592),v=n.n(m);function x(){return function(e,t){let n=(0,c.useContext)(d);(0,u.C7)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always")}(function*(e){let t=(0,o.mj)(new i.eaF(new i.WBB,new s.Y),e.scene);yield()=>t.removeFromParent();let n=new a.n;n.initialize(e.renderer.domElement).start(),yield(0,l.xy)("three",t=>{n.update(e.camera,e.aspect,t.deltaTime)})},[]),null}function y(){return(0,r.jsx)("div",{className:"layer thru ".concat(v().Client),children:(0,r.jsx)(g,{children:(0,r.jsx)(x,{})})})}},20695:(e,t,n)=>{"use strict";n.d(t,{Client:()=>u});var r=n(70691),i=n(49797),a=n(84306),s=n(9723),o=n(87381),l=n(25851);function c(){return(0,a.yk)(function*(e){(0,o.mj)(new i.eaF(new i.WBB(1,0),new s.Y),{parent:e.scene,x:-4}),(0,o.mj)(new l.XI,{parent:e.scene})},[]),null}function u(){return(0,r.jsx)(a.uB,{children:(0,r.jsxs)(a.zz,{children:[(0,r.jsx)("div",{className:"layer thru p-4",children:(0,r.jsx)("h1",{children:"Vertigo Widget"})}),(0,r.jsx)(c,{})]})})}},25809:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(49797),i=n(22641);let a={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class s extends r.DXC{set(e){let{color:t,opacity:n,size:s,step:o,frame:l,plane:c}={...a,...e},u=(0,i.wX)(s),h=(0,i.wX)(null!=o?o:u),d=[],p=(e,t)=>d.push(new r.Pq0(e,t,0));l&&(p(-u.x/2,u.y/2),p(u.x/2,u.y/2),p(u.x/2,u.y/2),p(u.x/2,-u.y/2),p(u.x/2,-u.y/2),p(-u.x/2,-u.y/2),p(-u.x/2,-u.y/2),p(-u.x/2,u.y/2));let f=Math.ceil(-u.x/2/h.x)*h.x;f===-u.x/2&&(f+=h.x);do p(f,-u.y/2),p(f,u.y/2),f+=h.x;while(f<u.x/2);let g=Math.ceil(-u.y/2/h.y)*h.y;g===-u.y/2&&(g+=h.y);do p(-u.x/2,g),p(u.x/2,g),g+=h.y;while(g<u.y/2);switch(this.geometry.setFromPoints(d),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:a)}}},25851:(e,t,n)=>{"use strict";n.d(t,{Bn:()=>h,KJ:()=>o,XI:()=>f});var r=n(63126),i=n(49797),a=n(55551),s=n(38921),o=function(e){return e[e.BOX=0]="BOX",e[e.POSITIVE_X=1]="POSITIVE_X",e[e.NEGATIVE_X=2]="NEGATIVE_X",e[e.POSITIVE_Y=3]="POSITIVE_Y",e[e.NEGATIVE_Y=4]="NEGATIVE_Y",e[e.POSITIVE_Z=5]="POSITIVE_Z",e[e.NEGATIVE_Z=6]="NEGATIVE_Z",e}(o||{});function l(e,t){let n=new i.THS(new Int8Array(e.attributes.position.count).fill(t),1);e.setAttribute("aPartId",n)}function c(e,t,n){let r=new i.qFE(.2,.6000000000000001,e,n,!0).rotateZ(Math.PI).translate(0,.53,0),a=Array.from({length:t},(e,n)=>{let r=n/(t-1);return new i.I9Y(.2*r,-.05*(1-r**2))}),o=new i.nzx(a,e).rotateZ(Math.PI).translate(0,.2*3/2+.53,0);return(0,s.pP)([r,o],!1)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low",t="high"===e?(0,s.ec)(new a.j(.3,.3,.3,4,.05)):new i.iNn(.3,.3,.3);l(t,0);let n="high"===e?c(32,8,5):c(6,2,1);l(n,3);let r=n.clone().rotateX(Math.PI);l(r,4);let o=n.clone().rotateZ(-Math.PI/2);l(o,1);let u=n.clone().rotateZ(Math.PI/2);l(u,2);let h=n.clone().rotateX(Math.PI/2);l(h,5);let d=n.clone().rotateX(-Math.PI/2);return l(d,6),[t,o,u,n,r,h,d]}let h={defaultColor:"white",xColor:"#eb1640",yColor:"#00ffb7",zColor:"#3b80e7",hoverColor:"#fffc47"};function d(e){let{defaultColor:t,xColor:n,yColor:r,zColor:a,hoverColor:s}={...h,...e},o=new i.Q1f(t),l=new i.Q1f(n),c=new i.Q1f(r),u=new i.Q1f(a),d=new i.Q1f(s),p={uSunPosition:{value:new i.Pq0(.5,.7,.3)},uLuminosity:{value:.66},uColors:{value:[o,l,o,c,o,u,o]},uHoverColor:{value:d},uOpacity:{value:[1,1,1,1,1,1,1]},uHoverOpacity:{value:[0,0,0,0,0,0,0]}};return new i.BKk({uniforms:p,vertexShader:"\nuniform vec3 uColors[7];\nuniform float uOpacity[7];\nuniform vec3 uHoverColor;\nuniform float uHoverOpacity[7];\n\nattribute float aPartId;\n\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nvoid main() {\n  vWorldNormal = mat3(modelMatrix) * normal;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vColor = uColors[int(aPartId)];\n  vOpacity = uOpacity[int(aPartId)];\n  vHoverOpacity = uHoverOpacity[int(aPartId)];\n}\n",fragmentShader:"\nvarying vec3 vWorldNormal;\nvarying vec3 vPosition;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vHoverOpacity;\n\nuniform vec3 uSunPosition;\nuniform float uLuminosity;\nuniform vec3 uHoverColor;\n\nfloat clamp01(float x) {\n  return x < 0.0 ? 0.0 : x > 1.0 ? 1.0 : x;\n}\n\nfloat inverseLerp(float a, float b, float x) {\n  return clamp01((x - a) / (b - a));\n}\n\nvoid main() {\n  vec3 lightDirection = normalize(uSunPosition);\n  float light = dot(vWorldNormal, lightDirection) * 0.5 + 0.5;\n  light = pow(light, 2.0);\n  \n  float minLuminosity = max(pow(vHoverOpacity, 1.0 / 3.0) * 0.85, uLuminosity);\n  light = mix(minLuminosity, 1.0, light);\n\n  vec3 color = vColor;\n  color = mix(color, uHoverColor, vHoverOpacity);\n  gl_FragColor = vec4(color * light, vOpacity);\n}\n",transparent:!0})}let p=new i.tBo;class f extends i.YJl{getHovered(){return this.internal.hovered}getPressed(){return this.internal.pressed}widgetUpdate(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/60,{lowMesh:s,material:o}=this.parts,l=new i.Pq0;n.getWorldDirection(l);let c=this.matrixWorld.elements,u=new i.Pq0(c[0],c[1],c[2]),h=new i.Pq0(c[4],c[5],c[6]),d=new i.Pq0(c[8],c[9],c[10]);{let e=o.uniforms.uOpacity.value,t=Math.abs(l.dot(u)),n=Math.abs(l.dot(h)),i=Math.abs(l.dot(d));e[1]=e[2]=(0,r.calculateExponentialDecay)(e[1],t<.98?1.05:-.05,1e-4,a),e[3]=e[4]=(0,r.calculateExponentialDecay)(e[3],n<.98?1.05:-.05,1e-4,a),e[5]=e[6]=(0,r.calculateExponentialDecay)(e[5],i<.98?1.05:-.05,1e-4,a)}{let e=o.uniforms.uHoverOpacity.value,t=+(0===this.internal.hovered),n=+(1===this.internal.hovered),i=+(2===this.internal.hovered),s=+(3===this.internal.hovered),l=+(4===this.internal.hovered),c=+(5===this.internal.hovered),u=+(6===this.internal.hovered);e[0]=(0,r.calculateExponentialDecay)(e[0],t,1e-4,a),e[1]=(0,r.calculateExponentialDecay)(e[1],n,1e-4,a),e[2]=(0,r.calculateExponentialDecay)(e[2],i,1e-4,a),e[3]=(0,r.calculateExponentialDecay)(e[3],s,1e-4,a),e[4]=(0,r.calculateExponentialDecay)(e[4],l,1e-4,a),e[5]=(0,r.calculateExponentialDecay)(e[5],c,1e-4,a),e[6]=(0,r.calculateExponentialDecay)(e[6],u,1e-4,a)}p.setFromCamera(e,n);let[f]=p.intersectObject(s,!0).map(e=>{let t=3*e.faceIndex;return s.geometry.groups.findIndex(e=>e.start<=t&&t<e.start+e.count)}).filter(e=>o.uniforms.uOpacity.value[e]>.5);t&&!1===this.internal.pointerDown&&(this.internal.pointerDown=!0,this.internal.pointerDownPosition.copy(e),this.internal.pressed=null!=f?f:null),t&&!1===this.internal.dragging&&this.internal.pointerDownPosition.distanceTo(e)>.01&&(this.internal.dragging=!0),!1===t&&this.internal.pointerDown&&(this.internal.pointerDown=!1,this.internal.dragging=!1,this.internal.pressed=null);let g=this.internal.dragging?null:null!=f?f:null;this.internal.hovered,this.internal.hovered=g}constructor(e){super(),this.internal={pointerPosition:new i.I9Y,pointerDownPosition:new i.I9Y,pointerDown:!1,dragging:!1,hovered:null,pressed:null};let t=d(null==e?void 0:e.material),n=u("high").map((e,n)=>{let r=new i.eaF(e,t);return r.name="vertigo-widget-mesh-".concat(n),this.add(r),r}),r=new i.eaF(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=u(...t);return(0,s.pP)(r,!0)}("low"),d(null==e?void 0:e.material));r.material.transparent=!1,r.name="vertigo-widget-low-mesh",r.visible=!1,this.add(r),this.parts={material:t,meshes:n,lowMesh:r}}}},28737:(e,t,n)=>{"use strict";n.d(t,{Leak:()=>c,O:()=>l});var r={};n.r(r),n.d(r,{distribute:()=>a.mn,every:()=>a.Si,findMaxBy:()=>a.vj,pairwise:()=>a.Ju,recordBy:()=>a.VY,some:()=>a.zN,split:()=>a.mn,uniqueBy:()=>a.pD});var i=n(30158),a=n(43107),s=n(85795),o=n(17099);function l(e){Object.assign(window,{...i,...s,...r,...e,PRNG:o.c})}function c(e){return l(e),null}},31484:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e.WebGL="webgl",e.WebGPU="webgpu"}(r||(r={}))},35375:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});let r="/three-xp/assets/",i={development:!1,assetsPath:r,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(e)}}},42537:(e,t,n)=>{"use strict";n.d(t,{Client:()=>z});var r,i=n(70691),a=n(67203),s=n(95509),o=n(37722),l=n(30158),c=n(72598),u=n(7587),h=n(33999),d=n(6726),p=n(14277),f=["title","titleId"];function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let m=function(e){var t=e.title,n=e.titleId,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,f);return a.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,r||(r=a.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25 4.25v-2.5h-9.5v9.5h2.5m.5-6.5v9.5h9.5v-9.5z"})))};var v=n(70261),x=n.n(v);function y(e){let{className:t,children:n=(0,i.jsx)(m,{})}=e;return(0,i.jsx)("button",{className:"".concat(x().IconButton," ").concat(t),...e,children:n})}var w=n(69965),b=n.n(w);function _(e){let t=(0,a.useRef)(null);return(0,i.jsxs)("div",{ref:t,className:b().Copyable,children:[(0,i.jsx)("div",{children:e.children}),(0,i.jsx)("div",{className:"".concat(b().Overlay," layer thru p-2"),children:(0,i.jsx)(y,{onClick:()=>{let e=t.current.firstChild.textContent;navigator.clipboard.writeText(e)},children:(0,i.jsx)(m,{})})})]})}var C=n(54956),P=n.n(C);let j=["vertexShader","fragmentShader"];function S(){let e=function(){let[e,t,n]=window.location.hash.slice(1).split(",");return void 0!==e&&e in l.ShaderLib||(e="basic"),void 0!==t&&j.includes(t)||(t=j[0]),void 0!==n&&(!n||n in l.ShaderChunk)||(n=null),{libName:e,shaderProgram:t,chunkName:n}}(),[t,n]=(0,a.useState)(e.libName),[r,p]=(0,a.useState)(e.shaderProgram),[[f,g],v]=(0,a.useState)([e.chunkName,new d.M_]),[x,w]=(0,a.useState)(!1);window.location.hash=[t,r,f].filter(e=>!!e).join(",");let{ref:b}=(0,u.C7)(function*(e){for(let{spans:t,chunkName:n}of[...e.querySelectorAll("span")].filter(e=>"include"===e.textContent).map(e=>{let t=e.nextElementSibling,n=t.nextElementSibling,r=n.textContent.slice(1,-1);return{spans:[e.previousElementSibling,e,t,n],chunkName:r}})){let e=e=>{for(let n of(e.stopPropagation(),t))n.classList.add(P().Hover)},r=e=>{for(let n of(e.stopPropagation(),t))n.classList.remove(P().Hover)},i=e=>{e.stopPropagation(),v([n,d.M_.from(t[0].getBoundingClientRect()).union(d.M_.from(t[t.length-1].getBoundingClientRect()))])};for(let n of t)n.classList.add(P().Include),n.addEventListener("pointerenter",e),n.addEventListener("pointerleave",r),n.addEventListener("click",i)}yield(0,c.s)(e,{onTap:t=>{let n=e.querySelector(".".concat(P().OverlayContentWrapper));n&&!1===n.contains(t.orignalDownEvent.target)&&v([null,new d.M_])}})},[t,r]),C=l.ShaderLib[t][r];x&&(C=C.replace(/#include <(.*)>/g,(e,t)=>{let n=l.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n}));let S=0===g.area?g:g.clone().applyPadding([2,6],"grow");return(0,i.jsxs)("div",{ref:b,className:(0,h.S)(P().ShaderXplr,"absolute-through p-4 flex flex-col gap-4"),children:[(0,i.jsx)("h1",{children:"ShaderXplr"}),(0,i.jsxs)("div",{className:(0,h.S)(P().Base,null!==f&&P().Dim),style:{background:o.A.hljs.background},children:[(0,i.jsxs)("div",{className:P().Selectors,children:[(0,i.jsx)("select",{name:"shaderlib",id:"shaderlib",onChange:e=>n(e.target.value),children:Object.keys(l.ShaderLib).map(e=>(0,i.jsx)("option",{children:e},e))}),(0,i.jsx)("select",{name:"shaderprogram",id:"shaderprogram",onChange:e=>p(e.target.value),children:j.map(e=>(0,i.jsx)("option",{children:e},e))}),(0,i.jsxs)("div",{className:"flex flex-row items-center gap-3 px-2 bg-[#fff1] rounded-[.25em]",children:[(0,i.jsx)("label",{htmlFor:"showFinalProgram",children:"Show final program"}),(0,i.jsx)("input",{type:"checkbox",id:"showFinalProgram",checked:x,onChange:e=>w(e.target.checked)})]})]}),(0,i.jsx)("div",{className:P().BaseContentWrapper,children:(0,i.jsx)(s.A,{language:"cpp",style:o.A,children:C})})]}),(0,i.jsxs)("div",{className:"absolute-through",children:[(0,i.jsx)("div",{className:P().IncludeHighlight,style:{top:"".concat(S.top,"px"),left:"".concat(S.left,"px"),width:"".concat(S.width,"px"),height:"".concat(S.height,"px")}}),f&&(0,i.jsxs)("div",{className:P().Overlay,children:[(0,i.jsx)("div",{style:{height:"".concat(Math.max(g.top,110),"px"),pointerEvents:"none"}}),(0,i.jsxs)("div",{className:P().OverlayContentWrapper,style:{background:o.A.hljs.background},children:[(0,i.jsxs)("div",{className:P().TitleBar,children:[(0,i.jsx)("h1",{children:f}),(0,i.jsx)(y,{onClick:()=>{navigator.clipboard.writeText(f)},children:(0,i.jsx)(m,{})})]}),(0,i.jsx)(_,{children:(0,i.jsx)(s.A,{language:"cpp",style:o.A,children:l.ShaderChunk[f]})})]})]})]})]})}function z(){return(0,p.D)()&&(0,i.jsx)(S,{})}},42824:e=>{e.exports={Markdown:"md_Markdown__RP0EZ"}},43340:(e,t,n)=>{"use strict";n.d(t,{g:()=>h});var r,i=n(28535),a=n(76999),s=n(57368),o=n(49797),l=n(61567);!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(r||(r={}));class c{copy(e){return this.buttons=e.buttons,this.clientPosition.copy(e.clientPosition),this.screenPosition.copy(e.screenPosition),this}diff(e,t){return this.buttons=e.buttons^t.buttons,this.clientPosition.subVectors(e.clientPosition,t.clientPosition),this.screenPosition.subVectors(e.screenPosition,t.screenPosition),this}constructor(){this.buttons=0,this.clientPosition=new o.I9Y,this.screenPosition=new o.I9Y}}var u=new WeakMap;class h{get buttons(){return this.state.buttons}buttonDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return(this.state.buttons&1<<e)!=0}buttonDownOld(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return(this.stateOld.buttons&1<<e)!=0}buttonDownEnter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return this.buttonDown(e)&&!this.buttonDownOld(e)}buttonDownExit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left;return!this.buttonDown(e)&&this.buttonDownOld(e)}buttonTap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Left,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return!1!==this.buttonDownExit(e)&&this.upTimes.get(e)-this.downTimes.get(e)<t}get clientPosition(){return this.state.clientPosition}get screenPosition(){return this.state.screenPosition}get ray(){return this.raycaster.ray}intersectPlane(e){let{distance:t=1e3,out:n=(0,i._)(this,u).result.point}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ray:r}=this.raycaster,{point:a,line:s,result:o,plane:l}=(0,i._)(this,u);if("string"==typeof e)switch(l.constant=0,e){case"X":l.normal.set(1,0,0);break;case"Y":l.normal.set(0,1,0);break;case"Z":l.normal.set(0,0,1)}else l.copy(e);return s.set(r.origin,a.copy(r.origin).addScaledVector(r.direction,t)),o.intersected=!!l.intersectLine(s,n),o}updatePosition(e,t,n){let{x:r,y:i}=t,a=(r-n.x)/n.width*2-1,s=-((i-n.y)/n.height*2)+1;this.camera=e,this.clientPosition.set(r,i),this.screenPosition.set(a,s),this.raycaster.setFromCamera(this.screenPosition,e)}raycastScene(e){let t=[];e.traverse(e=>{!0!==e.userData.ignorePointer&&(!1!==e.visible&&!0!==e.userData.helper||!0===e.userData.pointerArea)&&(0,l.uW)(e)&&this.raycaster.intersectObject(e,!1,t)}),t.sort((e,t)=>e.distance-t.distance);let[n]=t;if(n){var r,i;let e=null!=(i=n.object.userData.onPointerTap)?i:n.object.userData.pointerArea&&(null==(r=n.object.parent)?void 0:r.userData.onPointerTap);e&&this.buttonTap()&&e()}}update(e){this.diffState.diff(this.state,this.stateOld),this.raycastScene(e)}updateEnd(){this.stateOld.copy(this.state),this.event.reset()}initialize(e,t,n,r){let i=t=>{let r=e.getBoundingClientRect(),{clientX:i,clientY:a}=t;this.updatePosition(n,{x:i,y:a},r)},a=e=>{i(e)},s=e=>{i(e),this.state.buttons|=1<<e.button,this.downTimes.set(e.button,r.time)},o=e=>{this.state.buttons&=~(1<<e.button),this.upTimes.set(e.button,r.time)};return t.addEventListener("pointermove",a),t.addEventListener("pointerdown",s),t.addEventListener("pointerup",o),()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerdown",s),t.removeEventListener("pointerup",o)}}constructor(){(0,a._)(this,u,{writable:!0,value:void 0}),this.state=new c,this.stateOld=new c,this.diffState=new c,this.downTimes=new Map,this.upTimes=new Map,this.event=new class{consume(){this.consumed=!0}reset(){this.consumed=!1}constructor(){this.consumed=!1}},this.camera=null,this.raycaster=new o.tBo,(0,s._)(this,u,{plane:new o.Zcv,point:new o.Pq0,line:new o.cZY,result:{intersected:!1,point:new o.Pq0}})}}},46634:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,89294,23)),Promise.resolve().then(n.bind(n,14137)),Promise.resolve().then(n.bind(n,6688)),Promise.resolve().then(n.bind(n,42726)),Promise.resolve().then(n.bind(n,42537)),Promise.resolve().then(n.bind(n,20657)),Promise.resolve().then(n.bind(n,18140)),Promise.resolve().then(n.bind(n,89651)),Promise.resolve().then(n.bind(n,20695)),Promise.resolve().then(n.bind(n,97204)),Promise.resolve().then(n.bind(n,13982)),Promise.resolve().then(n.bind(n,18653))},54167:e=>{e.exports={FlexibleLayout:"flexible-layout_FlexibleLayout__yX36z",Container:"flexible-layout_Container__m1z5G"}},54956:e=>{e.exports={ShaderXplr:"style_ShaderXplr__ui5Wo",Selectors:"style_Selectors__q_Gtx",Include:"style_Include__P24wx",Hover:"style_Hover__KfJWT",Base:"style_Base___m7UK",Dim:"style_Dim__SFNyL",BaseContentWrapper:"style_BaseContentWrapper__nBKWd",OverlayContentWrapper:"style_OverlayContentWrapper___G7Tu",IncludeHighlight:"style_IncludeHighlight__2NZpu",Overlay:"style_Overlay__33OtX",TitleBar:"style_TitleBar__vfcXx"}},56647:(e,t,n)=>{"use strict";n.d(t,{R:()=>d});var r=n(49797),i=n(6726),a=n(72612),s=n(22641);let o=new r.I9Y,l=new r.Pq0,c=new r.kn4;function*u(e){let t=new WeakSet;for(let n of e)t.has(n)||(t.add(n),yield n)}function h(e,t,n,r,i){if(null==n?void 0:n.transform)for(let e of((0,s.vl)(n.transform,c),u(t)))e.applyMatrix4(c);if((null==n?void 0:n.color)!==void 0&&e.color(n.color),r){for(let n=0;n<t.length-1;n++)e.points.push(t[n],t[n+1]);i&&e.points.push(t[t.length-1],t[0])}else e.points.push(...t)}class d extends r.DXC{addTo(e){return e?e.add(this):this.removeFromParent(),this}*uniquePoints(){yield*u(this.points)}opacity(e){return this.material.opacity=e,this.material.transparent=this.state.forceTransparent||e<1,this.material.depthWrite=e>=1,this.material.needsUpdate=!0,this}color(e){return this.colors.set(this.points.length,new r.Q1f(e)),this}forceTransparent(){return this.state.forceTransparent=!0,this.material.transparent=!0,this}translate(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i,a]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x+=r,e.y+=i,e.z+=a;return this}rescale(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i,a]=1===t.length?(0,s.jj)(t[0],l):t;for(let e of this.uniquePoints())e.x*=r,e.y*=i,e.z*=a;return this}showOccludedLines(){let{opacity:e=.2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new r.mrM({color:this.material.color,transparent:!0,depthFunc:r.K52,opacity:e}),n=new r.DXC(this.geometry,t);return this.add(n),this}clear(){return this.points.length=0,this.colors.clear(),this.geometry.setDrawRange(0,0),this}draw(){if(!1===this.state.hasAlreadyBeenRendered&&-1===this.state.reservePoints)this.geometry.setFromPoints(this.points),this.geometry.setDrawRange(0,this.points.length),this.state.reservePoints=this.points.length;else{let{position:e}=this.geometry.attributes;e||(e=new r.THS(new Float32Array(3*this.state.reservePoints),3),this.geometry.setAttribute("position",e));let t=this.points.length;t>e.count&&(console.warn("LineHelper: The number of points (".concat(t,") is greater than the reserved points (").concat(e.count,").")),t=e.count),this.geometry.setDrawRange(0,t);for(let n=0;n<t;n++){let{x:t,y:r,z:i}=this.points[n];e.setXYZ(n,t,r,i)}e.needsUpdate=!0}if(this.geometry.computeBoundingSphere(),this.material.vertexColors=this.colors.size>0,this.material.needsUpdate=!0,this.colors.size>0){var e;let{color:t}=this.geometry.attributes;t||(t=new r.THS(new Float32Array(3*this.geometry.attributes.position.count),3),this.geometry.setAttribute("color",t));let n=new r.Q1f(null!=(e=this.colors.get(0))?e:"white"),i=this.points.length;for(let e=0;e<i;e++){let r=this.colors.get(e);r&&n.copy(r),t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}return this}line(e,t,n){return h(this,[(0,s.jj)(e),(0,s.jj)(t)],n),this}capsule2(e,t,n,i){let o=(0,s.jj)(e),l=(0,s.jj)(t),c=new r.Pq0().subVectors(l,o),u=c.length(),d=c.clone().divideScalar(u),p=new r.Pq0(-d.y,d.x);return h(this,[...(0,a.loopArray)(24,e=>{let t=e.p*Math.PI;return o.clone().addScaledVector(p,n*Math.cos(t)).addScaledVector(d,-n*Math.sin(t))}),...(0,a.loopArray)(24,e=>{let t=e.p*Math.PI;return l.clone().addScaledVector(p,-n*Math.cos(t)).addScaledVector(d,n*Math.sin(t))})],i,!0,!0),this}polygon(e,t){let n=e.map(e=>(0,s.jj)(e)),r=[];for(let e=0;e<n.length;e++)r.push(n[e],n[(e+1)%n.length]);return h(this,r,t),this}polyline(e,t){let n=e.map(e=>(0,s.jj)(e)),r=[];for(let e=0;e<n.length-1;e++)r.push(n[e],n[e+1]);return h(this,r,t),this}circle(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{x:i,y:a,z:l,radius:c,segments:u,plane:p,...f}={...d.circleDefaultOptions,...(()=>{if(t.length>1){let[e,n,r]=t,{x:i,y:a}=(0,s.wX)(e,o);return{x:i,y:a,radius:n,...r}}return t[0]})()},g=new r.Pq0(1,0,0),m=new r.Pq0(0,1,0),v=[];for(let e=0;e<u;e++){let t=e/u*Math.PI*2,n=(e+1)/u*Math.PI*2,s=Math.cos(t)*c,o=Math.sin(t)*c,h=Math.cos(n)*c,d=Math.sin(n)*c,p=new r.Pq0(i,a,l).addScaledVector(g,s).addScaledVector(m,o),f=new r.Pq0(i,a,l).addScaledVector(g,h).addScaledVector(m,d);v.push(p,f)}if("XZ"===p)for(let e of v)e.set(e.x,0,e.y);if("YZ"===p)for(let e of v)e.set(0,e.x,e.y);return h(this,v,f),this}sphere(e){return this.circle({...e,plane:"XY"}).circle({...e,plane:"XZ"}).circle({...e,plane:"YZ"})}rectangle(e,t){let{centerX:n,centerY:a,width:s,height:o}=i.M_.from(e),l=s/2,c=o/2,u=new r.Pq0(n-l,a-c,0),d=new r.Pq0(n+l,a-c,0),p=new r.Pq0(n+l,a+c,0),f=new r.Pq0(n-l,a+c,0);return h(this,[u,d,d,p,p,f,f,u],t),this}placeholder(e,t){let n=i.M_.from(e);return this.rectangle(n,t).line(n.fromRelativePoint(0,0),n.fromRelativePoint(1,1),t).line(n.fromRelativePoint(1,0),n.fromRelativePoint(0,1),t)}grid2(e){let{plane:t,x:n,y:i,z:a,size:l,subdivisions:c,width:u,height:p,widthSubdivisions:f,heightSubdivisions:g,...m}={...d.grid2DefaultOptions,...e},{x:v,y:x}=(0,s.wX)(l,o),{x:y,y:w}=(0,s.wX)(null!=c?c:l);u&&(v=u),p&&(x=p),f&&(y=f),g&&(w=g);let b=v/2,_=x/2,C=[];for(let e=0;e<=y;e++){let t=e/y*v-b;C.push(new r.Pq0(t,-_,0),new r.Pq0(t,_,0))}for(let e=0;e<=w;e++){let t=e/w*x-_;C.push(new r.Pq0(-b,t,0),new r.Pq0(b,t,0))}let P=new r.Pq0(n,i,a);for(let e of C)e.add(P);if("XZ"===t)for(let e of C)e.set(e.x,0,e.y);if("YZ"===t)for(let e of C)e.set(0,e.x,e.y);return h(this,C,m),this}box(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=0,i=0,a=1,o=1,c=1,{center:u,size:h,box3:d}=e;if(void 0!==u&&({x:t,y:n,z:i}=(0,s.jj)(u,l)),void 0!==h&&({x:a,y:o,z:c}=(0,s.jj)(h,l)),void 0!==d){let{min:r,max:s}=d,{x:l,y:u,z:h}=r,{x:p,y:f,z:g}=s;e.asIntBox3&&(p+=1,f+=1,g+=1),t=(l+p)/2,n=(u+f)/2,i=(h+g)/2,a=p-l,o=f-u,c=g-h}let p=a/2,f=o/2,g=c/2,m=new r.Pq0(t-p,n-f,i-g),v=new r.Pq0(t+p,n-f,i-g),x=new r.Pq0(t+p,n+f,i-g),y=new r.Pq0(t-p,n+f,i-g),w=new r.Pq0(t-p,n-f,i+g),b=new r.Pq0(t+p,n-f,i+g),_=new r.Pq0(t+p,n+f,i+g),C=new r.Pq0(t-p,n+f,i+g);return this.points.push(m,v,v,x,x,y,y,m),this.points.push(w,b,b,_,_,C,C,w),this.points.push(m,w,v,b,x,_,y,C),this}plus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=t/2,{x:a,y:l}=(0,s.wX)(e,o),c=new r.Pq0(a-i,l,0),u=new r.Pq0(a+i,l,0);return h(this,[c,u,new r.Pq0(a,l-i,0),new r.Pq0(a,l+i,0)],n),this}cross(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=t/2,{x:a,y:l}=(0,s.wX)(e,o),c=new r.Pq0(a-i,l-i,0),u=new r.Pq0(a+i,l+i,0);return h(this,[c,u,new r.Pq0(a-i,l+i,0),new r.Pq0(a+i,l-i,0)],n),this}constructor(e=-1,t=new r.mrM({vertexColors:!0})){super(new r.LoY,t),this.points=[],this.colors=new Map,this.state={forceTransparent:!1,hasAlreadyBeenRendered:!1,reservePoints:-1},this.state.reservePoints=e,this.onBeforeRender=()=>{this.state.hasAlreadyBeenRendered=!0}}}d.circleDefaultOptions={plane:"XY",x:0,y:0,z:0,radius:.5,segments:96},d.grid2DefaultOptions={plane:"XY",x:0,y:0,z:0,size:8,width:void 0,height:void 0,subdivisions:void 0,widthSubdivisions:void 0,heightSubdivisions:void 0}},60041:(e,t,n)=>{"use strict";n.d(t,{b:()=>y,e:()=>b});var r=n(888),i=n(30158);let a=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var s=n(49797),o=n(85795);class l{static from(e,t){if(t instanceof o.Observable){if("number"==typeof t.value)return new l(e,t);throw Error("Observable value must be a number")}let n=typeof t;return"object"===n&&(t.constructor===Object||t instanceof s.nc$)&&"value"in t?new l(e,t):"string"===n?new l(e,{value:new s.Q1f(t)}):new l(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,n="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(n="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(n,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(n,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(n,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(n,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(n,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(n,";");if(t.isTexture)if(t.isCubeTexture)return"uniform samplerCube ".concat(e).concat(n,";");else return"uniform sampler2D ".concat(e).concat(n,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function c(){let e=(0,r._)(["","s*",""],["","\\s*",""]);return c=function(){return e},e}let u=null,h=e=>(u=e,y),d="// ShaderForge (injected code) ->",p="// <- ShaderForge",f=e=>"".concat(d,"\n").concat(e.trim(),"\n").concat(p),g=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(String.raw(c(),t(p),t(d)),"g");return e.replaceAll(n,"")};class m{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="#include <".concat(e,">"),r=this.type;if(t&&!1===u[r].includes(n))throw Error('"'.concat(n,'" is not present in the shader template program.'));return{pattern:n,type:r}}replace(e,t){if(e instanceof RegExp){let{type:n}=this;u[n]=u[n].replace(e,f(t))}else{let{type:n,pattern:r}=this.getPattern(e),i=f(t);u[n]=u[n].replace(r,i)}return y}inject(e,t,n){let{type:r,pattern:i}=this.getPattern(t),a="after"===e?"".concat(i,"\n").concat(f(n)):"".concat(f(n),"\n").concat(i);return u[r]=u[r].replace(i,a),y}injectTokenComments(){for(let e of a){let{type:t,pattern:n}=this.getPattern(e,{throwError:!1});u[t]=u[t].replace(n,"\n        ".concat(n,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return y}header(e){let t=this.type;return u[t]="".concat(e,"\n").concat(u[t]),y}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u[this.type]=u[this.type].replace("void main() {","\n      ".concat(f(t.join("\n\n")),"\n      void main() {\n    ")),y}mainBeforeAll(e){return u[this.type]=u[this.type].replace("void main() {","void main() {\n        ".concat(f(e))),y}mainAfterAll(e){return u[this.type]=u[this.type].replace(/}\s*$/,"\n      ".concat(f(e),"\n    }")),y}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[n,r]of Object.entries(e)){let e=l.from(n,r);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,n]of Object.entries(e)){let e=l.from(t,n);if(t in u.uniforms){if(e.value!==u.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else u.uniforms[t]=e}}(e)}return y}clean(){return u[this.type]=g(u[this.type]),y}printFinalCode(){return console.log(u[this.type].replace(/#include <(.*)>/g,(e,t)=>{let n=i.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n})),y}constructor(e){this.type=e}}let v=new m("fragmentShader"),x=new m("vertexShader"),y=Object.assign(function(e){return e&&h(e),y},{shaderName:function(e){return u.shaderName="".concat(e," (ShaderForge)"),y},defines:function(e){return u.defines?Object.assign(u.defines,e):u.defines=e,y},uniforms:function(e){return x.uniforms(e),v.uniforms(e),y},varying:function(e){let t="";if("string"==typeof e)t=e;else{let n=[];for(let[t,r]of Object.entries(e))n.push("varying ".concat(r," ").concat(t,";"));t=n.join("\n")}return x.top(t),v.top(t),y},top:function(e){return x.top(e),v.top(e),y},vertex:x,fragment:v,header:function(e){return v.header(e),x.header(e),y},clean:function(){return v.clean(),x.clean(),y},with:h,wrap:(e,t)=>(e.onBeforeCompile=e=>{u=e},e)}),w=new s.Q1f;function b(e){let{r:t,g:n,b:r}=w.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(r.toFixed(3),")")}},64411:e=>{e.exports={VertigoWidgetClient:"vertigo_VertigoWidgetClient__tDfOf",BgBlur:"vertigo_BgBlur__WC2S2"}},64857:(e,t,n)=>{"use strict";n.d(t,{w:()=>r.w});var r=n(67840)},66851:(e,t,n)=>{"use strict";n.d(t,{_:()=>l,w:()=>s});var r=n(49797),i=n(22641);let a=new r.kn4;function s(e){return(0,i.vl)(e,a)}let o=new r.Q1f;function l(e){return o.set(e)}},67840:(e,t,n)=>{"use strict";n.d(t,{w:()=>m});var r=n(49797),i=n(22641),a=n(66851),s=n(79285);function o(){return[...new Set(["�",..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",..."\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff",..."0123456789",..." @#.,!?\xbf:;-+*/=%&|()[]{}<>$'’\""])].join("")}class l{constructor(){let e=o(),t=new r.I9Y(16,24),n=t.x/t.y,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.I9Y;return n.x=Math.ceil(Math.sqrt(e/t)),n.y=Math.ceil(e/n.x),n}(e.length,n),a=t.clone().multiplyScalar(3),l=(0,s.ceilPowerOfTwo)(a.x*i.x),c=(0,s.ceilPowerOfTwo)(a.y*i.y),u=l/(a.x*i.x),h=c/(a.y*i.y);if("undefined"==typeof document){this.canvas=null,this.texture=null,this.symbols="",this.charGrid=new r.I9Y;return}let d=document.createElement("canvas");d.width=l,d.height=c;let p=d.getContext("2d");p.font="".concat(.8*a.y,"px monospace"),p.textBaseline="top",p.fillStyle="black",p.fillRect(0,0,l,c),p.fillStyle="white",p.transform(u,0,0,h,0,0);for(let t=0;t<e.length;t++){let n=Math.floor(t/i.x),r=(t-n*i.x+.12)*a.x,s=a.y*(n+.19999999999999996);p.fillText(e[t],r,s)}this.canvas=d,this.texture=new r.GOR(d),this.symbols=e,this.charGrid=i}}l.getDefaultSymbols=o;let c={oriented:0,billboard:1},u={nodeMaterial:!1,textCount:1e3,lineLength:24,lineCount:2,charSize:new r.I9Y(.2,.3),textSize:1,textOffset:0,orientation:"billboard",textDefaults:{color:"#ff00ff",size:1}};class h{get textCount(){return this.metadata.textCount}get lineCount(){return this.metadata.lineCount}get lineLength(){return this.metadata.lineLength}get strideHeaderByteSize(){return this.metadata.strideHeaderByteSize}get strideByteSize(){return this.metadata.strideByteSize}get textureSize(){return new r.I9Y(this.metadata.textureWidth,this.metadata.textureHeight)}encode(){let e=JSON.stringify(this.metadata),t=new TextEncoder().encode(e),n=t.length,r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,n,!0);let i=new Uint8Array(4+n+this.array.length);return i.set(r,0),i.set(t,4),i.set(this.array,4+n),i}static decode(e){let t=new DataView(e.buffer).getUint32(0,!0),n=e.slice(4,4+t),r=JSON.parse(new TextDecoder().decode(n)),i=new h(r.symbols,r.textCount,r.lineCount,r.lineLength),a=e.slice(4+t);return i.array.set(a),i}info(){return"data: ".concat(this.array.length," bytes, ").concat(this.textureSize.x,"x").concat(this.textureSize.y)}getTextAt(e){let{array:t}=this,{symbols:n,lineLength:r,strideByteSize:i,strideHeaderByteSize:a}=this.metadata,s=e*i,o=t[s+0],l=t[s+16],c=e=>e.toString(16).padStart(2,"0"),u="#".concat(c(t[s+4])).concat(c(t[s+4+1])).concat(c(t[s+4+2])),h=t[s+4+3],d="#".concat(c(t[s+8])).concat(c(t[s+8+1])).concat(c(t[s+8+2])),p=t[s+8+3],f=[];for(let e=0;e<o;e++){let i=s+a+e*r,o=[];for(let e=0;e<l;e++){let r=n[t[i+e]];o.push(r)}f.push(o.join(""))}return{text:f.join("\n"),textColor:u,textOpacity:h,backgroundColor:d,backgroundOpacity:p,currentLineCount:o,currentLineLength:l}}setSizeAt(e,t){let{array:n}=this,{strideByteSize:r}=this.metadata;return new DataView(n.buffer).setFloat32(e*r+12,t),this}setColorAt(e,t){let{color:n,opacity:r,textColor:i=n,textOpacity:o=r,backgroundColor:l=i,backgroundOpacity:c=+(null!=r?!!r:!!t.backgroundColor)}=t,{array:u}=this,{strideByteSize:h}=this.metadata;{let t=e*h+4;if(void 0!==i){let{r:e,g:n,b:r}=(0,a._)(i);u[t+0]=255*e,u[t+1]=255*n,u[t+2]=255*r}void 0!==o&&(u[t+3]=(0,s.toff)(o))}{let t=e*h+8;if(void 0!==l){let{r:e,g:n,b:r}=(0,a._)(l);u[t+0]=255*e,u[t+1]=255*n,u[t+2]=255*r}void 0!==c&&(u[t+3]=(0,s.toff)(c))}return this.texture.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{trim:r=!1,size:i=1,...a}=n;this.setColorAt(e,a),this.setSizeAt(e,i);let{array:s}=this,{symbols:o,lineCount:l,lineLength:c,strideByteSize:u,strideHeaderByteSize:h}=this.metadata,d=(r?t.trim():t).split("\n");d.length>l&&(console.warn("TextHelper: Text has more lines than ".concat(l,", truncating.")),d=d.slice(0,l)),d=d.map(e=>(r&&(e=e.trim()),e.length>c)?(console.warn("TextHelper: Line length is greater than ".concat(c," characters, clamping.")),e.slice(0,c)):e),s[e*u+0]=d.length;let p=e*u,f=d.length;for(let e=0;e<l;e++){let t=0;e<f&&(s[p+16+4*e]=d[e].length,t=d[e].length);let n=p+h+e*c;for(let r=0;r<c;r++){let i=n+r;if(e>=f||r>=t)s[i]=0;else{let t=o.indexOf(d[e].charAt(r));s[i]=-1===t?0:t}}}this.texture.needsUpdate=!0}constructor(e,t,n,i,{defaultColor:o="#ffffff",defaultTextOpacity:l=1,defaultBackgroundOpacity:c=0}={}){let u=16+4*n,h=u+4*Math.ceil(n*i/4),d=Math.ceil((u+t*h)/4),p=(0,s.ceilPowerOfTwo)(Math.sqrt(d)),f=Math.ceil(d/p);this.metadata={symbols:e,textCount:t,lineCount:n,lineLength:i,strideHeaderByteSize:u,strideByteSize:h,textureWidth:p,textureHeight:f};let g=new Uint8Array(p*f*4),{r:m,g:v,b:x}=(0,a._)(o);for(let e=0;e<t;e++){let t=e*h;g[(t+=4)+0]=255*m,g[t+1]=255*v,g[t+2]=255*x,g[t+3]=255*l,g[(t+=4)+0]=255*m,g[t+1]=255*v,g[t+2]=255*x,g[t+3]=255*c}this.array=g,this.texture=new r.GYF(g,p,f,r.GWd,r.OUM),this.texture.needsUpdate=!0}}var d=n(17953),p=n(81074),f=n(60041);let g=0;class m extends r.ZLX{applyTransform(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let a=(0,i.GD)(t),s=new r.kn4,o=this.instanceMatrix.array.length;for(let e=0;e<o;e+=16)s.fromArray(this.instanceMatrix.array,e).multiply(a).toArray(this.instanceMatrix.array,e);return this}addTo(e){return e?e.add(this):this.removeFromParent(),this}onTop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return 0!==e?(this.renderOrder=e,this.material.depthTest=!1,this.material.depthWrite=!1,this.material.transparent=!0):(this.renderOrder=0,this.material.depthTest=!0,this.material.depthWrite=!0,this.material.transparent=!1),this}setData(e){return this.data=e,this}clearAllText(){return this.instanceMatrix.array.fill(0),this.instanceMatrix.needsUpdate=!0,this}setTextAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.data.setTextAt(e,t,{...this.options.textDefaults,...n}),this.setMatrixAt(e,(0,a.w)(n)),this.instanceMatrix.needsUpdate=!0,this}setColorAt(e,t){this.data.setColorAt(e,{color:t})}setTextColorAt(e,t){return this.data.setColorAt(e,t),this}getDataStringView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,o=Array.from({length:t.length/4},(e,n)=>{let r=4*n,i=t[r+0],a=t[r+1];return[i,a,t[r+2],t[r+3]]}).slice(a*n/4,s*n/4),l=[];l.push("\nData texture array (".concat(t.length," bytes):")),l.push("\ndataStride: ".concat(n," (").concat(n/4," x 4 bytes)"));let c=4+r;for(let t=0;t<o.length;t++){let a=t%(n/4);0===a&&(l.push("\npack #".concat(t/(n/4))),l.push("info:")),4===a&&l.push("lines (".concat(r,"):")),a===c&&l.push("chars (".concat(i,"):"));let[s,u,h,d]=o[t],p="".concat(t.toString().padEnd(3)," - ").concat((4*t).toString().padEnd(4),":   ").concat(s.toString().padStart(3),", ").concat(u.toString().padStart(3),", ").concat(h.toString().padStart(3),", ").concat(d.toString().padStart(3));a>=c&&(p+="     ".concat(e.symbols[s]).concat(e.symbols[u]).concat(e.symbols[h]).concat(e.symbols[d])),l.push("  "+p)}return l.join("\n")}(this.atlas,this.data.array,this.data.strideByteSize,this.options.lineCount,this.options.lineLength,e,t)}constructor(e){let t={...u,...e},n=new l,a=new h(n.symbols,t.textCount,t.lineCount,t.lineLength),s=function(e,t,n){let a={...u,...e},s=new r.I9Y(a.textSize*a.lineLength*a.charSize.x,a.textSize*a.lineCount*a.charSize.y);return{uCameraMatrix:{value:new r.kn4},uOrientation:{value:function(e){if("string"==typeof e){if(e in c)return c[e];throw Error("Invalid orientation: ".concat(e))}if(Object.values(c).includes(e))return e;throw Error("Invalid orientation: ".concat(e))}(a.orientation)},uTextOffset:{value:(0,i.wX)(a.textOffset)},uPlaneSize:{value:s},uCharSize:{value:a.charSize},uLineLength:{value:a.lineLength},uLineCount:{value:a.lineCount},uAtlasCharGrid:{value:n.charGrid},uDataStrideHeader:{value:t.strideHeaderByteSize},uDataStride:{value:t.strideByteSize/4},uDataTexture:{value:t.texture},uDataTextureSize:{value:t.textureSize},uBoxBorderWidth:{value:0}}}(t,a,n),o=s.uPlaneSize.value;super(new r.bdM(o.width,o.height),t.nodeMaterial?function(e,t){let n=new p.P8l;n.name="TextHelperMaterial",n.transparent=!0,n.alphaTest=.5,n.side=r.$EB,console.warn("TextHelperMaterial is not supported in WebGPU yet, do not expect it to work.");let i=(0,d.PiW)(e.uDataTextureSize.value).onFrameUpdate(()=>e.uDataTextureSize.value),a=(0,d.PiW)(e.uDataStride.value).onFrameUpdate(()=>e.uDataStride.value);function s(t,n){let r=i.x,s=(0,d.WQq)((0,d.lKK)(t,a),n),o=(0,d.y4m)(s,r),l=(0,d.jbE)(s,(0,d.lKK)(o,r));return(0,d.wHr)(e.uDataTexture.value,(0,d.ZcS)(l,o))}(0,d.PiW)(e.uDataStrideHeader.value).onFrameUpdate(()=>e.uDataStrideHeader.value),(0,d.PiW)(e.uAtlasCharGrid.value).onFrameUpdate(()=>e.uAtlasCharGrid.value);let o=s(d.cGD,0);(0,d.PCg)((0,d.lKK)(o.r,255)),(0,d.PCg)(s(d.cGD,1)),(0,d.PCg)(s(d.cGD,2)),(0,d.fVC)(1);let l=(0,d.PiW)(1).onRenderUpdate(()=>e.uOrientation.value);return n.positionNode=(0,d.Fn)(()=>{let e=(0,d.eR5)().toVar();return(0,d.If)(l.equal(0),()=>{e.assign(d.WVU)}).Else(()=>{e.assign((0,d.w00)(d.FLB).mul(d.WVU))}),e})(),n.colorNode=(0,d.yWT)("yellow"),n}(s,0):function(e,t){let n=new r.V9B({map:t.texture,transparent:!0,alphaTest:.5,side:r.$EB});return n.name="TextHelperMaterial",n.onBeforeCompile=t=>f.b.with(t).uniforms(e).varying({vInstanceId:"float",vTextColor:"vec4",vBackgroundColor:"vec4",vCurrentLineCount:"float"}).top("\n      vec4 getData4(int instanceId, int offset) {\n        int width = int(uDataTextureSize.x);\n        int index = instanceId * int(uDataStride) + offset;\n        int dataY = index / width;\n        int dataX = index - dataY * width;\n        return texelFetch(uDataTexture, ivec2(dataX, dataY), 0);\n      }\n      vec4 getData4(float instanceId, int offset) {\n        return getData4(int(instanceId), offset);\n      }\n        \n      vec2 getCharOffset(float instanceId, float charIndex) {\n        int p = int(uDataStrideHeader + charIndex);\n        int q = p / 4;\n        int r = p - q * 4; // p % 4;\n        vec4 charIndexes = getData4(instanceId, q);\n        float i = charIndexes[r] * 255.0;\n        float x = mod(i, uAtlasCharGrid.x);\n        float y = floor(i / uAtlasCharGrid.x);\n        return vec2(x, uAtlasCharGrid.y - y - 1.0) / uAtlasCharGrid;\n      }\n      vec2 getCharOffset(float instanceId, float line, float char) {\n        // return vec2(line * 82.0 + char, 0.0) / uAtlasCharGrid;\n        return getCharOffset(instanceId, line * uLineLength + char);\n      }\n    ").vertex.replace("project_vertex","\n      vec4 infoTexel = getData4(gl_InstanceID, 0);\n      vCurrentLineCount = infoTexel.r * 255.0;\n\n      vTextColor = getData4(gl_InstanceID, 1);\n      vBackgroundColor = getData4(gl_InstanceID, 2);\n\n      vec4 sizeBytes = getData4(gl_InstanceID, 3) * 255.0;\n      uint encoded =\n        uint(sizeBytes.x) << 24 |\n        uint(sizeBytes.y) << 16 |\n        uint(sizeBytes.z) << 8  |\n        uint(sizeBytes.w);\n      float size = uintBitsToFloat(encoded);\n\n      vec4 mvPosition = vec4(transformed * size, 1.0);\n\n      mat4 textMatrix = uOrientation < 0.5\n        ? modelMatrix * instanceMatrix\n        : mat4(\n          uCameraMatrix[0],\n          uCameraMatrix[1],\n          uCameraMatrix[2],\n          modelMatrix * vec4(instanceMatrix[3].xyz, 1.0));\n\n      mvPosition.xy += uTextOffset;\n\n      mvPosition = viewMatrix * textMatrix * mvPosition;\n\n      gl_Position = projectionMatrix * mvPosition;\n\n      vInstanceId = float(gl_InstanceID);\n    ").fragment.top("\n      float sdBox(in vec2 p, in vec2 b) {\n        vec2 d = abs(p) - b;\n        return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n      }\n\n      vec4 getCharColor() {\n        vec2 uv = vMapUv * vec2(uLineLength, uLineCount);\n\n        uv.y += (uLineCount - vCurrentLineCount) * 0.5;\n        float lineIndex = floor((uLineCount - uv.y));\n\n        if (lineIndex < 0.0 || lineIndex >= vCurrentLineCount)\n          discard;\n\n        float currentLineLength = getData4(vInstanceId, 4 + int(lineIndex)).r * 255.0;\n        // vec2 ddx = dFdx(uv);\n        // vec2 ddy = dFdy(uv);\n        uv.x += (uLineLength - currentLineLength) * -0.5;\n        float charIndex = floor(uv.x);\n\n        if (charIndex < 0.0 || charIndex >= currentLineLength)\n          discard;\n\n        uv = fract(uv);\n        // diffuseColor = vec4(uv, 1.0, 1.0);\n        uv /= uAtlasCharGrid;\n\n        uv += getCharOffset(vInstanceId, lineIndex, charIndex);\n        // float lod = log2(max(length(dFdx(vMapUv)), length(dFdy(vMapUv))));\n        vec4 charColor = textureLod(map, uv, 0.0);\n        // Use textureGrad for better quality, when the square texture will be used\n        // vec4 sampledDiffuseColor = textureGrad(map, uv, ddx, ddy);\n        float char = charColor.r;\n        \n        return vec4(\n          mix(vBackgroundColor.rgb, vTextColor.rgb, charColor.r),\n          mix(vBackgroundColor.a, vTextColor.a, charColor.r));\n      }\n\n      vec4 getCharColorWithBorder() {\n        if (uBoxBorderWidth > 0.0) {\n          vec2 p = (vMapUv - 0.5) * uPlaneSize;\n          float d = sdBox(p, uPlaneSize * 0.5) + uBoxBorderWidth;\n          if (d > 0.0) {\n            return vTextColor;\n          }\n        }\n        return getCharColor();\n      }\n    ").fragment.replace("map_fragment","\n      diffuseColor = getCharColorWithBorder();\n    "),n}(s,n),t.textCount),this.textHelperId=g++,this.onBeforeRender=(e,t,n,r,i,a)=>{s.uCameraMatrix.value.copy(n.matrixWorld)},this.frustumCulled=!1,this.layers,this.options=t,this.atlas=n,this.data=a,this.derived={planeSize:o}}}m.defaultOptions=u,m.Atlas=l,m.Data=h},69965:e=>{e.exports={Copyable:"Copyable_Copyable__KjEYk",Overlay:"Copyable_Overlay__CzDNx"}},70261:e=>{e.exports={IconButton:"IconButton_IconButton__QPZgi"}},72612:(e,t,n)=>{"use strict";function*r(e){let t=0,n={get i(){return t},get t(){return t/e},get p(){return t/(e-1)},get size(){return e},clone(){return{...this}}};for(t=0;t<e;t++)yield n}function i(e,t){let n=[];for(let i of r(e)){let e=i.clone();n.push(t?t(e):e)}return n}function*a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0,i=0;2===t.length?(r=t[0],i=t[1]):Array.isArray(t[0])?(r=t[0][0],i=t[0][1]):(r=t[0].x,i=t[0].y);let a=0,s=0,o=0,l={get i(){return a},get x(){return s},get y(){return o},get tx(){return s/r},get ty(){return o/i},get px(){return s/(r-1)},get py(){return o/(i-1)},get sizeX(){return r},get sizeY(){return i},clone(){return{...this}}};for(o=0;o<i;o++)for(s=0;s<r;s++)yield l,a++}function s(){let e;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=0,s=0;"number"==typeof n[0]?(i=n[0],s=n[1],e=n[2]):(Array.isArray(n[0])?(i=n[0][0],s=n[0][1]):(i=n[0].x,s=n[0].y),e=n[1]);let o=[];for(let t of a(i,s)){let n=t.clone();o.push(e?e(n):n)}return o}function*o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0,i=0,a=0;3===t.length?(r=t[0],i=t[1],a=t[2]):Array.isArray(t[0])?(r=t[0][0],i=t[0][1],a=t[0][2]):(r=t[0].x,i=t[0].y,a=t[0].z);let s=0,o=0,l=0,c=0,u={get i(){return s},get x(){return o},get y(){return l},get z(){return c},get tx(){return o/r},get ty(){return l/i},get tz(){return c/a},get px(){return o/(r-1)},get py(){return l/(i-1)},get pz(){return c/(a-1)},clone(){return{...this}}};for(c=0;c<a;c++)for(l=0;l<i;l++)for(o=0;o<r;o++)yield u,s++}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=[];for(let e of o(...t))r.push(e.clone());return r}n.r(t),n.d(t,{loop:()=>r,loop2:()=>a,loop2Array:()=>s,loop3:()=>o,loop3Array:()=>l,loopArray:()=>i})},78592:e=>{e.exports={Client:"client_Client__eDdMm"}},82091:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var r=n(49797);let i=new r.WBB(1,4);class a extends r.eaF{constructor(e){super(i,new r.V9B({color:"#0c529d",...e,side:r.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(e,t,n)=>{let r=(n.near+n.far)/2;this.position.copy(n.position),this.scale.setScalar(r),this.updateMatrix(),this.updateMatrixWorld()}}}},85795:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Observable:()=>o,ObservableNumber:()=>h,ObservableSet:()=>d,ObservableTree:()=>v});let r=new Map,i=0;function a(e){for(let[t,{execTime:n,callback:a}]of(i=e,r.entries()))n<i&&(r.delete(t),a())}if("requestAnimationFrame"in globalThis&&"function"==typeof globalThis.requestAnimationFrame){let e=t=>{globalThis.requestAnimationFrame(e),a(t/1e3)};globalThis.requestAnimationFrame(e)}else{let e=Date.now();globalThis.setInterval(()=>{a((Date.now()-e)/1e3)},1e3/60)}let s=0;class o{static get nextId(){return s}is(e){return this._value===e}_invokeListeners(){let e=this._listeners[Symbol.iterator]();for(;;){let{value:t,done:n}=e.next();if(n)break;t(this._value,this)}}_handleDelay(e,t){if((null==t?void 0:t.delay)!==void 0){let{delay:n,...a}=t;return!function(e,t,n){let a="number"==typeof t?t:t.endsWith("ms")?Number.parseFloat(t.slice(0,-2))/1e3:Number.parseFloat(t.slice(0,-1)),s=i+a;r.set(e,{execTime:s,callback:n})}(this,n,()=>{this.setValue(e,a)}),this._delayed=!0,!0}return this._delayed&&r.delete(this),this._delayed=!1,!1}setValue(e,t){return!this._handleDelay(e,t)&&((this._valueMapper&&(e=this._valueMapper(e,this)),e===this._value)?(this._hasChanged=!1,!1):(this._valueOld=this._value,this._value=e,this._hasChanged=!0,this._invokeListeners(),!0))}initializeSerialization(e,t){return this.valueStringifier=e,this.valueParser=t,this}valueToString(){return this.valueStringifier?this.valueStringifier(this._value):String(this._value)}setValueFromString(e,t){if(this.valueParser){let n=this.valueParser(e);return this.setValue(n,t)}let n=typeof this._value;switch(n){case"string":return this.setValue(e,t);case"number":return this.setValue(Number(e),t);case"boolean":let r=/^true|1$/.test(e);return this.setValue(r,t);case"bigint":return this.setValue(BigInt(e),t);default:return console.warn('Observable#setValueFromString: Unsupported type "'.concat(n,'"')),!1}}setValueMapper(e){return this._valueMapper=e,!!e&&this.setValue(e(this._value,this))}clearListeners(){return this._listeners.clear(),this}onChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i]=2===t.length?t:[{},t[0]],{executeImmediately:a=!1,once:s=!1}=r;if(s){if(a)return i(this._value,this),{destroy:()=>{}};let e=this.onChange({...r,executeImmediately:!1,once:!1},(t,n)=>{e.destroy(),i(t,n)});return e}return this._listeners.add(i),a&&i(this._value,this),{destroy:()=>this._listeners.delete(i)}}onDerivativeChange(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=e(this._value),[{executeImmediately:a=!1},s]=2===n.length?n:[{},n[0]];return a&&s(i,i,this._value,this),this.onChange(t=>{let n=i;(i=e(t))!==n&&s(i,n,t,this)})}onVerify(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i,a]=3===t.length?t:[{},...t],s=i(this._value);return r.executeImmediately&&a(s,this._value,this),this.onChange(e=>{let t=i(e);t!==s&&a(s=t,e,this)})}get observableId(){return this._observableId}get value(){return this._value}set value(e){this.setValue(e)}get valueOld(){return this._valueOld}log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{value:r=e=>{var t;return null!=(t=null==e?void 0:e.toString())?t:String(e)},message:i=e=>"Obs#".concat(this._observableId," value has changed: ")}=1!==t.length?{}:"function"==typeof t[0]?{value:t[0]}:t[0];return this.onChange(()=>{console.log("".concat(i(this)," ").concat(r(this._value)))})}constructor(e,t){this._observableId=s++,this._valueMapper=null,this._listeners=new Set,this._hasChanged=!1,this._delayed=!1,this.valueStringifier=null,this.valueParser=null,this.get=()=>this._value,this.set=this.setValue.bind(this),this._value=e,this._valueOld=e;let{valueMapper:n=null,onChange:r,userData:i={}}=null!=t?t:{};this._valueMapper=n,this.userData=i,r&&this.onChange(r)}}var l=n(63126),c=n(53245);function u(e,t,n){return e<t?t:e>n?n:e}class h extends o{get lowerBound(){return this._lowerBound}set lowerBound(e){this.setBounds(e,this._upperBound)}get upperBound(){return this._upperBound}set upperBound(e){this.setBounds(this._lowerBound,e)}get min(){return this.lowerBound}set min(e){this.lowerBound=e}get max(){return this.upperBound}set max(e){this.upperBound=e}get delta(){return this._value-this._valueOld}setValue(e,t){if(e=u(e,this._lowerBound,this._upperBound),e=this._integer?Math.round(e):e,this._handleDelay(e,t))return!1;let n=super.setValue(e,t);return this._memorization&&this._memorization.setValue(this._value,!0),n}setBounds(e,t){let n=u(this._value,e,t);return this._lowerBound=e,this._upperBound=t,this._value!==n&&this.setValue(n)}setMinMax(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setBounds(...t)}initMemorization(e){let{derivativeCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof arguments[1]&&(console.warn("ObservableNumber.initMemorization(memorizationLength, derivativeCount) is deprecated. Use ObservableNumber.initMemorization(memorizationLength, { derivativeCount }) instead."),t=arguments[1]),this._memorization=new c.r(e,this._value,t),this}getMemorization(){return this._memorization}isAbove(e){return this._value>=e}isBelow(e){return this._value<e}passed(e,t){let{value:n,valueOld:r}=this,i=n>=t&&r<t,a=n<t&&r>=t;switch(e){case"through":return i||a;case"above":return i;case"below":return a}throw Error("Impossible! Typescript, where are you?")}getPassMode(e){let{value:t,valueOld:n}=this;return t>=e&&n<e?"above":t<e&&n>=e?"below":null}stepValue(e){return Math.round(this._value/e)*e}onStepChange(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r,i,a]=function(e){if(3===e.length)return e;if(2===e.length)return[e[0],{},e[1]];throw Error("Invalid arguments: (".concat(e.join(", "),")"))}(t),s=NaN;return this.onChange(i,()=>{let e=this.stepValue(r);s!==e&&a(s=e,this)})}onPass(e,t,n){return this.onChange(()=>{this.passed(e,t)&&n(this.value,this)})}increment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setValue(this._value+e)}lerpTo(e,t){let{clamp:n=!0,epsilon:r=1e-9,modulo:i=-1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this._value;if(i>=0){let s=(e=(e%i+i)%i)-a;Math.abs(s)>i/2&&(e=a+(s>0?s-i:s+i));let o=Math.abs(e-a)<r?e:a+(e-a)*(n?t<0?0:t>1?1:t:t);return this.setValue(o%i)}let s=Math.abs(e-a)<r?e:a+(e-a)*(n?t<0?0:t>1?1:t:t);return this.setValue(s)}lerp(e,t,n){let r=this._value;return(null==n?void 0:n.clamped)===!0&&(r=r<0?0:r>1?1:r),e+(t-e)*r}inverseLerp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerBound,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.upperBound,n=arguments.length>2?arguments[2]:void 0,r=(this._value-e)/(t-e);return(null==n?void 0:n.clamped)===!0&&(r=r<0?0:r>1?1:r),r}exponentialDecay(e,t,n){return this.setValue((0,l.calculateExponentialDecay)(this._value,e,t,n))}exponentialGrow(e,t,n){let r=(e=>{if("number"==typeof e)return 1-e;let[t,n]=e;return(1-t)**(1/n)})(t),i=e-(e-this._value)*r**n;return this.setValue(i)}constructor(e,t){var n,r,i;let a=-1/0,s=1/0;Array.isArray(t)?([a,s]=t,t={}):(a=null!=(n=null==t?void 0:t.lowerBound)?n:a,s=null!=(r=null==t?void 0:t.upperBound)?r:s),super(u(e,a,s),t),this._memorization=null,this._lowerBound=a,this._upperBound=s,this._integer=null!=(i=null==t?void 0:t.integer)&&i}}class d extends o{get _set(){return this._value}get _setOld(){return this._valueOld}get entering(){return new Set(this._entering)}get leaving(){return new Set(this._leaving)}get size(){return this._set.size}swap(){let{_set:e,_setOld:t}=this;this._value=t,this._valueOld=e}get value(){return new Set(this._value)}get valueOld(){return new Set(this._valueOld)}has(e){return this._value.has(e)}get shouldKeep(){return this._shouldKeep}setShouldKeep(e){return this._shouldKeep=e,this}purge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shouldKeep;if(!e)return!1;let t=new Set(this._value),n=!1;for(let r of t)e(r)||(t.delete(r),n=!0);return!!n&&this.setValue(t)}setValue(e,t){if(this._handleDelay(e,t))return!1;this.swap();let{_set:n,_setOld:r,_entering:i,_leaving:a,_shouldKeep:s}=this;for(let t of(i.clear(),a.clear(),n.clear(),e))s&&!1===s(t)||(r.has(t)||i.add(t),n.add(t));for(let e of r)n.has(e)||a.add(e);let o=i.size>0||a.size>0;return o&&this._invokeListeners(),o}add(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value,...t])}remove(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setValue([...this.value].filter(e=>!t.includes(e)))}clear(){return this.setValue([])}intersection(e){let t=new Set;for(let n of e)this.has(n)&&t.add(n);return t}otherDifference(e){let t=new Set;for(let n of e)this.has(n)||t.add(n);return t}constructor(){super(new Set),this._entering=new Set,this._leaving=new Set,this._valueOld=new Set}}var p=n(28340),f=n(22115);class g{get totalChangeCount(){return this.aOnlyChanges.length+this.bOnlyChanges.length+this.bothChanges.length}get aChangeCount(){return this.aOnlyChanges.length+this.bothChanges.length}get bChangeCount(){return this.bOnlyChanges.length+this.bothChanges.length}get a(){return this.getAChangeObject()}get b(){return this.getBChangeObject()}*getAChanges(){for(let[e,t]of this.aOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,t]}getAChangeObject(){let e={};for(let[t,n]of this.getAChanges())(0,f.HD)(e,t,n,{createAscendants:!0});return e}*getBChanges(){for(let[e,t]of this.bOnlyChanges)yield[e,t];for(let[e,t,n]of this.bothChanges)yield[e,n]}getBChangeObject(){let e={};for(let[t,n]of this.getBChanges())(0,f.HD)(e,t,n,{createAscendants:!0});return e}info(){return["Total changes: ".concat(this.totalChangeCount),"  Both changes (".concat(this.bothChanges.length,")"),...this.bothChanges.map(e=>{let[t,n,r]=e;return"    ".concat(t.join(".")," = ").concat(n," → ").concat(r)}),"","  A only changes (".concat(this.aOnlyChanges.length,")"),...this.aOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)}),"","  B only changes (".concat(this.bOnlyChanges.length,")"),...this.bOnlyChanges.map(e=>{let[t,n]=e;return"    ".concat(t.join(".")," = ").concat(n)})].join("\n")}constructor(e,t){this.aOnlyChanges=[],this.bOnlyChanges=[],this.bothChanges=[],this.objectA=e,this.objectB=t}}function m(e,t){"string"==typeof e&&(e=e.split("."));let n={},r=n;for(let t of e.slice(0,-1))r[t]={},r=r[t];return r[e[e.length-1]]=t,n}class v extends o{setMutation(e,t){if(!e||"object"!=typeof e)throw Error("Mutation must be an object.");let{value:n}=this,r=Array.isArray(e)?m(e[0],e[1]):e,i=!1;if((0,p.gC)(r,{treatConstructedObjectAsValue:!1,onValue(e,t){let{value:r,exists:a}=(0,p.vz)(n,t);if(!a||e!==r)return i=!0,"break"}}),!i)return!1;let a=(0,p.Go)(n);return(0,p.Eg)(a,r),this.diff=function(e,t){let n=new g(e,t);return(0,f.gC)(e,{treatConstructedObjectAsValue:!1,onValue(e,r){let{value:i,exists:a}=(0,f.vz)(t,r);a&&e===i||(a?n.bothChanges.push([r,e,i]):n.aOnlyChanges.push([r,e]))}}),(0,f.gC)(t,{treatConstructedObjectAsValue:!1,onValue(t,r){let{value:i,exists:a}=(0,f.vz)(e,r);(!a||t!==i)&&(a||n.bOnlyChanges.push([r,t]))}}),n}(n,a),super.setValue(a,t)}enqueueMutation(e){var t;return null!=this._pendingMutations||(this._pendingMutations={}),(0,p.Eg)(this._pendingMutations,Array.isArray(e)?m(e[0],e[1]):e),this}flushMutations(e){if(!this._pendingMutations)return!1;let t=this.setMutation(this._pendingMutations,e);return this._pendingMutations=null,t}setValue(e,t){return this.setMutation(e,t)}onMutation(e,t){let n=Array.isArray(e)?e:e.split("."),r=n.length;return this.onChange((e,i)=>{let{valueOld:a}=i,s=!1,o=null;for(let[e]of this.diff.bothChanges)if((0,p.cD)(e,n,{maxLength:r})){s=!0,o=e.slice(0,r);break}s&&t((0,p.vz)(e,n).value,(0,p.vz)(a,n).value,{observable:this,path:o})})}constructor(...e){super(...e),this.diff=new g({},{}),this._pendingMutations=null,this.mutate=this.setMutation.bind(this)}}},87381:(e,t,n)=>{"use strict";n.d(t,{$z:()=>function* e(t,n){let{includeSelf:r}={...l,...n};for(let n of(r&&(yield t),t.children))yield*e(n,{includeSelf:!0})},DN:()=>s,mj:()=>a,rd:()=>o});var r=n(61567),i=n(90927);function a(e,t,n){return t&&((0,r.Th)(t)?t.add(e):(0,i.N)(e,t)),null==n||n(e),e}let s=a;function o(e,t){let n=t;for(;n.parent;){if(n.parent===e)return!0;n=n.parent}return!1}let l={includeSelf:!1}},88493:(e,t,n)=>{"use strict";n.d(t,{uB:()=>h,yk:()=>l});var r=n(70691),i=n(67203),a=n(7587),s=n(6697);n(90927);let o=(0,i.createContext)(null);function l(e,t){let n=(0,i.useContext)(o);return(0,a.C7)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}let c={className:"",assetsPath:"/"};function u(e){let{children:t,className:n,assetsPath:l}={...c,...e},u=(0,i.useMemo)(()=>new s.XW,[]);u.loader.setPath(l);let{ref:h}=(0,a.IZ)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:u})},[]);return(0,r.jsx)("div",{ref:h,className:n,style:{position:"absolute",inset:0},children:(0,r.jsxs)(o.Provider,{value:u,children:[(0,r.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,r.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:u.initialized&&t})]})})}function h(e){return function(){let[e,t]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,r.jsx)(u,{...e})}},89651:(e,t,n)=>{"use strict";n.d(t,{Client:()=>x});var r=n(70691),i=n(88493),a=n(49797),s=n(48083),o=n(64857),l=n(87381),c=n(36508),u=n(66851),h=n(17099),d=n(11577),p=n(35375);async function f(e){let t=new d.zg(new d.pp(e)),n=await t.getEntries(),r=await n[0].getData(new d.$i);return await t.close(),r}async function g(){let e=await fetch(p.$.assets("misc/knut-hamsun-hunger.bin.zip")),t=await e.arrayBuffer(),n=await f(new Uint8Array(t));return o.w.Data.decode(n)}async function*m(e){let t=new s.n({size:100}).initialize(e.renderer.domElement).start();yield(0,c.xy)("three",n=>{t.update(e.camera,e.aspect,n.deltaTime)});let n=await g();document.querySelector("#instance-count").textContent=n.metadata.textCount.toString();let r=new o.w({textCount:n.metadata.textCount,lineCount:n.metadata.lineCount,lineLength:n.metadata.lineLength,textSize:1.2});r.setData(n);let i=new a.Pq0;for(let e=0,t=n.metadata.textCount;e<t;e++)h.c.unitVector3(i),i.multiplyScalar(30+5*h.c.boxMuller()[0]),r.setMatrixAt(e,(0,u.w)({position:i})),r.setColorAt(e,(0,u._)(0xffffff*h.c.random()));(0,l.mj)(r,e.scene),(0,l.mj)(new a.eaF(new a.WBB,new a.V9B({wireframe:!0})),e.scene),yield()=>e.scene.clear()}function v(){return(0,i.yk)(m,[]),null}function x(){return(0,r.jsx)("div",{className:"layer thru",children:(0,r.jsxs)(i.uB,{children:[(0,r.jsxs)("div",{className:"layer thru p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Knut Hamsum - Hunger Demo"}),(0,r.jsxs)("p",{children:["63,862 words \xa0 (",(0,r.jsx)("span",{id:"instance-count",children:"X"}),"\xa0instances)"]})]}),(0,r.jsx)(v,{})]})})}},90048:e=>{e.exports={Client:"client_Client__koMgZ"}},90927:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var r=n(49797),i=n(22641);new r.Pq0(0,0,0),new r.O9p(0,0,0,"XYZ"),new r.Pq0(1,1,1);let a={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,pivot:void 0,visible:void 0,name:void 0,parent:void 0,userData:void 0},s=new r.dwI,o=new r.Pq0;function l(e,t){let{x:n,y:l,z:c,position:u=new r.Pq0(n,l,c),rotationX:h,rotationY:d,rotationZ:p,rotationOrder:f,rotationUnit:g,rotation:m,scaleX:v,scaleY:x,scaleZ:y,scaleScalar:w,scale:b=new r.Pq0(v,x,y).multiplyScalar(w),pivot:_,visible:C,name:P,parent:j,userData:S}={...a,...t};return(0,i.jj)(u,e.position),(0,i.if)(null!=m?m:[h,d,p,f,g],e.rotation),(0,i.jj)(b,e.scale),void 0!==_&&(e.updateMatrix(),s.setFromMatrix4(e.matrix),(0,i.jj)(_,o).applyMatrix3(s),e.position.sub(o)),void 0!==C&&(e.visible=C),void 0!==P&&(e.name=P),void 0!==j&&j!==e.parent&&(null===j?e.removeFromParent():j.add(e)),void 0!==S&&Object.assign(e.userData,S),e}},97204:(e,t,n)=>{"use strict";n.d(t,{Client:()=>D});var r=n(70691),i=n(1253),a=n(67203),s=n(49797),o=n(30158),l=n(55551),c=n(57165),u=n(72598),h=n(49617),d=n(7587),p=n(31107),f=n(48083),g=n(56647);class m extends g.R{constructor(e,{color:t="#ffff00"}={}){super(void 0,new s.mrM({color:t})),this.position.copy(e.focus),this.rotation.copy(e.rotation);let{x:n,y:r}=e.size;1!==e.zoom&&this.rectangle([-n/2,-r/2,n,r]),n/=e.zoom,r/=e.zoom,this.rectangle([-n/2,-r/2,n,r]).plus([0,0],.5).draw();let i=new s.eaF(new s.bdM(1,.25),new s.V9B({color:t,alphaMap:function(){let e;return null!=e?e:e=(()=>{let e=document.createElement("canvas"),t=e.getContext("2d");e.width=1024,e.height=256,t.fillStyle="white",t.font="200px Fira Code",t.textBaseline="top",t.fillText("Vertigo",20,20);let n=new s.gPd(e);return n.needsUpdate=!0,n})()}(),transparent:!0,side:s.$EB}));i.position.set(-n/2+.5+.1,r/2-.125-.1,0),this.add(i)}}var v=n(9723),x=n(87381),y=n(29717),w=n(17099),b=n(80425),_=n(36508),C=n(25809),P=n(82091),j=n(25851);class S extends s.YJl{onTick(e){this.parts.rings.rotation.y+=.123*e.deltaTime,this.parts.rings.rotation.x+=.435*e.deltaTime}constructor(...e){super(...e),this.internal={ringGeometry:new s.O3Y(3,.01,16,128)},this.parts=(()=>{let e=(0,x.mj)(new s.YJl,{parent:this}),t=(0,x.mj)(new s.eaF(this.internal.ringGeometry,new v.Y({color:"#eb1640",luminosity:.8})),{parent:e,name:"ring-x",rotationY:"90deg"}),n=(0,x.mj)(new s.eaF(this.internal.ringGeometry,new v.Y({color:"#00ff9d",luminosity:.8})),{parent:e,name:"ring-y",rotationX:"90deg"}),r=(0,x.mj)(new s.eaF(this.internal.ringGeometry,new v.Y({color:"#3b80e7",luminosity:.8})),{parent:e,name:"ring-z"});return{rings:e,ringX:t,ringY:n,ringZ:r,torusKnot:(0,x.mj)(new s.eaF(new s.UPV(3,.1,512,64),new v.Y({luminosity:.8})),{parent:this,name:"torus-knot"})}})()}}class z extends s.Z58{constructor(...e){super(...e),this.parts={sky:(0,x.mj)(new P.N({color:"#027bff"}),{parent:this}),thing:(0,x.mj)(new S,{parent:this}),gridZ:(0,x.mj)(new C.P({step:.5}),{parent:this}),widget:(0,x.mj)(new j.XI,{parent:this})}}}class O extends s.BKk{constructor(){super({uniforms:{uResolution:{value:new s.IUQ},uRect:{value:new s.IUQ},map:{value:null}},vertexShader:"\n        uniform vec4 uResolution;\n        uniform vec4 uRect;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position.xy = ((position.xy * 2.0 + 1.0) * uRect.zw + uRect.xy * 2.0) / uResolution.xy - 1.0; \n          gl_Position.z = 0.0;\n          gl_Position.w = 1.0;\n          // gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform sampler2D map;\n        varying vec2 vUv;\n        void main() {\n          gl_FragColor = texture2D(map, vUv);\n        }\n      ",transparent:!0,depthWrite:!1,depthTest:!1})}}class A extends s.eaF{*initialize(e,t){let{rt:n,scene:r,camera:i,vertigo:a,widget:o}=this.internal,l=this.material.uniforms.uResolution.value,c=this.material.uniforms.uRect.value,h=new s.I9Y,d=new s.I9Y(-1,-1),p=!1;yield(0,u.s)(e.domElement,{onDown:()=>{p=!0},onUp:()=>{p=!1},onChange:e=>{d.x=(e.localPosition.x-c.x)/c.z*2-1,d.y=-(e.localPosition.y/c.w*2-1)},onTap:()=>{switch(o.getPressed()){case j.KJ.BOX:t.actions.togglePerspective();break;case j.KJ.POSITIVE_X:t.actions.positiveXAlign();break;case j.KJ.NEGATIVE_X:t.actions.negativeXAlign();break;case j.KJ.POSITIVE_Y:t.actions.positiveYAlign();break;case j.KJ.NEGATIVE_Y:t.actions.negativeYAlign();break;case j.KJ.POSITIVE_Z:t.actions.positiveZAlign();break;case j.KJ.NEGATIVE_Z:t.actions.negativeZAlign()}}}),yield(0,_.xy)("three",{order:1},()=>{e.getSize(h),l.set(h.x,h.y,e.getPixelRatio(),0),c.x=h.x-c.z,c.y=h.y-c.w,a.rotation.copy(t.vertigo.rotation),a.perspective=t.vertigo.perspective,a.apply(i,1),o.widgetUpdate(d,p,i),d.x>=-1&&d.x<=1&&d.y>=-1&&d.y<=1&&(null!==o.getHovered()?document.body.style.cursor="pointer":document.body.style.removeProperty("cursor")),e.setRenderTarget(n),e.setClearColor("white",0),e.render(r,i),e.setRenderTarget(null)})}constructor({planeSize:e=120}={}){let t=new O;super(new s.bdM(1,1),t),this.vertigoControls=null;let n=2*e,r=new s.nWS(n,n,{format:s.GWd,colorSpace:"srgb"}),i=new s.Z58,a=new s.ubm,o=new p.B({perspective:1,size:[2.8,2.8]}),l=new j.XI;i.add(l),this.internal={rt:r,scene:i,camera:a,vertigo:o,widget:l},this.renderOrder=1,this.frustumCulled=!1,t.uniforms.map.value=this.internal.rt.texture,t.uniforms.uRect.value.set(10,10,e,e),this.position.x=2}}var B=n(64411),M=n.n(B);function I(e){let{vertigo:t}=e,{ref:n}=(0,d.C7)(function*(e){yield(0,_.xy)("three",{timeInterval:1/6},()=>{e.querySelector("pre").textContent=i.Ay.dump(t.toDeclaration(),{flowLevel:1}).replace(/-?\d+\.\d+/g,e=>(0,b.ZV)(Number.parseFloat(e),{maxDigits:6}))})},[]);return(0,r.jsx)("div",{ref:n,className:"self-start p-4 border border-white rounded text-xs ".concat(M().BgBlur),style:{minWidth:"24rem"},children:(0,r.jsx)("pre",{})})}class T extends s.YJl{onTick(e){for(let t of this.parts.cubes){let{angularVelocity:n}=t.userData;t.rotation.x+=n.x*e.deltaTime,t.rotation.y+=n.y*e.deltaTime,t.rotation.z+=n.z*e.deltaTime}}constructor(...e){super(...e),this.parts={knot:(0,x.mj)(new s.eaF(new s.UPV(1,.5,256,32),new v.Y),{parent:this}),knot2:(0,x.mj)(new s.eaF(new s.UPV(1.37,.05,256,32),new v.Y({color:j.Bn.xColor})),{parent:this}),cubes:Array.from({length:20},(e,t)=>{let n=w.c.between(-3,3),r=w.c.between(-1.5,1.5),i=w.c.between(-3,3),a=["".concat(w.c.between(0,360),"deg"),"".concat(w.c.between(0,360),"deg"),"".concat(w.c.between(0,360),"deg")],o=w.c.between(.5,1),c=(0,x.mj)(new s.eaF(new l.j(1),new v.Y({color:w.c.pick(Object.values(j.Bn))})),{parent:this,x:n,y:r,z:i,rotation:a,scaleScalar:o});return c.userData={angularVelocity:new s.O9p(w.c.between(-1,1),w.c.between(-1,1),w.c.between(-1,1))},c})}}}function D(){let e=(0,a.useMemo)(()=>{let e=new p.B({size:[4.2,4.2]}),t=new p.B({perspective:0,focus:[-10,3,0],size:[8,4],rotation:[0,"45deg",0]}),n=t.clone().set({perspective:1,size:t.size.clone().multiplyScalar(1.2)}),r=t.clone().set({perspective:1,size:t.size.clone().multiplyScalar(1.5),rotation:[0,"-15deg","-25deg"]}),i=new p.B({perspective:1,focus:[-4.5,1.8,10],size:[12,9],rotation:["-3deg","1deg","12deg"]}),a=new p.B({perspective:1,focus:[-4.5,1.8,14],size:i.size.clone().multiplyScalar(1.5),rotation:["-3deg","1deg","0deg"]}),s={main:e,a0:t,a1:n,a2:r,back:i,back2:a,zoom:new p.B({focus:[6,-4,0],size:[4,4],zoom:.25}),revert:new p.B({rotation:["12.6deg","145.3deg","0deg"],focus:[-5,-.5,3.6],size:[12,12],fov:"60deg"})},o=new f.n(s.main);return{vertigos:s,vertigoControls:o}},[]),{ref:t}=(0,d.C7)(function*(t){let{vertigoControls:n}=e,r=new o.WebGLRenderer({antialias:!0});r.outputColorSpace="srgb",t.prepend(r.domElement);let i=1;yield(0,h.G)(t,{onSize:()=>{r.setPixelRatio(window.devicePixelRatio),r.setSize(t.clientWidth,t.clientHeight),i=t.clientWidth/t.clientHeight}});let a=new s.ubm(75,1,.1,1e3);a.position.z=5,yield n.start(r.domElement);let l=new z,d=_.Rv.get("three");(0,c.O)(d.requestActivation);let p=new A;l.add(p),yield*p.initialize(r,n);let f=new s.I9Y,g=!1;for(let t of(yield d.onTick(e=>{e.propagate(l),l.parts.widget.widgetUpdate(f,g,a),null!==l.parts.widget.getHovered()?document.body.style.cursor="pointer":document.body.style.removeProperty("cursor"),n.update(a,i),r.render(l,a)}),yield(0,u.s)(r.domElement,{onChange:e=>{let{x:t,y:n}=e.relativeLocalPosition;f.set(2*t-1,-((2*n-1)*1))},onDown:()=>{g=!0},onUp:()=>{g=!1},onTap:()=>{let e=l.parts.widget.getPressed();switch(null!==e&&n.actions.focus([0,0,0]),e){case j.KJ.BOX:n.actions.togglePerspective();break;case j.KJ.POSITIVE_X:n.actions.positiveXAlign();break;case j.KJ.NEGATIVE_X:n.actions.negativeXAlign();break;case j.KJ.POSITIVE_Y:n.actions.positiveYAlign();break;case j.KJ.NEGATIVE_Y:n.actions.negativeYAlign();break;case j.KJ.POSITIVE_Z:n.actions.positiveZAlign();break;case j.KJ.NEGATIVE_Z:n.actions.negativeZAlign()}}}),Object.values(e.vertigos)))(0,x.mj)(new m(t),l);let v=new T;l.add(v),v.position.copy(e.vertigos.a0.focus),v.rotation.copy(e.vertigos.a0.rotation),yield()=>{r.dispose(),t.removeChild(r.domElement)}},[]),{vertigoControls:n}=e;return(0,r.jsx)("div",{ref:t,className:"".concat(M().VertigoWidgetClient," layer thru"),children:(0,r.jsxs)("div",{className:"layer thru p-4 flex flex-col gap-4 items-start",children:[(0,r.jsx)("h1",{className:"text-2xl self-start",children:"Vertigo-widget"}),(0,r.jsxs)("div",{className:"".concat(M().BgBlur," thru flex flex-col gap-1 items-start p-1 border border-white rounded"),style:{width:"min(200px, 30%)"},children:[(0,r.jsx)("h2",{children:"Actions:"}),(0,r.jsxs)("div",{className:"thru flex flex-row flex-wrap items-start gap-1",children:[(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{y.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:0}})},children:"ortho"}),(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{y.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:1}})},children:"pers:1"}),(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{y.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{perspective:1.5}})},children:"pers:1.5"}),(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{y.X5.tween({target:n.vertigo,duration:1,ease:"inOut2",to:{zoom:1}})},children:"zoom:1"}),(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{y.X5.tween({target:n.vertigo,duration:.75,ease:"inOut2",to:{focus:new s.Pq0}})},children:"focus:(0,0,0)"})]})]}),(0,r.jsxs)("div",{className:"".concat(M().BgBlur," thru flex flex-col gap-1 items-start p-1 border border-white rounded"),style:{width:"min(200px, 30%)"},children:[(0,r.jsx)("h2",{children:"Presets:"}),(0,r.jsx)("div",{className:"flex flex-row gap-1 flex-wrap",children:Object.entries(e.vertigos).map(t=>{let[n,i]=t;return(0,r.jsx)("button",{className:"".concat(M().BgBlur," px-2 py-1 border border-white rounded hover:bg-[#fff2]"),onClick:()=>{let t=e.vertigoControls.vertigo.clone();y.X5.during(1).onUpdate(n=>{let{progress:r}=n,a=y.X5.ease("inOut3")(r);e.vertigoControls.vertigo.lerpVertigos(t,i,a)})},children:n},n)})})]}),(0,r.jsx)("div",{className:"Space flex-1 pointer-events-none"}),(0,r.jsx)(I,{vertigo:n.vertigo})]})})}},97540:(e,t,n)=>{"use strict";n.d(t,{AF:()=>p,EF:()=>g,hD:()=>d,s5:()=>s,wZ:()=>f});var r=n(49797),i=n(79285),a=n(61567);function s(e,t){if(0!==e.projectionMatrix.elements[15])return"none";{let n=e.projectionMatrix.elements[5],r=t.clientHeight*n/2;return"".concat(r,"px")}}let o=new r.kn4,l=new r.kn4,c=new r.Pq0,u=new r.Pq0;function h(e,t){if((0,a.Th)(e))return t.setFromMatrixPosition(e.matrixWorld);if((0,a.MR)(e))return t.setFromMatrixPosition(e);if((0,a.Zz)(e))return t.copy(e);throw Error("Invalid object type.")}function d(e,t){return c.set(e.matrixWorld.elements[8],e.matrixWorld.elements[9],e.matrixWorld.elements[10]),h(t,u),c.dot(u)>0}function p(e,t){return c.set(e.matrixWorld.elements[12],e.matrixWorld.elements[13],e.matrixWorld.elements[14]),h(t,u),Math.round(1e4/(1+c.distanceTo(u))).toString()}function f(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=e.projectionMatrix.elements[5],p=n.clientHeight*d/2,f=p/r,g=function(e,t){if((0,a.Th)(e))return e.matrixWorld;if((0,a.MR)(e))return e;if((0,a.Zz)(e))return t.makeTranslation(e.x,e.y,e.z);throw Error("Invalid object type.")}(t,l);o.multiplyMatrices(e.matrixWorldInverse,g);let m=o.elements;m[4]*=-1,m[5]*=-1,m[6]*=-1,m[8]*=-1,m[9]*=-1,m[10]*=-1;let v=m[14];return m[14]+=h?-1:1,m[0]*=f,m[1]*=f,m[2]*=f,m[4]*=f,m[5]*=f,m[6]*=f,m[8]*=f,m[9]*=f,m[10]*=f,m[12]*=p,m[13]*=p,m[14]*=p,m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,h&&(m[2]*=-1,m[6]*=-1,m[10]*=-1,m[14]*=-1),s>0&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.elements;c.set(n[0],n[1],n[2]);let r=c.length();n[0]=(0,i.lerp)(n[0],r,t),n[1]=(0,i.lerp)(n[1],0,t),n[2]=(0,i.lerp)(n[2],0,t),c.set(n[4],n[5],n[6]);let a=c.length();n[4]=(0,i.lerp)(n[4],0,t),n[5]=(0,i.lerp)(n[5],a,t),n[6]=(0,i.lerp)(n[6],0,t),c.set(n[8],n[9],n[10]);let s=c.length();n[8]=(0,i.lerp)(n[8],0,t),n[9]=(0,i.lerp)(n[9],0,t),n[10]=(0,i.lerp)(n[10],s,t)}(o,s),u>0&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.elements;c.set(r[0],r[1],r[2]);let a=(0,i.lerp)(1,t/c.length(),n);r[0]*=a,r[1]*=a,r[2]*=a,c.set(r[4],r[5],r[6]);let s=(0,i.lerp)(1,t/c.length(),n);r[4]*=s,r[5]*=s,r[6]*=s,c.set(r[8],r[9],r[10]);let o=(0,i.lerp)(1,t/c.length(),n);r[8]*=o,r[9]*=o,r[10]*=o}(o,h?v:-v,u),"translate(-50%, -50%) matrix3d(".concat(o.elements.join(","),")")}function g(e,t,n,r){let{pixelPerUnit:i=100,resetRotation:a=0,resetScale:o=0,leftHanded:l=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.style.perspective=s(n,e),t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform=f(n,r,e,i,a,o,l),t.style.zIndex=p(n,r)}}},e=>{var t=t=>e(e.s=t);e.O(0,[1284,2193,3470,5611,7190,6564,7223,9635,8921,4957,7775,16,7953,9547,9294,5438,5130,950,1577,8907,4638,6726,2598,7373,8083,7558,7927,2726,1319,6852,7358],()=>t(46634)),_N_E=e.O()}]);