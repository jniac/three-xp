(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{34660:function(e,t,n){Promise.resolve().then(n.bind(n,97975))},97975:function(e,t,n){"use strict";n.d(t,{Client:function(){return v}});var r=n(32617),a=n(48939),o=n(88780),i=n(15721),c=n(42544),l=n(78780),s=n(29368),u=n(85705),f=n(6246),m=n(97122),p=n(62411);async function h(e){let t=new m.Mr(new m.I8(e)),n=await t.getEntries(),r=await n[0].getData(new m.hj);return await t.close(),r}async function g(){let e=await fetch(p.v.assets("misc/knut-hamsun-hunger.bin.zip")),t=await e.arrayBuffer(),n=await h(new Uint8Array(t));return c.m.Data.decode(n)}async function*d(e){let t=new i.F({size:100}).initialize(e.renderer.domElement).start();yield(0,s.RC)("three",n=>{t.update(e.camera,e.aspect,n.deltaTime)});let n=await g();document.querySelector("#instance-count").textContent=n.metadata.textCount.toString();let r=new c.m({textCount:n.metadata.textCount,lineCount:n.metadata.lineCount,lineLength:n.metadata.lineLength,textSize:1.2});r.setData(n);let a=new o.Vector3;for(let e=0,t=n.metadata.textCount;e<t;e++)f.T.unitVector3(a),a.multiplyScalar(30+5*f.T.boxMuller()[0]),r.setMatrixAt(e,(0,u.$)({position:a})),r.setColorAt(e,(0,u.E)(16777215*f.T.random()));(0,l.cY)(r,e.scene),(0,l.cY)(new o.Mesh(new o.IcosahedronGeometry,new o.MeshBasicMaterial({wireframe:!0})),e.scene),yield()=>e.scene.clear()}function _(){return(0,a.Ky)(d,[]),null}function v(){return(0,r.jsx)("div",{className:"layer thru",children:(0,r.jsxs)(a.H7,{children:[(0,r.jsxs)("div",{className:"layer thru p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Knut Hamsum - Hunger Demo"}),(0,r.jsxs)("p",{children:["63,862 words \xa0 (",(0,r.jsx)("span",{id:"instance-count",children:"X"}),"\xa0instances)"]})]}),(0,r.jsx)(_,{})]})})}},48939:function(e,t,n){"use strict";n.d(t,{H7:function(){return f},Ky:function(){return l}});var r=n(32617),a=n(87200),o=n(23657),i=n(9258);n(41737);let c=(0,a.createContext)(null);function l(e,t){let n=(0,a.useContext)(c);return(0,o.sv)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}let s={className:"",assetsPath:"/"};function u(e){let{children:t,className:n,assetsPath:l}={...s,...e},u=(0,a.useMemo)(()=>new i.Vu,[]);u.loader.setPath(l);let{ref:f}=(0,o.Nv)({debounce:!0},function*(e,t){yield u.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:u})},[]);return(0,r.jsx)("div",{ref:f,className:n,style:{position:"absolute",inset:0},children:(0,r.jsxs)(c.Provider,{value:u,children:[(0,r.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,r.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:u.initialized&&t})]})})}function f(e){return function(){let[e,t]=(0,a.useState)(!1);return(0,a.useLayoutEffect)(()=>{t(!0)},[]),e}()&&(0,r.jsx)(u,{...e})}},62411:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let r="/three-xp/assets/",a={development:!1,assetsPath:r,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(e)}}},23247:function(e,t,n){"use strict";n.d(t,{b:function(){return v},R:function(){return y}});var r=n(77478),a=n(88780);let o=["common","uv_pars_vertex","displacementmap_pars_vertex","color_pars_vertex","fog_pars_vertex","normal_pars_vertex","morphtarget_pars_vertex","skinning_pars_vertex","shadowmap_pars_vertex","logdepthbuf_pars_vertex","clipping_planes_pars_vertex","uv_vertex","color_vertex","morphcolor_vertex","beginnormal_vertex","morphnormal_vertex","skinbase_vertex","skinnormal_vertex","defaultnormal_vertex","normal_vertex","begin_vertex","morphtarget_vertex","skinning_vertex","displacementmap_vertex","project_vertex","logdepthbuf_vertex","clipping_planes_vertex","worldpos_vertex","shadowmap_vertex","fog_vertex","common","packing","dithering_pars_fragment","color_pars_fragment","uv_pars_fragment","map_pars_fragment","alphamap_pars_fragment","alphatest_pars_fragment","alphahash_pars_fragment","aomap_pars_fragment","lightmap_pars_fragment","emissivemap_pars_fragment","iridescence_fragment","cube_uv_reflection_fragment","envmap_common_pars_fragment","envmap_physical_pars_fragment","fog_pars_fragment","lights_pars_begin","normal_pars_fragment","lights_physical_pars_fragment","transmission_pars_fragment","shadowmap_pars_fragment","bumpmap_pars_fragment","normalmap_pars_fragment","clearcoat_pars_fragment","iridescence_pars_fragment","roughnessmap_pars_fragment","metalnessmap_pars_fragment","logdepthbuf_pars_fragment","clipping_planes_pars_fragment","clipping_planes_fragment","logdepthbuf_fragment","map_fragment","color_fragment","alphamap_fragment","alphatest_fragment","alphahash_fragment","roughnessmap_fragment","metalnessmap_fragment","normal_fragment_begin","normal_fragment_maps","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","emissivemap_fragment","lights_physical_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","aomap_fragment","transmission_fragment","opaque_fragment","tonemapping_fragment","colorspace_fragment","fog_fragment","premultiplied_alpha_fragment","dithering_fragment"];var i=n(58100);class c{static from(e,t){if(t instanceof i.Observable){if("number"==typeof t.value)return new c(e,t);throw Error("Observable value must be a number")}let n=typeof t;return"object"===n&&(t.constructor===Object||t instanceof a.Uniform)&&"value"in t?new c(e,t):"string"===n?new c(e,{value:new a.Color(t)}):new c(e,{value:t})}get value(){return this.target.value}computeDeclaration(){let e=this.name,t=this.target.value,n="";if(t instanceof Float32Array)return"uniform float ".concat(e,"[").concat(t.length,"];");if(Array.isArray(t)&&(n="[".concat(t.length,"]"),t=t[0]),"number"==typeof t)return"uniform float ".concat(e).concat(n,";");if(t.isVector2)return"uniform vec2 ".concat(e).concat(n,";");if(t.isVector3||t.isColor)return"uniform vec3 ".concat(e).concat(n,";");if(t.isVector4||t.isQuaternion)return"uniform vec4 ".concat(e).concat(n,";");if(t.isMatrix3)return"uniform mat3 ".concat(e).concat(n,";");if(t.isMatrix4)return"uniform mat4 ".concat(e).concat(n,";");if(t.isTexture)return t.isCubeTexture?"uniform samplerCube ".concat(e).concat(n,";"):"uniform sampler2D ".concat(e).concat(n,";");throw console.log("unhandled value:",t),Error('unhandled value: "'.concat(null==t?void 0:t.constructor.name,'"'))}constructor(e,t){this.name=e,this.target=t}}function l(){let e=(0,r._)(["","s*",""],["","\\s*",""]);return l=function(){return e},e}let s=null,u=e=>(s=e,v),f="// ShaderForge (injected code) ->",m="// <- ShaderForge",p=e=>"".concat(f,"\n").concat(e.trim(),"\n").concat(m),h=e=>{let t=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=RegExp(String.raw(l(),t(m),t(f)),"g");return e.replaceAll(n,"")};class g{getPattern(e){let{throwError:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="#include <".concat(e,">"),r=this.type;if(t&&!1===s[r].includes(n))throw Error('"'.concat(n,'" is not present in the shader template program.'));return{pattern:n,type:r}}replace(e,t){if(e instanceof RegExp){let{type:n}=this;s[n].match(e),s[n]=s[n].replace(e,p(t))}else{let{type:n,pattern:r}=this.getPattern(e),a=p(t);s[n]=s[n].replace(r,a)}return v}inject(e,t,n){let{type:r,pattern:a}=this.getPattern(t),o="after"===e?"".concat(a,"\n").concat(p(n)):"".concat(p(n),"\n").concat(a);return s[r]=s[r].replace(a,o),v}injectTokenComments(){for(let e of o){let{type:t,pattern:n}=this.getPattern(e,{throwError:!1});s[t]=s[t].replace(n,"\n        ".concat(n,"\n        // ShaderForge TOKEN: ").concat(e,"\n      "))}return v}header(e){let t=this.type;return s[t]="".concat(e,"\n").concat(s[t]),v}before(e,t){return this.inject("before",e,t)}after(e,t){return this.inject("after",e,t)}top(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s[this.type]=s[this.type].replace("void main() {","\n      ".concat(p(t.join("\n\n")),"\n      void main() {\n    ")),v}mainBeforeAll(e){return s[this.type]=s[this.type].replace("void main() {","void main() {\n        ".concat(p(e))),v}mainAfterAll(e){return s[this.type]=s[this.type].replace(/}\s*$/,"\n      ".concat(p(e),"\n    }")),v}uniforms(e){if("string"==typeof e)this.top(e);else{let t=[];for(let[n,r]of Object.entries(e)){let e=c.from(n,r);t.push(e.computeDeclaration())}this.top(t.join("\n")),function(e){for(let[t,n]of Object.entries(e)){let e=c.from(t,n);if(t in s.uniforms){if(e.value!==s.uniforms[t].value)throw Error("Shader redefinition! (Uniform values are not equal)")}else s.uniforms[t]=e}}(e)}return v}clean(){return s[this.type]=h(s[this.type]),v}printFinalCode(){return console.log(s[this.type].replace(/#include <(.*)>/g,(e,t)=>{let n=a.ShaderChunk[t];if(!n)throw Error('Shader chunk "'.concat(t,'" not found'));return n})),v}constructor(e){this.type=e}}let d=new g("fragmentShader"),_=new g("vertexShader"),v=Object.assign(function(e){return e&&u(e),v},{shaderName:function(e){return s.shaderName="".concat(e," (ShaderForge)"),v},defines:function(e){return s.defines?Object.assign(s.defines,e):s.defines=e,v},uniforms:function(e){return _.uniforms(e),d.uniforms(e),v},varying:function(e){let t="";if("string"==typeof e)t=e;else{let n=[];for(let[t,r]of Object.entries(e))n.push("varying ".concat(r," ").concat(t,";"));t=n.join("\n")}return _.top(t),d.top(t),v},top:function(e){return _.top(e),d.top(e),v},vertex:_,fragment:d,header:function(e){return d.header(e),_.header(e),v},clean:function(){return d.clean(),_.clean(),v},with:u,wrap:(e,t)=>(e.onBeforeCompile=e=>{s=e},e)}),x=new a.Color;function y(e){let{r:t,g:n,b:r}=x.set(e);return"vec3(".concat(t.toFixed(3),", ").concat(n.toFixed(3),", ").concat(r.toFixed(3),")")}},41737:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(88780),a=n(32219);new r.Vector3(0,0,0),new r.Euler(0,0,0,"XYZ"),new r.Vector3(1,1,1);let o={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,rotationOrder:"XYZ",rotationUnit:"rad",scaleX:1,scaleY:1,scaleZ:1,scaleScalar:1,visible:void 0,name:void 0,parent:void 0};function i(e,t){let{x:n,y:i,z:c,position:l=new r.Vector3(n,i,c),rotationX:s,rotationY:u,rotationZ:f,rotationOrder:m,rotationUnit:p,rotation:h,scaleX:g,scaleY:d,scaleZ:_,scaleScalar:v,scale:x=new r.Vector3(g,d,_).multiplyScalar(v),visible:y,name:w,parent:b}={...o,...t};return(0,a.Q7)(l,e.position),(0,a.Gg)(null!=h?h:[s,u,f,m,p],e.rotation),(0,a.Q7)(x,e.scale),void 0!==y&&(e.visible=y),void 0!==w&&(e.name=w),void 0!==b&&b!==e.parent&&(null===b?e.removeFromParent():b.add(e)),e}},78780:function(e,t,n){"use strict";n.d(t,{H$:function(){return c},bB:function(){return i},cY:function(){return o}});var r=n(26211),a=n(41737);function o(e,t,n){return t&&((0,r.nK)(t)?t.add(e):(0,a.N)(e,t)),null==n||n(e),e}let i=o;function c(e,t){return function(e,t){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}(t,e)}},6246:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return(e=(e=(7*e+Math.sqrt(e)+16087*Math.sin(e))%2147483647)<0?e+2147483647:e)>1?2147483647&e:0===e?345678:123456},a=e=>e=2147483647&Math.imul(e,48271),o=e=>(e-1)/2147483646,i=e=>e,c={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function l(){let e=a(a(r(123456)));function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return"string"==typeof t&&(t=t.split("").reduce((e,t)=>7*e+t.charCodeAt(0),0)),e=a(a(r(t))),m}function n(){return o(e=a(e))}function l(e){switch(e.length){default:return[0,1,i];case 1:return[0,e[0],i];case 2:return[e[0],e[1],i];case 3:return[e[0],e[1],e[2]]}}function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,o,i]=l(t);return a+(o-a)*i(n())}function u(){for(var e,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let[o,i,{weightsAreNormalized:l,indexOffset:s,forbiddenItems:u}]=function(e){let[t,n=null,r]=e,a={...c,...r};if(Array.isArray(t))return[t,n,a];if("object"==typeof t)return[Object.values(t),n?Object.values(n):null,a];throw Error("pick: unsupported options type")}(r);if(u.length>0){let t=new Set;for(let e of u){let n=o.indexOf(e);n>=0&&t.add(n)}if(o=o.filter((e,n)=>!t.has(n)),i=null!==(e=null==i?void 0:i.filter((e,n)=>!t.has(n)))&&void 0!==e?e:null,0===o.length)throw Error("pick: all items are forbidden")}if(null===i){let e=Math.floor(n()*o.length);return s&&(e+=s,(e%=o.length)<0&&(e+=o.length)),o[e]}if(!l){let e=i.reduce((e,t)=>e+t,0);i=i.map(t=>t/e)}let f=n(),m=0;for(let e=0;e<o.length;e++)if(f<(m+=i[e]))return o[e];throw Error("among: unreachable")}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n(),a=n(),o=Math.sqrt(-2*Math.log(r)),i=2*Math.PI*a;return[e+t*o*Math.cos(i),e+t*o*Math.sin(i)]}let m={seed:t,seedMax:function(){return 2147483647},reset:function(){return t(123456),m},next:function(){return e=a(e),m},random:n,between:s,around:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a=1,o=i]=t,c=2*n();return(c>1?1:-1)*o(c>1?c-1:c)*a},int:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,o,i]=l(t);return a+Math.floor(i(n())*(o-a))},chance:function(e){return n()<e},shuffle:function(e){let{mutate:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t&&Array.isArray(e)?e:[...e],a=r.length;for(let e=0;e<a;e++){let t=Math.floor(a*n()),o=r[e];r[e]=r[t],r[t]=o}return r},pick:u,createPicker:function(e){let t=e.map(e=>{let[t]=e;return t}),n=e.map(e=>{let[t,n]=e;return n}),r=n.reduce((e,t)=>e+t,0);for(let[e,t]of n.entries())n[e]=t/r;return()=>u(t,n,{weightsAreNormalized:!0})},vector:function(e,t){let[n=0,r=1]=Array.isArray(t)?t:[null==t?void 0:t.min,null==t?void 0:t.max];for(let t of Object.keys(e))e[t]=s(n,r);return e},unitVector2:function(e){let t=2*Math.PI*n();return e.x=Math.cos(t),e.y=Math.sin(t),e},unitVector3:function(e){let t=n(),r=n(),a=2*Math.PI*t,o=Math.acos(1-2*r);return e.x=Math.sin(o)*Math.cos(a),e.y=Math.sin(o)*Math.sin(a),e.z=Math.cos(o),e},normalVector:function(e){let t=Object.keys(e),n=t.length,r=Math.sqrt(n);for(let a=0;a<n;a+=2){let[o,i]=f();e[t[a]]=o/r,a+1<n&&(e[t[a+1]]=i/r)}return e},unitVector:function(e){let t=Object.keys(e),n=t.length,r=0;for(let a=0;a<n;a+=2){let[o,i]=f();e[t[a]]=o,r+=o*o,a+1<n&&(e[t[a+1]]=i,r+=i*i)}r=Math.sqrt(r);for(let a=0;a<n;a++)e[t[a]]/=r;return e},boxMuller:f};return m}let s=class{constructor(e){Object.assign(this,l().seed(e))}};Object.assign(s,l())}},function(e){e.O(0,[7512,1561,7834,6158,3956,1067,3310,2080,812,3420,1540,6567,8100,9258,5721,2544,5694,2840,1744],function(){return e(e.s=34660)}),_N_E=e.O()}]);