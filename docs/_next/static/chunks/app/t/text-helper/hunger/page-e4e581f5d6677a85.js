(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{34660:function(t,e,n){Promise.resolve().then(n.bind(n,97975))},97975:function(t,e,n){"use strict";n.d(e,{Client:function(){return x}});var r=n(32617),i=n(48939),a=n(88780),l=n(62274),o=n(42544),u=n(78780),s=n(29368),c=n(85705),f=n(6246),h=n(97122),d=n(62411);async function m(t){let e=new h.Mr(new h.I8(t)),n=await e.getEntries(),r=await n[0].getData(new h.hj);return await e.close(),r}async function y(){let t=await fetch(d.v.assets("misc/knut-hamsun-hunger.bin.zip")),e=await t.arrayBuffer(),n=await m(new Uint8Array(e));return o.m.Data.decode(n)}async function*g(t){let e=new l.F({size:100}).initialize(t.renderer.domElement).start();yield(0,s.RC)("three",n=>{e.update(t.camera,t.aspect,n.deltaTime)});let n=await y();document.querySelector("#instance-count").textContent=n.metadata.textCount.toString();let r=new o.m({textCount:n.metadata.textCount,lineCount:n.metadata.lineCount,lineLength:n.metadata.lineLength,textSize:1.2});r.setData(n);let i=new a.Vector3;for(let t=0,e=n.metadata.textCount;t<e;t++)f.T.unitVector3(i),i.multiplyScalar(30+5*f.T.boxMuller()[0]),r.setMatrixAt(t,(0,c.$)({position:i})),r.setColorAt(t,(0,c.E)(16777215*f.T.random()));(0,u.cY)(r,t.scene),(0,u.cY)(new a.Mesh(new a.IcosahedronGeometry,new a.MeshBasicMaterial({wireframe:!0})),t.scene),yield()=>t.scene.clear()}function w(){return(0,i.Ky)(g,[]),null}function x(){return(0,r.jsx)("div",{className:"layer thru",children:(0,r.jsxs)(i.H7,{children:[(0,r.jsxs)("div",{className:"layer thru p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Knut Hamsum - Hunger Demo"}),(0,r.jsxs)("p",{children:["63,862 words \xa0 (",(0,r.jsx)("span",{id:"instance-count",children:"X"}),"\xa0instances)"]})]}),(0,r.jsx)(w,{})]})})}},48939:function(t,e,n){"use strict";n.d(e,{H7:function(){return f},Ky:function(){return u}});var r=n(32617),i=n(87200),a=n(23657),l=n(9258);n(41737);let o=(0,i.createContext)(null);function u(t,e){let n=(0,i.useContext)(o);return(0,a.sv)(async function*(e,r){if(t){let e=t(n,r);if(e&&"function"==typeof e.next)do{let{value:t,done:n}=await e.next();if(n)break;yield t}while(r.mounted)}},null!=e?e:"always"),n}let s={className:"",assetsPath:"/"};function c(t){let{children:e,className:n,assetsPath:u}={...s,...t},c=(0,i.useMemo)(()=>new l.Vu,[]);c.loader.setPath(u);let{ref:f}=(0,a.Nv)({debounce:!0},function*(t,e){yield c.initialize(t.firstElementChild),e.triggerRender(),Object.assign(window,{three:c})},[]);return(0,r.jsx)("div",{ref:f,className:n,style:{position:"absolute",inset:0},children:(0,r.jsxs)(o.Provider,{value:c,children:[(0,r.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,r.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:c.initialized&&e})]})})}function f(t){return function(){let[t,e]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{e(!0)},[]),t}()&&(0,r.jsx)(c,{...t})}},62411:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});let r="/three-xp/assets/",i={development:!1,assetsPath:r,assets:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(t)}}},6246:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});let r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return(t=(t=(7*t+Math.sqrt(t)+16087*Math.sin(t))%2147483647)<0?t+2147483647:t)>1?2147483647&t:0===t?345678:123456},i=t=>t=2147483647&Math.imul(t,48271),a=t=>(t-1)/2147483646,l=t=>t,o={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function u(){let t=i(i(r(123456)));function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:123456;return"string"==typeof e&&(e=e.split("").reduce((t,e)=>7*t+e.charCodeAt(0),0)),t=i(i(r(e))),h}function n(){return a(t=i(t))}function u(t){switch(t.length){default:return[0,1,l];case 1:return[0,t[0],l];case 2:return[t[0],t[1],l];case 3:return[t[0],t[1],t[2]]}}function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[i,a,l]=u(e);return i+(a-i)*l(n())}function c(){for(var t,e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];let[a,l,{weightsAreNormalized:u,indexOffset:s,forbiddenItems:c}]=function(t){let[e,n=null,r]=t,i={...o,...r};if(Array.isArray(e))return[e,n,i];if("object"==typeof e)return[Object.values(e),n?Object.values(n):null,i];throw Error("pick: unsupported options type")}(r);if(c.length>0){let e=new Set;for(let t of c){let n=a.indexOf(t);n>=0&&e.add(n)}if(a=a.filter((t,n)=>!e.has(n)),l=null!==(t=null==l?void 0:l.filter((t,n)=>!e.has(n)))&&void 0!==t?t:null,0===a.length)throw Error("pick: all items are forbidden")}if(null===l){let t=Math.floor(n()*a.length);return s&&(t+=s,(t%=a.length)<0&&(t+=a.length)),a[t]}if(!u){let t=l.reduce((t,e)=>t+e,0);l=l.map(e=>e/t)}let f=n(),h=0;for(let t=0;t<a.length;t++)if(f<(h+=l[t]))return a[t];throw Error("among: unreachable")}function f(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n(),i=n(),a=Math.sqrt(-2*Math.log(r)),l=2*Math.PI*i;return[t+e*a*Math.cos(l),t+e*a*Math.sin(l)]}let h={seed:e,seedMax:function(){return 2147483647},reset:function(){return e(123456),h},next:function(){return t=i(t),h},random:n,between:s,around:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[i=1,a=l]=e,o=2*n();return(o>1?1:-1)*a(o>1?o-1:o)*i},int:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[i,a,l]=u(e);return i+Math.floor(l(n())*(a-i))},chance:function(t){return n()<t},shuffle:function(t){let{mutate:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e&&Array.isArray(t)?t:[...t],i=r.length;for(let t=0;t<i;t++){let e=Math.floor(i*n()),a=r[t];r[t]=r[e],r[e]=a}return r},pick:c,createPicker:function(t){let e=t.map(t=>{let[e]=t;return e}),n=t.map(t=>{let[e,n]=t;return n}),r=n.reduce((t,e)=>t+e,0);for(let[t,e]of n.entries())n[t]=e/r;return()=>c(e,n,{weightsAreNormalized:!0})},vector:function(t,e){let[n=0,r=1]=Array.isArray(e)?e:[null==e?void 0:e.min,null==e?void 0:e.max];for(let e of Object.keys(t))t[e]=s(n,r);return t},unitVector2:function(t){let e=2*Math.PI*n();return t.x=Math.cos(e),t.y=Math.sin(e),t},unitVector3:function(t){let e=n(),r=n(),i=2*Math.PI*e,a=Math.acos(1-2*r);return t.x=Math.sin(a)*Math.cos(i),t.y=Math.sin(a)*Math.sin(i),t.z=Math.cos(a),t},normalVector:function(t){let e=Object.keys(t),n=e.length,r=Math.sqrt(n);for(let i=0;i<n;i+=2){let[a,l]=f();t[e[i]]=a/r,i+1<n&&(t[e[i+1]]=l/r)}return t},unitVector:function(t){let e=Object.keys(t),n=e.length,r=0;for(let i=0;i<n;i+=2){let[a,l]=f();t[e[i]]=a,r+=a*a,i+1<n&&(t[e[i+1]]=l,r+=l*l)}r=Math.sqrt(r);for(let i=0;i<n;i++)t[e[i]]/=r;return t},boxMuller:f};return h}let s=class{constructor(t){Object.assign(this,u().seed(t))}};Object.assign(s,u())}},function(t){t.O(0,[7512,1561,7834,6158,3956,1067,3310,2080,812,2038,3420,1540,9258,4157,3977,2544,5694,2840,1744],function(){return t(t.s=34660)}),_N_E=t.O()}]);