(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{888:(t,e,n)=>{"use strict";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,{_:()=>r})},6697:(t,e,n)=>{"use strict";n.d(e,{O0:()=>r.O0,XW:()=>r.XW});var r=n(4266)},17099:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(79105);let i=t=>t,a={weightsAreNormalized:!1,indexOffset:0,forbiddenItems:[]};function l(){let t=(0,r.K2)((0,r.K2)((0,r.Ts)(r.KP)));function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.KP;return"string"==typeof e&&(e=e.split("").reduce((t,e)=>7*t+e.charCodeAt(0),0)),t=(0,r.K2)((0,r.K2)((0,r.Ts)(e))),c}function n(){return t=(0,r.K2)(t),(0,r.Tj)(t)}function l(t){switch(t.length){default:return[0,1,i];case 1:return[0,t[0],i];case 2:return[t[0],t[1],i];case 3:return[t[0],t[1],t[2]]}}function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[i,a,s]=l(e);return i+(a-i)*s(n())}function u(){for(var t,e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];let[l,s,{weightsAreNormalized:u,indexOffset:o,forbiddenItems:c}]=function(t){let[e,n=null,r]=t,i={...a,...r};if(Array.isArray(e))return[e,n,i];if("object"==typeof e)return[Object.values(e),n?Object.values(n):null,i];throw Error("pick: unsupported options type")}(r);if(c.length>0){let e=new Set;for(let t of c){let n=l.indexOf(t);n>=0&&e.add(n)}if(l=l.filter((t,n)=>!e.has(n)),s=null!=(t=null==s?void 0:s.filter((t,n)=>!e.has(n)))?t:null,0===l.length)throw Error("pick: all items are forbidden")}if(null===s){let t=Math.floor(n()*l.length);return o&&(t+=o,(t%=l.length)<0&&(t+=l.length)),l[t]}if(!u){let t=s.reduce((t,e)=>t+e,0);s=s.map(e=>e/t)}let f=n(),h=0;for(let t=0;t<l.length;t++)if(f<(h+=s[t]))return l[t];throw Error("among: unreachable")}function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n(),i=n(),a=Math.sqrt(-2*Math.log(r)),l=2*Math.PI*i;return[t+e*a*Math.cos(l),t+e*a*Math.sin(l)]}let c={seed:e,seedMax:function(){return r.Zu},reset:function(){return e(r.KP),c},next:function(){return t=(0,r.K2)(t),c},getState:function(){return t},setState:function(e){return t=e&r.Zu,c},random:n,between:s,around:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[a=1,l=i]=e,s=2*n();return(s>1?1:-1)*l(s>1?s-1:s)*a},int:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let[i,a,s]=l(e);return i+Math.floor(s(n())*(a-i))},chance:function(t){return n()<t},shuffle:function(t){let{mutate:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e&&Array.isArray(t)?t:[...t],i=r.length;for(let t=0;t<i;t++){let e=Math.floor(i*n()),a=r[t];r[t]=r[e],r[e]=a}return r},pick:u,createPicker:function(t){let e=t.map(t=>{let[e]=t;return e}),n=t.map(t=>{let[e,n]=t;return n}),r=n.reduce((t,e)=>t+e,0);for(let[t,e]of n.entries())n[t]=e/r;return()=>u(e,n,{weightsAreNormalized:!0})},vector:function(t,e){let[n=0,r=1]=Array.isArray(e)?e:[null==e?void 0:e.min,null==e?void 0:e.max];for(let e of Object.keys(t))t[e]=s(n,r);return t},unitVector2:function(t){let e=2*Math.PI*n();return t.x=Math.cos(e),t.y=Math.sin(e),t},unitVector3:function(t){let e=n(),r=n(),i=2*Math.PI*e,a=Math.acos(1-2*r);return t.x=Math.sin(a)*Math.cos(i),t.y=Math.sin(a)*Math.sin(i),t.z=Math.cos(a),t},normalVector:function(t){let e=Object.keys(t),n=e.length,r=Math.sqrt(n);for(let i=0;i<n;i+=2){let[a,l]=o();t[e[i]]=a/r,i+1<n&&(t[e[i+1]]=l/r)}return t},unitVector:function(t){let e=Object.keys(t),n=e.length,r=0;for(let i=0;i<n;i+=2){let[a,l]=o();t[e[i]]=a,r+=a*a,i+1<n&&(t[e[i+1]]=l,r+=l*l)}r=Math.sqrt(r);for(let i=0;i<n;i++)t[e[i]]/=r;return t},boxMuller:o,quaternion:function(t){let e=n(),r=n(),i=n(),a=Math.sqrt(1-e),l=Math.sqrt(e);return t.x=a*Math.sin(2*Math.PI*r),t.y=a*Math.cos(2*Math.PI*r),t.z=l*Math.sin(2*Math.PI*i),t.w=l*Math.cos(2*Math.PI*i),t},insideCircle:function(t,e){let r=2*n()*Math.PI,i=Math.sqrt(n())*t;return e.x=i*Math.cos(r),e.y=i*Math.sin(r),e}};return c}let s=class{constructor(t){Object.assign(this,l().seed(t))}};Object.assign(s,l())},35375:(t,e,n)=>{"use strict";n.d(e,{$:()=>i});let r="/three-xp/assets/",i={development:!1,assetsPath:r,assets:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(t)}}},37441:(t,e,n)=>{Promise.resolve().then(n.bind(n,89651))},64857:(t,e,n)=>{"use strict";n.d(e,{w:()=>r.w});var r=n(67840)},79105:(t,e,n)=>{"use strict";n.d(e,{K2:()=>l,KP:()=>i,Tj:()=>s,Ts:()=>a,Zu:()=>r});let r=0x7fffffff,i=123456,a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if((t=(t=(7*t+Math.sqrt(t)+16087*Math.sin(t))%r)<0?t+r:t)>1)return t&r;if(0===t)return 345678;throw Error("Impossible.")},l=t=>t=Math.imul(t,48271)&r,s=t=>(t-1)/(r-1)},87381:(t,e,n)=>{"use strict";n.d(e,{$z:()=>function* t(e,n){let{includeSelf:r}={...u,...n};for(let n of(r&&(yield e),e.children))yield*t(n,{includeSelf:!0})},DN:()=>l,mj:()=>a,rd:()=>s});var r=n(61567),i=n(90927);function a(t,e,n){return e&&((0,r.Th)(e)?e.add(t):(0,i.N)(t,e)),null==n||n(t),t}let l=a;function s(t,e){let n=e;for(;n.parent;){if(n.parent===t)return!0;n=n.parent}return!1}let u={includeSelf:!1}},88493:(t,e,n)=>{"use strict";n.d(e,{uB:()=>f,yk:()=>u});var r=n(70691),i=n(67203),a=n(7587),l=n(6697);n(90927);let s=(0,i.createContext)(null);function u(t,e){let n=(0,i.useContext)(s);return(0,a.C7)(async function*(e,r){if(t){let e=t(n,r);if(e&&"function"==typeof e.next)do{let{value:t,done:n}=await e.next();if(n)break;yield t}while(r.mounted)}},null!=e?e:"always"),n}let o={className:"",assetsPath:"/"};function c(t){let{children:e,className:n,assetsPath:u}={...o,...t},c=(0,i.useMemo)(()=>new l.XW,[]);c.loader.setPath(u);let{ref:f}=(0,a.IZ)({debounce:!0},function*(t,e){yield c.initialize(t.firstElementChild),e.triggerRender(),Object.assign(window,{three:c})},[]);return(0,r.jsx)("div",{ref:f,className:n,style:{position:"absolute",inset:0},children:(0,r.jsxs)(s.Provider,{value:c,children:[(0,r.jsx)("div",{style:{position:"absolute",inset:"0"}}),(0,r.jsx)("div",{style:{position:"absolute",inset:"0"},className:"thru",children:c.initialized&&e})]})})}function f(t){return function(){let[t,e]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{e(!0)},[]),t}()&&(0,r.jsx)(c,{...t})}},89651:(t,e,n)=>{"use strict";n.d(e,{Client:()=>g});var r=n(70691),i=n(88493),a=n(49797),l=n(48083),s=n(64857),u=n(87381),o=n(36508),c=n(66851),f=n(17099),h=n(11577),d=n(35375);async function m(t){let e=new h.zg(new h.pp(t)),n=await e.getEntries(),r=await n[0].getData(new h.$i);return await e.close(),r}async function y(){let t=await fetch(d.$.assets("misc/knut-hamsun-hunger.bin.zip")),e=await t.arrayBuffer(),n=await m(new Uint8Array(e));return s.w.Data.decode(n)}async function*w(t){let e=new l.n({size:100}).initialize(t.renderer.domElement).start();yield(0,o.xy)("three",n=>{e.update(t.camera,t.aspect,n.deltaTime)});let n=await y();document.querySelector("#instance-count").textContent=n.metadata.textCount.toString();let r=new s.w({textCount:n.metadata.textCount,lineCount:n.metadata.lineCount,lineLength:n.metadata.lineLength,textSize:1.2});r.setData(n);let i=new a.Pq0;for(let t=0,e=n.metadata.textCount;t<e;t++)f.c.unitVector3(i),i.multiplyScalar(30+5*f.c.boxMuller()[0]),r.setMatrixAt(t,(0,c.w)({position:i})),r.setColorAt(t,(0,c._)(0xffffff*f.c.random()));(0,u.mj)(r,t.scene),(0,u.mj)(new a.eaF(new a.WBB,new a.V9B({wireframe:!0})),t.scene),yield()=>t.scene.clear()}function M(){return(0,i.yk)(w,[]),null}function g(){return(0,r.jsx)("div",{className:"layer thru",children:(0,r.jsxs)(i.uB,{children:[(0,r.jsxs)("div",{className:"layer thru p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Knut Hamsum - Hunger Demo"}),(0,r.jsxs)("p",{children:["63,862 words \xa0 (",(0,r.jsx)("span",{id:"instance-count",children:"X"}),"\xa0instances)"]})]}),(0,r.jsx)(M,{})]})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[5611,7190,6564,7223,9635,8921,4957,7775,16,7953,1577,4638,6726,2598,7373,8083,4266,4135,7840,1319,6852,7358],()=>e(37441)),_N_E=t.O()}]);