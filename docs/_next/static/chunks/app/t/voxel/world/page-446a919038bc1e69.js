(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3593],{14277:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(67203);function i(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},15931:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var r=n(49797),i=n(94065),s=n(7147);let o={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0,depthOffset:0};class l extends r.DXC{set(e){let{color:t,opacity:n,size:s,step:l,frame:a,plane:u,depthOffset:f}={...o,...e},d=(0,i.wX)(s),c=(0,i.wX)(null!=l?l:d),h=[],y=(e,t)=>h.push(new r.Pq0(e,t,0));a&&(y(-d.x/2,d.y/2),y(d.x/2,d.y/2),y(d.x/2,d.y/2),y(d.x/2,-d.y/2),y(d.x/2,-d.y/2),y(-d.x/2,-d.y/2),y(-d.x/2,-d.y/2),y(-d.x/2,d.y/2));let p=Math.ceil(-d.x/2/c.x)*c.x;p===-d.x/2&&(p+=c.x);do y(p,-d.y/2),y(p,d.y/2),p+=c.x;while(p<d.x/2);let m=Math.ceil(-d.y/2/c.y)*c.y;m===-d.y/2&&(m+=c.y);do y(-d.x/2,m),y(d.x/2,m),m+=c.y;while(m<d.y/2);switch(this.geometry.setFromPoints(h),u){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.uniforms.uDepthOffset.value=f,this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){let t=new r.mrM,n={uDepthOffset:{value:0}};t.onBeforeCompile=e=>s.bI.with(e).uniforms(n).vertex.mainAfterAll("\n        gl_Position.w += uDepthOffset;\n      "),super(void 0,t),this.uniforms=n,this.set(null!=e?e:o)}}},18653:(e,t,n)=>{"use strict";n.d(t,{Client:()=>C});var r=n(70691),i=n(84303),s=n(25432),o=n(63106),l=n(31763),a=n(88575),u=n(79911),f=n(36508),d=n(33855),c=n(28737),h=n(49797),y=n(68955),p=n(15931),m=n(16465),w=n(21277),x=n(72612),v=n(17099),k=n(48181);let g=new h.tBo;class b extends h.YJl{createAllChunkMeshes(e){for(let{superChunkIndex:t,chunkIndex:n,chunk:r}of e.enumerateChunks()){let i=v.c.pick(["#ffdd55","#55ddff","#dd55ff","#55ffdd","#ff55dd","#ddff55","#ff5555"]),s=(0,y.Cx)(r.voxelFaces()),o=new m.Y({color:i}),{x:l,y:a,z:f}=e.metrics.fromIndexes(t,n,0);(0,u.mj)(new h.eaF(s,o),{parent:this,x:l,y:a,z:f})}let t=e.computeVoxelBounds();(0,u.mj)(new k.R,this).box({box3:t,asIntBox3:!0}).box({box3:e.computeChunkBounds(),asIntBox3:!0,color:"#ff0000"}).draw();{let t=e.computeVoxelBounds(),n=(0,y.Cx)(e.chunkVoxelFaces(t)),r=new m.Y({color:"#ffffff"});(0,u.mj)(new h.eaF(n,r),{parent:this,x:0,y:0,z:-32})}}createOneUniqueMesh(e){}constructor(...e){super(...e),this.parts=(()=>{v.c.reset();let e=(0,u.mj)(new h.eaF(new h.UPV(10,3,32,6),new m.Y({wireframe:!0,side:h.$EB})),this);e.visible=!1,(0,u.mj)(new p.P({size:24}),{parent:this,rotationX:"90deg"});let t=(0,u.mj)(new w.N,this),n=new y.HK;(0,c.O)({world:n});let r=new DataView(new ArrayBuffer(n.voxelStateByteSize));r.setUint8(0,1);let i=new h.Pq0;for(let{x:t,y:s,z:o}of(0,x.loop3)(24,24,24))t-=12,s-=12,o-=12,i.set(t+.5,s+.5,o+.5),g.set(i,new h.Pq0(1,0,0)),g.intersectObject(e,!0).length%2==1&&n.setVoxelState(t,s,o,r);return this.createAllChunkMeshes(n),{sky:t}})()}}var j=n(42824),P=n.n(j);function M(){return(0,d.yk)(function*(e){(0,c.O)({three:e});let t=new l.n({size:50,perspective:1,rotation:["-20deg","-45deg",0]});yield t.start(e.renderer.domElement),f.Rv.get("three").set({minActiveDuration:60}),yield(0,f.xy)("three",n=>{let{aspect:r,camera:i}=e;t.update(i,r,n.deltaTime)}),yield(0,o.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new s.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.O0.PostProcessing})},[]),null}function B(){return(0,d.dB)("main",function*(e){(0,u.mj)(new b,e)},[]),null}function C(){return(0,r.jsx)("div",{children:(0,r.jsxs)(d.uB,{children:[(0,r.jsx)(M,{}),(0,r.jsx)(B,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(i.oz,{className:P().Markdown,children:"# World\n\nWorld handles chunks under the hood.\n"})})]})})}},21277:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(49797);let i=new r.WBB(1,4);class s extends r.eaF{constructor(e){super(i,new r.V9B({color:"#0c529d",...e,side:r.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(e,t,n)=>{let r=(n.near+n.far)/2;this.position.copy(n.position),this.scale.setScalar(r),this.updateMatrix(),this.updateMatrixWorld()}}}},28536:(e,t,n)=>{Promise.resolve().then(n.bind(n,18653))},28737:(e,t,n)=>{"use strict";n.d(t,{Leak:()=>d,O:()=>f});var r={};n.r(r),n.d(r,{distribute:()=>s.mn,every:()=>s.Si,findMaxBy:()=>s.vj,pairwise:()=>s.Ju,recordBy:()=>s.VY,some:()=>s.zN,split:()=>s.mn,uniqueBy:()=>s.pD});var i=n(30158),s=n(43107),o=n(38062),l=n(85795),a=n(17099),u=n(96122);function f(e){Object.assign(window,{...i,...l,...r,...e,PRNG:a.c,waveform:o.o,dedent:u.T})}function d(e){return f(e),null}},33855:(e,t,n)=>{"use strict";n.d(t,{dB:()=>h,q:()=>y,uB:()=>w,yk:()=>c});var r=n(70691),i=n(67203),s=n(49797),o=n(18479),l=n(31763),a=n(88575),u=n(36508),f=n(14277);let d=(0,i.createContext)(null);function c(e,t){let n=(0,i.useContext)(d);return(0,o.useEffects)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}function h(e,t,n){let r=(0,i.useMemo)(()=>new s.YJl,[]);return r.name=e,c(async function*(e,n){if(e.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},t){let i=t(r,e,n);if(i&&"function"==typeof i.next)do{let{value:e,done:t}=await i.next();if(t)break;yield e}while(n.mounted)}},n),r}function y(e){let{value:t}=e,n=(0,i.useMemo)(()=>"function"==typeof t?new t:t,[t]);return c(async function*(e){if(e.scene.add(n),"initialize"in n){let t=n.initialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{if(n.removeFromParent(),"destroy"in n){var e;null==(e=n.destroy)||e.call(n)}}},[n]),null}let p={className:"",assetsPath:"/",vertigoControls:!1};function m(e){let{children:t,className:n,assetsPath:s,vertigoControls:f}={...p,...e},c=(0,i.useMemo)(()=>new a.XW,[]);c.loader.setPath(s);let{ref:h}=(0,o.IZ)({debounce:!0},function*(e,t){yield c.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:c})},[]);(0,o.useEffects)(function*(){if(f){let e=new l.n("object"==typeof f?f:{}).initialize(h.current).start();yield e.destroy,yield(0,u.xy)("three",t=>{e.update(c.camera,c.aspect,t.deltaTime)})}},[f]);let y={position:"absolute",inset:0};return(0,r.jsx)("div",{ref:h,className:n,style:y,children:(0,r.jsxs)(d.Provider,{value:c,children:[(0,r.jsx)("div",{style:y}),(0,r.jsx)("div",{style:y,className:"thru",children:c.initialized&&t})]})})}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,f.D)()&&(0,r.jsx)(m,{...t[0]})}},38062:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});let r={triangle:function(e){let{frequency:t=1,phase:n=0,f:r=t,p:i=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e*r+i,o=2*s-Math.floor(2*s);return s-Math.floor(s)<.5?o:1-o}}},42824:e=>{e.exports={Markdown:"md_Markdown__RP0EZ"}},43107:(e,t,n)=>{"use strict";function r(e,t){for(let n of e)if(t(n))return!0;return!1}function i(e,t){for(let n of e)if(!t(n))return!1;return!0}function s(e,t,n){let r=[];function i(e){let t=[];return r[e]=t,t}if(void 0!==n)for(let e=0;e<n;e++)i(e);for(let n of e){var s;let e=t(n);(null!=(s=r[e])?s:i(e)).push(n)}return r}function*o(e){let t;for(let n of e)void 0!==t&&(yield[t,n]),t=n}function l(e,t){let n,r=-1/0;for(let i of e){let e=t(i);e>r&&(r=e,n=i)}return n}function a(e){let t=new Set;return n=>{let r=e(n);return!t.has(r)&&(t.add(r),!0)}}function u(e){return(t,n)=>{if(null!==t&&"object"!=typeof t)throw Error("Accumulator must be an object");let r=null===t?{}:t,i=e(n);return r[i]||(r[i]=[]),r[i].push(n),r}}n.d(t,{Ju:()=>o,Si:()=>i,VY:()=>u,mn:()=>s,pD:()=>a,vj:()=>l,zN:()=>r})},63106:(e,t,n)=>{"use strict";function r(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{a:()=>l});let i={preventDefault:!1,strictTarget:void 0},s={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:"",phase:"down"},o=0;function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let l=o++,[a,u,f]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:d}={...i,...u},c=null,h=e=>{var t;if((null!=(t=u.strictTarget)?!!t:a===document.body)&&e.target!==a)return;"keydown"===e.type&&(c=e);let{ctrlKey:n=!1,altKey:i=!1,shiftKey:o=!1,metaKey:h=!1}=null!=c?c:{},y={id:l,event:e,downEvent:c,modifiers:{ctrl:n,alt:i,shift:o,meta:h}};for(let t=0,l=f.length;t<l;t++){let[l,a]=f[t],{key:u,keyCaseInsensitive:p,code:m,noModifiers:w,modifiers:x,phase:v="down"}=function(e){let t="string"==typeof e?{...s,key:e}:{...s,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(l);switch(e.type){case"keydown":if("down"!==v)continue;break;case"keyup":if("up"!==v)continue}Object.values({key:r(p?e.key.toLowerCase():e.key,u),code:r(e.code,m),noModifiers:!w||!1===n&&!1===i&&!1===o&&!1===h,modifiers:function(e,t){let{ctrlKey:n,altKey:r,shiftKey:i,metaKey:s}=e;if("function"==typeof t)return t({ctrl:n,alt:r,shift:i,meta:s});let{ctrl:o=!1,alt:l=!1,shift:a=!1,meta:u=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return o===n&&l===r&&a===i&&u===s}(c,x)}).every(Boolean)&&(d&&e.preventDefault(),a(y))}};return a.addEventListener("keydown",h,{passive:!1}),a.addEventListener("keyup",h,{passive:!1}),{destroy:()=>{a.removeEventListener("keydown",h),a.removeEventListener("keyup",h)}}}},88575:(e,t,n)=>{"use strict";n.d(t,{O0:()=>r.O0,XW:()=>r.XW});var r=n(82143)},96122:(e,t,n)=>{"use strict";function r(e){let t=e.split("\n"),n=0;for(let e of t){let t=e.match(/^(\s*)\S/);if(t){n=t[1].length;break}}return t.map(e=>e.slice(Math.min(e.length,n))).join("\n")}n.d(t,{T:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[3947,5611,7190,6564,7962,9635,8921,7953,4512,7775,7436,5438,7833,4303,146,487,3445,9332,3414,9717,1763,2143,8181,5033,1319,6852,7358],()=>t(28536)),_N_E=e.O()}]);