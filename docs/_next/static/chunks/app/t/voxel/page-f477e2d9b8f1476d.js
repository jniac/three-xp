(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7686],{12219:function(e,t,n){Promise.resolve().then(n.t.bind(n,34709,23)),Promise.resolve().then(n.bind(n,3119)),Promise.resolve().then(n.bind(n,81289))},3119:function(e,t,n){"use strict";n.d(t,{Client:function(){return j}});var r=n(32617),i=n(83119),s=n(87062),o=n(47365),l=n(62274),a=n(9258),c=n(78780),u=n(29368),d=n(5693),f=n(92948),h=n(88780),p=n(80536),y=n(30636),w=n(12042),x=n(67896),m=n(28104);function v(e,t,n,r,i){let s=r-e,o=i-t,l=Math.sqrt(s*s+o*o);return[e+s/l*n,t+o/l*n]}class g extends h.Group{constructor(...e){super(...e),this.parts=(()=>{(0,c.cY)(new h.Mesh(new h.TorusKnotGeometry(10,.4,512,64),new w.P),this),(0,c.cY)(new y.K,{parent:this,rotationX:"90deg"});let e=(0,c.cY)(new x.w,this),t=new h.Vector3,n=new h.Vector3;{let e=new p.z(16);for(let{x:r,y:i,z:s}of(0,m.loop3)(16,16,16)){t.set(r,i,s);let[o,l]=v(8,8,16/3,r,s);n.set(o,16/6,l);let a=t.distanceTo(n)<16/6;e.getVoxelState(r,i,s).setUint8(0,a?1:0)}(0,c.cY)(new h.Mesh((0,p.eO)(e.voxelFaces()),new w.P({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new p.z(16);for(let{x:r,y:i,z:s}of(0,m.loop3)(16,16,16)){t.set(r,i,s);let[o,l]=v(8,8,8,r,s);n.set(o,4,l);let a=4>t.distanceTo(n);e.getVoxelState(r,i,s).setUint8(0,a?1:0)}(0,c.cY)(new h.Mesh((0,p.eO)(e.voxelFaces()),new w.P({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new p.z(16);for(let{x:n,y:r,z:i}of(0,m.loop3)(16,16,16)){let s=15>t.set(n,r,i).length();e.getVoxelState(n,r,i).setUint8(0,s?1:0)}(0,c.cY)(new h.Mesh((0,p.eO)(e.voxelFaces()),new w.P({color:"#55ff96"})),{parent:this,x:-32})}{let e=new p.z(new h.Vector3(12,24,4),1);for(let{x:t,y:n,z:r}of(0,m.loop3)(e.size)){let i=.5>Math.random();e.getVoxelState(t,n,r).setUint8(0,i?1:0)}(0,c.cY)(new h.Mesh((0,p.eO)(e.voxelFaces()),new w.P({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}return{sky:e}})()}}var P=n(96915),k=n.n(P);function M(){return(0,d.Ky)(function*(e){(0,f.a)({three:e});let t=new l.F({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),u.vB.get("three").set({minActiveDuration:60}),yield(0,u.RC)("three",n=>{let{aspect:r,camera:i}=e;t.update(i,r,n.deltaTime)}),yield(0,o.p)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new s.n(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.GR.PostProcessing})},[]),null}function b(){return(0,d._v)("main",function*(e){(0,c.cY)(new g,e)},[]),null}function j(){return(0,r.jsx)("div",{children:(0,r.jsxs)(d.H7,{children:[(0,r.jsx)(M,{}),(0,r.jsx)(b,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(i.U,{className:k().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},81289:function(e,t,n){"use strict";n.d(t,{Client:function(){return z}});var r=n(32617),i=n(83119),s=n(87062),o=n(47365),l=n(62274),a=n(9258),c=n(78780),u=n(29368),d=n(5693),f=n(92948),h=n(88780),p=n(80536),y=n(30636),w=n(12042),x=n(67896),m=n(28104),v=n(6246);let g=new h.Raycaster;class P extends h.Group{constructor(...e){super(...e),this.parts=(()=>{v.T.reset();let e=(0,c.cY)(new h.Mesh(new h.TorusKnotGeometry(10,3,32,6),new w.P({wireframe:!0,side:h.DoubleSide})),this);e.visible=!1,(0,c.cY)(new y.K({size:24}),{parent:this,rotationX:"90deg"});let t=(0,c.cY)(new x.w,this),n=new p.q3;(0,f.a)({world:n});let r=new DataView(new ArrayBuffer(n.voxelStateByteSize));r.setUint8(0,1);let i=new h.Vector3;for(let{x:t,y:s,z:o}of(0,m.loop3)(24,24,24))t-=12,s-=12,o-=12,i.set(t+.5,s+.5,o+.5),g.set(i,new h.Vector3(1,0,0)),g.intersectObject(e,!0).length%2==1&&n.setVoxelState(t,s,o,r);for(let{x:e,y:t,z:r}of(0,m.loop3)(2,2,2)){e-=1,t-=1,r-=1;let i=n.tryGetChunk(e,t,r);if(i){let n=v.T.pick(["#ffdd55","#55ddff","#dd55ff","#55ffdd","#ff55dd","#ddff55","#ff5555"]);(0,c.cY)(new h.Mesh((0,p.eO)(i.voxelFaces()),new w.P({color:n})),{parent:this,x:16*e,y:16*t,z:16*r})}}return{sky:t}})()}}var k=n(96915),M=n.n(k);function b(){return(0,d.Ky)(function*(e){(0,f.a)({three:e});let t=new l.F({size:10,perspective:1});yield t.start(e.renderer.domElement),u.vB.get("three").set({minActiveDuration:60}),yield(0,u.RC)("three",n=>{let{aspect:r,camera:i}=e;t.update(i,r,n.deltaTime)}),yield(0,o.p)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new s.n(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.GR.PostProcessing})},[]),null}function j(){return(0,d._v)("main",function*(e){(0,c.cY)(new P,e)},[]),null}function z(){return(0,r.jsx)("div",{children:(0,r.jsxs)(d.H7,{children:[(0,r.jsx)(b,{}),(0,r.jsx)(j,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(i.U,{className:M().Markdown,children:"# World\n\nWorld handles chunks under the hood.\n"})})]})})}},62411:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r="/three-xp/assets/",i={development:!1,assetsPath:r,assets:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(r).concat(e)}}},5693:function(e,t,n){"use strict";n.d(t,{H7:function(){return p},Ky:function(){return d},_v:function(){return f}});var r=n(32617),i=n(87200),s=n(88780),o=n(23657),l=n(9258),a=n(62411),c=n(74707);let u=(0,i.createContext)(null);function d(e,t){let n=(0,i.useContext)(u);return(0,o.sv)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}function f(e,t,n){let r=(0,i.useMemo)(()=>new s.Group,[]);return r.name=e,d(async function*(e,n){if(e.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},t){let i=t(r,e,n);if(i&&"function"==typeof i.next)do{let{value:e,done:t}=await i.next();if(t)break;yield e}while(n.mounted)}},n),r}function h(e){let{children:t,className:n}=e,c=(0,i.useMemo)(()=>new l.Vu,[]),{ref:d}=(0,o.sv)(function*(e){c.loader.setPath(a.v.assetsPath),yield c.initialize(e),Object.assign(window,{three:c,THREE:s})},[]);return(0,r.jsx)("div",{ref:d,className:"ThreeProvider absolute-through ".concat(null!=n?n:""),children:(0,r.jsx)(u.Provider,{value:c,children:t})})}function p(e){return(0,c.O)()&&(0,r.jsx)(h,{...e})}},74707:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(87200);function i(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},47365:function(e,t,n){"use strict";function r(e,t){return"*"===t||("string"==typeof t?t===e:t instanceof RegExp?t.test(e):"function"==typeof t&&t(e))}n.d(t,{p:function(){return o}});let i={preventDefault:!1,strictTarget:void 0},s={key:"*",keyCaseInsensitive:!0,code:"*",noModifiers:!1,modifiers:""};function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[o,l,a]=1===t.length?[document.body,{},t[0]]:2===t.length?[t[0],{},t[1]]:t,{preventDefault:c}={...i,...l},u=e=>{var t;if((null!==(t=l.strictTarget)&&void 0!==t?!!t:o===document.body)&&e.target!==o)return;let{ctrlKey:n,altKey:i,shiftKey:u,metaKey:d}=e,f={event:e,modifiers:{ctrl:n,alt:i,shift:u,meta:d}};for(let t=0,o=a.length;t<o;t++){let[o,l]=a[t],{key:h,keyCaseInsensitive:p,code:y,noModifiers:w,modifiers:x}=function(e){let t="string"==typeof e?{...s,key:e}:{...s,...e};return t.keyCaseInsensitive&&"string"==typeof t.key&&(t.key=t.key.toLowerCase()),t}(o);Object.values({key:r(p?e.key.toLowerCase():e.key,h),code:r(e.code,y),noModifiers:!w||!1===n&&!1===i&&!1===u&&!1===d,modifiers:function(e,t){let{ctrlKey:n,altKey:r,shiftKey:i,metaKey:s}=e;if("function"==typeof t)return t({ctrl:n,alt:r,shift:i,meta:s});let{ctrl:o=!1,alt:l=!1,shift:a=!1,meta:c=!1}=Object.fromEntries(t.split("-").map(e=>[e,!0]));return o===n&&l===r&&a===i&&c===s}(e,x)}).every(Boolean)&&(c&&e.preventDefault(),l(f))}};return o.addEventListener("keydown",u,{passive:!1}),{destroy:()=>{o.removeEventListener("keydown",u)}}}},30636:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(88780),i=n(32219);let s={color:"white",opacity:.5,size:[8,8],step:1,frame:!0};class o extends r.LineSegments{set(e){let{color:t,opacity:n,size:o,step:l,frame:a}={...s,...e},c=(0,i.iK)(o),u=(0,i.iK)(null!=l?l:c),d=[],f=(e,t)=>d.push(new r.Vector3(e,t,0));a&&(f(-c.x/2,+c.y/2),f(+c.x/2,+c.y/2),f(+c.x/2,+c.y/2),f(+c.x/2,-c.y/2),f(+c.x/2,-c.y/2),f(-c.x/2,-c.y/2),f(-c.x/2,-c.y/2),f(-c.x/2,+c.y/2));let h=Math.ceil(-c.x/2/u.x)*u.x;h===-c.x/2&&(h+=u.x);do f(h,-c.y/2),f(h,+c.y/2),h+=u.x;while(h<c.x/2);let p=Math.ceil(-c.y/2/u.y)*u.y;p===-c.y/2&&(p+=u.y);do f(-c.x/2,p),f(+c.x/2,p),p+=u.y;while(p<c.y/2);return this.geometry.setFromPoints(d),this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:s)}}},96915:function(e){e.exports={Markdown:"md_Markdown__RP0EZ"}}},function(e){e.O(0,[9918,7512,1561,7834,6158,3956,1067,3310,4709,5229,7619,812,2038,3420,1540,9258,4157,3977,2835,5694,2840,1744],function(){return e(e.s=12219)}),_N_E=e.O()}]);