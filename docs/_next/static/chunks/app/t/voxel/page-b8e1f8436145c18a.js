(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6374],{6697:(e,t,n)=>{"use strict";n.d(t,{O0:()=>r.O0,XW:()=>r.XW});var r=n(17112)},13982:(e,t,n)=>{"use strict";n.d(t,{Client:()=>B});var r=n(70691),s=n(84303),i=n(25432),o=n(95736),l=n(16219),a=n(6697),c=n(87381),u=n(36508),d=n(33855),f=n(28737),h=n(49797),x=n(7717),m=n(25809),p=n(56647),w=n(9723),y=n(82091),v=n(72612),j=n(17099);function P(e,t,n,r,s){let i=r-e,o=s-t,l=Math.sqrt(i*i+o*o);return[e+i/l*n,t+o/l*n]}class g extends h.YJl{constructor(...e){super(...e),this.parts=(()=>{(0,c.mj)(new h.eaF(new h.UPV(10,.4,512,64),new w.Y),this),(0,c.mj)(new m.P,{parent:this,rotationX:"90deg"});let e=(0,c.mj)(new y.N,this),t=new h.Pq0,n=new h.Pq0;{let e=new x.AA(16);for(let{x:r,y:s,z:i}of(0,v.loop3)(16,16,16)){t.set(r,s,i);let[o,l]=P(8,8,16/3,r,i);n.set(o,16/6,l);let a=t.distanceTo(n)<16/6;e.getVoxelState(r,s,i).setUint8(0,+!!a)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#ffdd55"})),{parent:this,x:-16,z:-16})}{let e=new x.AA(16);for(let{x:r,y:s,z:i}of(0,v.loop3)(16,16,16)){t.set(r,s,i);let[o,l]=P(8,8,8,r,i);n.set(o,4,l);let a=4>t.distanceTo(n);e.getVoxelState(r,s,i).setUint8(0,+!!a)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#ff5566"})),{parent:this,x:0,z:-16})}{let e=new x.AA(16);for(let{x:n,y:r,z:s}of(0,v.loop3)(16,16,16)){let i=15>t.set(n,r,s).length();e.getVoxelState(n,r,s).setUint8(0,+!!i)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#55ff96"})),{parent:this,x:-32})}{let e=new x.AA(new h.Pq0(12,24,4),1);for(let{x:t,y:n,z:r}of(0,v.loop3)(e.size)){let s=.5>Math.random();e.getVoxelState(t,n,r).setUint8(0,+!!s)}(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#cfedff"})),{parent:this,position:[16,0,-12]})}{let e=new x.AA(16);for(let{x:t,y:n,z:r}of(0,v.loop3)(16,16,16)){let s=(0===t||0===n||0===r||15===t||15===n||15===r)&&j.c.chance(.66);e.getVoxelState(t,n,r).setUint8(0,+!!s)}console.log(e.computeBounds()),(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#9900ff"})),{parent:this,x:-16,z:-32})}{let e=new x.AA(16),t=new h.Pq0;for(let{x:n,y:r,z:s}of(0,v.loop3)(16,16,16)){t.set(n-8,r-8,s-8);let i=t.lengthSq()-16;j.c.chance(1-.05*i)&&e.getVoxelState(n,r,s).setUint8(0,1)}let n=(0,c.mj)(new h.eaF((0,x.Cx)(e.voxelFaces()),new w.Y({color:"#00ddff"})),{parent:this,x:-16,z:0});(0,c.mj)(new p.R,{parent:n}).box({box3:e.computeBounds(),asIntBox3:!0}).draw()}return{sky:e}})()}}var b=n(42824),k=n.n(b);function C(){return(0,d.yk)(function*(e){(0,f.O)({three:e});let t=new l.n({size:60,perspective:1,focus:[0,5,0],rotation:["-20deg","30deg",0]});yield t.start(e.renderer.domElement),u.Rv.get("three").set({minActiveDuration:60}),yield(0,u.xy)("three",n=>{let{aspect:r,camera:s}=e;t.update(s,r,n.deltaTime)}),yield(0,o.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new i.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.O0.PostProcessing})},[]),null}function F(){return(0,d.dB)("main",function*(e){(0,c.mj)(new g,e)},[]),null}function B(){return(0,r.jsx)("div",{children:(0,r.jsxs)(d.uB,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(F,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(s.oz,{className:k().Markdown,children:"# Chunk demo\n\nPure chunk demo (no world).\n\n- Chunks are sized, when trying to access a voxel out of the chunk's bounds, an\n  error is thrown.\n- Chunk are not necessarily cubes, they can have different sizes in each dimension.\n"})})]})})}},14277:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var r=n(67203);function s(){let[e,t]=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{t(!0)},[]),e}},18653:(e,t,n)=>{"use strict";n.d(t,{Client:()=>B});var r=n(70691),s=n(84303),i=n(25432),o=n(95736),l=n(16219),a=n(6697),c=n(87381),u=n(36508),d=n(33855),f=n(28737),h=n(49797),x=n(7717),m=n(25809),p=n(9723),w=n(82091),y=n(72612),v=n(17099),j=n(56647);let P=new h.tBo;class g extends h.YJl{createAllChunkMeshes(e){for(let{superChunkIndex:t,chunkIndex:n,chunk:r}of e.enumerateChunks()){let s=v.c.pick(["#ffdd55","#55ddff","#dd55ff","#55ffdd","#ff55dd","#ddff55","#ff5555"]),i=(0,x.Cx)(r.voxelFaces()),o=new p.Y({color:s}),{x:l,y:a,z:u}=e.metrics.fromIndexes(t,n,0);(0,c.mj)(new h.eaF(i,o),{parent:this,x:l,y:a,z:u})}let t=e.computeVoxelBounds();(0,c.mj)(new j.R,this).box({box3:t,asIntBox3:!0}).box({box3:e.computeChunkBounds(),asIntBox3:!0,color:"#ff0000"}).draw();{let t=e.computeVoxelBounds(),n=(0,x.Cx)(e.chunkVoxelFaces(t)),r=new p.Y({color:"#ffffff"});(0,c.mj)(new h.eaF(n,r),{parent:this,x:0,y:0,z:-32})}}createOneUniqueMesh(e){}constructor(...e){super(...e),this.parts=(()=>{v.c.reset();let e=(0,c.mj)(new h.eaF(new h.UPV(10,3,32,6),new p.Y({wireframe:!0,side:h.$EB})),this);e.visible=!1,(0,c.mj)(new m.P({size:24}),{parent:this,rotationX:"90deg"});let t=(0,c.mj)(new w.N,this),n=new x.HK;(0,f.O)({world:n});let r=new DataView(new ArrayBuffer(n.voxelStateByteSize));r.setUint8(0,1);let s=new h.Pq0;for(let{x:t,y:i,z:o}of(0,y.loop3)(24,24,24))t-=12,i-=12,o-=12,s.set(t+.5,i+.5,o+.5),P.set(s,new h.Pq0(1,0,0)),P.intersectObject(e,!0).length%2==1&&n.setVoxelState(t,i,o,r);return this.createAllChunkMeshes(n),{sky:t}})()}}var b=n(42824),k=n.n(b);function C(){return(0,d.yk)(function*(e){(0,f.O)({three:e});let t=new l.n({size:50,perspective:1,rotation:["-20deg","-45deg",0]});yield t.start(e.renderer.domElement),u.Rv.get("three").set({minActiveDuration:60}),yield(0,u.xy)("three",n=>{let{aspect:r,camera:s}=e;t.update(s,r,n.deltaTime)}),yield(0,o.a)([[{code:"Space",modifiers:"shift"},()=>{document.body.requestFullscreen()}]]);let n=new i.F(e.scene,e.camera);n.updatePdMaterial({lumaPhi:10,depthPhi:2,normalPhi:3,radius:100,radiusExponent:2,rings:2,samples:16}),e.pipeline.addPass(n,{type:a.O0.PostProcessing})},[]),null}function F(){return(0,d.dB)("main",function*(e){(0,c.mj)(new g,e)},[]),null}function B(){return(0,r.jsx)("div",{children:(0,r.jsxs)(d.uB,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(F,{}),(0,r.jsx)("div",{className:"layer thru flex flex-col p-4 gap-2",children:(0,r.jsx)(s.oz,{className:k().Markdown,children:"# World\n\nWorld handles chunks under the hood.\n"})})]})})}},25809:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(49797),s=n(92381);let i={color:"white",opacity:.5,plane:"XY",size:[8,8],step:1,frame:!0};class o extends r.DXC{set(e){let{color:t,opacity:n,size:o,step:l,frame:a,plane:c}={...i,...e},u=(0,s.wX)(o),d=(0,s.wX)(null!=l?l:u),f=[],h=(e,t)=>f.push(new r.Pq0(e,t,0));a&&(h(-u.x/2,u.y/2),h(u.x/2,u.y/2),h(u.x/2,u.y/2),h(u.x/2,-u.y/2),h(u.x/2,-u.y/2),h(-u.x/2,-u.y/2),h(-u.x/2,-u.y/2),h(-u.x/2,u.y/2));let x=Math.ceil(-u.x/2/d.x)*d.x;x===-u.x/2&&(x+=d.x);do h(x,-u.y/2),h(x,u.y/2),x+=d.x;while(x<u.x/2);let m=Math.ceil(-u.y/2/d.y)*d.y;m===-u.y/2&&(m+=d.y);do h(-u.x/2,m),h(u.x/2,m),m+=d.y;while(m<u.y/2);switch(this.geometry.setFromPoints(f),c){case"XZ":this.geometry.rotateX(Math.PI/2);break;case"YZ":this.geometry.rotateY(Math.PI/2)}return this.material.color.set(t),this.material.opacity=n,this.material.transparent=n<1,this}constructor(e){super(),this.set(null!=e?e:i)}}},28737:(e,t,n)=>{"use strict";n.d(t,{Leak:()=>c,O:()=>a});var r={};n.r(r),n.d(r,{distribute:()=>i.mn,every:()=>i.Si,findMaxBy:()=>i.vj,pairwise:()=>i.Ju,recordBy:()=>i.VY,some:()=>i.zN,split:()=>i.mn,uniqueBy:()=>i.pD});var s=n(30158),i=n(43107),o=n(85795),l=n(17099);function a(e){Object.assign(window,{...s,...o,...r,...e,PRNG:l.c})}function c(e){return a(e),null}},33855:(e,t,n)=>{"use strict";n.d(t,{dB:()=>h,q:()=>x,uB:()=>w,yk:()=>f});var r=n(70691),s=n(67203),i=n(49797),o=n(7587),l=n(16219),a=n(6697),c=n(36508),u=n(14277);let d=(0,s.createContext)(null);function f(e,t){let n=(0,s.useContext)(d);return(0,o.C7)(async function*(t,r){if(e){let t=e(n,r);if(t&&"function"==typeof t.next)do{let{value:e,done:n}=await t.next();if(n)break;yield e}while(r.mounted)}},null!=t?t:"always"),n}function h(e,t,n){let r=(0,s.useMemo)(()=>new i.YJl,[]);return r.name=e,f(async function*(e,n){if(e.scene.add(r),yield()=>{r.clear(),r.removeFromParent()},t){let s=t(r,e,n);if(s&&"function"==typeof s.next)do{let{value:e,done:t}=await s.next();if(t)break;yield e}while(n.mounted)}},n),r}function x(e){let{value:t}=e,n=(0,s.useMemo)(()=>"function"==typeof t?new t:t,[t]);return f(async function*(e){if(e.scene.add(n),"initialize"in n){let t=n.initialize(e);if(t&&"function"==typeof t.next)for(;;){let{value:e,done:n}=await t.next();if(n)break;yield e}}yield()=>{if(n.removeFromParent(),"destroy"in n){var e;null==(e=n.destroy)||e.call(n)}}},[n]),null}let m={className:"",assetsPath:"/",vertigoControls:!1};function p(e){let{children:t,className:n,assetsPath:i,vertigoControls:u}={...m,...e},f=(0,s.useMemo)(()=>new a.XW,[]);f.loader.setPath(i);let{ref:h}=(0,o.IZ)({debounce:!0},function*(e,t){yield f.initialize(e.firstElementChild),t.triggerRender(),Object.assign(window,{three:f})},[]);(0,o.C7)(function*(){if(u){let e=new l.n("object"==typeof u?u:{}).initialize(h.current).start();yield e.destroy,yield(0,c.xy)("three",t=>{e.update(f.camera,f.aspect,t.deltaTime)})}},[u]);let x={position:"absolute",inset:0};return(0,r.jsx)("div",{ref:h,className:n,style:x,children:(0,r.jsxs)(d.Provider,{value:f,children:[(0,r.jsx)("div",{style:x}),(0,r.jsx)("div",{style:x,className:"thru",children:f.initialized&&t})]})})}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,u.D)()&&(0,r.jsx)(p,{...t[0]})}},42824:e=>{e.exports={Markdown:"md_Markdown__RP0EZ"}},43107:(e,t,n)=>{"use strict";function r(e,t){for(let n of e)if(t(n))return!0;return!1}function s(e,t){for(let n of e)if(!t(n))return!1;return!0}function i(e,t,n){let r=[];function s(e){let t=[];return r[e]=t,t}if(void 0!==n)for(let e=0;e<n;e++)s(e);for(let n of e){var i;let e=t(n);(null!=(i=r[e])?i:s(e)).push(n)}return r}function*o(e){let t;for(let n of e)void 0!==t&&(yield[t,n]),t=n}function l(e,t){let n,r=-1/0;for(let s of e){let e=t(s);e>r&&(r=e,n=s)}return n}function a(e){let t=new Set;return n=>{let r=e(n);return!t.has(r)&&(t.add(r),!0)}}function c(e){return(t,n)=>{if(null!==t&&"object"!=typeof t)throw Error("Accumulator must be an object");let r=null===t?{}:t,s=e(n);return r[s]||(r[s]=[]),r[s].push(n),r}}n.d(t,{Ju:()=>o,Si:()=>s,VY:()=>c,mn:()=>i,pD:()=>a,vj:()=>l,zN:()=>r})},53579:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,89294,23)),Promise.resolve().then(n.bind(n,13982)),Promise.resolve().then(n.bind(n,18653))},82091:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(49797);let s=new r.WBB(1,4);class i extends r.eaF{constructor(e){super(s,new r.V9B({color:"#0c529d",...e,side:r.hsX,depthWrite:!1,depthTest:!1})),this.renderOrder=-1,this.frustumCulled=!1,this.matrixAutoUpdate=!1,this.onBeforeRender=(e,t,n)=>{let r=(n.near+n.far)/2;this.position.copy(n.position),this.scale.setScalar(r),this.updateMatrix(),this.updateMatrixWorld()}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[3947,5611,7190,6564,7962,9635,8921,7953,4512,7775,7436,9294,5438,7833,4303,4638,6726,3231,9303,7456,6219,7112,6647,5117,1319,6852,7358],()=>t(53579)),_N_E=e.O()}]);